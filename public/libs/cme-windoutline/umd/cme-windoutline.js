(function(p,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],h):(p=typeof globalThis<"u"?globalThis:p||self,h(p.WindOutline={},p.Vue))})(this,function(p,h){"use strict";const Y=(D,F)=>{const z=D.__vccOpts||D;for(const[w,u]of F)z[w]=u;return z},J={id:"myEchart",class:"echart-comp"},C=Y({__name:"index",props:{isShow:{default:!1},stationinfo:{type:Object}},setup(D,{expose:F}){let z=window.echarts,w="";const u=h.ref(),N=D,E=h.ref([]),G=N.stationinfo;let q=h.ref("myEchart"),P,H=!0,B;const V={outOfRange:{symbolSize:0,color:"#dddddd"},dimension:2,itemHeight:20,hoverLink:!1,itemWidth:12,itemGap:1,align:"left",top:"68",right:"0",textStyle:{fontSize:10},pieces:[{gte:0,lt:2,color:"rgb(0,236,236)",label:"0-2",show:!0},{gte:2,lt:4,color:"rgb(0,149,249)",label:"2-4",show:!0},{gte:4,lt:6,color:"rgb(4,82,175)",label:"4-6",show:!0},{gte:6,lt:8,color:"rgb(0,216,0)",label:"6-8",show:!0},{gte:8,lt:10,color:"rgb(42,135,4)",label:"8-10",show:!0},{gte:10,lt:12,color:"rgb(255,255,0)",label:"10-12",show:!0},{gte:12,lt:16,color:"rgb(255,171,0)",label:"12-16",show:!0},{gte:16,lt:20,color:"rgb(249,113,177)",label:"16-20",show:!0},{gte:20,lt:24,color:"rgb(253,0,0)",label:"20-24",show:!0},{gte:24,lt:28,color:"rgb(179,2,24)",label:"24-28",show:!0},{gte:28,lt:32,color:"rgb(112,2,20)",label:"28-32",show:!0},{gte:32,lt:36,color:"rgb(232,2,247)",label:"32-36",show:!0},{gte:36,lt:9999,color:"rgb(173,144,240)",label:"36-9999",show:!0}]};let l={title:[{text:"",subtext:"",left:"center",top:"5",textStyle:{fontWeight:"bold",fontSize:"14"}},{text:"",left:"25%",top:"60",textStyle:{fontWeight:"bold",fontSize:"12"}},{text:"",left:"70%",top:"60",textStyle:{fontWeight:"bold",fontSize:"12"}},{text:" 风速(m/s)",right:"10",top:"40",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"",right:"40",top:"62%",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"11-11 11:11",left:"15",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"22-22 22:22",left:"40%",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"33-33 33:33",left:"48%",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"44-44 44:44",right:"50",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}}],toolbox:{right:15,feature:{dataZoom:{},saveAsImage:{show:!0},myChange:{show:!0,title:"反转",icon:"path://M4 10h20v6l8-8-8-8v6h-24v12h4zM28 22h-20v-6l-8 8 8 8v-6h24v-12h-4z",onclick:function(){l.xAxis[0].inverse==!0?(l.xAxis[0].inverse=!1,l.xAxis[1].inverse=!1):(l.xAxis[0].inverse=!0,l.xAxis[1].inverse=!0),O(B)}}}},grid:[{top:"100",left:"20",width:"45%",bottom:"40",containLabel:!0},{top:"100",left:"46%",right:"110",bottom:"40",containLabel:!0}],tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(t){var e=t.value[3];e<=11.25&&e>=348.76?e="北风":e>=11.26&&e<=33.75?e="偏北风":e>=33.76&&e<=56.25?e="东北风":e>=56.26&&e<=78.75?e="偏东风":e>=78.76&&e<=101.25?e="东风":e>=101.26&&e<=123.75?e="偏东风":e>=123.76&&e<=146.25?e="东南风":e>=146.26&&e<=168.75?e="偏南风":e>=168.76&&e<=191.25?e="南风":e>=191.26&&e<=213.75?e="偏南风":e>=213.76&&e<=236.25?e="西南风":e>=236.26&&e<=258.75?e="偏西风":e>=258.76&&e<=281.25?e="西风":e>=281.26&&e<=303.75?e="偏西风":e>=303.76&&e<=326.25?e="西北风":e>=326.26&&e<=348.75&&(e="偏北风"),parseInt(Number(t.value[2])/2);var i="";return t.value[4]!=null&&(i="可信度："+t.value[4]),'<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">日期：'+new Date(t.value[0]).toLocaleDateString()+'<br></div><span style="clear: both;float: left;">时间：'+new Date(new Date(t.value[0]).getTime()+8*60*60*1e3).toLocaleTimeString()+"<br>高度："+Number(t.value[1]).toFixed(1)+"米<br>风向："+e+"("+Number(t.value[3]).toFixed(0)+")<br>风速："+Number(t.value[2]).toFixed(2)+"m/s<br>"+i+"</span>"}},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"empty"},{type:"inside",yAxisIndex:0,filterMode:"empty"},{type:"inside",xAxisIndex:0,filterMode:"empty"},{type:"inside",yAxisIndex:0,filterMode:"empty"},{type:"inside",xAxisIndex:1,filterMode:"empty"},{type:"inside",yAxisIndex:1,filterMode:"empty"},{type:"inside",xAxisIndex:1,filterMode:"empty"},{type:"inside",yAxisIndex:1,filterMode:"empty"}],xAxis:[{name:"",gridIndex:0,type:"time",splitNumber:7,inverse:H,axisLabel:{formatter:function(t){var e=new Date(t);const i=e.getHours()<10?"0"+e.getHours():e.getHours(),d=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();return i+":"+d}},splitLine:{show:!1}},{name:"",gridIndex:1,type:"time",splitNumber:7,inverse:H,axisLabel:{formatter:function(t){var e=new Date(t);const i=e.getHours()<10?"0"+e.getHours():e.getHours(),d=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();return i+":"+d}},splitLine:{show:!1}}],yAxis:[{axisLabel:{formatter:function(t,e){if((""+t).length==1)return"　　　　"+t;if((""+t).length==2)return"　　　"+t;if((""+t).length==3)return"　　"+t;if((""+t).length==4)return"　"+t;if((""+t).length==5)return t}},offset:20,name:"高度(m)　　　",gridIndex:0,nameGap:10,type:"value",splitNumber:10,splitLine:{show:!1}},{show:!0,axisLabel:{formatter:function(t,e){if((""+t).length==1)return"　　　　"+t;if((""+t).length==2)return"　　　"+t;if((""+t).length==3)return"　　"+t;if((""+t).length==4)return"　"+t;if((""+t).length==5)return t}},offset:20,name:"高度(m)　　　",gridIndex:1,splitNumber:10,nameGap:10,type:"value",splitLine:{show:!1}}],graphic:[{type:"group",bounding:"all",left:"56",bottom:59,z:0,children:[{type:"rect",z:100,shape:{width:30,height:1},style:{fill:"#333"}}]},{type:"group",bounding:"all",left:"49.5%",bottom:59,z:200,children:[{type:"rect",z:0,shape:{width:29,height:1},style:{fill:"#333"}}]}],visualMap:V,series:[{name:"质控前",hoverAnimation:!1,animation:!1,type:"scatter",xAxisIndex:0,yAxisIndex:0,data:[]},{name:"可信度",hoverAnimation:!1,animation:!1,seriverIndex:1,type:"scatter",xAxisIndex:1,yAxisIndex:1,data:[]}]};const j=(t,e,i)=>{t=""+t;var d=t.substr(0,4),c=t.substr(4,2),b=t.substr(6,2),S=t.substr(8,2),a=t.substr(10,2),v=new Date(""+d+"/"+c+"/"+b+" "+S+":"+a+":00");if(i){i.substr(0,4);var g=i.substr(4,2),o=i.substr(6,2),s=i.substr(8,2),r=i.substr(10,2)}else{var x=new Date;x.setTime(v.getTime()-36e5*parseInt(e)),x.getFullYear();var g=x.getMonth()+1+"";g.length==1&&(g="0"+g);var o=x.getDate()+"";o.length==1&&(o="0"+o);var s=x.getHours()+"";s.length==1&&(s="0"+s);var r=x.getMinutes()+"";r.length==1&&(r="0"+r)}return g+"-"+o+" "+s+":"+r+" 至 "+c+"-"+b+" "+S+":"+a},K={nowDate:0,halfhour:1,onehour:2};let M;const O=(t=null)=>{var A,R;var e=document.getElementById(q.value);M&&M.dispose(),M=z.init(e),M.showLoading();var i=(t==null?void 0:t.datePicker)||null,d=i||"20240716140000",c=2,b=0;l.visualMap=V;var S={stationCode:(t==null?void 0:t.address)||P,qualityControl:b,dataType:c,st:d,timeInterval:6};S.timeInterval=24;var a=0,v=[],g=[];M.hideLoading();var o=E.value[w];if(o.length>0){o.length>1&&(l.xAxis[0].axisLabel.formatter=function(W){var L=new Date(W+288e5),$=L.getHours()<10?"0"+L.getHours():L.getHours();return $+":00"}),l.title[1].text="",l.title[2].text="",l.title[4].text="",l.xAxis[0].show=!0,l.xAxis[1].show=!1,l.yAxis[0].show=!0,l.yAxis[1].show=!1,l.grid=[{top:"100",left:"20",right:"110",bottom:"40",containLabel:!0},{top:"100",width:"0",bottom:"40",containLabel:!0}];for(var s=0;s<o.length;s++){var r=((A=o[s])==null?void 0:A.SPEED_H)||"",x=((R=o[s])==null?void 0:R.DIRECTION_H)||"",T=o[s].Datetime;v.push({value:[T,o[s].HEIGHT,Number(r),Number(x)],symbolRotate:90-x,symbolSize:[1.5,1.5],symbol:"windFeather",itemStyle:{normal:{borderWidth:1.2},emphasis:{borderWidth:2}}})}a=o.sort((W,L)=>L.HEIGHT-W.HEIGHT),l.yAxis[0].max=a[0]?a[0].HEIGHT:1,l.xAxis[0].inverse==!1?l.toolbox.feature.myChange.title="最新在左":l.toolbox.feature.myChange.title="最新在右"}else l.xAxis[0].inverse==!1?(l.toolbox.feature.myChange.title="最新在左",l.title[1].text="",l.title[2].text=""):(l.toolbox.feature.myChange.title="最新在右",l.title[1].text="",l.title[2].text=""),l.xAxis[0].axisLabel.formatter=function(W){return""},e.innerHTML="<div style='width:100%;text-align:center;height:100px;line-height:100px;font-size: 25px;'>暂无数据</div>";l.series[0].data=v,l.series[1].data=g;var _=j(t.eTime,S.timeInterval,t.sTime),y="",I="";y="一小时平均";let f=u.value;I="",l.title[0].text=f.stationName+"["+f.Station_Id_C+"] "+y+"风羽图"+I+" "+_,l.title[0].subtext="　海拔高度："+f.HEIGHT+"米　经度："+parseFloat(f.lon).toFixed(2)+"度　纬度："+parseFloat(f.lat).toFixed(2)+"度";var m=_.split("至");l.title[6].text="",l.title[7].text="",l.xAxis[0].inverse?(l.title[5].text=m[1],l.title[8].text=m[0]):(l.title[5].text=m[0],l.title[8].text=m[1]),M.setOption(l),o.length==0&&(e.innerHTML="<div style='width:100%;text-align:center;height:100px;line-height:100px;font-size: 25px;'>暂无数据</div>")};var n={};const Z=(t,e)=>t-e;var Q={dimension:2,itemHeight:12,align:"left",itemWidth:5,itemGap:0,top:"14.5%",right:2,textStyle:{fontSize:10},pieces:[{lte:-999,color:"#951262",label:"-999"},{gt:-999,lte:-1,color:"#ed2226",label:"-1"},{gt:-1,lte:-.9,color:"#eb3e22",label:"-0.9"},{gt:-.9,lte:-.8,color:"#ef6a26",label:"-0.8"},{gt:-.8,lte:-.7,color:"#f58324",label:"-0.7"},{gt:-.7,lte:-.6,color:"#f3a122",label:"-0.6"},{gt:-.6,lte:-.5,color:"#fdb52a",label:"-0.5"},{gt:-.5,lte:-.4,color:"#fdd31e",label:"-0.4"},{gt:-.4,lte:-.3,color:"#f9ef1a",label:"-0.3"},{gt:-.3,lte:-.1,color:"#f7fd1c",label:"-0.1"},{gt:-.1,lte:.1,color:"#d9e9f1",label:"0.1"},{gt:.1,lte:.2,color:"#c7d7f1",label:"0.2"},{gt:.2,lte:.3,color:"#b1c7eb",label:"0.3"},{gt:.3,lte:.4,color:"#99b5e7",label:"0.4"},{gt:.4,lte:.5,color:"#83a5dd",label:"0.5"},{gt:.5,lte:.6,color:"#6e93d3",label:"0.6"},{gt:.6,lte:.7,color:"#6089cb",label:"0.7"},{gt:.7,lte:.8,color:"#4c7cc3",label:"0.8"},{gt:.8,lte:.9,color:"#4870bb",label:"0.9"},{gt:.9,lte:1,color:"#406ab9",label:"1"},{gt:1,lte:1.5,color:"#2a42ab",label:"1.5"},{gt:1.5,lte:2,color:"#242681",label:"2"},{gt:2,lte:2.5,color:"#242074",label:"2.5"},{gt:2.5,lte:3,color:"#22206a",label:"3"},{gt:3,lte:4,color:"#1c622c",label:"4"},{gt:4,lte:5,color:"#067e42",label:"5"},{gt:5,lte:6,color:"#0c8b42",label:"6"},{gt:6,lte:7,color:"#30bd4c",label:"7"},{gt:7,lte:8,color:"#4ec14a",label:"8"},{gt:8,lte:9,color:"#58c546",label:"9"},{gt:9,lte:10,color:"#87742e",label:"10"}]};const k=(t=null)=>{n={};var e=document.getElementById(q.value),i=z.init(e);i.showLoading();var d=(t==null?void 0:t.datePicker)||null,c=d||"20240716140000",b=K[t==null?void 0:t.type2]||2,S=0,a=[],v=[],g=[],o=[],s=E.value[w];t!=null&&t.address;var r;{a=s;for(var r=0;r<a.length;r++)v.indexOf(a[r].Datetime)==-1&&v.push(a[r].Datetime),g.indexOf(a[r].HEIGHT+"")==-1&&g.push(a[r].HEIGHT+""),o.push([a[r].Datetime,a[r].HEIGHT+"",a[r].SPEED_V+""])}n={title:[{text:"",subtext:"",left:"center"},{text:"",right:"10",top:"10%",textStyle:{fontWeight:"normal",fontSize:"12"}},{},{},{text:"11-11 11:11",left:"15",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"22-22 22:22",left:"40%",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"33-33 33:33",left:"48%",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}},{text:"44-44 44:44",right:"50",bottom:"15",textStyle:{fontWeight:"normal",fontSize:"12"}}],grid:[{top:"100",left:"20",right:"80",bottom:"40",width:"84%",containLabel:!0}],tooltip:{showDelay:0,formatter:function(f){var m='<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">日期：'+new Date(f.value[0]).toLocaleDateString()+"</div>时间："+new Date(new Date(f.value[0]).getTime()+288e5).toLocaleTimeString()+"<br>高度："+f.value[1]+"米<br>";return m+="垂直速度："+parseFloat(f.value[2]).toFixed(2)+"<br>",m}},toolbox:{right:15,feature:{dataZoom:{},saveAsImage:{show:!0},myChange:{show:!0,title:"横坐标转换",icon:"path://M4 10h20v6l8-8-8-8v6h-24v12h4zM28 22h-20v-6l-8 8 8 8v-6h24v-12h-4z",onclick:function(){H==!0?H=!1:H=!0,k(t)}}}},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"empty"},{type:"inside",yAxisIndex:0,filterMode:"empty"},{type:"inside",xAxisIndex:0,filterMode:"empty"},{type:"inside",yAxisIndex:0,filterMode:"empty"}],xAxis:{type:"category",data:v.sort(Z),name:"时间",scale:!0,inverse:H,axisLabel:{formatter:function(f){if(f!="undefined"&&f!=null){var m=f.substr(10,3),A=Number(m)+8;return A>=24&&(A=A-24),A.toString().padStart(2,"0")+":00"}else return""}}},yAxis:{type:"category",data:g.sort(Z),name:"高度(m)　　　",nameGap:10},series:[{name:"",type:"heatmap",data:o,itemStyle:{emphasis:{borderColor:"#333",borderWidth:1}},progressive:1e3,animation:!1}]},n.visualMap=Q;var x=j(t.eTime,24,t.sTime),T="",_="";b=="0"?T="实时数据":b=="1"?T="半小时平均":b=="2"&&(T="一小时平均"),_="";let y=u.value;n.title[0].text=y.stationName+"["+y.Station_Id_C+"] "+T+"垂直速度"+_+" "+x,n.title[0].subtext="　海拔高度："+y.HEIGHT+"米　经度："+parseFloat(y.lon).toFixed(2)+"度　纬度："+parseFloat(y.lat).toFixed(2)+"度",n.xAxis.inverse==!1?(n.toolbox.feature.myChange.title="最新在左",n.xAxis.nameLocation="end"):(n.xAxis.nameLocation="start",n.toolbox.feature.myChange.title="最新在右"),i.hideLoading();var I=x.split("至");n.title[5].text="",n.title[6].text="",n.xAxis.inverse?(n.title[4].text=I[1],n.title[7].text=I[0]):(n.title[4].text=I[0],n.title[7].text=I[1]),i.setOption(n),o.length==0&&(e.innerHTML="<div style='width:100%;text-align:center;height:100px;line-height:100px;font-size: 25px;'>暂无数据</div>"),i.resize({width:860,height:400})},U=(t,e)=>{B=t,X(t,e)},X=(t,e)=>{var d,c;let i={startTime:t.startTime,endTime:t.datePicker,elements:t.elements,staIds:t.address};if(w=i.elements+i.startTime+i.staIds,E.value[w]&&u.value)t.elements=="SPEED_V"?k(t):O(t);else{if(!(e!=null&&e.data))return;E.value[w]=e.data,u.value=e.data[0]||{},u.value.lon=((d=N.stationinfo)==null?void 0:d.lon)||"",u.value.lat=((c=N.stationinfo)==null?void 0:c.lat)||"",u.value.stationName=(G==null?void 0:G.stationName)||"",t.elements=="SPEED_V"?k(t):O(t)}};return F({setEchartsData:U}),(t,e)=>(h.openBlock(),h.createElementBlock("div",J))}},[["__scopeId","data-v-dbcab772"]]);C.install=function(D){D.component("cme-windoutline",C)},p.WindOutline=C,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
