(function(W,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],c):(W=typeof globalThis<"u"?globalThis:W||self,c(W.TlogP={},W.Vue))})(this,function(W,c){"use strict";const $=(T,m)=>{const d=T.__vccOpts||T;for(const[x,a]of m)d[x]=a;return d},rt={class:"table-view"},nt={class:"table-box grid"},at={class:"box1"},ot={class:"box2"},ht={class:"table-box grid2"},lt={class:"box3"},ct={class:"box5"},ut=["title"],dt=["title"],pt=["title"],ft=["title"],_t=["title"],mt=$({__name:"TableView",props:{data:{type:Object,default:null}},setup(T){const m=T;function d(a){var t,e;if(!((t=m.data)!=null&&t.has(a)))return"--";let r=(e=m.data.get(a))==null?void 0:e.val;return Array.isArray(r)&&r.length===1&&(r=r[0]),isNaN(r)?"--":r===null?"null":r===-9999?"--":r}function x(a){var r,t,e;return(r=m.data)!=null&&r.has(a)?(e=(t=m.data)==null?void 0:t.get(a))==null?void 0:e.desc:null}return(a,r)=>(c.openBlock(),c.createElementBlock("div",rt,[c.createElementVNode("div",nt,[c.createElementVNode("div",at,[r[4]||(r[4]=c.createElementVNode("p",{class:"title"},"能量与抬升",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[r[3]||(r[3]=c.createElementVNode("tr",null,[c.createElementVNode("th",null,"抬升点"),c.createElementVNode("th",null,"CAPE"),c.createElementVNode("th",null,"CAPE3km"),c.createElementVNode("th",null,"CAPE6km"),c.createElementVNode("th",null,"LI"),c.createElementVNode("th",null,"CIN"),c.createElementVNode("th",null,"LCL(m)"),c.createElementVNode("th",null,"LFC(m)"),c.createElementVNode("th",null,"EL(m)")],-1)),c.createElementVNode("tr",null,[r[0]||(r[0]=c.createElementVNode("td",{class:"th"},"surface",-1)),c.createElementVNode("td",null,c.toDisplayString(d("surface_cape")),1),c.createElementVNode("td",null,c.toDisplayString(d("cape_3km")),1),c.createElementVNode("td",null,c.toDisplayString(d("cape_6km")),1),c.createElementVNode("td",null,c.toDisplayString(d("surface_li")),1),c.createElementVNode("td",null,c.toDisplayString(d("surface_cin")),1),c.createElementVNode("td",null,c.toDisplayString(d("surface_lcl_h")),1),c.createElementVNode("td",null,c.toDisplayString(d("LFC_H")),1),c.createElementVNode("td",null,c.toDisplayString(d("surface_el_h")),1)]),c.createElementVNode("tr",null,[r[1]||(r[1]=c.createElementVNode("td",{class:"th"},"BCAPE",-1)),c.createElementVNode("td",null,c.toDisplayString(d("bcape_cape")),1),c.createElementVNode("td",null,c.toDisplayString(d("bp_cape_3km")),1),c.createElementVNode("td",null,c.toDisplayString(d("bp_cape_6km")),1),c.createElementVNode("td",null,c.toDisplayString(d("bcape_li")),1),c.createElementVNode("td",null,c.toDisplayString(d("bcape_cin")),1),c.createElementVNode("td",null,c.toDisplayString(d("bp_h")),1),c.createElementVNode("td",null,c.toDisplayString(d("bp_lfc_h")),1),c.createElementVNode("td",null,c.toDisplayString(d("bp_el_h")),1)]),c.createElementVNode("tr",null,[r[2]||(r[2]=c.createElementVNode("td",{class:"th"},"Mix Lay",-1)),c.createElementVNode("td",null,c.toDisplayString(d("mix_lay_cape")),1),c.createElementVNode("td",null,c.toDisplayString(d("ml_cape_3km")),1),c.createElementVNode("td",null,c.toDisplayString(d("ml_cape_6km")),1),c.createElementVNode("td",null,c.toDisplayString(d("mix_lay_li")),1),c.createElementVNode("td",null,c.toDisplayString(d("mix_lay_cin")),1),c.createElementVNode("td",null,c.toDisplayString(d("ml_h")),1),c.createElementVNode("td",null,c.toDisplayString(d("ml_lfc_h")),1),c.createElementVNode("td",null,c.toDisplayString(d("ml_el_h")),1)])])])]),c.createElementVNode("div",ot,[r[14]||(r[14]=c.createElementVNode("p",{class:"title"},"大风指数",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[c.createElementVNode("tr",null,[r[5]||(r[5]=c.createElementVNode("td",{class:"th"},"DCAPE",-1)),c.createElementVNode("td",null,c.toDisplayString(d("DCAPE")),1),r[6]||(r[6]=c.createElementVNode("td",{class:"th"},"Dmburst",-1)),c.createElementVNode("td",null,c.toDisplayString(d("DMBURST")),1)]),c.createElementVNode("tr",null,[r[7]||(r[7]=c.createElementVNode("td",{class:"th"},"wndg",-1)),c.createElementVNode("td",null,c.toDisplayString(d("WNDG")),1),r[8]||(r[8]=c.createElementVNode("td",{class:"th"},"Wmburst",-1)),c.createElementVNode("td",null,c.toDisplayString(d("WMBURST")),1)]),c.createElementVNode("tr",null,[r[9]||(r[9]=c.createElementVNode("td",{class:"th"},"mburst",-1)),c.createElementVNode("td",null,c.toDisplayString(d("MBURST")),1),r[10]||(r[10]=c.createElementVNode("td",{class:"th"},"MDPI",-1)),c.createElementVNode("td",null,c.toDisplayString(d("MDPI")),1)]),c.createElementVNode("tr",null,[r[11]||(r[11]=c.createElementVNode("td",{class:"th"},"Hmburst",-1)),c.createElementVNode("td",null,c.toDisplayString(d("HMBURST")),1),r[12]||(r[12]=c.createElementVNode("td",{class:"th"},null,-1)),r[13]||(r[13]=c.createElementVNode("td",null,null,-1))])])])])]),c.createElementVNode("div",ht,[c.createElementVNode("div",lt,[r[17]||(r[17]=c.createElementVNode("p",{class:"title"},"热力条件",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[r[15]||(r[15]=c.createElementVNode("tr",null,[c.createElementVNode("th",null,"convT"),c.createElementVNode("th",null,"0℃层"),c.createElementVNode("th",null,"-10℃层"),c.createElementVNode("th",null,"-20℃层"),c.createElementVNode("th",null,"-30℃层")],-1)),c.createElementVNode("tr",null,[c.createElementVNode("td",null,c.toDisplayString(d("CCL_T")),1),c.createElementVNode("td",null,c.toDisplayString(d("ZH")),1),c.createElementVNode("td",null,c.toDisplayString(d("-10H")),1),c.createElementVNode("td",null,c.toDisplayString(d("-20H")),1),c.createElementVNode("td",null,c.toDisplayString(d("-30H")),1)]),r[16]||(r[16]=c.createElementVNode("tr",null,[c.createElementVNode("td",{class:"th"},"MaxT"),c.createElementVNode("td",{class:"th"},"r:sfc-3km"),c.createElementVNode("td",{class:"th"},"r:3-6km"),c.createElementVNode("td",{class:"th"},"r:850-500"),c.createElementVNode("td",{class:"th"},"r:700-500")],-1)),c.createElementVNode("tr",null,[c.createElementVNode("td",null,c.toDisplayString(d("max_t")),1),c.createElementVNode("td",null,c.toDisplayString(d("lrsfc_3")),1),c.createElementVNode("td",null,c.toDisplayString(d("lr_3_6")),1),c.createElementVNode("td",null,c.toDisplayString(d("lr850_500")),1),c.createElementVNode("td",null,c.toDisplayString(d("lr700_500")),1)])])])]),c.createElementVNode("div",null,[r[22]||(r[22]=c.createElementVNode("p",{class:"title"},"水汽条件",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[c.createElementVNode("tr",null,[r[18]||(r[18]=c.createElementVNode("td",{class:"th"},"PWAT",-1)),c.createElementVNode("td",null,c.toDisplayString(d("PWAT")),1)]),c.createElementVNode("tr",null,[r[19]||(r[19]=c.createElementVNode("td",{class:"th"},"LowRH",-1)),c.createElementVNode("td",null,c.toDisplayString(d("LowRH")),1)]),c.createElementVNode("tr",null,[r[20]||(r[20]=c.createElementVNode("td",{class:"th"},"MidRh",-1)),c.createElementVNode("td",null,c.toDisplayString(d("MidRh")),1)]),c.createElementVNode("tr",null,[r[21]||(r[21]=c.createElementVNode("td",{class:"th"},"humi-1.5km",-1)),c.createElementVNode("td",null,c.toDisplayString(d("1500m_humi")),1)])])])]),c.createElementVNode("div",ct,[r[25]||(r[25]=c.createElementVNode("p",{class:"title"},"综合指数",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[c.createElementVNode("tr",null,[c.createElementVNode("td",{class:"th",title:x("K")},"K-idx",8,ut),c.createElementVNode("td",null,c.toDisplayString(d("K")),1),c.createElementVNode("td",{class:"th",title:x("MMP")},"mmp(%)",8,dt),c.createElementVNode("td",null,c.toDisplayString(d("MMP")),1)]),c.createElementVNode("tr",null,[c.createElementVNode("td",{class:"th",title:x("SWEAT")},"sweat",8,pt),c.createElementVNode("td",null,c.toDisplayString(d("SWEAT")),1),c.createElementVNode("td",{class:"th",title:x("SCP")},"scp(R)",8,ft),c.createElementVNode("td",null,c.toDisplayString(d("SCP")),1)]),c.createElementVNode("tr",null,[c.createElementVNode("td",{class:"th",title:x("DCP")},"DCP",8,_t),c.createElementVNode("td",null,c.toDisplayString(d("DCP")),1),r[23]||(r[23]=c.createElementVNode("td",{class:"th"},null,-1)),r[24]||(r[24]=c.createElementVNode("td",null,null,-1))])])])]),c.createElementVNode("div",null,[r[29]||(r[29]=c.createElementVNode("p",{class:"title"},"龙卷指数",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[c.createElementVNode("tr",null,[r[26]||(r[26]=c.createElementVNode("td",{class:"th"},"stp(fixed)",-1)),c.createElementVNode("td",null,c.toDisplayString(d("STP")),1)]),c.createElementVNode("tr",null,[r[27]||(r[27]=c.createElementVNode("td",{class:"th"},"stp(cin)",-1)),c.createElementVNode("td",null,c.toDisplayString(d("STP_CIN")),1)]),r[28]||(r[28]=c.createElementVNode("tr",null,[c.createElementVNode("td",{class:"th"},"vstp"),c.createElementVNode("td")],-1))])])]),c.createElementVNode("div",null,[r[33]||(r[33]=c.createElementVNode("p",{class:"title"},"冰雹指数",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[c.createElementVNode("tr",null,[r[30]||(r[30]=c.createElementVNode("td",{class:"th"},"SHIP",-1)),c.createElementVNode("td",null,c.toDisplayString(d("SHIP")),1)]),c.createElementVNode("tr",null,[r[31]||(r[31]=c.createElementVNode("td",{class:"th"},"LHP",-1)),c.createElementVNode("td",null,c.toDisplayString(d("LHP")),1)]),r[32]||(r[32]=c.createElementVNode("tr",null,[c.createElementVNode("td",{class:"th"},"cape-10_-30"),c.createElementVNode("td")],-1))])])])])]))}},[["__scopeId","data-v-ca032956"]]),gt={class:"table-box"},xt={class:"box2"},vt=["title"],bt=["title"],Et=["title"],wt=["title"],yt=["title"],Tt=["title"],Ct=["title"],St=["title"],At=["title"],Dt=["title"],Rt=$({__name:"TableView2",props:{data:{type:Object,default:null}},setup(T){const m=T;function d(a){var t,e;if(!((t=m.data)!=null&&t.has(a)))return"--";let r=(e=m.data.get(a))==null?void 0:e.val;return Array.isArray(r)&&r.length===1&&(r=r[0]),isNaN(r)?"--":r===null?"null":r===-9999?"--":r}function x(a){var r,t,e;return(r=m.data)!=null&&r.has(a)?(e=(t=m.data)==null?void 0:t.get(a))==null?void 0:e.desc:null}return(a,r)=>(c.openBlock(),c.createElementBlock("div",gt,[c.createElementVNode("div",xt,[r[6]||(r[6]=c.createElementVNode("p",{class:"title"},"动力条件",-1)),c.createElementVNode("table",null,[c.createElementVNode("tbody",null,[r[5]||(r[5]=c.createElementVNode("tr",null,[c.createElementVNode("th"),c.createElementVNode("th",null,"SRH"),c.createElementVNode("th",null,"Shear")],-1)),c.createElementVNode("tr",null,[r[0]||(r[0]=c.createElementVNode("td",{class:"th"},"SFC-1km",-1)),c.createElementVNode("td",{title:x("1km_srh")},c.toDisplayString(d("1km_srh")),9,vt),c.createElementVNode("td",{title:x("Shr1km")},c.toDisplayString(d("Shr1km")),9,bt)]),c.createElementVNode("tr",null,[r[1]||(r[1]=c.createElementVNode("td",{class:"th"},"SFC-3km",-1)),c.createElementVNode("td",{title:x("3km_srh")},c.toDisplayString(d("3km_srh")),9,Et),c.createElementVNode("td",{title:x("Shr3km")},c.toDisplayString(d("Shr3km")),9,wt)]),c.createElementVNode("tr",null,[r[2]||(r[2]=c.createElementVNode("td",{class:"th"},"EFFLay",-1)),c.createElementVNode("td",{title:x("eff_srh")},c.toDisplayString(d("eff_srh")),9,yt),c.createElementVNode("td",{title:x("eff_shear")},c.toDisplayString(d("eff_shear")),9,Tt)]),c.createElementVNode("tr",null,[r[3]||(r[3]=c.createElementVNode("td",{class:"th"},"SFC-6km",-1)),c.createElementVNode("td",{title:x("6km_srh")},c.toDisplayString(d("6km_srh")),9,Ct),c.createElementVNode("td",{title:x("Shr6km")},c.toDisplayString(d("Shr6km")),9,St)]),c.createElementVNode("tr",null,[r[4]||(r[4]=c.createElementVNode("td",{class:"th"},"SFC-8km",-1)),c.createElementVNode("td",{title:x("8km_srh")},c.toDisplayString(d("8km_srh")),9,At),c.createElementVNode("td",{title:x("Shr8km")},c.toDisplayString(d("Shr8km")),9,Dt)])])])])]))}},[["__scopeId","data-v-2fd9d189"]]),K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAPNJREFUKFOVkT9LA0EQxX9v3cPS1JZpBIvAaSNYWEpK/QTpxV4IWAgRe7HXL6ClpNMikMYT0qWxtNYy7roj2RMVI8JNN8O8mfdHNCw13OcLsHlmKynFQ8E+xlo+JKYG187584cjvdYjYGNgHYi3YKtAJXE1n1uihyhBz+C7VV8TlaezdZkbgbWAcRGK3VjEgznAB38RijgE2wJeTLatcvB2J9jJ70QvJbUlO84fzE6c05MZl7mH+z8A1pb0DyBT0ghogcZF8L8ohSHwTakWPeuAq0WLR7FUU0jvP0SnbtVfnizaauyhT1uNqYmbBVubhNc46Q97/HKho3RzZAAAAABJRU5ErkJggg==",Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAMxJREFUKFNj/P///38GNLD89D8GLUlGBn0ZRnQpBkZ0DQ/f/WeInPOHQZyPkWF5MgsDByuqHhQN//4zMKQs/sNw8QnE0mgzJoYiF2YUHSgalp76x9C35y9cARMjA8OcWBYUp2E4CaTauO03g640I8OCeBbCfiCoYcnJv/9BzugMZGZw0WQCm+jQ+5tBUgDiaRAAyYOcC7KREZuGvJV/GM48/M+wPoMFHFoENTx5/5+haetfBkl+RoZGX2bCGtB9itUGjODAIoDiB2I1AAC+TIQnX1os2QAAAABJRU5ErkJggg==",tt=c.reactive({dataUrl:"http://10.40.88.119:11000/cmes-base-upar/cmeapi/v1/operate/getSingleBeiDouSond",algorithmUrl:"http://10.40.88.119:11000/cmes-algorithm/algorithm/tlogp",stationList:[{id:"54511",name:"北京"}]});function et(){return tt}function Mt(T){return Object.prototype.toString.call(T)==="[object Object]"}function Pt(T){T&&Mt(T)&&Object.assign(tt,T)}const Lt={class:"chart-head"},Nt=["value"],It=$({__name:"ChartHead",props:{time:{type:String},staId:{type:String}},emits:["action"],setup(T,{emit:m}){const d=et(),x=c.toRef(d,"stationList"),a=c.ref(x.value[0].id),r=T,t=m;let e=new Date().toLocaleDateString().replace(/[^\d]/g,"-");const i=c.ref(e),s=c.ref(!1);return c.watch(()=>r.time,n=>{if(!n)return;const o=[n.slice(0,4),n.slice(4,6),n.slice(6)];i.value=`${o[0]}-${o[1]}-${o[2]}`},{immediate:!0}),c.watch(()=>r.staId,n=>{n&&(a.value=n)}),c.watch(s,n=>t("action","switchMode",n)),c.watch(i,n=>t("action","pickDate",n)),c.watch(a,n=>t("action","switchStation",n)),(n,o)=>(c.openBlock(),c.createElementBlock("div",Lt,[o[15]||(o[15]=c.createElementVNode("span",{class:"label"},"时间",-1)),c.withDirectives(c.createElementVNode("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=h=>i.value=h)},null,512),[[c.vModelText,i.value]]),c.withDirectives(c.createElementVNode("select",{class:"station-list","onUpdate:modelValue":o[1]||(o[1]=h=>a.value=h)},[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(x.value,h=>(c.openBlock(),c.createElementBlock("option",{value:h.id},c.toDisplayString(h.name),9,Nt))),256))],512),[[c.vModelSelect,a.value]]),c.createElementVNode("button",{class:"chart-btn",onClick:o[3]||(o[3]=h=>s.value=!s.value)},[c.withDirectives(c.createElementVNode("input",{"onUpdate:modelValue":o[2]||(o[2]=h=>s.value=h),type:"checkbox"},null,512),[[c.vModelCheckbox,s.value]]),o[9]||(o[9]=c.createTextVNode(" 订正抬升层 "))]),c.createElementVNode("button",{class:"chart-btn",onClick:o[4]||(o[4]=h=>t("action","showData"))},o[10]||(o[10]=[c.createElementVNode("img",{src:K},null,-1),c.createTextVNode(" 显示层结资料 ")])),c.createElementVNode("button",{class:"chart-btn",onClick:o[5]||(o[5]=h=>t("action","showIndexs"))},o[11]||(o[11]=[c.createElementVNode("img",{src:K},null,-1),c.createTextVNode(" 显示物理量 ")])),c.createElementVNode("button",{class:"chart-btn",onClick:o[6]||(o[6]=h=>t("action","showSpecial"))},o[12]||(o[12]=[c.createElementVNode("img",{src:K},null,-1),c.createTextVNode(" 显示特征层 ")])),c.createElementVNode("button",{class:"chart-btn",onClick:o[7]||(o[7]=h=>t("action","exportData"))},o[13]||(o[13]=[c.createElementVNode("img",{src:Z},null,-1),c.createTextVNode(" 导出层结资料 ")])),c.createElementVNode("button",{class:"chart-btn",onClick:o[8]||(o[8]=h=>t("action","exportIndex"))},o[14]||(o[14]=[c.createElementVNode("img",{src:Z},null,-1),c.createTextVNode(" 导出物理量 ")]))]))}},[["__scopeId","data-v-0bfeaf6d"]]),Ft={class:"data-table"},jt=$({__name:"DataTable",props:{descs:{type:Array,default:[]},values:{type:Array,default:[]}},setup(T){const m=T,d=c.computed(()=>m.values[0].length);return(x,a)=>(c.openBlock(),c.createElementBlock("div",Ft,[c.createElementVNode("table",null,[c.createElementVNode("thead",null,[c.createElementVNode("tr",null,[a[0]||(a[0]=c.createElementVNode("th",null,"序号",-1)),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(m.descs,r=>(c.openBlock(),c.createElementBlock("th",null,c.toDisplayString(r),1))),256))])]),c.createElementVNode("tbody",null,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(d.value,r=>(c.openBlock(),c.createElementBlock("tr",null,[c.createElementVNode("td",null,c.toDisplayString(r),1),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(m.values,t=>(c.openBlock(),c.createElementBlock("td",null,c.toDisplayString(t[r-1]),1))),256))]))),256))])])]))}},[["__scopeId","data-v-1d16be26"]]),kt={mounted(T,m,d){T.parentNode.addEventListener("click",a=>{if(!T.contains(a.target)){if(typeof m.value!="function")return;m.value(!1)}})}};function Bt(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var Q={exports:{}},Vt=Q.exports,it;function Ot(){return it||(it=1,function(T,m){(function(d,x){T.exports=x()})(typeof self<"u"?self:Vt,function(){return function(d){function x(r){if(a[r])return a[r].exports;var t=a[r]={i:r,l:!1,exports:{}};return d[r].call(t.exports,t,t.exports,x),t.l=!0,t.exports}var a={};return x.m=d,x.c=a,x.d=function(r,t,e){x.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:e})},x.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return x.d(t,"a",t),t},x.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},x.p="",x(x.s=21)}({0:function(d,x){(function(){d.exports=window.createjs}).call(window)},1:function(d,x){(function(){/*!
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2010 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/this.createjs=this.createjs||{},createjs.extend=function(a,r){function t(){this.constructor=a}return t.prototype=r.prototype,a.prototype=new t},this.createjs=this.createjs||{},createjs.promote=function(a,r){var t=a.prototype,e=Object.getPrototypeOf&&Object.getPrototypeOf(t)||t.__proto__;if(e){t[(r+="_")+"constructor"]=e.constructor;for(var i in e)t.hasOwnProperty(i)&&typeof e[i]=="function"&&(t[r+i]=e[i])}return a},this.createjs=this.createjs||{},createjs.indexOf=function(a,r){for(var t=0,e=a.length;t<e;t++)if(r===a[t])return t;return-1},this.createjs=this.createjs||{},function(){function a(){throw"UID cannot be instantiated"}a._nextID=0,a.get=function(){return a._nextID++},createjs.UID=a}(),this.createjs=this.createjs||{},createjs.deprecate=function(a,r){return function(){var t="Deprecated property or method '"+r+"'. See docs for info.";return console&&(console.warn?console.warn(t):console.log(t)),a&&a.apply(this,arguments)}},this.createjs=this.createjs||{},function(){function a(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var r=a.prototype;r.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},r.stopPropagation=function(){this.propagationStopped=!0},r.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},r.remove=function(){this.removed=!0},r.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},r.set=function(t){for(var e in t)this[e]=t[e];return this},r.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){function a(){this._listeners=null,this._captureListeners=null}var r=a.prototype;a.initialize=function(t){t.addEventListener=r.addEventListener,t.on=r.on,t.removeEventListener=t.off=r.removeEventListener,t.removeAllEventListeners=r.removeAllEventListeners,t.hasEventListener=r.hasEventListener,t.dispatchEvent=r.dispatchEvent,t._dispatchEvent=r._dispatchEvent,t.willTrigger=r.willTrigger},r.addEventListener=function(t,e,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=s[t];return n&&this.removeEventListener(t,e,i),n=s[t],n?n.push(e):s[t]=[e],e},r.on=function(t,e,i,s,n,o){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(h){e.call(i,h,n),s&&h.remove()},o)},r.removeEventListener=function(t,e,i){var s=i?this._captureListeners:this._listeners;if(s){var n=s[t];if(n){for(var o=0,h=n.length;o<h;o++)if(n[o]==e){h==1?delete s[t]:n.splice(o,1);break}}}},r.off=r.removeEventListener,r.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},r.dispatchEvent=function(t,e,i){if(typeof t=="string"){var s=this._listeners;if(!(e||s&&s[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch{}if(t.bubbles&&this.parent){for(var n=this,o=[n];n.parent;)o.push(n=n.parent);var h,l=o.length;for(h=l-1;h>=0&&!t.propagationStopped;h--)o[h]._dispatchEvent(t,1+(h==0));for(h=1;h<l&&!t.propagationStopped;h++)o[h]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},r.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},r.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},r.toString=function(){return"[EventDispatcher]"},r._dispatchEvent=function(t,e){var i,s,n=e<=2?this._captureListeners:this._listeners;if(t&&n&&(s=n[t.type])&&(i=s.length)){try{t.currentTarget=this}catch{}try{t.eventPhase=0|e}catch{}t.removed=!1,s=s.slice();for(var o=0;o<i&&!t.immediatePropagationStopped;o++){var h=s[o];h.handleEvent?h.handleEvent(t):h(t),t.removed&&(this.off(t.type,h,e==1),t.removed=!1)}}e===2&&this._dispatchEvent(t,2.1)},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){function a(){throw"Ticker cannot be instantiated."}a.RAF_SYNCHED="synched",a.RAF="raf",a.TIMEOUT="timeout",a.timingMode=null,a.maxDelta=0,a.paused=!1,a.removeEventListener=null,a.removeAllEventListeners=null,a.dispatchEvent=null,a.hasEventListener=null,a._listeners=null,createjs.EventDispatcher.initialize(a),a._addEventListener=a.addEventListener,a.addEventListener=function(){return!a._inited&&a.init(),a._addEventListener.apply(a,arguments)},a._inited=!1,a._startTime=0,a._pausedTime=0,a._ticks=0,a._pausedTicks=0,a._interval=50,a._lastTime=0,a._times=null,a._tickTimes=null,a._timerId=null,a._raf=!0,a._setInterval=function(e){a._interval=e,a._inited&&a._setupTick()},a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval"),a._getInterval=function(){return a._interval},a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval"),a._setFPS=function(e){a._setInterval(1e3/e)},a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS"),a._getFPS=function(){return 1e3/a._interval},a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(e){console.log(e)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)},a.reset=function(){if(a._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick"),a._timerId=a._times=a._tickTimes=null,a._startTime=a._lastTime=a._ticks=a._pausedTime=0,a._inited=!1},a.getMeasuredTickTime=function(e){var i=0,s=a._tickTimes;if(!s||s.length<1)return-1;e=Math.min(s.length,e||0|a._getFPS());for(var n=0;n<e;n++)i+=s[n];return i/e},a.getMeasuredFPS=function(e){var i=a._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|a._getFPS()),1e3/((i[0]-i[e])/e))},a.getTime=function(e){return a._startTime?a._getTime()-(e?a._pausedTime:0):-1},a.getEventTime=function(e){return a._startTime?(a._lastTime||a._startTime)-(e?a._pausedTime:0):-1},a.getTicks=function(e){return a._ticks-(e?a._pausedTicks:0)},a._handleSynch=function(){a._timerId=null,a._setupTick(),a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()},a._handleRAF=function(){a._timerId=null,a._setupTick(),a._tick()},a._handleTimeout=function(){a._timerId=null,a._setupTick(),a._tick()},a._setupTick=function(){if(a._timerId==null){var e=a.timingMode;if(e==a.RAF_SYNCHED||e==a.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return a._timerId=i(e==a.RAF?a._handleRAF:a._handleSynch),void(a._raf=!0)}a._raf=!1,a._timerId=setTimeout(a._handleTimeout,a._interval)}},a._tick=function(){var e=a.paused,i=a._getTime(),s=i-a._lastTime;if(a._lastTime=i,a._ticks++,e&&(a._pausedTicks++,a._pausedTime+=s),a.hasEventListener("tick")){var n=new createjs.Event("tick"),o=a.maxDelta;n.delta=o&&s>o?o:s,n.paused=e,n.time=i,n.runTime=i-a._pausedTime,a.dispatchEvent(n)}for(a._tickTimes.unshift(a._getTime()-i);a._tickTimes.length>100;)a._tickTimes.pop();for(a._times.unshift(i);a._times.length>100;)a._times.pop()};var r=window,t=r.performance.now||r.performance.mozNow||r.performance.msNow||r.performance.oNow||r.performance.webkitNow;a._getTime=function(){return(t&&t.call(r.performance)||new Date().getTime())-a._startTime},createjs.Ticker=a}(),this.createjs=this.createjs||{},function(){function a(t){this.readyState=t.readyState,this._video=t,this._canvas=null,this._lastTime=-1,this.readyState<2&&t.addEventListener("canplaythrough",this._videoReady.bind(this))}var r=a.prototype;r.getImage=function(){if(!(this.readyState<2)){var t=this._canvas,e=this._video;if(t||(t=this._canvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),t.width=e.videoWidth,t.height=e.videoHeight),e.readyState>=2&&e.currentTime!==this._lastTime){var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),i.drawImage(e,0,0,t.width,t.height),this._lastTime=e.currentTime}return t}},r._videoReady=function(){this.readyState=2},createjs.VideoBuffer=a}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s,n,o,h,l,u,p,f){this.Event_constructor(t,e,i),this.stageX=s,this.stageY=n,this.rawX=u??s,this.rawY=p??n,this.nativeEvent=o,this.pointerID=h,this.primary=!!l,this.relatedTarget=f}var r=createjs.extend(a,createjs.Event);r._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},r._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},r._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(r,{localX:{get:r._get_localX},localY:{get:r._get_localY},isTouch:{get:r._get_isTouch}})}catch{}r.clone=function(){return new a(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},r.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(a,"Event")}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s,n,o){this.setValues(t,e,i,s,n,o)}var r=a.prototype;a.DEG_TO_RAD=Math.PI/180,a.identity=null,r.setValues=function(t,e,i,s,n,o){return this.a=t??1,this.b=e||0,this.c=i||0,this.d=s??1,this.tx=n||0,this.ty=o||0,this},r.append=function(t,e,i,s,n,o){var h=this.a,l=this.b,u=this.c,p=this.d;return t==1&&e==0&&i==0&&s==1||(this.a=h*t+u*e,this.b=l*t+p*e,this.c=h*i+u*s,this.d=l*i+p*s),this.tx=h*n+u*o+this.tx,this.ty=l*n+p*o+this.ty,this},r.prepend=function(t,e,i,s,n,o){var h=this.a,l=this.c,u=this.tx;return this.a=t*h+i*this.b,this.b=e*h+s*this.b,this.c=t*l+i*this.d,this.d=e*l+s*this.d,this.tx=t*u+i*this.ty+n,this.ty=e*u+s*this.ty+o,this},r.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},r.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},r.appendTransform=function(t,e,i,s,n,o,h,l,u){if(n%360)var p=n*a.DEG_TO_RAD,f=Math.cos(p),_=Math.sin(p);else f=1,_=0;return o||h?(o*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(o),Math.cos(o),t,e),this.append(f*i,_*i,-_*s,f*s,0,0)):this.append(f*i,_*i,-_*s,f*s,t,e),(l||u)&&(this.tx-=l*this.a+u*this.c,this.ty-=l*this.b+u*this.d),this},r.prependTransform=function(t,e,i,s,n,o,h,l,u){if(n%360)var p=n*a.DEG_TO_RAD,f=Math.cos(p),_=Math.sin(p);else f=1,_=0;return(l||u)&&(this.tx-=l,this.ty-=u),o||h?(o*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.prepend(f*i,_*i,-_*s,f*s,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(o),Math.cos(o),t,e)):this.prepend(f*i,_*i,-_*s,f*s,t,e),this},r.rotate=function(t){t*=a.DEG_TO_RAD;var e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.b;return this.a=s*e+this.c*i,this.b=n*e+this.d*i,this.c=-s*i+this.c*e,this.d=-n*i+this.d*e,this},r.skew=function(t,e){return t*=a.DEG_TO_RAD,e*=a.DEG_TO_RAD,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},r.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},r.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},r.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},r.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,o=t*s-e*i;return this.a=s/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(t*this.ty-e*n)/o,this},r.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},r.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},r.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},r.decompose=function(t){t==null&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var e=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a);return Math.abs(1-e/i)<1e-5?(t.rotation=i/a.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/a.DEG_TO_RAD,t.skewY=i/a.DEG_TO_RAD),t},r.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},r.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)},r.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},a.identity=new a,createjs.Matrix2D=a}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s,n){this.setValues(t,e,i,s,n)}var r=a.prototype;r.setValues=function(t,e,i,s,n){return this.visible=t==null||!!t,this.alpha=e??1,this.shadow=i,this.compositeOperation=s,this.matrix=n||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},r.append=function(t,e,i,s,n){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=s||this.compositeOperation,this.visible=this.visible&&t,n&&this.matrix.appendMatrix(n),this},r.prepend=function(t,e,i,s,n){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||s,this.visible=this.visible&&t,n&&this.matrix.prependMatrix(n),this},r.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},r.clone=function(){return new a(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=a}(),this.createjs=this.createjs||{},function(){function a(t,e){this.setValues(t,e)}var r=a.prototype;r.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},r.copy=function(t){return this.x=t.x,this.y=t.y,this},r.clone=function(){return new a(this.x,this.y)},r.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=a}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s){this.setValues(t,e,i,s)}var r=a.prototype;r.setValues=function(t,e,i,s){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this},r.extend=function(t,e,i,s){return i=i||0,s=s||0,t+i>this.x+this.width&&(this.width=t+i-this.x),e+s>this.y+this.height&&(this.height=e+s-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},r.pad=function(t,e,i,s){return this.x-=e,this.y-=t,this.width+=e+s,this.height+=t+i,this},r.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},r.contains=function(t,e,i,s){return i=i||0,s=s||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+s<=this.y+this.height},r.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},r.intersection=function(t){var e=t.x,i=t.y,s=e+t.width,n=i+t.height;return this.x>e&&(e=this.x),this.y>i&&(i=this.y),this.x+this.width<s&&(s=this.x+this.width),this.y+this.height<n&&(n=this.y+this.height),s<=e||n<=i?null:new a(e,i,s-e,n-i)},r.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},r.isEmpty=function(){return this.width<=0||this.height<=0},r.clone=function(){return new a(this.x,this.y,this.width,this.height)},r.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=a}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s,n,o,h){t.addEventListener&&(this.target=t,this.overLabel=i??"over",this.outLabel=e??"out",this.downLabel=s??"down",this.play=n,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),o&&(h&&(o.actionsEnabled=!1,o.gotoAndStop&&o.gotoAndStop(h)),t.hitArea=o))}var r=a.prototype;r._setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}},r.setEnabled=createjs.deprecate(r._setEnabled,"ButtonHelper.setEnabled"),r._getEnabled=function(){return this._enabled},r.getEnabled=createjs.deprecate(r._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(r,{enabled:{get:r._getEnabled,set:r._setEnabled}})}catch{}r.toString=function(){return"[ButtonHelper]"},r.handleEvent=function(t){var e,i=this.target,s=t.type;s=="mousedown"?(this._isPressed=!0,e=this.downLabel):s=="pressup"?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):s=="rollover"?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},r._reset=function(){var t=this.paused;this.__reset(),this.paused=t},createjs.ButtonHelper=a}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=s||0}var r=a.prototype;a.identity=new a("transparent",0,0,0),r.toString=function(){return"[Shadow]"},r.clone=function(){return new a(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=a}(),this.createjs=this.createjs||{},function(){function a(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var r=createjs.extend(a,createjs.EventDispatcher);r._getAnimations=function(){return this._animations.slice()},r.getAnimations=createjs.deprecate(r._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(r,{animations:{get:r._getAnimations}})}catch{}r.getNumFrames=function(t){if(t==null)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return e==null?0:e.frames.length},r.getAnimation=function(t){return this._data[t]},r.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},r.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new createjs.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},r.toString=function(){return"[SpriteSheet]"},r.clone=function(){throw"SpriteSheet cannot be cloned."},r._parseData=function(t){var e,i,s,n;if(t!=null){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(n=this._images=[],e=0;e<i;e++){var o=t.images[e];if(typeof o=="string"){var h=o;o=document.createElement("img"),o.src=h}n.push(o),o.getContext||o.naturalWidth||(this._loadCount++,this.complete=!1,function(g,v){o.onload=function(){g._handleImageLoad(v)}}(this,h),function(g,v){o.onerror=function(){g._handleImageError(v)}}(this,h))}if(t.frames!=null)if(Array.isArray(t.frames))for(this._frames=[],n=t.frames,e=0,i=n.length;e<i;e++){var l=n[e];this._frames.push({image:this._images[l[4]?l[4]:0],rect:new createjs.Rectangle(l[0],l[1],l[2],l[3]),regX:l[5]||0,regY:l[6]||0})}else s=t.frames,this._frameWidth=s.width,this._frameHeight=s.height,this._regX=s.regX||0,this._regY=s.regY||0,this._spacing=s.spacing||0,this._margin=s.margin||0,this._numFrames=s.count,this._loadCount==0&&this._calculateFrames();if(this._animations=[],(s=t.animations)!=null){this._data={};var u;for(u in s){var p={name:u},f=s[u];if(typeof f=="number")n=p.frames=[f];else if(Array.isArray(f))if(f.length==1)p.frames=[f[0]];else for(p.speed=f[3],p.next=f[2],n=p.frames=[],e=f[0];e<=f[1];e++)n.push(e);else{p.speed=f.speed,p.next=f.next;var _=f.frames;n=p.frames=typeof _=="number"?[_]:_.slice(0)}p.next!==!0&&p.next!==void 0||(p.next=u),(p.next===!1||n.length<2&&p.next==u)&&(p.next=null),p.speed||(p.speed=1),this._animations.push(u),this._data[u]=p}}}},r._handleImageLoad=function(t){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},r._handleImageError=function(t){var e=new createjs.Event("error");e.src=t,this.dispatchEvent(e),--this._loadCount==0&&this.dispatchEvent("complete")},r._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,s=this._frameHeight,n=this._spacing,o=this._margin;t:for(var h=0,l=this._images;h<l.length;h++)for(var u=l[h],p=u.width||u.naturalWidth,f=u.height||u.naturalHeight,_=o;_<=f-o-s;){for(var g=o;g<=p-o-i;){if(e>=t)break t;e++,this._frames.push({image:u,rect:new createjs.Rectangle(g,_,i,s),regX:this._regX,regY:this._regY}),g+=i+n}_+=s+n}this._numFrames=e}},createjs.SpriteSheet=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function a(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var r=a.prototype,t=a;a.getRGB=function(i,s,n,o){return i!=null&&n==null&&(o=s,n=255&i,s=i>>8&255,i=i>>16&255),o==null?"rgb("+i+","+s+","+n+")":"rgba("+i+","+s+","+n+","+o+")"},a.getHSL=function(i,s,n,o){return o==null?"hsl("+i%360+","+s+"%,"+n+"%)":"hsla("+i%360+","+s+"%,"+n+"%,"+o+")"},a.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},a.STROKE_CAPS_MAP=["butt","round","square"],a.STROKE_JOINTS_MAP=["miter","round","bevel"];var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(a._ctx=e.getContext("2d"),e.width=e.height=1),r._getInstructions=function(){return this._updateInstructions(),this._instructions},r.getInstructions=createjs.deprecate(r._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(r,{instructions:{get:r._getInstructions}})}catch{}r.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},r.draw=function(i,s){this._updateInstructions();for(var n=this._instructions,o=this._storeIndex,h=n.length;o<h;o++)n[o].exec(i,s)},r.drawAsPath=function(i){this._updateInstructions();for(var s,n=this._instructions,o=this._storeIndex,h=n.length;o<h;o++)(s=n[o]).path!==!1&&s.exec(i)},r.moveTo=function(i,s){return this.append(new t.MoveTo(i,s),!0)},r.lineTo=function(i,s){return this.append(new t.LineTo(i,s))},r.arcTo=function(i,s,n,o,h){return this.append(new t.ArcTo(i,s,n,o,h))},r.arc=function(i,s,n,o,h,l){return this.append(new t.Arc(i,s,n,o,h,l))},r.quadraticCurveTo=function(i,s,n,o){return this.append(new t.QuadraticCurveTo(i,s,n,o))},r.bezierCurveTo=function(i,s,n,o,h,l){return this.append(new t.BezierCurveTo(i,s,n,o,h,l))},r.rect=function(i,s,n,o){return this.append(new t.Rect(i,s,n,o))},r.closePath=function(){return this._activeInstructions.length?this.append(new t.ClosePath):this},r.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},r.beginFill=function(i){return this._setFill(i?new t.Fill(i):null)},r.beginLinearGradientFill=function(i,s,n,o,h,l){return this._setFill(new t.Fill().linearGradient(i,s,n,o,h,l))},r.beginRadialGradientFill=function(i,s,n,o,h,l,u,p){return this._setFill(new t.Fill().radialGradient(i,s,n,o,h,l,u,p))},r.beginBitmapFill=function(i,s,n){return this._setFill(new t.Fill(null,n).bitmap(i,s))},r.endFill=function(){return this.beginFill()},r.setStrokeStyle=function(i,s,n,o,h){return this._updateInstructions(!0),this._strokeStyle=this.command=new t.StrokeStyle(i,s,n,o,h),this._stroke&&(this._stroke.ignoreScale=h),this._strokeIgnoreScale=h,this},r.setStrokeDash=function(i,s){return this._updateInstructions(!0),this._strokeDash=this.command=new t.StrokeDash(i,s),this},r.beginStroke=function(i){return this._setStroke(i?new t.Stroke(i):null)},r.beginLinearGradientStroke=function(i,s,n,o,h,l){return this._setStroke(new t.Stroke().linearGradient(i,s,n,o,h,l))},r.beginRadialGradientStroke=function(i,s,n,o,h,l,u,p){return this._setStroke(new t.Stroke().radialGradient(i,s,n,o,h,l,u,p))},r.beginBitmapStroke=function(i,s){return this._setStroke(new t.Stroke().bitmap(i,s))},r.endStroke=function(){return this.beginStroke()},r.curveTo=r.quadraticCurveTo,r.drawRect=r.rect,r.drawRoundRect=function(i,s,n,o,h){return this.drawRoundRectComplex(i,s,n,o,h,h,h,h)},r.drawRoundRectComplex=function(i,s,n,o,h,l,u,p){return this.append(new t.RoundRect(i,s,n,o,h,l,u,p))},r.drawCircle=function(i,s,n){return this.append(new t.Circle(i,s,n))},r.drawEllipse=function(i,s,n,o){return this.append(new t.Ellipse(i,s,n,o))},r.drawPolyStar=function(i,s,n,o,h,l){return this.append(new t.PolyStar(i,s,n,o,h,l))},r.append=function(i,s){return this._activeInstructions.push(i),this.command=i,s||(this._dirty=!0),this},r.decodePath=function(i){for(var s=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],n=[2,2,4,6,0],o=0,h=i.length,l=[],u=0,p=0,f=a.BASE_64;o<h;){var _=i.charAt(o),g=f[_],v=g>>3,b=s[v];if(!b||3&g)throw"bad path data (@"+o+"): "+_;var y=n[v];v||(u=p=0),l.length=0,o++;for(var w=2+(g>>2&1),C=0;C<y;C++){var S=f[i.charAt(o)],A=S>>5?-1:1;S=(31&S)<<6|f[i.charAt(o+1)],w==3&&(S=S<<6|f[i.charAt(o+2)]),S=A*S/10,C%2?u=S+=u:p=S+=p,l[C]=S,o+=w}b.apply(this,l)}return this},r.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},r.unstore=function(){return this._storeIndex=0,this},r.clone=function(){var i=new a;return i.command=this.command,i._stroke=this._stroke,i._strokeStyle=this._strokeStyle,i._strokeDash=this._strokeDash,i._strokeIgnoreScale=this._strokeIgnoreScale,i._fill=this._fill,i._instructions=this._instructions.slice(),i._commitIndex=this._commitIndex,i._activeInstructions=this._activeInstructions.slice(),i._dirty=this._dirty,i._storeIndex=this._storeIndex,i},r.toString=function(){return"[Graphics]"},r.mt=r.moveTo,r.lt=r.lineTo,r.at=r.arcTo,r.bt=r.bezierCurveTo,r.qt=r.quadraticCurveTo,r.a=r.arc,r.r=r.rect,r.cp=r.closePath,r.c=r.clear,r.f=r.beginFill,r.lf=r.beginLinearGradientFill,r.rf=r.beginRadialGradientFill,r.bf=r.beginBitmapFill,r.ef=r.endFill,r.ss=r.setStrokeStyle,r.sd=r.setStrokeDash,r.s=r.beginStroke,r.ls=r.beginLinearGradientStroke,r.rs=r.beginRadialGradientStroke,r.bs=r.beginBitmapStroke,r.es=r.endStroke,r.dr=r.drawRect,r.rr=r.drawRoundRect,r.rc=r.drawRoundRectComplex,r.dc=r.drawCircle,r.de=r.drawEllipse,r.dp=r.drawPolyStar,r.p=r.decodePath,r._updateInstructions=function(i){var s=this._instructions,n=this._activeInstructions,o=this._commitIndex;if(this._dirty&&n.length){s.length=o,s.push(a.beginCmd);var h=n.length,l=s.length;s.length=l+h;for(var u=0;u<h;u++)s[u+l]=n[u];this._fill&&s.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&s.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&s.push(this._strokeStyle),i&&(this._oldStrokeStyle=this._strokeStyle,this._oldStrokeDash=this._strokeDash),s.push(this._stroke)),this._dirty=!1}i&&(n.length=0,this._commitIndex=s.length)},r._setFill=function(i){return this._updateInstructions(!0),this.command=this._fill=i,this},r._setStroke=function(i){return this._updateInstructions(!0),(this.command=this._stroke=i)&&(i.ignoreScale=this._strokeIgnoreScale),this},(t.LineTo=function(i,s){this.x=i,this.y=s}).prototype.exec=function(i){i.lineTo(this.x,this.y)},(t.MoveTo=function(i,s){this.x=i,this.y=s}).prototype.exec=function(i){i.moveTo(this.x,this.y)},(t.ArcTo=function(i,s,n,o,h){this.x1=i,this.y1=s,this.x2=n,this.y2=o,this.radius=h}).prototype.exec=function(i){i.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(t.Arc=function(i,s,n,o,h,l){this.x=i,this.y=s,this.radius=n,this.startAngle=o,this.endAngle=h,this.anticlockwise=!!l}).prototype.exec=function(i){i.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(t.QuadraticCurveTo=function(i,s,n,o){this.cpx=i,this.cpy=s,this.x=n,this.y=o}).prototype.exec=function(i){i.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(t.BezierCurveTo=function(i,s,n,o,h,l){this.cp1x=i,this.cp1y=s,this.cp2x=n,this.cp2y=o,this.x=h,this.y=l}).prototype.exec=function(i){i.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(t.Rect=function(i,s,n,o){this.x=i,this.y=s,this.w=n,this.h=o}).prototype.exec=function(i){i.rect(this.x,this.y,this.w,this.h)},(t.ClosePath=function(){}).prototype.exec=function(i){i.closePath()},(t.BeginPath=function(){}).prototype.exec=function(i){i.beginPath()},r=(t.Fill=function(i,s){this.style=i,this.matrix=s}).prototype,r.exec=function(i){if(this.style){i.fillStyle=this.style;var s=this.matrix;s&&(i.save(),i.transform(s.a,s.b,s.c,s.d,s.tx,s.ty)),i.fill(),s&&i.restore()}},r.linearGradient=function(i,s,n,o,h,l){for(var u=this.style=a._ctx.createLinearGradient(n,o,h,l),p=0,f=i.length;p<f;p++)u.addColorStop(s[p],i[p]);return u.props={colors:i,ratios:s,x0:n,y0:o,x1:h,y1:l,type:"linear"},this},r.radialGradient=function(i,s,n,o,h,l,u,p){for(var f=this.style=a._ctx.createRadialGradient(n,o,h,l,u,p),_=0,g=i.length;_<g;_++)f.addColorStop(s[_],i[_]);return f.props={colors:i,ratios:s,x0:n,y0:o,r0:h,x1:l,y1:u,r1:p,type:"radial"},this},r.bitmap=function(i,s){return(i.naturalWidth||i.getContext||i.readyState>=2)&&((this.style=a._ctx.createPattern(i,s||"")).props={image:i,repetition:s,type:"bitmap"}),this},r.path=!1,r=(t.Stroke=function(i,s){this.style=i,this.ignoreScale=s}).prototype,r.exec=function(i){this.style&&(i.strokeStyle=this.style,this.ignoreScale&&(i.save(),i.setTransform(1,0,0,1,0,0)),i.stroke(),this.ignoreScale&&i.restore())},r.linearGradient=t.Fill.prototype.linearGradient,r.radialGradient=t.Fill.prototype.radialGradient,r.bitmap=t.Fill.prototype.bitmap,r.path=!1,r=(t.StrokeStyle=function(i,s,n,o,h){this.width=i,this.caps=s,this.joints=n,this.miterLimit=o,this.ignoreScale=h}).prototype,r.exec=function(i){i.lineWidth=this.width==null?"1":this.width,i.lineCap=this.caps==null?"butt":isNaN(this.caps)?this.caps:a.STROKE_CAPS_MAP[this.caps],i.lineJoin=this.joints==null?"miter":isNaN(this.joints)?this.joints:a.STROKE_JOINTS_MAP[this.joints],i.miterLimit=this.miterLimit==null?"10":this.miterLimit,i.ignoreScale=this.ignoreScale!=null&&this.ignoreScale},r.path=!1,(t.StrokeDash=function(i,s){this.segments=i,this.offset=s||0}).prototype.exec=function(i){i.setLineDash&&(i.setLineDash(this.segments||t.StrokeDash.EMPTY_SEGMENTS),i.lineDashOffset=this.offset||0)},t.StrokeDash.EMPTY_SEGMENTS=[],(t.RoundRect=function(i,s,n,o,h,l,u,p){this.x=i,this.y=s,this.w=n,this.h=o,this.radiusTL=h,this.radiusTR=l,this.radiusBR=u,this.radiusBL=p}).prototype.exec=function(i){var s=(f<_?f:_)/2,n=0,o=0,h=0,l=0,u=this.x,p=this.y,f=this.w,_=this.h,g=this.radiusTL,v=this.radiusTR,b=this.radiusBR,y=this.radiusBL;g<0&&(g*=n=-1),g>s&&(g=s),v<0&&(v*=o=-1),v>s&&(v=s),b<0&&(b*=h=-1),b>s&&(b=s),y<0&&(y*=l=-1),y>s&&(y=s),i.moveTo(u+f-v,p),i.arcTo(u+f+v*o,p-v*o,u+f,p+v,v),i.lineTo(u+f,p+_-b),i.arcTo(u+f+b*h,p+_+b*h,u+f-b,p+_,b),i.lineTo(u+y,p+_),i.arcTo(u-y*l,p+_+y*l,u,p+_-y,y),i.lineTo(u,p+g),i.arcTo(u-g*n,p-g*n,u+g,p,g),i.closePath()},(t.Circle=function(i,s,n){this.x=i,this.y=s,this.radius=n}).prototype.exec=function(i){i.arc(this.x,this.y,this.radius,0,2*Math.PI)},(t.Ellipse=function(i,s,n,o){this.x=i,this.y=s,this.w=n,this.h=o}).prototype.exec=function(i){var s=this.x,n=this.y,o=this.w,h=this.h,l=.5522848,u=o/2*l,p=h/2*l,f=s+o,_=n+h,g=s+o/2,v=n+h/2;i.moveTo(s,v),i.bezierCurveTo(s,v-p,g-u,n,g,n),i.bezierCurveTo(g+u,n,f,v-p,f,v),i.bezierCurveTo(f,v+p,g+u,_,g,_),i.bezierCurveTo(g-u,_,s,v+p,s,v)},(t.PolyStar=function(i,s,n,o,h,l){this.x=i,this.y=s,this.radius=n,this.sides=o,this.pointSize=h,this.angle=l}).prototype.exec=function(i){var s=this.x,n=this.y,o=this.radius,h=(this.angle||0)/180*Math.PI,l=this.sides,u=1-(this.pointSize||0),p=Math.PI/l;i.moveTo(s+Math.cos(h)*o,n+Math.sin(h)*o);for(var f=0;f<l;f++)h+=p,u!=1&&i.lineTo(s+Math.cos(h)*o*u,n+Math.sin(h)*o*u),h+=p,i.lineTo(s+Math.cos(h)*o,n+Math.sin(h)*o);i.closePath()},a.beginCmd=new t.BeginPath,createjs.Graphics=a}(),this.createjs=this.createjs||{},function(){function a(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null,this._webGLRenderStyle=a._StageGL_NONE}var r=createjs.extend(a,createjs.EventDispatcher);a._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],a.suppressCrossDomainErrors=!1,a._snapToPixelEnabled=!1,a._StageGL_NONE=0,a._StageGL_SPRITE=1,a._StageGL_BITMAP=2;var t=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(a._hitTestCanvas=t,a._hitTestContext=t.getContext("2d"),t.width=t.height=1),r._getStage=function(){for(var e=this,i=createjs.Stage;e.parent;)e=e.parent;return e instanceof i?e:null},r.getStage=createjs.deprecate(r._getStage,"DisplayObject.getStage");try{Object.defineProperties(r,{stage:{get:r._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(e){this.bitmapCache&&(this.bitmapCache.cacheID=e)}},scale:{get:function(){return this.scaleX},set:function(e){this.scaleX=this.scaleY=e}}})}catch{}r.isVisible=function(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)},r.draw=function(e,i){var s=this.bitmapCache;return!(!s||i)&&s.draw(e)},r.updateContext=function(e){var i=this,s=i.mask,n=i._props.matrix;s&&s.graphics&&!s.graphics.isEmpty()&&(s.getMatrix(n),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),s.graphics.drawAsPath(e),e.clip(),n.invert(),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty)),this.getMatrix(n);var o=n.tx,h=n.ty;a._snapToPixelEnabled&&i.snapToPixel&&(o=o+(o<0?-.5:.5)|0,h=h+(h<0?-.5:.5)|0),e.transform(n.a,n.b,n.c,n.d,o,h),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},r.cache=function(e,i,s,n,o,h){this.bitmapCache||(this.bitmapCache=new createjs.BitmapCache),this.bitmapCache.define(this,e,i,s,n,o,h)},r.updateCache=function(e){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(e)},r.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},r.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},r.localToGlobal=function(e,i,s){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(e,i,s||new createjs.Point)},r.globalToLocal=function(e,i,s){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(e,i,s||new createjs.Point)},r.localToLocal=function(e,i,s,n){return n=this.localToGlobal(e,i,n),s.globalToLocal(n.x,n.y,n)},r.setTransform=function(e,i,s,n,o,h,l,u,p){return this.x=e||0,this.y=i||0,this.scaleX=s??1,this.scaleY=n??1,this.rotation=o||0,this.skewX=h||0,this.skewY=l||0,this.regX=u||0,this.regY=p||0,this},r.getMatrix=function(e){var i=this,s=e&&e.identity()||new createjs.Matrix2D;return i.transformMatrix?s.copy(i.transformMatrix):s.appendTransform(i.x,i.y,i.scaleX,i.scaleY,i.rotation,i.skewX,i.skewY,i.regX,i.regY)},r.getConcatenatedMatrix=function(e){for(var i=this,s=this.getMatrix(e);i=i.parent;)s.prependMatrix(i.getMatrix(i._props.matrix));return s},r.getConcatenatedDisplayProps=function(e){e=e?e.identity():new createjs.DisplayProps;var i=this,s=i.getMatrix(e.matrix);do e.prepend(i.visible,i.alpha,i.shadow,i.compositeOperation),i!=this&&s.prependMatrix(i.getMatrix(i._props.matrix));while(i=i.parent);return e},r.hitTest=function(e,i){var s=a._hitTestContext;s.setTransform(1,0,0,1,-e,-i),this.draw(s);var n=this._testHit(s);return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),n},r.set=function(e){for(var i in e)this[i]=e[i];return this},r.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var e=this.cacheCanvas;if(e){var i=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,e.width/i,e.height/i)}return null},r.getTransformedBounds=function(){return this._getBounds()},r.setBounds=function(e,i,s,n){if(e==null)return void(this._bounds=e);this._bounds=(this._bounds||new createjs.Rectangle).setValues(e,i,s,n)},r.clone=function(){return this._cloneProps(new a)},r.toString=function(){return"[DisplayObject (name="+this.name+")]"},r._updateState=null,r._cloneProps=function(e){return e.alpha=this.alpha,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=this.filters==null?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},r._applyShadow=function(e,i){i=i||Shadow.identity,e.shadowColor=i.color,e.shadowOffsetX=i.offsetX,e.shadowOffsetY=i.offsetY,e.shadowBlur=i.blur},r._tick=function(e){var i=this._listeners;i&&i.tick&&(e.target=null,e.propagationStopped=e.immediatePropagationStopped=!1,this.dispatchEvent(e))},r._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch{if(!a.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},r._getBounds=function(e,i){return this._transformBounds(this.getBounds(),e,i)},r._transformBounds=function(e,i,s){if(!e)return e;var n=e.x,o=e.y,h=e.width,l=e.height,u=this._props.matrix;u=s?u.identity():this.getMatrix(u),(n||o)&&u.appendTransform(0,0,1,1,0,0,0,-n,-o),i&&u.prependMatrix(i);var p=h*u.a,f=h*u.b,_=l*u.c,g=l*u.d,v=u.tx,b=u.ty,y=v,w=v,C=b,S=b;return(n=p+v)<y?y=n:n>w&&(w=n),(n=p+_+v)<y?y=n:n>w&&(w=n),(n=_+v)<y?y=n:n>w&&(w=n),(o=f+b)<C?C=o:o>S&&(S=o),(o=f+g+b)<C?C=o:o>S&&(S=o),(o=g+b)<C?C=o:o>S&&(S=o),e.setValues(y,C,w-y,S-C)},r._hasMouseEventListener=function(){for(var e=a._MOUSE_EVENTS,i=0,s=e.length;i<s;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function a(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var r=createjs.extend(a,createjs.DisplayObject);r._getNumChildren=function(){return this.children.length},r.getNumChildren=createjs.deprecate(r._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(r,{numChildren:{get:r._getNumChildren}})}catch{}r.initialize=a,r.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},r.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),s=0,n=i.length;s<n;s++){var o=i[s];o.isVisible()&&(t.save(),o.updateContext(t),o.draw(t),t.restore())}return!0},r.addChild=function(t){if(t==null)return t;var e=arguments.length;if(e>1){for(var i=0;i<e;i++)this.addChild(arguments[i]);return arguments[e-1]}var s=t.parent,n=s===this;return s&&s._removeChildAt(createjs.indexOf(s.children,t),n),t.parent=this,this.children.push(t),n||t.dispatchEvent("added"),t},r.addChildAt=function(t,e){var i=arguments.length,s=arguments[i-1];if(s<0||s>this.children.length)return arguments[i-2];if(i>2){for(var n=0;n<i-1;n++)this.addChildAt(arguments[n],s+n);return arguments[i-2]}var o=t.parent,h=o===this;return o&&o._removeChildAt(createjs.indexOf(o.children,t),h),t.parent=this,this.children.splice(e,0,t),h||t.dispatchEvent("added"),t},r.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,s=0;s<e;s++)i=i&&this.removeChild(arguments[s]);return i}return this._removeChildAt(createjs.indexOf(this.children,t))},r.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],s=0;s<e;s++)i[s]=arguments[s];i.sort(function(o,h){return h-o});for(var n=!0,s=0;s<e;s++)n=n&&this._removeChildAt(i[s]);return n}return this._removeChildAt(t)},r.removeAllChildren=function(){for(var t=this.children;t.length;)this._removeChildAt(0)},r.getChildAt=function(t){return this.children[t]},r.getChildByName=function(t){for(var e=this.children,i=0,s=e.length;i<s;i++)if(e[i].name==t)return e[i];return null},r.sortChildren=function(t){this.children.sort(t)},r.getChildIndex=function(t){return createjs.indexOf(this.children,t)},r.swapChildrenAt=function(t,e){var i=this.children,s=i[t],n=i[e];s&&n&&(i[t]=n,i[e]=s)},r.swapChildren=function(t,e){for(var i,s,n=this.children,o=0,h=n.length;o<h&&(n[o]==t&&(i=o),n[o]==e&&(s=o),i==null||s==null);o++);o!=h&&(n[i]=e,n[s]=t)},r.setChildIndex=function(t,e){var i=this.children,s=i.length;if(!(t.parent!=this||e<0||e>=s)){for(var n=0;n<s&&i[n]!=t;n++);n!=s&&n!=e&&(i.splice(n,1),i.splice(e,0,t))}},r.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},r.hitTest=function(t,e){return this.getObjectUnderPoint(t,e)!=null},r.getObjectsUnderPoint=function(t,e,i){var s=[],n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,s,i>0,i==1),s},r.getObjectUnderPoint=function(t,e,i){var s=this.localToGlobal(t,e);return this._getObjectsUnderPoint(s.x,s.y,null,i>0,i==1)},r.getBounds=function(){return this._getBounds(null,!0)},r.getTransformedBounds=function(){return this._getBounds()},r.clone=function(t){var e=this._cloneProps(new a);return t&&this._cloneChildren(e),e},r.toString=function(){return"[Container (name="+this.name+")]"},r._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},r._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,s=this.children.length;i<s;i++){var n=this.children[i].clone(!0);n.parent=t,e.push(n)}},r._removeChildAt=function(t,e){if(t<0||t>this.children.length-1)return!1;var i=this.children[t];return i&&(i.parent=null),this.children.splice(t,1),e||i.dispatchEvent("removed"),!0},r._getObjectsUnderPoint=function(t,e,i,s,n,o){if(!(o=o||0)&&!this._testMask(this,t,e))return null;var h,l=createjs.DisplayObject._hitTestContext;n=n||s&&this._hasMouseEventListener();for(var u=this.children,p=u.length,f=p-1;f>=0;f--){var _=u[f],g=_.hitArea;if(_.visible&&(g||_.isVisible())&&(!s||_.mouseEnabled)&&(g||this._testMask(_,t,e)))if(!g&&_ instanceof a){var v=_._getObjectsUnderPoint(t,e,i,s,n,o+1);if(!i&&v)return s&&!this.mouseChildren?this:v}else{if(s&&!n&&!_._hasMouseEventListener())continue;var b=_.getConcatenatedDisplayProps(_._props);if(h=b.matrix,g&&(h.appendMatrix(g.getMatrix(g._props.matrix)),b.alpha=g.alpha),l.globalAlpha=b.alpha,l.setTransform(h.a,h.b,h.c,h.d,h.tx-t,h.ty-e),(g||_).draw(l),!this._testHit(l))continue;if(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,2,2),!i)return s&&!this.mouseChildren?this:_;i.push(_)}}return null},r._testMask=function(t,e,i){var s=t.mask;if(!s||!s.graphics||s.graphics.isEmpty())return!0;var n=this._props.matrix,o=t.parent;n=o?o.getConcatenatedMatrix(n):n.identity(),n=s.getMatrix(s._props.matrix).prependMatrix(n);var h=createjs.DisplayObject._hitTestContext;return h.setTransform(n.a,n.b,n.c,n.d,n.tx-e,n.ty-i),s.graphics.drawAsPath(h),h.fillStyle="#000",h.fill(),!!this._testHit(h)&&(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!0)},r._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var s=this._props.matrix;s=e?s.identity():this.getMatrix(s),t&&s.prependMatrix(t);for(var n=this.children.length,o=null,h=0;h<n;h++){var l=this.children[h];l.visible&&(i=l._getBounds(s))&&(o?o.extend(i.x,i.y,i.width,i.height):o=i.clone())}return o},createjs.Container=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(t){this.Container_constructor(),this.autoClear=!0,this.canvas=typeof t=="string"?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var r=createjs.extend(a,createjs.Container);r._get_nextStage=function(){return this._nextStage},r._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(r,{nextStage:{get:r._get_nextStage,set:r._set_nextStage}})}catch{}r.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},r.tick=function(t){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var e=new createjs.Event("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},r.handleEvent=function(t){t.type=="tick"&&this.update(t)},r.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},r.toDataURL=function(t,e){var i,s=this.canvas.getContext("2d"),n=this.canvas.width,o=this.canvas.height;if(t){i=s.getImageData(0,0,n,o);var h=s.globalCompositeOperation;s.globalCompositeOperation="destination-over",s.fillStyle=t,s.fillRect(0,0,n,o)}var l=this.canvas.toDataURL(e||"image/png");return t&&(s.putImageData(i,0,0),s.globalCompositeOperation=h),l},r.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,t==0&&this._testMouseOver(!0)),t==null)t=20;else if(t<=0)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},r.enableDOMEvents=function(t){t==null&&(t=!0);var e,i,s=this._eventListeners;if(!t&&s){for(e in s)i=s[e],i.t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!s&&this.canvas){var n=window.addEventListener?window:document,o=this;s=this._eventListeners={},s.mouseup={t:n,f:function(h){o._handleMouseUp(h)}},s.mousemove={t:n,f:function(h){o._handleMouseMove(h)}},s.dblclick={t:this.canvas,f:function(h){o._handleDoubleClick(h)}},s.mousedown={t:this.canvas,f:function(h){o._handleMouseDown(h)}};for(e in s)i=s[e],i.t.addEventListener(e,i.f,!1)}},r.clone=function(){throw"Stage cannot be cloned."},r.toString=function(){return"[Stage (name="+this.name+")]"},r._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch{e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),s=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),n=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,o=parseInt(n.paddingLeft)+parseInt(n.borderLeftWidth),h=parseInt(n.paddingTop)+parseInt(n.borderTopWidth),l=parseInt(n.paddingRight)+parseInt(n.borderRightWidth),u=parseInt(n.paddingBottom)+parseInt(n.borderBottomWidth);return{left:e.left+i+o,right:e.right+i-l,top:e.top+s+h,bottom:e.bottom+s-u}},r._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},r._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},r._handlePointerMove=function(t,e,i,s,n){if((!this._prevStage||n!==void 0)&&this.canvas){var o=this._nextStage,h=this._getPointerData(t),l=h.inBounds;this._updatePointerPosition(t,e,i,s),(l||h.inBounds||this.mouseMoveOutside)&&(t===-1&&h.inBounds==!l&&this._dispatchMouseEvent(this,l?"mouseleave":"mouseenter",!1,t,h,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,h,e),this._dispatchMouseEvent(h.target,"pressmove",!0,t,h,e)),o&&o._handlePointerMove(t,e,i,s,null)}},r._updatePointerPosition=function(t,e,i,s){var n=this._getElementRect(this.canvas);i-=n.left,s-=n.top;var o=this.canvas.width,h=this.canvas.height;i/=(n.right-n.left)/o,s/=(n.bottom-n.top)/h;var l=this._getPointerData(t);(l.inBounds=i>=0&&s>=0&&i<=o-1&&s<=h-1)?(l.x=i,l.y=s):this.mouseMoveOutside&&(l.x=i<0?0:i>o-1?o-1:i,l.y=s<0?0:s>h-1?h-1:s),l.posEvtObj=e,l.rawX=i,l.rawY=s,t!==this._primaryPointerID&&t!==-1||(this.mouseX=l.x,this.mouseY=l.y,this.mouseInBounds=l.inBounds)},r._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},r._handlePointerUp=function(t,e,i,s){var n=this._nextStage,o=this._getPointerData(t);if(!this._prevStage||s!==void 0){var h=null,l=o.target;s||!l&&!n||(h=this._getObjectsUnderPoint(o.x,o.y,null,!0)),o.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,o,e,h),o.down=!1),h==l&&this._dispatchMouseEvent(l,"click",!0,t,o,e),this._dispatchMouseEvent(l,"pressup",!0,t,o,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):o.target=null,n&&n._handlePointerUp(t,e,i,s||h&&this)}},r._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},r._handlePointerDown=function(t,e,i,s,n){this.preventSelection&&e.preventDefault(),this._primaryPointerID!=null&&t!==-1||(this._primaryPointerID=t),s!=null&&this._updatePointerPosition(t,e,i,s);var o=null,h=this._nextStage,l=this._getPointerData(t);n||(o=l.target=this._getObjectsUnderPoint(l.x,l.y,null,!0)),l.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,l,e,o),l.down=!0),this._dispatchMouseEvent(o,"mousedown",!0,t,l,e),h&&h._handlePointerDown(t,e,i,s,n||o&&this)},r._testMouseOver=function(t,e,i){if(!this._prevStage||e!==void 0){var s=this._nextStage;if(!this._mouseOverIntervalID)return void(s&&s._testMouseOver(t,e,i));var n=this._getPointerData(-1);if(n&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var o,h,l,u=n.posEvtObj,p=i||u&&u.target==this.canvas,f=null,_=-1,g="";!e&&(t||this.mouseInBounds&&p)&&(f=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var v=this._mouseOverTarget||[],b=v[v.length-1],y=this._mouseOverTarget=[];for(o=f;o;)y.unshift(o),g||(g=o.cursor),o=o.parent;for(this.canvas.style.cursor=g,!e&&i&&(i.canvas.style.cursor=g),h=0,l=y.length;h<l&&y[h]==v[h];h++)_=h;for(b!=f&&this._dispatchMouseEvent(b,"mouseout",!0,-1,n,u,f),h=v.length-1;h>_;h--)this._dispatchMouseEvent(v[h],"rollout",!1,-1,n,u,f);for(h=y.length-1;h>_;h--)this._dispatchMouseEvent(y[h],"rollover",!1,-1,n,u,b);b!=f&&this._dispatchMouseEvent(f,"mouseover",!0,-1,n,u,b),s&&s._testMouseOver(t,e||f&&this,i||p&&this)}}},r._handleDoubleClick=function(t,e){var i=null,s=this._nextStage,n=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(n.x,n.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,n,t)),s&&s._handleDoubleClick(t,e||i&&this)},r._dispatchMouseEvent=function(t,e,i,s,n,o,h){if(t&&(i||t.hasEventListener(e))){var l=new createjs.MouseEvent(e,i,!1,n.x,n.y,o,s,s===this._primaryPointerID||s===-1,n.rawX,n.rawY,h);t.dispatchEvent(l)}},createjs.Stage=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){function a(t,e){if(this.Stage_constructor(t),e!==void 0){if(typeof e!="object")throw"Invalid options object";var i=e.premultiply,s=e.transparent,n=e.antialias,o=e.preserveBuffer,h=e.autoPurge}this.vocalDebug=!1,this._preserveBuffer=o||!1,this._antialias=n||!1,this._transparent=s||!1,this._premultiply=i||!1,this._autoPurge=void 0,this.autoPurge=h,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._clearColor={r:.5,g:.5,b:.5,a:0},this._maxCardsPerBatch=a.DEFAULT_MAX_BATCH_SIZE,this._activeShader=null,this._vertices=null,this._vertexPositionBuffer=null,this._uvs=null,this._uvPositionBuffer=null,this._indices=null,this._textureIndexBuffer=null,this._alphas=null,this._alphaBuffer=null,this._textureDictionary=[],this._textureIDs={},this._batchTextures=[],this._baseTextures=[],this._batchTextureCount=8,this._lastTextureInsert=-1,this._batchID=0,this._drawID=0,this._slotBlacklist=[],this._isDrawing=0,this._lastTrackedCanvas=0,this.isCacheControlled=!1,this._cacheContainer=new createjs.Container,this._initializeWebGL()}var r=createjs.extend(a,createjs.Stage);a.buildUVRects=function(t,e,i){if(!t||!t._frames)return null;e===void 0&&(e=-1),i===void 0&&(i=!1);for(var s=e!=-1&&i?e:0,n=e!=-1&&i?e+1:t._frames.length,o=s;o<n;o++){var h=t._frames[o];if(!(h.uvRect||h.image.width<=0||h.image.height<=0)){var l=h.rect;h.uvRect={t:l.y/h.image.height,l:l.x/h.image.width,b:(l.y+l.height)/h.image.height,r:(l.x+l.width)/h.image.width}}}return t._frames[e!=-1?e:0].uvRect||{t:0,l:0,b:1,r:1}},a.isWebGLActive=function(t){return t&&t instanceof WebGLRenderingContext&&typeof WebGLRenderingContext<"u"},a.VERTEX_PROPERTY_COUNT=6,a.INDICIES_PER_CARD=6,a.DEFAULT_MAX_BATCH_SIZE=1e4,a.WEBGL_MAX_INDEX_NUM=Math.pow(2,16),a.UV_RECT={t:0,l:0,b:1,r:1};try{a.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]),a.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),a.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch{}a.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;",a.REGULAR_VERTEX_HEADER=a.REGULAR_VARYING_HEADER+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",a.REGULAR_FRAGMENT_HEADER=a.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",a.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",a.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",a.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",a.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",a.PARTICLE_VERTEX_BODY=a.REGULAR_VERTEX_BODY,a.PARTICLE_FRAGMENT_BODY=a.REGULAR_FRAGMENT_BODY,a.COVER_VARYING_HEADER="precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;",a.COVER_VERTEX_HEADER=a.COVER_VARYING_HEADER+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;",a.COVER_FRAGMENT_HEADER=a.COVER_VARYING_HEADER+"uniform sampler2D uSampler;",a.COVER_VERTEX_BODY="void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}",a.COVER_FRAGMENT_BODY="void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}",r._get_isWebGL=function(){return!!this._webGLContext},r._set_autoPurge=function(t){t=isNaN(t)?1200:t,t!=-1&&(t=t<10?10:t),this._autoPurge=t},r._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(r,{isWebGL:{get:r._get_isWebGL},autoPurge:{get:r._get_autoPurge,set:r._set_autoPurge}})}catch{}r._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var t={depth:!1,alpha:this._transparent,stencil:!0,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer},e=this._webGLContext=this._fetchWebGLContext(this.canvas,t);if(!e)return null;this.updateSimultaneousTextureCount(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),this._maxTextureSlots=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._createBuffers(e),this._initTextures(e),e.disable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply),this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else this._webGLContext=null;return this._webGLContext},r.update=function(t){if(this.canvas){if(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext)this._batchDraw(this,this._webGLContext),this._autoPurge==-1||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge);else{var e=this.canvas.getContext("2d");e.save(),this.updateContext(e),this.draw(e,!1),e.restore()}this.dispatchEvent("drawend")}},r.clear=function(){if(this.canvas)if(a.isWebGLActive(this._webGLContext)){var t=this._webGLContext,e=this._clearColor,i=this._transparent?e.a:1;this._webGLContext.clearColor(e.r*i,e.g*i,e.b*i,i),t.clear(t.COLOR_BUFFER_BIT),this._webGLContext.clearColor(e.r,e.g,e.b,e.a)}else this.Stage_clear()},r.draw=function(t,e){if(t===this._webGLContext&&a.isWebGLActive(this._webGLContext)){var i=this._webGLContext;return this._batchDraw(this,i,e),!0}return this.Stage_draw(t,e)},r.cacheDraw=function(t,e,i){if(a.isWebGLActive(this._webGLContext)){var s=this._webGLContext;return this._cacheDraw(s,t,e,i),!0}return!1},r.protectTextureSlot=function(t,e){if(t>this._maxTextureSlots||t<0)throw"Slot outside of acceptable range";this._slotBlacklist[t]=!!e},r.getTargetRenderTexture=function(t,e,i){var s,n=!1,o=this._webGLContext;if(t.__lastRT!==void 0&&t.__lastRT===t.__rtA&&(n=!0),n?(t.__rtB===void 0?t.__rtB=this.getRenderBufferTexture(e,i):(e==t.__rtB._width&&i==t.__rtB._height||this.resizeTexture(t.__rtB,e,i),this.setTextureParams(o)),s=t.__rtB):(t.__rtA===void 0?t.__rtA=this.getRenderBufferTexture(e,i):(e==t.__rtA._width&&i==t.__rtA._height||this.resizeTexture(t.__rtA,e,i),this.setTextureParams(o)),s=t.__rtA),!s)throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances";return t.__lastRT=s,s},r.releaseTexture=function(t){var e,i;if(t){if(t.children)for(e=0,i=t.children.length;e<i;e++)this.releaseTexture(t.children[e]);t.cacheCanvas&&t.uncache();var s=void 0;if(t._storeID!==void 0){if(t===this._textureDictionary[t._storeID])return this._killTextureObject(t),void(t._storeID=void 0);s=t}else if(t._webGLRenderStyle===2)s=t.image;else if(t._webGLRenderStyle===1){for(e=0,i=t.spriteSheet._images.length;e<i;e++)this.releaseTexture(t.spriteSheet._images[e]);return}if(s===void 0)return void(this.vocalDebug&&console.log("No associated texture found on release"));this._killTextureObject(this._textureDictionary[s._storeID]),s._storeID=void 0}},r.purgeTextures=function(t){t==null&&(t=100);for(var e=this._textureDictionary,i=e.length,s=0;s<i;s++){var n=e[s];n&&n._drawID+t<=this._drawID&&this._killTextureObject(n)}},r.updateSimultaneousTextureCount=function(t){var e=this._webGLContext,i=!1;for((t<1||isNaN(t))&&(t=1),this._batchTextureCount=t;!i;)try{this._activeShader=this._fetchShaderProgram(e),i=!0}catch(s){if(this._batchTextureCount==1)throw"Cannot compile shader "+s;this._batchTextureCount-=4,this._batchTextureCount<1&&(this._batchTextureCount=1),this.vocalDebug&&console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}},r.updateViewport=function(t,e){this._viewportWidth=0|t,this._viewportHeight=0|e;var i=this._webGLContext;i&&(i.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,.1,0]),this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._projectionMatrixFlip.set(this._projectionMatrix),this._projectionMatrixFlip[5]*=-1,this._projectionMatrixFlip[13]*=-1)},r.getFilterShader=function(t){t||(t=this);var e=this._webGLContext,i=this._activeShader;if(t._builtShader)i=t._builtShader,t.shaderParamSetup&&(e.useProgram(i),t.shaderParamSetup(e,this,i));else try{i=this._fetchShaderProgram(e,"filter",t.VTX_SHADER_BODY,t.FRAG_SHADER_BODY,t.shaderParamSetup&&t.shaderParamSetup.bind(t)),t._builtShader=i,i._name=t.toString()}catch(s){console&&console.log("SHADER SWITCH FAILURE",s)}return i},r.getBaseTexture=function(t,e){var i=Math.ceil(t>0?t:1)||1,s=Math.ceil(e>0?e:1)||1,n=this._webGLContext,o=n.createTexture();return this.resizeTexture(o,i,s),this.setTextureParams(n,!1),o},r.resizeTexture=function(t,e,i){var s=this._webGLContext;s.bindTexture(s.TEXTURE_2D,t),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,i,0,s.RGBA,s.UNSIGNED_BYTE,null),t.width=e,t.height=i},r.getRenderBufferTexture=function(t,e){var i=this._webGLContext,s=this.getBaseTexture(t,e);if(!s)return null;var n=i.createFramebuffer();return n?(s.width=t,s.height=e,i.bindFramebuffer(i.FRAMEBUFFER,n),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),n._renderTexture=s,s._frameBuffer=n,s._storeID=this._textureDictionary.length,this._textureDictionary[s._storeID]=s,i.bindFramebuffer(i.FRAMEBUFFER,null),s):null},r.setTextureParams=function(t,e){e&&this._antialias?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},r.setClearColor=function(t){var e,i,s,n,o;typeof t=="string"?t.indexOf("#")==0?(t.length==4&&(t="#"+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)+t.charAt(3)+t.charAt(3)),e=+("0x"+t.slice(1,3))/255,i=+("0x"+t.slice(3,5))/255,s=+("0x"+t.slice(5,7))/255,n=+("0x"+t.slice(7,9))/255):t.indexOf("rgba(")==0&&(o=t.slice(5,-1).split(","),e=Number(o[0])/255,i=Number(o[1])/255,s=Number(o[2])/255,n=Number(o[3])):(e=((4278190080&t)>>>24)/255,i=((16711680&t)>>>16)/255,s=((65280&t)>>>8)/255,n=(255&t)/255),this._clearColor.r=e||0,this._clearColor.g=i||0,this._clearColor.b=s||0,this._clearColor.a=n||0,this._webGLContext&&this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)},r.toString=function(){return"[StageGL (name="+this.name+")]"},r._fetchWebGLContext=function(t,e){var i;try{i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}catch{}if(i)i.viewportWidth=t.width,i.viewportHeight=t.height;else{var s="Could not initialize WebGL";console.error?console.error(s):console.log(s)}return i},r._fetchShaderProgram=function(t,e,i,s,n){t.useProgram(null);var o,h;switch(e){case"filter":h=a.COVER_VERTEX_HEADER+(i||a.COVER_VERTEX_BODY),o=a.COVER_FRAGMENT_HEADER+(s||a.COVER_FRAGMENT_BODY);break;case"particle":h=a.REGULAR_VERTEX_HEADER+a.PARTICLE_VERTEX_BODY,o=a.REGULAR_FRAGMENT_HEADER+a.PARTICLE_FRAGMENT_BODY;break;case"override":h=a.REGULAR_VERTEX_HEADER+(i||a.REGULAR_VERTEX_BODY),o=a.REGULAR_FRAGMENT_HEADER+(s||a.REGULAR_FRAGMENT_BODY);break;case"regular":default:h=a.REGULAR_VERTEX_HEADER+a.REGULAR_VERTEX_BODY,o=a.REGULAR_FRAGMENT_HEADER+a.REGULAR_FRAGMENT_BODY}var l=this._createShader(t,t.VERTEX_SHADER,h),u=this._createShader(t,t.FRAGMENT_SHADER,o),p=t.createProgram();if(t.attachShader(p,l),t.attachShader(p,u),t.linkProgram(p),p._type=e,!t.getProgramParameter(p,t.LINK_STATUS))throw t.useProgram(this._activeShader),t.getProgramInfoLog(p);switch(t.useProgram(p),e){case"filter":p.vertexPositionAttribute=t.getAttribLocation(p,"vertexPosition"),t.enableVertexAttribArray(p.vertexPositionAttribute),p.uvPositionAttribute=t.getAttribLocation(p,"uvPosition"),t.enableVertexAttribArray(p.uvPositionAttribute),p.samplerUniform=t.getUniformLocation(p,"uSampler"),t.uniform1i(p.samplerUniform,0),p.uprightUniform=t.getUniformLocation(p,"uUpright"),t.uniform1f(p.uprightUniform,0),n&&n(t,this,p);break;case"override":case"particle":case"regular":default:p.vertexPositionAttribute=t.getAttribLocation(p,"vertexPosition"),t.enableVertexAttribArray(p.vertexPositionAttribute),p.uvPositionAttribute=t.getAttribLocation(p,"uvPosition"),t.enableVertexAttribArray(p.uvPositionAttribute),p.textureIndexAttribute=t.getAttribLocation(p,"textureIndex"),t.enableVertexAttribArray(p.textureIndexAttribute),p.alphaAttribute=t.getAttribLocation(p,"objectAlpha"),t.enableVertexAttribArray(p.alphaAttribute);for(var f=[],_=0;_<this._batchTextureCount;_++)f[_]=_;p.samplerData=f,p.samplerUniform=t.getUniformLocation(p,"uSampler"),t.uniform1iv(p.samplerUniform,f),p.pMatrixUniform=t.getUniformLocation(p,"pMatrix")}return t.useProgram(this._activeShader),p},r._createShader=function(t,e,i){i=i.replace(/{{count}}/g,this._batchTextureCount);for(var s="",n=1;n<this._batchTextureCount;n++)s+="} else if (indexPicker <= "+n+".5) { color = texture2D(uSampler["+n+"], vTextureCoord);";i=i.replace(/{{alternates}}/g,s),i=i.replace(/{{fragColor}}/g,this._premultiply?a.REGULAR_FRAG_COLOR_PREMULTIPLY:a.REGULAR_FRAG_COLOR_NORMAL);var o=t.createShader(e);if(t.shaderSource(o,i),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw t.getShaderInfoLog(o);return o},r._createBuffers=function(t){var e,i,s,n=this._maxCardsPerBatch*a.INDICIES_PER_CARD,o=this._vertexPositionBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),e=2;var h=this._vertices=new Float32Array(n*e);for(i=0,s=h.length;i<s;i+=e)h[i]=h[i+1]=0;t.bufferData(t.ARRAY_BUFFER,h,t.DYNAMIC_DRAW),o.itemSize=e,o.numItems=n;var l=this._uvPositionBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),e=2;var u=this._uvs=new Float32Array(n*e);for(i=0,s=u.length;i<s;i+=e)u[i]=u[i+1]=0;t.bufferData(t.ARRAY_BUFFER,u,t.DYNAMIC_DRAW),l.itemSize=e,l.numItems=n;var p=this._textureIndexBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,p),e=1;var f=this._indices=new Float32Array(n*e);for(i=0,s=f.length;i<s;i++)f[i]=0;t.bufferData(t.ARRAY_BUFFER,f,t.DYNAMIC_DRAW),p.itemSize=e,p.numItems=n;var _=this._alphaBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,_),e=1;var g=this._alphas=new Float32Array(n*e);for(i=0,s=g.length;i<s;i++)g[i]=1;t.bufferData(t.ARRAY_BUFFER,g,t.DYNAMIC_DRAW),_.itemSize=e,_.numItems=n},r._initTextures=function(){this._lastTextureInsert=-1,this._textureDictionary=[],this._textureIDs={},this._baseTextures=[],this._batchTextures=[];for(var t=0;t<this._batchTextureCount;t++){var e=this.getBaseTexture();if(this._baseTextures[t]=this._batchTextures[t]=e,!e)throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}},r._loadTextureImage=function(t,e){var i=e.src;i||(e._isCanvas=!0,i=e.src="canvas_"+this._lastTrackedCanvas++);var s=this._textureIDs[i];s===void 0&&(s=this._textureIDs[i]=this._textureDictionary.length),this._textureDictionary[s]===void 0&&(this._textureDictionary[s]=this.getBaseTexture());var n=this._textureDictionary[s];if(n)n._batchID=this._batchID,n._storeID=s,n._imageData=e,this._insertTextureInBatch(t,n),e._storeID=s,e.complete||e.naturalWidth||e._isCanvas?this._updateTextureImageData(t,e):e.addEventListener("load",this._updateTextureImageData.bind(this,t,e));else{var o="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances";console.error&&console.error(o)||console.log(o),n=this._baseTextures[0],n._batchID=this._batchID,n._storeID=-1,n._imageData=n,this._insertTextureInBatch(t,n)}return n},r._updateTextureImageData=function(t,e){var i=e.width&e.width-1||e.height&e.height-1,s=this._textureDictionary[e._storeID];t.activeTexture(t.TEXTURE0+s._activeIndex),t.bindTexture(t.TEXTURE_2D,s),s.isPOT=!i,this.setTextureParams(t,s.isPOT);try{t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}catch(o){var n=`
An error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins`;console.error?(console.error(n),console.error(o)):console&&(console.log(n),console.log(o))}e._invalid=!1,s._w=e.width,s._h=e.height,this.vocalDebug&&(i&&console.warn("NPOT(Non Power of Two) Texture: "+e.src),(e.width>t.MAX_TEXTURE_SIZE||e.height>t.MAX_TEXTURE_SIZE)&&console&&console.error("Oversized Texture: "+e.width+"x"+e.height+" vs "+t.MAX_TEXTURE_SIZE+"max"))},r._insertTextureInBatch=function(t,e){if(this._batchTextures[e._activeIndex]!==e){var i=-1,s=(this._lastTextureInsert+1)%this._batchTextureCount,n=s;do{if(this._batchTextures[n]._batchID!=this._batchID&&!this._slotBlacklist[n]){i=n;break}n=(n+1)%this._batchTextureCount}while(n!==s);i===-1&&(this.batchReason="textureOverflow",this._drawBuffers(t),this.batchCardCount=0,i=s),this._batchTextures[i]=e,e._activeIndex=i;var o=e._imageData;o&&o._invalid&&e._drawID!==void 0?this._updateTextureImageData(t,o):(t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e),this.setTextureParams(t)),this._lastTextureInsert=i}else{var o=e._imageData;e._storeID!=null&&o&&o._invalid&&this._updateTextureImageData(t,o)}e._drawID=this._drawID,e._batchID=this._batchID},r._killTextureObject=function(t){if(t){var e=this._webGLContext;if(t._storeID!==void 0&&t._storeID>=0){this._textureDictionary[t._storeID]=void 0;for(var i in this._textureIDs)this._textureIDs[i]==t._storeID&&delete this._textureIDs[i];t._imageData&&(t._imageData._storeID=void 0),t._imageData=t._storeID=void 0}t._activeIndex!==void 0&&this._batchTextures[t._activeIndex]===t&&(this._batchTextures[t._activeIndex]=this._baseTextures[t._activeIndex]);try{t._frameBuffer&&e.deleteFramebuffer(t._frameBuffer),t._frameBuffer=void 0}catch(s){this.vocalDebug&&console.log(s)}try{e.deleteTexture(t)}catch(s){this.vocalDebug&&console.log(s)}}},r._backupBatchTextures=function(t,e){var i=this._webGLContext;this._backupTextures||(this._backupTextures=[]),e===void 0&&(e=this._backupTextures);for(var s=0;s<this._batchTextureCount;s++)i.activeTexture(i.TEXTURE0+s),t?this._batchTextures[s]=e[s]:(e[s]=this._batchTextures[s],this._batchTextures[s]=this._baseTextures[s]),i.bindTexture(i.TEXTURE_2D,this._batchTextures[s]),this.setTextureParams(i,this._batchTextures[s].isPOT);t&&e===this._backupTextures&&(this._backupTextures=[])},r._batchDraw=function(t,e,i){this._isDrawing>0&&this._drawBuffers(e),this._isDrawing++,this._drawID++,this.batchCardCount=0,this.depth=0,this._appendToBatchGroup(t,e,new createjs.Matrix2D,this.alpha,i),this.batchReason="drawFinish",this._drawBuffers(e),this._isDrawing--},r._cacheDraw=function(t,e,i,s){var n,o=this._activeShader,h=this._slotBlacklist,l=this._maxTextureSlots-1,u=this._viewportWidth,p=this._viewportHeight;this.protectTextureSlot(l,!0);var f=e.getMatrix();f=f.clone(),f.scale(1/s.scale,1/s.scale),f=f.invert(),f.translate(-s.offX/s.scale*e.scaleX,-s.offY/s.scale*e.scaleY);var _=this._cacheContainer;_.children=[e],_.transformMatrix=f,this._backupBatchTextures(!1),i&&i.length?this._drawFilters(e,i,s):this.isCacheControlled?(t.clear(t.COLOR_BUFFER_BIT),this._batchDraw(_,t,!0)):(t.activeTexture(t.TEXTURE0+l),e.cacheCanvas=this.getTargetRenderTexture(e,s._drawWidth,s._drawHeight),n=e.cacheCanvas,t.bindFramebuffer(t.FRAMEBUFFER,n._frameBuffer),this.updateViewport(s._drawWidth,s._drawHeight),this._projectionMatrix=this._projectionMatrixFlip,t.clear(t.COLOR_BUFFER_BIT),this._batchDraw(_,t,!0),t.bindFramebuffer(t.FRAMEBUFFER,null),this.updateViewport(u,p)),this._backupBatchTextures(!0),this.protectTextureSlot(l,!1),this._activeShader=o,this._slotBlacklist=h},r._drawFilters=function(t,e,i){var s,n=this._webGLContext,o=this._maxTextureSlots-1,h=this._viewportWidth,l=this._viewportHeight,u=this._cacheContainer,p=e.length;n.activeTexture(n.TEXTURE0+o),s=this.getTargetRenderTexture(t,i._drawWidth,i._drawHeight),n.bindFramebuffer(n.FRAMEBUFFER,s._frameBuffer),this.updateViewport(i._drawWidth,i._drawHeight),n.clear(n.COLOR_BUFFER_BIT),this._batchDraw(u,n,!0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),this.setTextureParams(n);var f=!1,_=0,g=e[_];do this._activeShader=this.getFilterShader(g),this._activeShader&&(n.activeTexture(n.TEXTURE0+o),s=this.getTargetRenderTexture(t,i._drawWidth,i._drawHeight),n.bindFramebuffer(n.FRAMEBUFFER,s._frameBuffer),n.viewport(0,0,i._drawWidth,i._drawHeight),n.clear(n.COLOR_BUFFER_BIT),this._drawCover(n,f),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),this.setTextureParams(n),(p>1||e[0]._multiPass)&&(f=!f),g=g._multiPass!==null?g._multiPass:e[++_]);while(g);this.isCacheControlled?(n.bindFramebuffer(n.FRAMEBUFFER,null),this.updateViewport(h,l),this._activeShader=this.getFilterShader(this),n.clear(n.COLOR_BUFFER_BIT),this._drawCover(n,f)):(f&&(n.activeTexture(n.TEXTURE0+o),s=this.getTargetRenderTexture(t,i._drawWidth,i._drawHeight),n.bindFramebuffer(n.FRAMEBUFFER,s._frameBuffer),this._activeShader=this.getFilterShader(this),n.viewport(0,0,i._drawWidth,i._drawHeight),n.clear(n.COLOR_BUFFER_BIT),this._drawCover(n,!f)),n.bindFramebuffer(n.FRAMEBUFFER,null),this.updateViewport(h,l),t.cacheCanvas=s)},r._appendToBatchGroup=function(t,e,i,s,n){t._glMtx||(t._glMtx=new createjs.Matrix2D);var o=t._glMtx;o.copy(i),t.transformMatrix?o.appendMatrix(t.transformMatrix):o.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY);for(var h,l,u,p,f=t.children.length,_=0;_<f;_++){var g=t.children[_];if(g.visible&&s)if(g.cacheCanvas&&!n||(g._updateState&&g._updateState(),!g.children)){this.batchCardCount+1>this._maxCardsPerBatch&&(this.batchReason="vertexOverflow",this._drawBuffers(e),this.batchCardCount=0),g._glMtx||(g._glMtx=new createjs.Matrix2D);var v=g._glMtx;v.copy(o),g.transformMatrix?v.appendMatrix(g.transformMatrix):v.appendTransform(g.x,g.y,g.scaleX,g.scaleY,g.rotation,g.skewX,g.skewY,g.regX,g.regY);var b,y,w,C,S,A,j=g.cacheCanvas&&!n;if(g._webGLRenderStyle===2||j)w=!n&&g.cacheCanvas||g.image;else{if(g._webGLRenderStyle!==1||(C=g.spriteSheet.getFrame(g.currentFrame))===null)continue;w=C.image}var F=this._uvs,R=this._vertices,V=this._indices,O=this._alphas;if(w){if(w._storeID===void 0)S=this._loadTextureImage(e,w),this._insertTextureInBatch(e,S);else{if(!(S=this._textureDictionary[w._storeID])){this.vocalDebug&&console.log("Texture should not be looked up while not being stored.");continue}S._batchID!==this._batchID&&this._insertTextureInBatch(e,S)}if(y=S._activeIndex,g._webGLRenderStyle===2||j)!j&&g.sourceRect?(g._uvRect||(g._uvRect={}),A=g.sourceRect,b=g._uvRect,b.t=A.y/w.height,b.l=A.x/w.width,b.b=(A.y+A.height)/w.height,b.r=(A.x+A.width)/w.width,h=0,l=0,u=A.width+h,p=A.height+l):(b=a.UV_RECT,j?(A=g.bitmapCache,h=A.x+A._filterOffX/A.scale,l=A.y+A._filterOffY/A.scale,u=A._drawWidth/A.scale+h,p=A._drawHeight/A.scale+l):(h=0,l=0,u=w.width+h,p=w.height+l));else if(g._webGLRenderStyle===1){var Y=C.rect;b=C.uvRect,b||(b=a.buildUVRects(g.spriteSheet,g.currentFrame,!1)),h=-C.regX,l=-C.regY,u=Y.width-C.regX,p=Y.height-C.regY}var k=this.batchCardCount*a.INDICIES_PER_CARD,M=2*k;R[M]=h*v.a+l*v.c+v.tx,R[M+1]=h*v.b+l*v.d+v.ty,R[M+2]=h*v.a+p*v.c+v.tx,R[M+3]=h*v.b+p*v.d+v.ty,R[M+4]=u*v.a+l*v.c+v.tx,R[M+5]=u*v.b+l*v.d+v.ty,R[M+6]=R[M+2],R[M+7]=R[M+3],R[M+8]=R[M+4],R[M+9]=R[M+5],R[M+10]=u*v.a+p*v.c+v.tx,R[M+11]=u*v.b+p*v.d+v.ty,F[M]=b.l,F[M+1]=b.t,F[M+2]=b.l,F[M+3]=b.b,F[M+4]=b.r,F[M+5]=b.t,F[M+6]=b.l,F[M+7]=b.b,F[M+8]=b.r,F[M+9]=b.t,F[M+10]=b.r,F[M+11]=b.b,V[k]=V[k+1]=V[k+2]=V[k+3]=V[k+4]=V[k+5]=y,O[k]=O[k+1]=O[k+2]=O[k+3]=O[k+4]=O[k+5]=g.alpha*s,this.batchCardCount++}}else this._appendToBatchGroup(g,e,o,g.alpha*s)}},r._drawBuffers=function(t){if(!(this.batchCardCount<=0)){this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason);var e=this._activeShader,i=this._vertexPositionBuffer,s=this._textureIndexBuffer,n=this._uvPositionBuffer,o=this._alphaBuffer;t.useProgram(e),t.bindBuffer(t.ARRAY_BUFFER,i),t.vertexAttribPointer(e.vertexPositionAttribute,i.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(e.textureIndexAttribute,s.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._indices),t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(e.uvPositionAttribute,n.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._uvs),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(e.alphaAttribute,o.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._alphas),t.uniformMatrix4fv(e.pMatrixUniform,t.FALSE,this._projectionMatrix);for(var h=0;h<this._batchTextureCount;h++){var l=this._batchTextures[h];t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,l),this.setTextureParams(t,l.isPOT)}t.drawArrays(t.TRIANGLES,0,this.batchCardCount*a.INDICIES_PER_CARD),this._batchID++}},r._drawCover=function(t,e){this._isDrawing>0&&this._drawBuffers(t),this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover");var i=this._activeShader,s=this._vertexPositionBuffer,n=this._uvPositionBuffer;t.clear(t.COLOR_BUFFER_BIT),t.useProgram(i),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(i.vertexPositionAttribute,s.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,a.COVER_VERT),t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(i.uvPositionAttribute,n.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,e?a.COVER_UV_FLIP:a.COVER_UV),t.uniform1i(i.samplerUniform,0),t.uniform1f(i.uprightUniform,e?0:1),t.drawArrays(t.TRIANGLES,0,a.INDICIES_PER_CARD)},createjs.StageGL=createjs.promote(a,"Stage")}(),this.createjs=this.createjs||{},function(){function a(t){this.DisplayObject_constructor(),typeof t=="string"?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null,this._webGLRenderStyle=createjs.DisplayObject._StageGL_BITMAP}var r=createjs.extend(a,createjs.DisplayObject);r.initialize=a,r.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&e)},r.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.image,s=this.sourceRect;if(i.getImage&&(i=i.getImage()),!i)return!0;if(s){var n=s.x,o=s.y,h=n+s.width,l=o+s.height,u=0,p=0,f=i.width,_=i.height;n<0&&(u-=n,n=0),h>f&&(h=f),o<0&&(p-=o,o=0),l>_&&(l=_),t.drawImage(i,n,o,h-n,l-o,u,p,h-n,l-o)}else t.drawImage(i,0,0);return!0},r.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,i=this.sourceRect||e;return e&&(e.naturalWidth||e.getContext||e.readyState>=2)?this._rectangle.setValues(0,0,i.width,i.height):null},r.clone=function(t){var e=this.image;e&&t&&(e=e.cloneNode());var i=new a(e);return this.sourceRect&&(i.sourceRect=this.sourceRect.clone()),this._cloneProps(i),i},r.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=createjs.DisplayObject._StageGL_SPRITE,e!=null&&this.gotoAndPlay(e)}var r=createjs.extend(a,createjs.DisplayObject);r.initialize=a,r.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},r.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var s=i.rect;return s.width&&s.height&&t.drawImage(i.image,s.x,s.y,s.width,s.height,-i.regX,-i.regY,s.width,s.height),!0},r.play=function(){this.paused=!1},r.stop=function(){this.paused=!0},r.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},r.gotoAndStop=function(t){this.paused=!0,this._goto(t)},r.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&t!=null?t/(1e3/e):1;this._normalizeFrame(i)},r.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},r.clone=function(){return this._cloneProps(new a(this.spriteSheet))},r.toString=function(){return"[Sprite (name="+this.name+")]"},r._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},r._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},r._normalizeFrame=function(t){t=t||0;var e,i=this._animation,s=this.paused,n=this._currentFrame;if(i){var o=i.speed||1,h=this.currentAnimationFrame;if(e=i.frames.length,h+t*o>=e){var l=i.next;if(this._dispatchAnimationEnd(i,n,s,l,e-1))return;if(l)return this._goto(l,t-(e-h)/o);this.paused=!0,h=i.frames.length-1}else h+=t*o;this.currentAnimationFrame=h,this._currentFrame=i.frames[0|h]}else if(n=this._currentFrame+=t,e=this.spriteSheet.getNumFrames(),n>=e&&e>0&&!this._dispatchAnimationEnd(i,n,s,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();n=0|this._currentFrame,this.currentFrame!=n&&(this.currentFrame=n,this.dispatchEvent("change"))},r._dispatchAnimationEnd=function(t,e,i,s,n){var o=t?t.name:null;if(this.hasEventListener("animationend")){var h=new createjs.Event("animationend");h.name=o,h.next=s,this.dispatchEvent(h)}var l=this._animation!=t||this._currentFrame!=e;return l||i||!this.paused||(this.currentAnimationFrame=n,l=!0),l},r._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(t){this.DisplayObject_constructor(),this.graphics=t||new createjs.Graphics}var r=createjs.extend(a,createjs.DisplayObject);r.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},r.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.graphics.draw(t,this),!0)},r.clone=function(t){var e=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new a(e))},r.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(e,i,s){this.DisplayObject_constructor(),this.text=e,this.font=i,this.color=s,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var r=createjs.extend(a,createjs.DisplayObject),t=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(a._workingContext=t.getContext("2d"),t.width=t.height=1),a.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},a.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},r.isVisible=function(){var e=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&e)},r.draw=function(e,i){if(this.DisplayObject_draw(e,i))return!0;var s=this.color||"#000";return this.outline?(e.strokeStyle=s,e.lineWidth=1*this.outline):e.fillStyle=s,this._drawText(this._prepContext(e)),!0},r.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},r.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},r.getMeasuredHeight=function(){return this._drawText(null,{}).height},r.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(this.text==null||this.text==="")return null;var i=this._drawText(null,{}),s=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,n=s*a.H_OFFSETS[this.textAlign||"left"],o=this.lineHeight||this.getMeasuredLineHeight(),h=o*a.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(n,h,s,i.height)},r.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*a.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},r.clone=function(){return this._cloneProps(new a(this.text,this.font,this.color))},r.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},r._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth,e},r._prepContext=function(e){return e.font=this.font||"10px sans-serif",e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e.lineJoin="miter",e.miterLimit=2.5,e},r._drawText=function(e,i,s){var n=!!e;n||(e=a._workingContext,e.save(),this._prepContext(e));for(var o=this.lineHeight||this.getMeasuredLineHeight(),h=0,l=0,u=String(this.text).split(/(?:\r\n|\r|\n)/),p=0,f=u.length;p<f;p++){var _=u[p],g=null;if(this.lineWidth!=null&&(g=e.measureText(_).width)>this.lineWidth){var v=_.split(/(\s)/);_=v[0],g=e.measureText(_).width;for(var b=1,y=v.length;b<y;b+=2){var w=e.measureText(v[b]+v[b+1]).width;g+w>this.lineWidth?(n&&this._drawTextLine(e,_,l*o),s&&s.push(_),g>h&&(h=g),_=v[b+1],g=e.measureText(_).width,l++):(_+=v[b]+v[b+1],g+=w)}}n&&this._drawTextLine(e,_,l*o),s&&s.push(_),i&&g==null&&(g=e.measureText(_).width),g>h&&(h=g),l++}return i&&(i.width=h,i.height=l*o),n||e.restore(),i},r._drawTextLine=function(e,i,s){this.outline?e.strokeText(i,0,s,this.maxWidth||65535):e.fillText(i,0,s,this.maxWidth||65535)},r._getMeasuredWidth=function(e){var i=a._workingContext;i.save();var s=this._prepContext(i).measureText(e).width;return i.restore(),s},createjs.Text=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}var r=createjs.extend(a,createjs.Container);a.maxPoolSize=100,a._spritePool=[],r.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateState(),this.Container_draw(t,e))},r.getBounds=function(){return this._updateText(),this.Container_getBounds()},r.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&this.scaleX!==0&&this.scaleY!==0&&t)},r.clone=function(){return this._cloneProps(new a(this.text,this.spriteSheet))},r.addChild=r.addChildAt=r.removeChild=r.removeChildAt=r.removeAllChildren=function(){},r._updateState=function(){this._updateText()},r._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},r._getFrameIndex=function(t,e){var i,s=e.getAnimation(t);return s||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(s=e.getAnimation(i))),s&&s.frames[0]},r._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return i==null?i:e.getFrame(i)},r._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},r._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},r._updateText=function(){var t,e=0,i=0,s=this._oldProps,n=!1,o=this.spaceWidth,h=this.lineHeight,l=this.spriteSheet,u=a._spritePool,p=this.children,f=0,_=p.length;for(var g in s)s[g]!=this[g]&&(s[g]=this[g],n=!0);if(n){var v=!!this._getFrame(" ",l);v||o||(o=this._getSpaceWidth(l)),h||(h=this._getLineHeight(l));for(var b=0,y=this.text.length;b<y;b++){var w=this.text.charAt(b);if(w!=" "||v)if(w!=`
`&&w!="\r"){var C=this._getFrameIndex(w,l);C!=null&&(f<_?t=p[f]:(p.push(t=u.length?u.pop():new createjs.Sprite),t.parent=this,_++),t.spriteSheet=l,t.gotoAndStop(C),t.x=e,t.y=i,f++,e+=t.getBounds().width+this.letterSpacing)}else w=="\r"&&this.text.charAt(b+1)==`
`&&b++,e=0,i+=h;else e+=o}for(;_>f;)u.push(t=p.pop()),t.parent=null,_--;u.length>a.maxPoolSize&&(u.length=a.maxPoolSize)}},createjs.BitmapText=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){function a(e){this.Container_constructor(),!a.inited&&a.init();var i,s,n,o;e instanceof String||arguments.length>1?(i=e,s=arguments[1],n=arguments[2],o=arguments[3],n==null&&(n=-1),e=null):e&&(i=e.mode,s=e.startPosition,n=e.loop,o=e.labels),e||(e={labels:o}),this.mode=i||a.INDEPENDENT,this.startPosition=s||0,this.loop=n===!0?-1:n||0,this.currentFrame=0,this.paused=e.paused||!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||e.frameBounds,this.framerate=null,e.useTicks=e.paused=!0,this.timeline=new createjs.Timeline(e),this._synchOffset=0,this._rawPosition=-1,this._bound_resolveState=this._resolveState.bind(this),this._t=0,this._managed={}}function r(){throw"MovieClipPlugin cannot be instantiated."}var t=createjs.extend(a,createjs.Container);a.INDEPENDENT="independent",a.SINGLE_FRAME="single",a.SYNCHED="synched",a.inited=!1,a.init=function(){a.inited||(r.install(),a.inited=!0)},t._getLabels=function(){return this.timeline.getLabels()},t.getLabels=createjs.deprecate(t._getLabels,"MovieClip.getLabels"),t._getCurrentLabel=function(){return this.timeline.currentLabel},t.getCurrentLabel=createjs.deprecate(t._getCurrentLabel,"MovieClip.getCurrentLabel"),t._getDuration=function(){return this.timeline.duration},t.getDuration=createjs.deprecate(t._getDuration,"MovieClip.getDuration");try{Object.defineProperties(t,{labels:{get:t._getLabels},currentLabel:{get:t._getCurrentLabel},totalFrames:{get:t._getDuration},duration:{get:t._getDuration}})}catch{}t.initialize=a,t.isVisible=function(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)},t.draw=function(e,i){return!!this.DisplayObject_draw(e,i)||(this._updateState(),this.Container_draw(e,i),!0)},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(e){var i=a.INDEPENDENT;if(this.mode===i){for(var s=this,n=s.framerate;(s=s.parent)&&n===null;)s.mode===i&&(n=s._framerate);if(this._framerate=n,!this.paused){var o=n!==null&&n!==-1&&e!==null?e/(1e3/n)+this._t:1,h=0|o;for(this._t=o-h;h--;)this._updateTimeline(this._rawPosition+1,!1)}}},t.clone=function(){throw"MovieClip cannot be cloned."},t.toString=function(){return"[MovieClip (name="+this.name+")]"},t._updateState=function(){this._rawPosition!==-1&&this.mode===a.INDEPENDENT||this._updateTimeline(-1)},t._tick=function(e){this.advance(e&&e.delta),this.Container__tick(e)},t._goto=function(e){var i=this.timeline.resolve(e);i!=null&&(this._t=0,this._updateTimeline(i,!0))},t._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},t._updateTimeline=function(e,i){var s=this.mode!==a.INDEPENDENT,n=this.timeline;s&&(e=this.startPosition+(this.mode===a.SINGLE_FRAME?0:this._synchOffset)),e<0&&(e=0),(this._rawPosition!==e||s)&&(this._rawPosition=e,n.loop=this.loop,n.setPosition(e,s||!this.actionsEnabled,i,this._bound_resolveState))},t._renderFirstFrame=function(){var e=this.timeline,i=e.rawPosition;e.setPosition(0,!0,!0,this._bound_resolveState),e.rawPosition=i},t._resolveState=function(){var e=this.timeline;this.currentFrame=e.position;for(var i in this._managed)this._managed[i]=1;for(var s=e.tweens,n=0,o=s.length;n<o;n++){var h=s[n],l=h.target;if(l!==this&&!h.passive){var u=h._stepPosition;l instanceof createjs.DisplayObject?this._addManagedChild(l,u):this._setState(l.state,u)}}var p=this.children;for(n=p.length-1;n>=0;n--){var f=p[n].id;this._managed[f]===1&&(this.removeChildAt(n),delete this._managed[f])}},t._setState=function(e,i){if(e)for(var s=e.length-1;s>=0;s--){var n=e[s],o=n.t,h=n.p;for(var l in h)o[l]=h[l];this._addManagedChild(o,i)}},t._addManagedChild=function(e,i){e._off||(this.addChildAt(e,0),e instanceof a&&(e._synchOffset=i,e.mode===a.INDEPENDENT&&e.autoReset&&!this._managed[e.id]&&e._reset()),this._managed[e.id]=2)},t._getBounds=function(e,i){var s=this.DisplayObject_getBounds();return s||this.frameBounds&&(s=this._rectangle.copy(this.frameBounds[this.currentFrame])),s?this._transformBounds(s,e,i):this.Container__getBounds(e,i)},createjs.MovieClip=createjs.promote(a,"Container"),r.priority=100,r.ID="MovieClip",r.install=function(){createjs.Tween._installPlugin(r)},r.init=function(e,i,s){i==="startPosition"&&e.target instanceof a&&e._addPlugin(r)},r.step=function(e,i,s){},r.change=function(e,i,s,n,o,h){if(s==="startPosition")return o===1?i.props[s]:i.prev.props[s]}}(),this.createjs=this.createjs||{},function(){function a(){throw"SpriteSheetUtils cannot be instantiated"}var r=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");r.getContext&&(a._workingCanvas=r,a._workingContext=r.getContext("2d"),r.width=r.height=1),a.extractFrame=function(t,e){isNaN(e)&&(e=t.getAnimation(e).frames[0]);var i=t.getFrame(e);if(!i)return null;var s=i.rect,n=a._workingCanvas;n.width=s.width,n.height=s.height,a._workingContext.drawImage(i.image,s.x,s.y,s.width,s.height,0,0,s.width,s.height);var o=document.createElement("img");return o.src=n.toDataURL("image/png"),o},a.addFlippedFrames=createjs.deprecate(null,"SpriteSheetUtils.addFlippedFrames"),a.mergeAlpha=createjs.deprecate(null,"SpriteSheetUtils.mergeAlpha"),a._flip=function(t,e,i,s){for(var n=t._images,o=a._workingCanvas,h=a._workingContext,l=n.length/e,u=0;u<l;u++){var p=n[u];p.__tmp=u,h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,o.width+1,o.height+1),o.width=p.width,o.height=p.height,h.setTransform(i?-1:1,0,0,s?-1:1,i?p.width:0,s?p.height:0),h.drawImage(p,0,0);var f=document.createElement("img");f.src=o.toDataURL("image/png"),f.width=p.width||p.naturalWidth,f.height=p.height||p.naturalHeight,n.push(f)}var _=t._frames,g=_.length/e;for(u=0;u<g;u++){p=_[u];var v=p.rect.clone();f=n[p.image.__tmp+l*e];var b={image:f,rect:v,regX:p.regX,regY:p.regY};i&&(v.x=(f.width||f.naturalWidth)-v.x-v.width,b.regX=v.width-p.regX),s&&(v.y=(f.height||f.naturalHeight)-v.y-v.height,b.regY=v.height-p.regY),_.push(b)}var y="_"+(i?"h":"")+(s?"v":""),w=t._animations,C=t._data,S=w.length/e;for(u=0;u<S;u++){var A=w[u];p=C[A];var j={name:A+y,speed:p.speed,next:p.next,frames:[]};p.next&&(j.next+=y),_=p.frames;for(var F=0,R=_.length;F<R;F++)j.frames.push(_[F]+g*e);C[j.name]=j,w.push(j.name)}},createjs.SpriteSheetUtils=a}(),this.createjs=this.createjs||{},function(){function a(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var r=createjs.extend(a,createjs.EventDispatcher);a.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",a.ERR_RUNNING="a build is already running",r.addFrame=function(t,e,i,s,n){if(this._data)throw a.ERR_RUNNING;var o=e||t.bounds||t.nominalBounds;return!o&&t.getBounds&&(o=t.getBounds()),o?(i=i||1,this._frames.push({source:t,sourceRect:o,scale:i,funct:s,data:n,index:this._frames.length,height:o.height*i})-1):null},r.addAnimation=function(t,e,i,s){if(this._data)throw a.ERR_RUNNING;this._animations[t]={frames:e,next:i,speed:s}},r.addMovieClip=function(t,e,i,s,n,o){if(this._data)throw a.ERR_RUNNING;var h=t.frameBounds,l=e||t.bounds||t.nominalBounds;if(!l&&t.getBounds&&(l=t.getBounds()),l||h){var u,p,f=this._frames.length,_=t.timeline.duration;for(u=0;u<_;u++){var g=h&&h[u]?h[u]:l;this.addFrame(t,g,i,this._setupMovieClipFrame,{i:u,f:s,d:n})}var v=t.timeline._labels,b=[];for(var y in v)b.push({index:v[y],label:y});if(b.length)for(b.sort(function(F,R){return F.index-R.index}),u=0,p=b.length;u<p;u++){for(var w=b[u].label,C=f+b[u].index,S=f+(u==p-1?_:b[u+1].index),A=[],j=C;j<S;j++)A.push(j);o&&!(w=o(w,t,C,S))||this.addAnimation(w,A,!0)}}},r.build=function(){if(this._data)throw a.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},r.buildAsync=function(t){if(this._data)throw a.ERR_RUNNING;this.timeSlice=t,this._startBuild();var e=this;this._timerID=setTimeout(function(){e._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},r.stopAsync=function(){clearTimeout(this._timerID),this._data=null},r.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},r.toString=function(){return"[SpriteSheetBuilder]"},r._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var e=[];this._data={images:[],frames:e,framerate:this.framerate,animations:this._animations};var i=this._frames.slice();if(i.sort(function(u,p){return u.height<=p.height?-1:1}),i[i.length-1].height+2*t>this.maxHeight)throw a.ERR_DIMENSIONS;for(var s=0,n=0,o=0;i.length;){var h=this._fillRow(i,s,o,e,t);if(h.w>n&&(n=h.w),s+=h.h,!h.h||!i.length){var l=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");l.width=this._getSize(n,this.maxWidth),l.height=this._getSize(s,this.maxHeight),this._data.images[o]=l,h.h||(n=s=0,o++)}}},r._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},r._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},r._fillRow=function(t,e,i,s,n){var o=this.maxWidth,h=this.maxHeight;e+=n;for(var l=h-e,u=n,p=0,f=t.length-1;f>=0;f--){var _=t[f],g=this._scale*_.scale,v=_.sourceRect,b=_.source,y=Math.floor(g*v.x-n),w=Math.floor(g*v.y-n),C=Math.ceil(g*v.height+2*n),S=Math.ceil(g*v.width+2*n);if(S>o)throw a.ERR_DIMENSIONS;C>l||u+S>o||(_.img=i,_.rect=new createjs.Rectangle(u,e,S,C),p=p||C,t.splice(f,1),s[_.index]=[u,e,S,C,i,Math.round(-y+g*b.regX-n),Math.round(-w+g*b.regY-n)],u+=S)}return{w:u,h:p}},r._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},r._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=new Date().getTime()+t,i=!1;e>new Date().getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var s=this;this._timerID=setTimeout(function(){s._run()},50-t)}var n=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var o=new createjs.Event("progress");o.progress=n,this.dispatchEvent(o)}},r._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,s=t.sourceRect,n=this._data.images[t.img],o=n.getContext("2d");return t.funct&&t.funct(t.source,t.data),o.save(),o.beginPath(),o.rect(i.x,i.y,i.width,i.height),o.clip(),o.translate(Math.ceil(i.x-s.x*e),Math.ceil(i.y-s.y*e)),o.scale(e,e),t.source.draw(o),o.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function a(t){this.DisplayObject_constructor(),typeof t=="string"&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null,this._oldStage=null,this._drawAction=null}var r=createjs.extend(a,createjs.DisplayObject);r.isVisible=function(){return this.htmlElement!=null},r.draw=function(t,e){return!0},r.cache=function(){},r.uncache=function(){},r.updateCache=function(){},r.hitTest=function(){},r.localToGlobal=function(){},r.globalToLocal=function(){},r.localToLocal=function(){},r.clone=function(){throw"DOMElement cannot be cloned."},r.toString=function(){return"[DOMElement (name="+this.name+")]"},r._tick=function(t){var e=this.stage;e&&e!==this._oldStage&&(this._drawAction&&e.off("drawend",this._drawAction),this._drawAction=e.on("drawend",this._handleDrawEnd,this),this._oldStage=e),this.DisplayObject__tick(t)},r._handleDrawEnd=function(t){var e=this.htmlElement;if(e){var i=e.style,s=this.getConcatenatedDisplayProps(this._props),n=s.matrix,o=s.visible?"visible":"hidden";if(o!=i.visibility&&(i.visibility=o),s.visible){var h=this._oldProps,l=h&&h.matrix,u=1e4;if(!l||!l.equals(n)){var p="matrix("+(n.a*u|0)/u+","+(n.b*u|0)/u+","+(n.c*u|0)/u+","+(n.d*u|0)/u+","+(n.tx+.5|0);i.transform=i.WebkitTransform=i.OTransform=i.msTransform=p+","+(n.ty+.5|0)+")",i.MozTransform=p+"px,"+(n.ty+.5|0)+"px)",h||(h=this._oldProps=new createjs.DisplayProps(!0,null)),h.matrix.copy(n)}h.alpha!=s.alpha&&(i.opacity=""+(s.alpha*u|0)/u,h.alpha=s.alpha)}}},createjs.DOMElement=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}var r=a.prototype;r.getBounds=function(t){return t},r.shaderParamSetup=function(t,e,i){},r.applyFilter=function(t,e,i,s,n,o,h,l){o=o||t,h==null&&(h=e),l==null&&(l=i);try{var u=t.getImageData(e,i,s,n)}catch{return!1}return!!this._applyFilter(u)&&(o.putImageData(u,h,l),!0)},r.toString=function(){return"[Filter]"},r.clone=function(){return new a},r._applyFilter=function(t){return!0},createjs.Filter=a}(),this.createjs=this.createjs||{},function(){function a(){this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0}var r=a.prototype;a.getFilterBounds=function(t,e){e||(e=new createjs.Rectangle);var i=t.filters,s=i&&i.length;if(!!s<=0)return e;for(var n=0;n<s;n++){var o=i[n];if(o&&o.getBounds){var h=o.getBounds();h&&(n==0?e.setValues(h.x,h.y,h.width,h.height):e.extend(h.x,h.y,h.width,h.height))}}return e},r.toString=function(){return"[BitmapCache]"},r.define=function(t,e,i,s,n,o,h){if(!t)throw"No symbol to cache";this._options=h,this.target=t,this.width=s>=1?s:1,this.height=n>=1?n:1,this.x=e||0,this.y=i||0,this.scale=o||1,this.update()},r.update=function(t){if(!this.target)throw"define() must be called before update()";var e=a.getFilterBounds(this.target),i=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+e.width,this._drawHeight=Math.ceil(this.height*this.scale)+e.height,i&&this._drawWidth==i.width&&this._drawHeight==i.height||this._updateSurface(),this._filterOffX=e.x,this._filterOffY=e.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(t),this.cacheID=this.cacheID?this.cacheID+1:1},r.release=function(){if(this._webGLCache)this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1;else{var t=this.target.stage;t instanceof createjs.StageGL&&t.releaseTexture(this.target.cacheCanvas)}this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},r.getCacheDataURL=function(){var t=this.target&&this.target.cacheCanvas;return t?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=t.toDataURL?t.toDataURL():null),this._cacheDataURL):null},r.draw=function(t){return!!this.target&&(t.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)},r._updateSurface=function(){if(!this._options||!this._options.useGL){var e=this.target.cacheCanvas;return e||(e=this.target.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),e.width=this._drawWidth,void(e.height=this._drawHeight)}if(!this._webGLCache)if(this._options.useGL==="stage"){if(!this.target.stage||!this.target.stage.isWebGL){var t="Cannot use 'stage' for cache because the object's parent stage is ";throw t+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage."}this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else if(this._options.useGL==="new")this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new createjs.StageGL(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0;else{if(!(this._options.useGL instanceof createjs.StageGL))throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=!0,this._webGLCache=this._options.useGL,this._webGLCache.isCacheControlled=!0}var e=this.target.cacheCanvas,i=this._webGLCache;i.isCacheControlled&&(e.width=this._drawWidth,e.height=this._drawHeight,i.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(i.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),i.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):i.isCacheControlled||i.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},r._drawToCache=function(t){var e=this.target.cacheCanvas,i=this.target,s=this._webGLCache;if(s)s.cacheDraw(i,i.filters,this),e=this.target.cacheCanvas,e.width=this._drawWidth,e.height=this._drawHeight;else{var n=e.getContext("2d");t||n.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),n.save(),n.globalCompositeOperation=t,n.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),n.translate(-this.x,-this.y),i.draw(n,!0),n.restore(),i.filters&&i.filters.length&&this._applyFilters(n)}e._invalid=!0},r._applyFilters=function(t){var e,i=this.target.filters,s=this._drawWidth,n=this._drawHeight,o=0,h=i[o];do h.usesContext?(e&&(t.putImageData(e,0,0),e=null),h.applyFilter(t,0,0,s,n)):(e||(e=t.getImageData(0,0,s,n)),h._applyFilter(e)),h=h._multiPass!==null?h._multiPass:i[++o];while(h);e&&t.putImageData(e,0,0)},createjs.BitmapCache=a}(),this.createjs=this.createjs||{},function(){function a(t,e,i){this.Filter_constructor(),this._blurX=t,this._blurXTable=[],this._lastBlurX=null,this._blurY=e,this._blurYTable=[],this._lastBlurY=null,this._quality,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}",(isNaN(i)||i<1)&&(i=1),this.setQuality(0|i)}var r=createjs.extend(a,createjs.Filter);r.getBlurX=function(){return this._blurX},r.getBlurY=function(){return this._blurY},r.setBlurX=function(t){(isNaN(t)||t<0)&&(t=0),this._blurX=t},r.setBlurY=function(t){(isNaN(t)||t<0)&&(t=0),this._blurY=t},r.getQuality=function(){return this._quality},r.setQuality=function(t){(isNaN(t)||t<0)&&(t=0),this._quality=0|t},r._getShader=function(){var t=this._lastBlurX!==this._blurX,e=this._lastBlurY!==this._blurY,i=this._lastQuality!==this._quality;return t||e||i?((t||i)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(e||i)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader},r._setShader=function(){this._compiledShader};try{Object.defineProperties(r,{blurX:{get:r.getBlurX,set:r.setBlurX},blurY:{get:r.getBlurY,set:r.setBlurY},quality:{get:r.getQuality,set:r.setQuality},_builtShader:{get:r._getShader,set:r._setShader}})}catch(t){console.log(t)}r._getTable=function(t){if(t<=1)return[1];var e=[],i=Math.ceil(2*t);i+=i%2?0:1;for(var s=i/2|0,n=-s;n<=s;n++){var o=n/s*4.2;e.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(o,2)/4))}var h=e.reduce(function(l,u){return l+u});return e.map(function(l,u,p){return l/h})},r._updateShader=function(){if(this._blurX!==void 0&&this._blurY!==void 0){var t=this.FRAG_SHADER_TEMPLATE;t=t.replace(/\{\{blurX\}\}/g,this._blurXTable.length.toFixed(0)),t=t.replace(/\{\{blurY\}\}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=t}},r.shaderParamSetup=function(t,e,i){t.uniform1fv(t.getUniformLocation(i,"xWeight"),this._blurXTable),t.uniform1fv(t.getUniformLocation(i,"yWeight"),this._blurYTable),t.uniform2f(t.getUniformLocation(i,"textureOffset"),2/(e._viewportWidth*this._quality),2/(e._viewportHeight*this._quality))},a.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],a.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],r.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(e<=0&&i<=0)return t;var s=Math.pow(this.quality,.2);return(t||new createjs.Rectangle).pad(i*s+1,e*s+1,i*s+1,e*s+1)},r.clone=function(){return new a(this.blurX,this.blurY,this.quality)},r.toString=function(){return"[BlurFilter]"},r._applyFilter=function(t){var e=this._blurX>>1;if(isNaN(e)||e<0)return!1;var i=this._blurY>>1;if(isNaN(i)||i<0||e==0&&i==0)return!1;var s=this.quality;(isNaN(s)||s<1)&&(s=1),s|=0,s>3&&(s=3),s<1&&(s=1);var n=t.data,o=0,h=0,l=0,u=0,p=0,f=0,_=0,g=0,v=0,b=0,y=0,w=0,C=0,S=0,A=0,j=e+e+1|0,F=i+i+1|0,R=0|t.width,V=0|t.height,O=R-1|0,Y=V-1|0,k=e+1|0,M=i+1|0,D={r:0,b:0,g:0,a:0},I=D;for(l=1;l<j;l++)I=I.n={r:0,b:0,g:0,a:0};I.n=D;var L={r:0,b:0,g:0,a:0},N=L;for(l=1;l<F;l++)N=N.n={r:0,b:0,g:0,a:0};N.n=L;for(var P=null,G=0|a.MUL_TABLE[e],H=0|a.SHG_TABLE[e],z=0|a.MUL_TABLE[i],q=0|a.SHG_TABLE[i];s-- >0;){_=f=0;var U=G,X=H;for(h=V;--h>-1;){for(g=k*(w=n[0|f]),v=k*(C=n[f+1|0]),b=k*(S=n[f+2|0]),y=k*(A=n[f+3|0]),I=D,l=k;--l>-1;)I.r=w,I.g=C,I.b=S,I.a=A,I=I.n;for(l=1;l<k;l++)u=f+((O<l?O:l)<<2)|0,g+=I.r=n[u],v+=I.g=n[u+1],b+=I.b=n[u+2],y+=I.a=n[u+3],I=I.n;for(P=D,o=0;o<R;o++)n[f++]=g*U>>>X,n[f++]=v*U>>>X,n[f++]=b*U>>>X,n[f++]=y*U>>>X,u=_+((u=o+e+1)<O?u:O)<<2,g-=P.r-(P.r=n[u]),v-=P.g-(P.g=n[u+1]),b-=P.b-(P.b=n[u+2]),y-=P.a-(P.a=n[u+3]),P=P.n;_+=R}for(U=z,X=q,o=0;o<R;o++){for(f=o<<2|0,g=M*(w=n[f])|0,v=M*(C=n[f+1|0])|0,b=M*(S=n[f+2|0])|0,y=M*(A=n[f+3|0])|0,N=L,l=0;l<M;l++)N.r=w,N.g=C,N.b=S,N.a=A,N=N.n;for(p=R,l=1;l<=i;l++)f=p+o<<2,g+=N.r=n[f],v+=N.g=n[f+1],b+=N.b=n[f+2],y+=N.a=n[f+3],N=N.n,l<Y&&(p+=R);if(f=o,P=L,s>0)for(h=0;h<V;h++)u=f<<2,n[u+3]=A=y*U>>>X,A>0?(n[u]=g*U>>>X,n[u+1]=v*U>>>X,n[u+2]=b*U>>>X):n[u]=n[u+1]=n[u+2]=0,u=o+((u=h+M)<Y?u:Y)*R<<2,g-=P.r-(P.r=n[u]),v-=P.g-(P.g=n[u+1]),b-=P.b-(P.b=n[u+2]),y-=P.a-(P.a=n[u+3]),P=P.n,f+=R;else for(h=0;h<V;h++)u=f<<2,n[u+3]=A=y*U>>>X,A>0?(A=255/A,n[u]=(g*U>>>X)*A,n[u+1]=(v*U>>>X)*A,n[u+2]=(b*U>>>X)*A):n[u]=n[u+1]=n[u+2]=0,u=o+((u=h+M)<Y?u:Y)*R<<2,g-=P.r-(P.r=n[u]),v-=P.g-(P.g=n[u+1]),b-=P.b-(P.b=n[u+2]),y-=P.a-(P.a=n[u+3]),P=P.n,f+=R}}return!0},createjs.BlurFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(t){this.Filter_constructor(),this.alphaMap=t,this._alphaMap=null,this._mapData=null,this._mapTexture=null,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}"}var r=createjs.extend(a,createjs.Filter);r.shaderParamSetup=function(t,e,i){this._mapTexture||(this._mapTexture=t.createTexture()),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._mapTexture),e.setTextureParams(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.alphaMap),t.uniform1i(t.getUniformLocation(i,"uAlphaSampler"),1)},r.clone=function(){var t=new a(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},r.toString=function(){return"[AlphaMapFilter]"},r._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,s=0,n=e.length;s<n;s+=4)e[s+3]=i[s]||0;return!0},r._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0));try{var s=t.getImageData(0,0,e.width,e.height)}catch{return!1}return this._mapData=s.data,!0},createjs.AlphaMapFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(t){this.Filter_constructor(),this.mask=t,this.usesContext=!0,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}"}var r=createjs.extend(a,createjs.Filter);r.shaderParamSetup=function(t,e,i){this._mapTexture||(this._mapTexture=t.createTexture()),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._mapTexture),e.setTextureParams(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.mask),t.uniform1i(t.getUniformLocation(i,"uAlphaSampler"),1)},r.applyFilter=function(t,e,i,s,n,o,h,l){return!this.mask||(o=o||t,h==null&&(h=e),l==null&&(l=i),o.save(),t==o&&(o.globalCompositeOperation="destination-in",o.drawImage(this.mask,h,l),o.restore(),!0))},r.clone=function(){return new a(this.mask)},r.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s,n,o,h,l){this.Filter_constructor(),this.redMultiplier=t??1,this.greenMultiplier=e??1,this.blueMultiplier=i??1,this.alphaMultiplier=s??1,this.redOffset=n||0,this.greenOffset=o||0,this.blueOffset=h||0,this.alphaOffset=l||0,this.FRAG_SHADER_BODY="uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}"}var r=createjs.extend(a,createjs.Filter);r.shaderParamSetup=function(t,e,i){t.uniform4f(t.getUniformLocation(i,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),t.uniform4f(t.getUniformLocation(i,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},r.toString=function(){return"[ColorFilter]"},r.clone=function(){return new a(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},r._applyFilter=function(t){for(var e=t.data,i=e.length,s=0;s<i;s+=4)e[s]=e[s]*this.redMultiplier+this.redOffset,e[s+1]=e[s+1]*this.greenMultiplier+this.greenOffset,e[s+2]=e[s+2]*this.blueMultiplier+this.blueOffset,e[s+3]=e[s+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(t,e,i,s){this.setColor(t,e,i,s)}var r=a.prototype;a.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],a.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],a.LENGTH=a.IDENTITY_MATRIX.length,r.setColor=function(t,e,i,s){return this.reset().adjustColor(t,e,i,s)},r.reset=function(){return this.copy(a.IDENTITY_MATRIX)},r.adjustColor=function(t,e,i,s){return this.adjustHue(s),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},r.adjustBrightness=function(t){return t==0||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},r.adjustContrast=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,100);var e;return t<0?e=127+t/100*127:(e=t%1,e=e==0?a.DELTA_INDEX[t]:a.DELTA_INDEX[t<<0]*(1-e)+a.DELTA_INDEX[1+(t<<0)]*e,e=127*e+127),this._multiplyMatrix([e/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1]),this},r.adjustSaturation=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100);return this._multiplyMatrix([.3086*(1-e)+e,.6094*(1-e),.082*(1-e),0,0,.3086*(1-e),.6094*(1-e)+e,.082*(1-e),0,0,.3086*(1-e),.6094*(1-e),.082*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},r.adjustHue=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t);return this._multiplyMatrix([.213+.787*e+-.213*i,.715+-.715*e+-.715*i,.072+-.072*e+.928*i,0,0,.213+-.213*e+.143*i,.715+e*(1-.715)+.14*i,.072+-.072*e+-.283*i,0,0,.213+-.213*e+-.787*i,.715+-.715*e+.715*i,.072+.928*e+.072*i,0,0,0,0,0,1,0,0,0,0,0,1]),this},r.concat=function(t){return t=this._fixMatrix(t),t.length!=a.LENGTH?this:(this._multiplyMatrix(t),this)},r.clone=function(){return new a().copy(this)},r.toArray=function(){for(var t=[],e=0,i=a.LENGTH;e<i;e++)t[e]=this[e];return t},r.copy=function(t){for(var e=a.LENGTH,i=0;i<e;i++)this[i]=t[i];return this},r.toString=function(){return"[ColorMatrix]"},r._multiplyMatrix=function(t){var e,i,s,n=[];for(e=0;e<5;e++){for(i=0;i<5;i++)n[i]=this[i+5*e];for(i=0;i<5;i++){var o=0;for(s=0;s<5;s++)o+=t[i+5*s]*n[s];this[i+5*e]=o}}},r._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},r._fixMatrix=function(t){return t instanceof a&&(t=t.toArray()),t.length<a.LENGTH?t=t.slice(0,t.length).concat(a.IDENTITY_MATRIX.slice(t.length,a.LENGTH)):t.length>a.LENGTH&&(t=t.slice(0,a.LENGTH)),t},createjs.ColorMatrix=a}(),this.createjs=this.createjs||{},function(){function a(t){this.Filter_constructor(),this.matrix=t,this.FRAG_SHADER_BODY="uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}"}var r=createjs.extend(a,createjs.Filter);r.shaderParamSetup=function(t,e,i){var s=this.matrix,n=new Float32Array([s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]]);t.uniformMatrix4fv(t.getUniformLocation(i,"uColorMatrix"),!1,n),t.uniform4f(t.getUniformLocation(i,"uColorMatrixOffset"),s[4]/255,s[9]/255,s[14]/255,s[19]/255)},r.toString=function(){return"[ColorMatrixFilter]"},r.clone=function(){return new a(this.matrix)},r._applyFilter=function(t){for(var e,i,s,n,o=t.data,h=o.length,l=this.matrix,u=l[0],p=l[1],f=l[2],_=l[3],g=l[4],v=l[5],b=l[6],y=l[7],w=l[8],C=l[9],S=l[10],A=l[11],j=l[12],F=l[13],R=l[14],V=l[15],O=l[16],Y=l[17],k=l[18],M=l[19],D=0;D<h;D+=4)e=o[D],i=o[D+1],s=o[D+2],n=o[D+3],o[D]=e*u+i*p+s*f+n*_+g,o[D+1]=e*v+i*b+s*y+n*w+C,o[D+2]=e*S+i*A+s*j+n*F+R,o[D+3]=e*V+i*O+s*Y+n*k+M;return!0},createjs.ColorMatrixFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(){throw"Touch cannot be instantiated"}a.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},a.enable=function(r,t,e){return!!(r&&r.canvas&&a.isSupported())&&(!!r.__touch||(r.__touch={pointers:{},multitouch:!t,preventDefault:!e,count:0},"ontouchstart"in window?a._IOS_enable(r):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&a._IE_enable(r),!0))},a.disable=function(r){r&&("ontouchstart"in window?a._IOS_disable(r):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&a._IE_disable(r),delete r.__touch)},a._IOS_enable=function(r){var t=r.canvas,e=r.__touch.f=function(i){a._IOS_handleEvent(r,i)};t.addEventListener("touchstart",e,!1),t.addEventListener("touchmove",e,!1),t.addEventListener("touchend",e,!1),t.addEventListener("touchcancel",e,!1)},a._IOS_disable=function(r){var t=r.canvas;if(t){var e=r.__touch.f;t.removeEventListener("touchstart",e,!1),t.removeEventListener("touchmove",e,!1),t.removeEventListener("touchend",e,!1),t.removeEventListener("touchcancel",e,!1)}},a._IOS_handleEvent=function(r,t){if(r){r.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var e=t.changedTouches,i=t.type,s=0,n=e.length;s<n;s++){var o=e[s],h=o.identifier;o.target==r.canvas&&(i=="touchstart"?this._handleStart(r,h,t,o.pageX,o.pageY):i=="touchmove"?this._handleMove(r,h,t,o.pageX,o.pageY):i!="touchend"&&i!="touchcancel"||this._handleEnd(r,h,t))}}},a._IE_enable=function(r){var t=r.canvas,e=r.__touch.f=function(i){a._IE_handleEvent(r,i)};window.navigator.pointerEnabled===void 0?(t.addEventListener("MSPointerDown",e,!1),window.addEventListener("MSPointerMove",e,!1),window.addEventListener("MSPointerUp",e,!1),window.addEventListener("MSPointerCancel",e,!1),r.__touch.preventDefault&&(t.style.msTouchAction="none")):(t.addEventListener("pointerdown",e,!1),window.addEventListener("pointermove",e,!1),window.addEventListener("pointerup",e,!1),window.addEventListener("pointercancel",e,!1),r.__touch.preventDefault&&(t.style.touchAction="none")),r.__touch.activeIDs={}},a._IE_disable=function(r){var t=r.__touch.f;window.navigator.pointerEnabled===void 0?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),r.canvas&&r.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),r.canvas&&r.canvas.removeEventListener("pointerdown",t,!1))},a._IE_handleEvent=function(r,t){if(r){r.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var e=t.type,i=t.pointerId,s=r.__touch.activeIDs;if(e=="MSPointerDown"||e=="pointerdown"){if(t.srcElement!=r.canvas)return;s[i]=!0,this._handleStart(r,i,t,t.pageX,t.pageY)}else s[i]&&(e=="MSPointerMove"||e=="pointermove"?this._handleMove(r,i,t,t.pageX,t.pageY):e!="MSPointerUp"&&e!="MSPointerCancel"&&e!="pointerup"&&e!="pointercancel"||(delete s[i],this._handleEnd(r,i,t)))}},a._handleStart=function(r,t,e,i,s){var n=r.__touch;if(n.multitouch||!n.count){var o=n.pointers;o[t]||(o[t]=!0,n.count++,r._handlePointerDown(t,e,i,s))}},a._handleMove=function(r,t,e,i,s){r.__touch.pointers[t]&&r._handlePointerMove(t,e,i,s)},a._handleEnd=function(r,t,e){var i=r.__touch,s=i.pointers;s[t]&&(i.count--,r._handlePointerUp(t,e,!0),delete s[t])},createjs.Touch=a}(),this.createjs=this.createjs||{},function(){var a=createjs.EaselJS=createjs.EaselJS||{};a.version="1.0.0",a.buildDate="Thu, 14 Sep 2017 19:47:53 GMT"}()}).call(window)},21:function(d,x,a){a(1),d.exports=a(0)}})})}(Q)),Q.exports}var Ut=Ot();const E=Bt(Ut);function B(T,m,d){T.moveTo(m.x,m.y).lineTo(d.x,d.y)}function st(T,m,d){let x=0,a=0,r,t,e,i=60*Math.PI/180;x=m;let s=d.x-e*4+10*Math.cos(i),n=d.y+10*Math.sin(i);if(x>0&&x<20)for(a=Math.floor(x/4)+1,e=0;e<a;e++)r=new E.Point(d.x-e*4,d.y),a-1==e?x%4>=2&&(s=d.x-e*4+6*Math.cos(i),n=d.y+6*Math.sin(i),t=new E.Point(s,n),B(T,r,t)):(s=d.x-e*4+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t));else if(x>=20&&x<40)for(r=new E.Point(d.x,d.y),s=d.x-4+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-4,d.y),t=new E.Point(s,n),B(T,r,t),a=Math.floor((x-20)/4)+1,e=0;e<a;e++)r=new E.Point(d.x-7-e*4,d.y),a-1==e?x%4>=2&&(s=d.x-7-e*4+6*Math.cos(i),n=d.y+6*Math.sin(i),t=new E.Point(s,n),B(T,r,t)):(s=d.x-7-e*4+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t));else if(x>=40&&x<60)for(r=new E.Point(d.x,d.y),s=d.x-4+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-4,d.y),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-4,d.y),s=d.x-8+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-8,d.y),t=new E.Point(s,n),B(T,r,t),a=Math.floor((x-40)/4)+1,e=0;e<a;e++)r=new E.Point(d.x-7-4-e*4,d.y),a-1==e?x%4>=2&&(s=d.x-7-4-e*4+6*Math.cos(i),n=d.y+6*Math.sin(i),t=new E.Point(s,n),B(T,r,t)):(s=d.x-7-4-e*4+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t));else if(x>=60)for(r=new E.Point(d.x,d.y),s=d.x-4+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-4,d.y),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-4,d.y),s=d.x-8+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-8,d.y),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-8,d.y),s=d.x-12+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t),r=new E.Point(d.x-12,d.y),t=new E.Point(s,n),B(T,r,t),a=Math.floor((x-60)/4)+1,e=0;e<a;e++)r=new E.Point(d.x-7-8-e*4,d.y),a-1==e?x%4>=2&&(s=d.x-7-8-e*4+6*Math.cos(i),n=d.y+6*Math.sin(i),t=new E.Point(s,n),B(T,r,t)):(s=d.x-7-8-e*4+12*Math.cos(i),n=d.y+12*Math.sin(i),t=new E.Point(s,n),B(T,r,t))}function Gt(T,m,d,x){let a=2*Math.ceil(T/2);d.graphics.setStrokeStyle(1),d.graphics.beginStroke(x),T==2?(d.graphics.moveTo(0,0).lineTo(16,0),st(d.graphics,a,new E.Point(13,0))):(d.graphics.moveTo(0,0).lineTo(20,0),st(d.graphics,a,new E.Point(20,0))),d.rotation=-90+m,d.graphics.beginFill(16777215),d.graphics.drawCircle(0,0,2),d.graphics.endFill()}function Xt(T,m){const d=[],x=[],a=[],r=[];let t=null,e=0,i=0;for(let s=0;s<T.length-1;s++){const n=T[s],o=T[s+1];d.push(n),x.splice(0);for(let h=i;h<m.length-1;h++){const l=m[h],u=m[h+1];x.push(l);const p=(n.x-l.x)*(o.y-l.y)-(n.y-l.y)*(o.x-l.x),f=(n.x-u.x)*(o.y-u.y)-(n.y-u.y)*(o.x-u.x);if(p*f>0)continue;const _=(l.x-n.x)*(u.y-n.y)-(l.y-n.y)*(u.x-n.x),g=_+p-f;if(_*g>0)continue;e=Math.sign(p);const v=e>-1?"#0000ff44":"#ff000044",b=_/(f-p),y=b*(o.x-n.x),w=b*(o.y-n.y);t={x:n.x+y,y:n.y+w},a.push(d.concat(t).concat(x.reverse())),r.push(v),d.splice(0,d.length,t),x.splice(0),i=h;break}}if(a.length>1&&d.length&&x.length){const s=d.concat(T.slice(-1)),n=x.concat(m.splice(-1));a.push(s.concat(n.reverse())),r.push(e>-1?"#ff000044":"#0000ff44")}return{paths:a,colors:r}}let Yt=class{constructor(m,d){if(!(m&&m.getContext))return console.error('参数"canvas"错误, 请确保传入canvas元素'),null;this.events={},this.canvas=m,this.data=[],this.BASE_P=1e3,this.T0=273.15;const x={mainColor:"#A1A1A1",mainColorLight:"#E7E7E788",windLegend:[[10,"#0000ff"],[20,"#03a9f4"],[30,"#f8c124"],[40,"#e86e30"],[50,"#ff0000"],[100,"#ff0000"]]};this.options=Object.assign(x,d||{});const a={left:36,top:24,right:8,bottom:24,border:2};this.layout=a;const r=m.offsetHeight-a.top-a.bottom-a.border,t=m.offsetWidth-a.left-a.right-a.border;m.width=m.offsetWidth,m.height=m.offsetHeight;const e=["auto",60,80];this.cChart={height:r,width:e[1]},this.rChart={height:r,width:e[2]};const i=e[1]+e[2];this.chart={height:r,width:t-i},this.maxWindTick=60,this.xAxis=[-80,-70,-60,-50,-40,-30,-20,-10,0,10,20,30,40],this.yAxis=[1050,1e3,925,850,700,600,500,400,300,250,200],this.dryTicks=[-60,-40,-20,0,20,40,60,80,100,120,140],this.wetTicks=[-60,-40,-20,0,20,40,60,80,100,120,140,160,180],this.pixelVal={x:this.chart.width/(this.xAxis.slice(-1)[0]-this.xAxis[0]),y:this.chart.height/Math.log(this.yAxis[0]/this.yAxis.slice(-1)[0])},this.inBox=function(s,n){const o=s>a.left&&s<a.left+this.chart.width,h=n>a.top&&n<a.top+this.chart.height;return o&&h},this.inBox2=function(s,n){const o=s>a.left&&s<a.left+t,h=n>a.top&&n<a.top+r;return o&&h},this.stage=new E.Stage(m),Object.assign(this.stage,{x:.5,y:.5}),E.Ticker.addEventListener("tick",this.stage),this.mode=1,this.initChart(),this.bindTooltip()}on(m,d){typeof d=="function"&&(this.events[m]=d)}getX(m){return typeof m!="number"?m:this.layout.left+(m-this.xAxis[0])*this.pixelVal.x}getY(m){if(typeof m!="number")return m;const d=this.yAxis.slice(-1)[0];return this.layout.top+Math.log(m/d)*this.pixelVal.y}getT(m){return typeof coordY!="number"?m:this.xAxis[0]+(m-this.layout.left)/this.pixelVal.y}getP(m){if(typeof m!="number")return m;const d=this.yAxis.slice(-1)[0];return Math.exp((m-this.layout.top)/this.pixelVal.y+Math.log(d))}switchMode(m){if(this.mode=m,m!==1)return;const d=this.stage.getChildByName("dzLcl");d&&(d.removeAllChildren(),this.stage.removeChild(d),this.drawStateLine())}initChart(){const m=new E.Container;m.name="baseChart";let d=new E.Shape;const{layout:x,options:a,chart:r,cChart:t,rChart:e}=this,i=r.height;d.graphics.setStrokeStyle(2).beginStroke(a.mainColor),d.graphics.drawRect(x.left,x.top,r.width,i),d.graphics.drawRect(x.left+r.width,x.top,t.width,i),d.graphics.drawRect(x.left+r.width+t.width,x.top,e.width,i),m.addChild(d),d=new E.Shape,d.graphics.setStrokeStyle(1).beginStroke(a.mainColorLight);const s=x.top-14,n=x.top+i+6;this.xAxis.forEach((l,u)=>{const p=this.getX(l),f=new E.Text(l,"12px bold",a.mainColor),_=u?p:p+6;Object.assign(f,{x:_,y:s,textAlign:"center"}),m.addChild(f),m.addChild(Object.assign(f.clone(),{y:n})),d.graphics.moveTo(p,x.top).lineTo(p,x.top+i)}),this.yAxis.forEach((l,u,p)=>{const f=this.getY(l);if(!u)return;const _=new E.Text(l,"12px bold",a.mainColor);Object.assign(_,{x:x.left-4,y:f-4,textAlign:"right"}),m.addChild(_),d.graphics.moveTo(x.left,f).lineTo(x.left+r.width,f)});const o=x.left+r.width+t.width;d.graphics.setStrokeDash([8,6],0).beginStroke(a.mainColorLight),new Array(4).fill(e.width/5).forEach((l,u)=>{const p=o+l*(u+1);d.graphics.moveTo(p,x.top).lineTo(p,x.top+i)}),m.addChild(d),[0,1].forEach(l=>{let u=new E.Text(l*100,"12px bold",a.mainColor);const p=o+(e.width-4)*l;Object.assign(u,{x:p,y:s,textAlign:"center"}),m.addChild(u)});let h=new E.Text("RH%","12px bold",a.mainColor);Object.assign(h,{x:o-18,y:s,textAlign:"center"}),m.addChild(h),h=new E.Text("风m/s","12px bold",a.mainColor),Object.assign(h,{x:o-22,y:n,textAlign:"center"}),m.addChild(h),d=new E.Shape,d.graphics.setStrokeStyle(1).beginStroke("#ff888844"),this.dryTicks.forEach(l=>{const u=[];for(let g=this.yAxis[0];g>=200;g--){const v=this.getDryCoord(l,g);this.inBox(v.x,v.y)&&u.push(v)}d.graphics.moveTo(u[0].x,u[0].y),u.forEach((g,v)=>{v&&d.graphics.lineTo(g.x,g.y)});const p=new E.Text(l,"12px bold","#ff8888cc"),f=(u[0].x+u.slice(-1)[0].x)/2,_=(u[0].y+u.slice(-1)[0].y)/2;m.addChild(Object.assign(p,{x:f,y:_,textAlign:"center"}))}),m.addChild(d),d=new E.Shape,d.graphics.setStrokeDash([10,5]).beginStroke("#21886888"),this.wetTicks.forEach(l=>{const u=[],p=this.xAxis.slice(-1)[0],f=this.yAxis[0];if(l>=40){let _=p;this.yAxis.forEach(g=>{if(_=this.getMoistHotlineTemp(_,l,g),_<=this.xAxis[0]){_=p;return}u.push({x:this.getX(_),y:this.getY(g)})})}else{let _=f;const g=this.yAxis.slice(-1)[0];for(let v=this.xAxis[0];v<=p&&(_=Math.min(f,this.getMoistHotlinePress(v,l,_)),!(_===f||_<g));v+=.5)u.push({x:this.getX(v),y:this.getY(_)})}u.length&&(d.graphics.moveTo(u[0].x,u[0].y),u.forEach((_,g)=>{g&&d.graphics.lineTo(_.x,_.y)}))}),m.addChild(d),this.stage.addChild(m)}renderData(m){if(!Array.isArray(m)){console.warn('参数"list"不是数组对象！');return}this.clear(),this.data=m;const d=[],x=[];m.forEach(i=>{const{td:s,tem:n,p:o}=i,h=this.getY(o);d.push({x:this.getX(s),y:h}),x.push({x:this.getX(n),y:h})});const a=new E.Container;a.name="dataLines";let r=new E.Shape;r.graphics.beginStroke("#006400"),r.graphics.moveTo(d[0].x,d[0].y),d.forEach((i,s)=>{s&&this.inBox(i.x,i.y)&&r.graphics.lineTo(i.x,i.y)}),r.graphics.beginStroke("#0000ff"),r.graphics.moveTo(x[0].x,x[0].y),x.forEach((i,s)=>{s&&this.inBox(i.x,i.y)&&r.graphics.lineTo(i.x,i.y)});const t=this.getIndexLeft();[0,-10,-20,-30].forEach(i=>{const s=m.findIndex((l,u,p)=>u===p.length-1?!1:l.tem>=i&&p[u+1].tem<i);if(s===-1)return;let n=m[s].p;if(m[s].tem!==i){const l=m[s].tem,u=m[s+1];n-=(n-u.p)*(l-i)/(l-u.tem)}const o=this.getY(n);if(i===0){const l=this.layout.left,u=l+this.chart.width;r.graphics.beginStroke("#666666"),r.graphics.moveTo(l,o).lineTo(u,o)}else r.graphics.beginStroke("#0000ff"),r.graphics.moveTo(t,o).lineTo(t+28,o);const h=new E.Text(`${i}℃`,"12px, bold",this.options.mainColor);Object.assign(h,{x:t+14,y:o-12,textAlign:"center"}),a.addChild(h)}),a.addChild(r),this.stage.addChild(a),this.drawStateLine(),this.maxWindTick=Math.ceil(Math.max(...m.map(i=>i.sp))/10)*10,this.drawWindChart(m)}drawStateLine(m){const d=this.yAxis;m&&m<=d[0]&&m>=d.slice(-1)[0]||(m=this.data[0].p);const x=this.data.filter(g=>g.p<=m);let a=this.getLCL(x);const r={x:this.getX(a.tem),y:this.getY(a.p)},t=[{x:this.getX(x[0].tem),y:this.getY(x[0].p)}];t.push(r);const e=x.slice(-1)[0],i=this.yAxis.slice(-1);let s=a.p,n=parseInt(a.t*10)/10,o=this.getPTse(n,s);for(;n>=-80&&s>=e.p&&s>=i&&(s=this.getMoistHotlinePress(n,o,s),!(s<e.p||s<i));)t.push({x:this.getX(n),y:this.getY(s)}),n=parseInt((n-1)*10)/10;let h=this.stage.getChildByName("stateLine");h?h.removeAllChildren():(h=new E.Container,h.name="stateLine");let l=new E.Shape;l.graphics.setStrokeStyle(2).beginStroke("#ff0808"),l.graphics.moveTo(this.getX(x[0].tem),this.getY(x[0].y)),t.forEach((g,v)=>{v&&this.inBox(g.x,g.y)&&l.graphics.lineTo(g.x,g.y)}),l.graphics.setStrokeStyle(1).beginStroke("#000000");const u=this.getIndexLeft();l.graphics.moveTo(u,r.y).lineTo(u+28,r.y);let p=new E.Text("LCL","12px bold","#000000");Object.assign(p,{x:u+14,y:r.y-12,textAlign:"center"}),h.addChild(p);const f=this.getLFC(x),_=this.getY(f.p);l.graphics.moveTo(u,_).lineTo(u+28,_),p=new E.Text("LFC","12px bold","#000000"),Object.assign(p,{x:u+14,y:_-12,textAlign:"center"}),h.addChild(p),h.addChild(l),this.stage.addChild(h),this.drawShadows(t,m)}drawShadows(m,d){const a=this.data.filter(s=>s.p<=d).map(s=>({x:this.getX(s.tem),y:this.getY(s.p)})),{paths:r,colors:t}=Xt(m,a);if(!r.length)return;const e=new E.Shape;r.forEach((s,n)=>{const o=t[n];e.graphics.beginFill(o),e.graphics.moveTo(s[0].x,s[0].y),s.forEach((h,l)=>{l&&e.graphics.lineTo(h.x,h.y)}),e.graphics.endFill()}),this.stage.getChildByName("stateLine").addChild(e)}drawWindChart(m){const{options:d,layout:x,chart:a,cChart:r,rChart:t}=this,e=new E.Container;e.name="windChart";let i=new E.Shape;i.graphics.setStrokeStyle(2).beginStroke(d.mainColorLight);const s=x.left+a.width+r.width/2,n=x.left+a.width+r.width;i.graphics.moveTo(s,x.top).lineTo(s,x.top+a.height);let o=-1;m.forEach(u=>{if(u.p<200||isNaN(u.sp+u.dir))return;const p=this.yAxis.find(y=>Math.abs(u.p-y)<1);if(!p||p===o)return;const f=d.windLegend.find(y=>u.sp<y[0]),_=this.getY(p),g={x:s,y:_},v=Object.assign(new E.Shape,g),b=u.sp/this.maxWindTick*t.width;i.graphics.beginStroke(f[1]),i.graphics.moveTo(n,_).lineTo(n+b,_),new Gt(u.sp,u.dir,v,f[1]),e.addChild(v)}),e.addChild(i);const h=x.left+a.width+r.width,l=x.top+a.height+6;[0,1].forEach(u=>{const p=h+(t.width-4)*u,f=new E.Text(u*this.maxWindTick,"12px bold",d.mainColor);Object.assign(f,{x:p,y:l,textAlign:"center"}),e.addChild(f)}),Reflect.has(m[0],"humi")&&(i=new E.Shape,i.graphics.beginStroke("#0000ff"),m.forEach((u,p)=>{const f=n+u.humi/100*t.width,_=this.getY(u.p);if(p===0)return i.graphics.moveTo(f,_);i.graphics.lineTo(f,_)}),e.addChild(i)),this.stage.addChild(e)}bindTooltip(){const m=new E.Container;m.name="tooltip",this.stage.addChild(m);const{left:d,right:x,top:a,bottom:r,border:t}=this.layout,e=this.canvas.width-x-t,i=d+this.chart.width,s=this.canvas.height-r-t;this.canvas.addEventListener("mousemove",n=>{m.removeAllChildren(),this.stage.removeChild(m),this.stage.addChild(m);const{offsetX:o,offsetY:h}=n;if(!this.inBox2(o,h))return;let l=new E.Shape;const u=this.mode===1,p=u?"#000000cc":"#ff0000";l.graphics.setStrokeStyle(.5).setStrokeDash([10,5],0).beginStroke(p),l.graphics.moveTo(d,h).lineTo(e,h),o<i&&l.graphics.moveTo(o,a).lineTo(o,s),l.graphics.setStrokeDash([0,0]).beginFill("#ffffffcc");const f=u?132:78,_=o+100>e?o-101:o+1,g=h+f>s?h-f-1:h+1;l.graphics.drawRect(_,g,100,f),m.addChild(l);const v=parseInt(this.getP(h)*10)/10,b=this.getData(v,"tem"),y=this.getData(v,"td"),w=isNaN(b)?"--":this.getVaporP(+b).toFixed(2),C=isNaN(b)?"--":(this.getHumidity(+b,v)*1e3).toFixed(2),S=isNaN(b)?"--":this.getPT(+b,v).toFixed(1),A=isNaN(b)?"--":this.getPTse(+b,v).toFixed(1),j=[`气压：${v}hPa`,`高度：${this.getData(v,"gph")}m`,`气温：${b}℃`];j.push(`露点温度：${y}℃`),this.mode===1?(j.push(`位温：${S}℃`),j.push(`假相当位温：${A}℃`),j.push(`水汽压：${w}hPa`),j.push(`相对湿度：${this.getData(v,"humi")}%`),j.push(`比湿：${C}g/kg`)):j.unshift("点击订正抬升层");const F=new E.Text(j.join(`
`,"12px bold","#000000"));Object.assign(F,{x:_+4,y:g+6,lineHeight:14}),m.addChild(F),l=new E.Shape,l.graphics.beginFill("#0000ff");const R={x:this.getX(+b),y:h};if(this.inBox(R.x,R.y)&&(l.graphics.drawCircle(R.x,R.y,3),l.graphics.endFill()),R.x=this.getX(+y),this.inBox(R.x,R.y)&&(l.graphics.beginFill("#006400"),l.graphics.drawCircle(R.x,R.y,3),l.graphics.endFill()),m.addChild(l),this.mode===1&&this.events.hover&&Array.isArray(this.data)){const V=this.data.findIndex(O=>O.p<=v);if(V<0)return;this.events.hover(V)}}),this.canvas.addEventListener("click",n=>{if(this.mode===1)return;const{offsetX:o,offsetY:h}=n;if(!this.inBox2(o,h))return;const l=this.getP(h);if(l>this.data[0].p){alert("无效抬升层");return}let u=this.stage.getChildByName("dzLcl");u?u.removeAllChildren():(u=new E.Container,u.name="dzLcl");const p=new E.Shape;p.graphics.beginStroke("#ff0000"),p.graphics.moveTo(d,h).lineTo(i,h),u.addChild(p),this.stage.addChild(u),this.drawStateLine(l)})}getDryCoord(m,d){const x=(this.T0+m)*Math.pow(d/this.BASE_P,.286)-this.T0;return{x:this.getX(x),y:this.getY(d)}}getMoistHotlineTemp(m,d,x){d=parseInt(Math.round(d*10)/10);let a;do m-=.1,a=this.getPTse(m,x),a=parseInt(Math.round(a*10)/10);while(a-d!=0&&m>this.xAxis[0]);return m}getPT(m,d){return(this.T0+m)*Math.pow(1e3/d,.286)-this.T0}getPTse(m,d){let x=m+this.T0,a=this.getHumidity(m,d),r=d*a/(.62197+a)+1e-10,t=55+2840/(3.5*Math.log(x)-Math.log(r)-4.805);return x*Math.pow(1e3/d,.2854*(1-.28*a))*Math.exp((3376/t-2.54)*a*(1+.81*a))-this.T0}getHumidity(m,d){const x=this.getVaporP(m,d);return .622*(x/(d-.378*x))}getVaporP(m,d){return m<=0?6.112*Math.exp(22.46*m/(272.62+m)):6.112*Math.exp(17.62*m/(243.12+m))}getMoistHotlinePress(m,d,x){let a,r,t,e,i=0;const s=m+this.T0;do if(a=x,r=this.getVaporP(m),e=.622*r*(2500.8*1e3-2274.4*m)/(1004*s*(x-r)),t=s*Math.exp(e)/(this.T0+d),x=1e3*Math.pow(t,3.4965)+r,++i>=100)break;while(Math.abs(x-a)>.001);return a}getLCL(m){const{p:d,tem:x,td:a}=m[0],r=this.getHumidity(a,d);let t=r,e=d,i=0;for(;e>200&&i>-80&&(i=(x+this.T0)*Math.pow(e/d,.286)-this.T0,t=this.getHumidity(i,e),!(t-r>=1e-4||t-r<=-1e-4));)e-=.1;return{p:e,t:i}}riseT(m,d,x,a){let r,t,e,i;const o=this.T0;for(e=x;e<a&&(r=6.11*Math.pow(10,7.5*e/(237.3+e)),t=.622*r/(m-.378*r),i=(e+o)*Math.exp(.28586*Math.log(1e3/m)+2500*t/(338.52-.24*(o+e)+1.24*e))-o,!(Math.abs(i-d)<.1));e+=.1);return e}getLFC(m){const{T0:d}=this,x=7.5,a=237.3,r=m[0].p,t=m[0].tem,e=m[0].td,i=t-.976*(t-e)/(.976-833e-6*Math.pow(a+e,2)/(d+e)),s=r*Math.pow((d+i)/(d+t),3.5),n=6.11*Math.pow(10,x*i/(a+i)),o=.622*n/(s-.378*n),h=(i+d)*Math.exp(.28586*Math.log(1e3/s)+2500*(o/(338.52-.24*(i+d)+1.24*i)));let l,u;for(u=s;u>50;u-=.5){for(let f=0;f<m.length-1;f++){const _=m[f],g=m[f+1];u>g.p&&u<_.p&&(l=(_.tem-g.tem)*(u-_.p)/(_.p-g.p)+_.tem)}const p=this.riseT(u,h,-50,i);if(Math.abs(p-l)<.1)break}return{t:l,p:u,thse:h}}getIndexLeft(){return this.layout.left+this.chart.width-30}getData(m,d){if(!(Array.isArray(this.data)&&this.data.length)||!Reflect.has(this.data[0],d))return"--";const x=this.data.findIndex((i,s,n)=>i.p>=m&&n[s+1].p<m);if(x===-1)return"--";const a=this.data[x];let r=a[d];if(a.p===m)return r.toFixed(1);const t=this.data[x+1];return(r+(m-a.p)*(a[d]-t[d])/(a.p-t.p)).toFixed(1)}clear(){this.stage.children.splice(1)}};class Ht{constructor(m,d){if(!(m&&m.getContext))return console.error('参数"canvas"错误, 请确保传入canvas元素'),null;this.canvas=m,d=Object.assign({left:16,right:16,bottom:12,mainColor:"#A1A1A1",mainColorLight:"#E7E7E7CC"},d,{top:12,border:2}),this.options=d;const a=m.offsetHeight-d.top-d.bottom-d.border,r=m.offsetWidth-d.left-d.right-d.border;m.width=m.offsetWidth,m.height=m.offsetHeight,this.chart={width:r,height:a},this.data=null,this.colors=["#F89900","#EE82EE","#5CF65C","#009AED"],this.stage=new E.Stage(m),E.Ticker.addEventListener("tick",this.stage),this.initChart()}initChart(){const m=new E.Container;m.name="baseChart";const d=new E.Shape,{options:x,chart:a}=this;d.graphics.setStrokeStyle(x.border).beginStroke(x.mainColor),d.graphics.drawRect(x.left,x.top,a.width,a.height);const t=[[14,20],[10,24],[14,8],[18,24],[14,20]].map(i=>[i[0]+x.left,i[1]+x.top]);d.graphics.beginFill(x.mainColor),d.graphics.moveTo(t[0][0],t[0][1]),t.forEach((i,s)=>{s&&d.graphics.lineTo(i[0],i[1])}),m.addChild(d);const e=new E.Text("N","12px bold",x.mainColor);Object.assign(e,{x:t[0][0]+6,y:t[0][1]-14}),m.addChild(e),this.stage.addChild(m)}calcPath(m){let d=[],x=[],a=[],r=[],t=[1011,975,950,925,900,850,800,750,700,650,600,550,500,450,400,350,300,250,200,150,100],e=[2,305,521,741,966,1431,1921,2441,2994,3582,4208,4878,5601,6385,7242,8187,9242,10440,11893,13804,16491];for(let o=0;o<m.length;o++){let h=m[o].dir,l=m[o].sp,u=m[o].p;var i=(h-90)*Math.PI/180,s=l*Math.cos(l*Math.PI/360)*Math.cos(i),n=-l*Math.cos(l*Math.PI/360)*Math.sin(i);const p=t.findIndex(_=>u>=_);if(p===-1){r.push({x:s,y:n});continue}const f=e[Math.max(0,p-1)];f<=1e3?d.push({x:s,y:n}):f>1e3&&f<3e3?x.push({x:s,y:n}):f>=3e3&&f<6e3?a.push({x:s,y:n}):f>6e3&&r.push({x:s,y:n})}return[d,x,a,r]}getCenterInfo(m){const d=m.map(w=>w.x),x=m.map(w=>w.y),a=Math.min(...d),r=Math.min(...x),t=Math.max(...d),e=Math.max(...x),{options:i,chart:s}=this;let n=i.left+Math.ceil(s.width/2),o=i.top+Math.ceil(s.height/2);const h=Math.abs(t/a);let l=s.width/(2*e),u=s.height/(2*t),p=Math.ceil(s.width/2),f=Math.ceil(s.height/2);h>=2?(n=i.left+Math.ceil(s.width*1/3),p=Math.ceil(s.width*2/3),l=p/e):h<.6&&(n=i.left+Math.ceil(s.width*2/3),p=Math.ceil(s.width*2/3),l=p/Math.abs(r));const _=Math.abs(e/r);_>=2?(o=i.top+Math.ceil(s.height*1/3),f=Math.ceil(s.height*2/3),u=f/t):_<.6&&(o=i.top+Math.ceil(s.height*2/3),f=Math.ceil(s.height*2/3),u=f/Math.abs(a));const g={x:n,y:o},v=[a,r,t,e],b=Math.min(l,u),y=Math.max(p,f);return{center:g,extent:v,factor:b,axisLength:y}}drawChart(m,d,x,a,r){const{options:t,chart:e,colors:i,canvas:s}=this,{x:n,y:o}=d,h=new E.Container;h.name="roseChart";let l=new E.Shape;l.graphics.beginStroke("#9595CE"),l.graphics.moveTo(t.left,o).lineTo(t.left+e.width,o),l.graphics.moveTo(n,t.top).lineTo(n,t.top+e.height),h.addChild(l),l.graphics.setStrokeDash([8,6],0).beginStroke(t.mainColorLight);const u=Math.max(...a.map(b=>Math.abs(b))),p=Math.ceil(r*10/u);let f=0,_=0;for(;f<=u;){l.graphics.drawCircle(n,o,p*f/10);const b=new E.Text(`${f}`,"12px bold",t.mainColor);if(Object.assign(b,{x:n+_-8,y:o+2,textAlign:"center"}),h.addChild(b),f>0){const y=b.clone();y.x=n+-1*_+8,h.addChild(y)}f+=10,_+=p}h.addChild(l),l.graphics.setStrokeDash([0,0]),m.forEach((b,y)=>{l.graphics.beginStroke(i[y]),b.forEach((w,C)=>{C===0?l.graphics.moveTo(w.x*x+n,w.y*x+o):l.graphics.lineTo(w.x*x+n,w.y*x+o)})}),h.addChild(l);const g=s.width-t.right-1,v=s.height-t.bottom-1;l=new E.Shape,l.graphics.beginFill("#ffffff"),l.graphics.drawRect(0,0,s.width,t.top-1),l.graphics.drawRect(g,0,t.right+1,s.height),l.graphics.drawRect(0,0,t.left-1,s.height),l.graphics.drawRect(0,v,s.width,t.bottom+1),h.addChild(l),this.stage.addChild(h)}render(m){if(!Array.isArray(m))return;this.data=m,this.clear();const d=this.calcPath(m),x=d.reduce((i,s)=>i.concat(s),[]),{center:a,factor:r,extent:t,axisLength:e}=this.getCenterInfo(x);this.drawChart(d,a,r,t,e)}clear(){this.stage.children.splice(1)}}const Wt={class:"main-box"},zt={ref:"tlogpChartRef",class:"full"},$t={class:"right-panel full"},qt={ref:"roseChartRef",height:"240px",width:"300px"},Qt={key:0,class:"tlogp-mask"},J=$({__name:"TlogP",props:{stationId:{type:String,required:!0},time:{type:String,default:()=>new Date().toLocaleDateString()}},emits:["loaded","hover"],setup(T,{emit:m}){let d=null,x=null;const a=c.ref(!1),r=c.ref(!0),t=et(),e=m,i=T,s=c.computed(()=>i.time?o(i.time).slice(0,8):null),n=c.computed(()=>i.stationId);console.log("time ==>",s.value);function o(D){return/^(\d{14})$/.test(D)?D:(D instanceof Date?D=D.toLocaleDateString():D=new Date(D).toLocaleDateString(),`${D.split(/[^\d]/g).map(L=>L.length===1?`0${L}`:L).join("")}000000`)}const h=c.ref([]),l=c.ref([]),u=c.ref([]),p=c.ref([]);let f=null,_=null;const g=c.ref({}),v=c.ref(null),b=c.ref(!1);c.watch(b,D=>{if(!d)return;const I=D?2:1;d.switchMode(I)});const y=[1050,1e3,925,850,700,600,500,400,300,250,200],w=c.ref(0),C=c.computed(()=>{if(w.value===1||!h.value.length)return u.value;if(w.value===2)return h.value;const D=u.value.concat(h.value),I=[];return D[0].forEach((L,N)=>{y.findIndex(G=>Math.abs(L-G)<=1)!==-1&&I.push(N)}),D.map(L=>L.filter((N,P)=>I.includes(P)))}),S=c.computed(()=>w.value===1||!l.value.length?p.value:w.value===2?l.value:p.value.concat(l.value)),A=c.useTemplateRef("tlogpChartRef"),j=c.useTemplateRef("roseChartRef"),F=c.reactive({staIds:i.stationId,times:o(i.time)});function R(D){D&&(F.times=o(D),M(F))}const V=["","层结资料","物理量"];function O(){let D=`序号,${S.value.join(",")}`,I=[];const L=C.value[0].length;for(let z=0;z<L;z++){const q=C.value.map(U=>U[z]).join(",");I.push(`${z+1},${q}`)}const N=`${D}
${I.join(`
`)}`,P=new Blob([N],{type:"text/plain"}),G=URL.createObjectURL(P),H=document.createElement("a");H.href=G,H.download=`${V[w.value]}_${F.times}.csv`,H.click()}function Y(D,I){switch(D){case"switchStation":F.staIds=I,M(F);break;case"switchMode":d.switchMode(I?2:1);break;case"pickDate":R(I);break;case"exportData":w.value=1,O();break;case"exportIndex":w.value=2,O();break;case"showData":w.value=1,a.value=!0;break;case"showIndexs":w.value=2,a.value=!0;break;case"showSpecial":w.value=0,a.value=!0}}c.onMounted(()=>{d=new Yt(A.value),d.on("hover",D=>{Array.isArray(_)&&e("hover",_[D],f[D])}),x=new Ht(j.value),M(F)});function k(D){const L=D.map(N=>({p:+N.pressure,sp:+N.speed,dir:+N.direction,tem:+N.temperature,td:+N.dewpoint,gph:+N.gph,humi:+N.humi})).filter(N=>N.p>=200);L[0].p<L[L.length-1].p&&L.reverse(),d.renderData(L),x.render(L)}function M(D){if(!D)return;r.value=!0,h.value=[],l.value=[],fetch(t.algorithmUrl,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(D)}).then(L=>L.json()).then(({data:L})=>{r.value=!1,g.value=L[0].data||{};const N=L[0].data||{},P=new Map;Array.isArray(N)&&(v.value=N.reduce((G,H)=>G.set(H.id,{...H}),P),N.forEach(G=>{Array.isArray(G.val)&&G.val.length>2&&(h.value.push(G.val),l.value.push(G.desc))}))}).catch(L=>{throw r.value=!1,Error(L)});const I=Object.keys(D).map(L=>`${L}=${D[L]}`).join("&");fetch(`${t.dataUrl}?${I}`).then(L=>L.json()).then(({data:L})=>{if(r.value=!1,!(L&&L.elements))return;const{elements:N,trace:P}=L;f=N,_=P,k(N),u.value.splice(0),p.value.splice(0);const G=["气压","高度","温度","露点温度","风速","风向","相对湿度"],H=["pressure","gph","temperature","dewpoint","speed","direction","humi"];p.value=G,u.value=H.map(z=>N.map(q=>q[z])),e("loaded",P)}).catch(L=>{throw r.value=!1,Error(L)})}return(D,I)=>(c.openBlock(),c.createElementBlock("div",{class:c.normalizeClass(["cme-tlogp",{loading:r.value}])},[c.createVNode(It,{time:s.value,staId:n.value,onAction:Y},null,8,["time","staId"]),c.createElementVNode("div",Wt,[c.createElementVNode("canvas",zt,null,512)]),c.createElementVNode("div",$t,[c.createElementVNode("canvas",qt,null,512),c.createVNode(Rt,{data:v.value},null,8,["data"])]),c.createVNode(mt,{data:v.value,class:"table-view"},null,8,["data"]),a.value?(c.openBlock(),c.createElementBlock("div",Qt,[c.withDirectives(c.createVNode(jt,{descs:S.value,values:C.value},null,8,["descs","values"]),[[c.unref(kt),L=>a.value=L]])])):c.createCommentVNode("",!0)],2))}},[["__scopeId","data-v-ae841efd"]]);J.install=function(T){T.component("cme-tlogp",J)},W.TlogP=J,W.setConfig=Pt,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
