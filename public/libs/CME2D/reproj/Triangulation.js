const _0x645c2e=_0x5f36;function _0x10f0(){const _0x4a71cc=['canWrapX','wrapsXInSource_','max','forEach','62zkZDTT','maxSourceExtent_','1863459zsjyzs','triangles_','transformInv_','source','push','isGlobal','log2','10772IlQOZl','targetProj_','1392032yCAgqD','addTriangle_','min','165748FvqaYU','sourceWorldWidth_','canWrapXInSource_','sourceProj_','9JfDjfI','getExtent','errorThresholdSquared_','addQuad_','3377916LSxGBF','45760AApWso','targetWorldWidth_','632443rEQNyg','ceil'];_0x10f0=function(){return _0x4a71cc;};return _0x10f0();}(function(_0x3f7dfd,_0x53c7c4){const _0x15d077=_0x5f36,_0xfb8cb9=_0x3f7dfd();while(!![]){try{const _0x5cf423=-parseInt(_0x15d077(0xc6))/0x1*(parseInt(_0x15d077(0xcf))/0x2)+-parseInt(_0x15d077(0xb9))/0x3*(-parseInt(_0x15d077(0xb5))/0x4)+-parseInt(_0x15d077(0xbe))/0x5+parseInt(_0x15d077(0xbd))/0x6+-parseInt(_0x15d077(0xc0))/0x7+-parseInt(_0x15d077(0xb2))/0x8+parseInt(_0x15d077(0xc8))/0x9;if(_0x5cf423===_0x53c7c4)break;else _0xfb8cb9['push'](_0xfb8cb9['shift']());}catch(_0x32b39f){_0xfb8cb9['push'](_0xfb8cb9['shift']());}}}(_0x10f0,0x460bf));import{boundingExtent,createEmpty,extendCoordinate,getArea,getBottomLeft,getBottomRight,getTopLeft,getTopRight,getWidth,intersects}from'../extent.js';import{getTransform}from'../proj.js';import{modulo}from'../math.js';const MAX_SUBDIVISION=0xa,MAX_TRIANGLE_WIDTH=0.25;function _0x5f36(_0x42108d,_0x5b9139){const _0x10f030=_0x10f0();return _0x5f36=function(_0x5f368a,_0x22a9df){_0x5f368a=_0x5f368a-0xb1;let _0x596e97=_0x10f030[_0x5f368a];return _0x596e97;},_0x5f36(_0x42108d,_0x5b9139);}class Triangulation{constructor(_0x3a5a7b,_0x2051a1,_0x3b1fec,_0x7eee74,_0x3d99ea,_0x56163e){const _0x10a3ee=_0x5f36;this['sourceProj_']=_0x3a5a7b,this['targetProj_']=_0x2051a1;let _0x3ef64f={};const _0x141778=getTransform(this[_0x10a3ee(0xb1)],this[_0x10a3ee(0xb8)]);this[_0x10a3ee(0xca)]=function(_0xe21574){const _0x35ea0e=_0xe21574[0x0]+'/'+_0xe21574[0x1];return!_0x3ef64f[_0x35ea0e]&&(_0x3ef64f[_0x35ea0e]=_0x141778(_0xe21574)),_0x3ef64f[_0x35ea0e];},this[_0x10a3ee(0xc7)]=_0x7eee74,this[_0x10a3ee(0xbb)]=_0x3d99ea*_0x3d99ea,this[_0x10a3ee(0xc9)]=[],this[_0x10a3ee(0xc3)]=![],this['canWrapXInSource_']=this[_0x10a3ee(0xb8)][_0x10a3ee(0xc2)]()&&!!_0x7eee74&&!!this['sourceProj_'][_0x10a3ee(0xba)]()&&getWidth(_0x7eee74)>=getWidth(this[_0x10a3ee(0xb8)][_0x10a3ee(0xba)]()),this['sourceWorldWidth_']=this[_0x10a3ee(0xb8)][_0x10a3ee(0xba)]()?getWidth(this['sourceProj_'][_0x10a3ee(0xba)]()):null,this['targetWorldWidth_']=this[_0x10a3ee(0xb1)][_0x10a3ee(0xba)]()?getWidth(this[_0x10a3ee(0xb1)][_0x10a3ee(0xba)]()):null;const _0x2b3096=getTopLeft(_0x3b1fec),_0x56d705=getTopRight(_0x3b1fec),_0x43e329=getBottomRight(_0x3b1fec),_0x425ec3=getBottomLeft(_0x3b1fec),_0x3e320d=this[_0x10a3ee(0xca)](_0x2b3096),_0x1bffb5=this[_0x10a3ee(0xca)](_0x56d705),_0x309488=this['transformInv_'](_0x43e329),_0xbff99a=this[_0x10a3ee(0xca)](_0x425ec3),_0x5e93ea=MAX_SUBDIVISION+(_0x56163e?Math[_0x10a3ee(0xc4)](0x0,Math[_0x10a3ee(0xc1)](Math[_0x10a3ee(0xce)](getArea(_0x3b1fec)/(_0x56163e*_0x56163e*0x100*0x100)))):0x0);this[_0x10a3ee(0xbc)](_0x2b3096,_0x56d705,_0x43e329,_0x425ec3,_0x3e320d,_0x1bffb5,_0x309488,_0xbff99a,_0x5e93ea);if(this[_0x10a3ee(0xc3)]){let _0x5237b0=Infinity;this[_0x10a3ee(0xc9)][_0x10a3ee(0xc5)](function(_0x484fe6,_0x267e93,_0x37f594){const _0x115ed6=_0x10a3ee;_0x5237b0=Math[_0x115ed6(0xb4)](_0x5237b0,_0x484fe6[_0x115ed6(0xcb)][0x0][0x0],_0x484fe6['source'][0x1][0x0],_0x484fe6[_0x115ed6(0xcb)][0x2][0x0]);}),this[_0x10a3ee(0xc9)][_0x10a3ee(0xc5)](_0xfc49f9=>{const _0x1aa1f4=_0x10a3ee;if(Math[_0x1aa1f4(0xc4)](_0xfc49f9['source'][0x0][0x0],_0xfc49f9[_0x1aa1f4(0xcb)][0x1][0x0],_0xfc49f9[_0x1aa1f4(0xcb)][0x2][0x0])-_0x5237b0>this['sourceWorldWidth_']/0x2){const _0x397876=[[_0xfc49f9['source'][0x0][0x0],_0xfc49f9[_0x1aa1f4(0xcb)][0x0][0x1]],[_0xfc49f9[_0x1aa1f4(0xcb)][0x1][0x0],_0xfc49f9['source'][0x1][0x1]],[_0xfc49f9[_0x1aa1f4(0xcb)][0x2][0x0],_0xfc49f9[_0x1aa1f4(0xcb)][0x2][0x1]]];_0x397876[0x0][0x0]-_0x5237b0>this[_0x1aa1f4(0xb6)]/0x2&&(_0x397876[0x0][0x0]-=this[_0x1aa1f4(0xb6)]);_0x397876[0x1][0x0]-_0x5237b0>this[_0x1aa1f4(0xb6)]/0x2&&(_0x397876[0x1][0x0]-=this[_0x1aa1f4(0xb6)]);_0x397876[0x2][0x0]-_0x5237b0>this[_0x1aa1f4(0xb6)]/0x2&&(_0x397876[0x2][0x0]-=this[_0x1aa1f4(0xb6)]);const _0x2039ce=Math[_0x1aa1f4(0xb4)](_0x397876[0x0][0x0],_0x397876[0x1][0x0],_0x397876[0x2][0x0]),_0x1c72aa=Math[_0x1aa1f4(0xc4)](_0x397876[0x0][0x0],_0x397876[0x1][0x0],_0x397876[0x2][0x0]);_0x1c72aa-_0x2039ce<this[_0x1aa1f4(0xb6)]/0x2&&(_0xfc49f9[_0x1aa1f4(0xcb)]=_0x397876);}});}_0x3ef64f={};}[_0x645c2e(0xb3)](_0x1e10c0,_0x41f023,_0x565eaf,_0x53cf5e,_0x36da5a,_0xedcac7){const _0x1e7b81=_0x645c2e;this[_0x1e7b81(0xc9)][_0x1e7b81(0xcc)]({'source':[_0x53cf5e,_0x36da5a,_0xedcac7],'target':[_0x1e10c0,_0x41f023,_0x565eaf]});}[_0x645c2e(0xbc)](_0x3dca1b,_0x4d9c25,_0x2cda68,_0x2db113,_0xffd8af,_0x55d02a,_0x57bcc6,_0x3efc7b,_0x11eea9){const _0x40d6ef=_0x645c2e,_0x1df913=boundingExtent([_0xffd8af,_0x55d02a,_0x57bcc6,_0x3efc7b]),_0xbdc12f=this[_0x40d6ef(0xb6)]?getWidth(_0x1df913)/this['sourceWorldWidth_']:null,_0x5b5996=this[_0x40d6ef(0xb6)],_0x17bb0c=this[_0x40d6ef(0xb8)][_0x40d6ef(0xc2)]()&&_0xbdc12f>0.5&&_0xbdc12f<0x1;let _0x12b372=![];if(_0x11eea9>0x0){if(this[_0x40d6ef(0xb1)][_0x40d6ef(0xcd)]()&&this[_0x40d6ef(0xbf)]){const _0x592aa4=boundingExtent([_0x3dca1b,_0x4d9c25,_0x2cda68,_0x2db113]),_0x284ab2=getWidth(_0x592aa4)/this['targetWorldWidth_'];_0x12b372=_0x284ab2>MAX_TRIANGLE_WIDTH||_0x12b372;}!_0x17bb0c&&this[_0x40d6ef(0xb8)][_0x40d6ef(0xcd)]()&&_0xbdc12f&&(_0x12b372=_0xbdc12f>MAX_TRIANGLE_WIDTH||_0x12b372);}if(!_0x12b372&&this['maxSourceExtent_']){if(isFinite(_0x1df913[0x0])&&isFinite(_0x1df913[0x1])&&isFinite(_0x1df913[0x2])&&isFinite(_0x1df913[0x3])){if(!intersects(_0x1df913,this[_0x40d6ef(0xc7)]))return;}}let _0x1034f8=0x0;if(!_0x12b372){if(!isFinite(_0xffd8af[0x0])||!isFinite(_0xffd8af[0x1])||!isFinite(_0x55d02a[0x0])||!isFinite(_0x55d02a[0x1])||!isFinite(_0x57bcc6[0x0])||!isFinite(_0x57bcc6[0x1])||!isFinite(_0x3efc7b[0x0])||!isFinite(_0x3efc7b[0x1])){if(_0x11eea9>0x0)_0x12b372=!![];else{_0x1034f8=(!isFinite(_0xffd8af[0x0])||!isFinite(_0xffd8af[0x1])?0x8:0x0)+(!isFinite(_0x55d02a[0x0])||!isFinite(_0x55d02a[0x1])?0x4:0x0)+(!isFinite(_0x57bcc6[0x0])||!isFinite(_0x57bcc6[0x1])?0x2:0x0)+(!isFinite(_0x3efc7b[0x0])||!isFinite(_0x3efc7b[0x1])?0x1:0x0);if(_0x1034f8!=0x1&&_0x1034f8!=0x2&&_0x1034f8!=0x4&&_0x1034f8!=0x8)return;}}}if(_0x11eea9>0x0){if(!_0x12b372){const _0x4d6251=[(_0x3dca1b[0x0]+_0x2cda68[0x0])/0x2,(_0x3dca1b[0x1]+_0x2cda68[0x1])/0x2],_0x26aae7=this['transformInv_'](_0x4d6251);let _0x20774a;if(_0x17bb0c){const _0x1089f1=(modulo(_0xffd8af[0x0],_0x5b5996)+modulo(_0x57bcc6[0x0],_0x5b5996))/0x2;_0x20774a=_0x1089f1-modulo(_0x26aae7[0x0],_0x5b5996);}else _0x20774a=(_0xffd8af[0x0]+_0x57bcc6[0x0])/0x2-_0x26aae7[0x0];const _0x1be6fd=(_0xffd8af[0x1]+_0x57bcc6[0x1])/0x2-_0x26aae7[0x1],_0x4950d6=_0x20774a*_0x20774a+_0x1be6fd*_0x1be6fd;_0x12b372=_0x4950d6>this[_0x40d6ef(0xbb)];}if(_0x12b372){if(Math['abs'](_0x3dca1b[0x0]-_0x2cda68[0x0])<=Math['abs'](_0x3dca1b[0x1]-_0x2cda68[0x1])){const _0x319774=[(_0x4d9c25[0x0]+_0x2cda68[0x0])/0x2,(_0x4d9c25[0x1]+_0x2cda68[0x1])/0x2],_0x5cf3a0=this[_0x40d6ef(0xca)](_0x319774),_0x552cae=[(_0x2db113[0x0]+_0x3dca1b[0x0])/0x2,(_0x2db113[0x1]+_0x3dca1b[0x1])/0x2],_0x511f04=this[_0x40d6ef(0xca)](_0x552cae);this['addQuad_'](_0x3dca1b,_0x4d9c25,_0x319774,_0x552cae,_0xffd8af,_0x55d02a,_0x5cf3a0,_0x511f04,_0x11eea9-0x1),this[_0x40d6ef(0xbc)](_0x552cae,_0x319774,_0x2cda68,_0x2db113,_0x511f04,_0x5cf3a0,_0x57bcc6,_0x3efc7b,_0x11eea9-0x1);}else{const _0x9aa176=[(_0x3dca1b[0x0]+_0x4d9c25[0x0])/0x2,(_0x3dca1b[0x1]+_0x4d9c25[0x1])/0x2],_0x4dfeb9=this['transformInv_'](_0x9aa176),_0x2efca9=[(_0x2cda68[0x0]+_0x2db113[0x0])/0x2,(_0x2cda68[0x1]+_0x2db113[0x1])/0x2],_0x4b6dee=this['transformInv_'](_0x2efca9);this[_0x40d6ef(0xbc)](_0x3dca1b,_0x9aa176,_0x2efca9,_0x2db113,_0xffd8af,_0x4dfeb9,_0x4b6dee,_0x3efc7b,_0x11eea9-0x1),this['addQuad_'](_0x9aa176,_0x4d9c25,_0x2cda68,_0x2efca9,_0x4dfeb9,_0x55d02a,_0x57bcc6,_0x4b6dee,_0x11eea9-0x1);}return;}}if(_0x17bb0c){if(!this[_0x40d6ef(0xb7)])return;this[_0x40d6ef(0xc3)]=!![];}(_0x1034f8&0xb)==0x0&&this[_0x40d6ef(0xb3)](_0x3dca1b,_0x2cda68,_0x2db113,_0xffd8af,_0x57bcc6,_0x3efc7b),(_0x1034f8&0xe)==0x0&&this[_0x40d6ef(0xb3)](_0x3dca1b,_0x2cda68,_0x4d9c25,_0xffd8af,_0x57bcc6,_0x55d02a),_0x1034f8&&((_0x1034f8&0xd)==0x0&&this[_0x40d6ef(0xb3)](_0x4d9c25,_0x2db113,_0x3dca1b,_0x55d02a,_0x3efc7b,_0xffd8af),(_0x1034f8&0x7)==0x0&&this[_0x40d6ef(0xb3)](_0x4d9c25,_0x2db113,_0x2cda68,_0x55d02a,_0x3efc7b,_0x57bcc6));}['calculateSourceExtent'](){const _0x316d3c=_0x645c2e,_0x228027=createEmpty();return this[_0x316d3c(0xc9)][_0x316d3c(0xc5)](function(_0x2372db,_0xd87e16,_0x4d5799){const _0x5dd815=_0x316d3c,_0x375b42=_0x2372db[_0x5dd815(0xcb)];extendCoordinate(_0x228027,_0x375b42[0x0]),extendCoordinate(_0x228027,_0x375b42[0x1]),extendCoordinate(_0x228027,_0x375b42[0x2]);}),_0x228027;}['getTriangles'](){const _0x184e8c=_0x645c2e;return this[_0x184e8c(0xc9)];}}export default Triangulation;