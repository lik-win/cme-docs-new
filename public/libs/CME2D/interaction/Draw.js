const _0x13f9fc=_0x13bc;(function(_0x3290c3,_0x43e8c7){const _0x59258d=_0x13bc,_0x4fa4cc=_0x3290c3();while(!![]){try{const _0x553bf8=-parseInt(_0x59258d(0x16f))/0x1*(parseInt(_0x59258d(0x153))/0x2)+parseInt(_0x59258d(0x119))/0x3+parseInt(_0x59258d(0x17e))/0x4+parseInt(_0x59258d(0x16d))/0x5+-parseInt(_0x59258d(0x187))/0x6*(-parseInt(_0x59258d(0x122))/0x7)+parseInt(_0x59258d(0x156))/0x8+-parseInt(_0x59258d(0x181))/0x9;if(_0x553bf8===_0x43e8c7)break;else _0x4fa4cc['push'](_0x4fa4cc['shift']());}catch(_0x1004cc){_0x4fa4cc['push'](_0x4fa4cc['shift']());}}}(_0x3a1f,0x97a03));import _0x1e8e63 from'../geom/Circle.js';import _0x4b428a from'../events/Event.js';import _0x1642c8 from'../events/EventType.js';import _0x26ba60 from'../Feature.js';import _0x4200cd from'../geom/GeometryCollection.js';import _0x57fdaa from'./Property.js';import _0x25759e from'../geom/LineString.js';import _0x1aa051 from'../MapBrowserEvent.js';import _0x45e2df from'../MapBrowserEventType.js';import _0x2988a9 from'../geom/MultiLineString.js';import _0x148add from'../geom/MultiPoint.js';import _0x5b94bb from'../geom/MultiPolygon.js';import _0xeaa65 from'../geom/Point.js';import _0x47ebc0 from'./Pointer.js';import _0x10e345,{fromCircle,makeRegular}from'../geom/Polygon.js';import _0xaa51d4 from'../layer/Vector.js';function _0x13bc(_0x16072c,_0x4f740f){const _0x3a1f0e=_0x3a1f();return _0x13bc=function(_0x13bc94,_0x32077d){_0x13bc94=_0x13bc94-0xff;let _0x57ac55=_0x3a1f0e[_0x13bc94];return _0x57ac55;},_0x13bc(_0x16072c,_0x4f740f);}import _0x1b672b from'../source/Vector.js';import{FALSE,TRUE}from'../functions.js';import{always,never,noModifierKeys,shiftKeyOnly}from'../events/condition.js';import{boundingExtent,getBottomLeft,getBottomRight,getTopLeft,getTopRight}from'../extent.js';import{clamp,squaredDistance,toFixed}from'../math.js';import{createEditingStyle}from'../style/Style.js';import{distance,squaredDistance as _0x470f55}from'../coordinate.js';import{fromUserCoordinate,getUserProjection}from'../proj.js';import{getStrideForLayout}from'../geom/SimpleGeometry.js';const DrawEventType={'DRAWSTART':_0x13f9fc(0x172),'DRAWEND':_0x13f9fc(0x134),'DRAWABORT':_0x13f9fc(0x168)};export class DrawEvent extends _0x4b428a{constructor(_0x21595d,_0x28d94c){super(_0x21595d),this['feature']=_0x28d94c;}}function getTraceTargets(_0x431d9b,_0x5cf2c0){const _0x33286e=_0x13f9fc,_0x30b637=[];for(let _0xc30e98=0x0;_0xc30e98<_0x5cf2c0[_0x33286e(0x19a)];++_0xc30e98){const _0x4b576e=_0x5cf2c0[_0xc30e98],_0x57ab0b=_0x4b576e[_0x33286e(0x147)]();appendGeometryTraceTargets(_0x431d9b,_0x57ab0b,_0x30b637);}return _0x30b637;}function getSquaredDistance(_0x28eca5,_0x4f4611){return squaredDistance(_0x28eca5[0x0],_0x28eca5[0x1],_0x4f4611[0x0],_0x4f4611[0x1]);}function getCoordinate(_0x155f4b,_0x27b1b8){const _0x1ca32c=_0x155f4b['length'];if(_0x27b1b8<0x0)return _0x155f4b[_0x27b1b8+_0x1ca32c];if(_0x27b1b8>=_0x1ca32c)return _0x155f4b[_0x27b1b8-_0x1ca32c];return _0x155f4b[_0x27b1b8];}function getCumulativeSquaredDistance(_0x778218,_0x4c8c3c,_0x31d399){const _0xbd2273=_0x13f9fc;let _0x4a88fd,_0x35a24e;_0x4c8c3c<_0x31d399?(_0x4a88fd=_0x4c8c3c,_0x35a24e=_0x31d399):(_0x4a88fd=_0x31d399,_0x35a24e=_0x4c8c3c);const _0x1cb9fc=Math['ceil'](_0x4a88fd),_0x548a4a=Math[_0xbd2273(0x192)](_0x35a24e);if(_0x1cb9fc>_0x548a4a){const _0x51bdec=interpolateCoordinate(_0x778218,_0x4a88fd),_0x268717=interpolateCoordinate(_0x778218,_0x35a24e);return getSquaredDistance(_0x51bdec,_0x268717);}let _0x530dbc=0x0;if(_0x4a88fd<_0x1cb9fc){const _0x27439f=interpolateCoordinate(_0x778218,_0x4a88fd),_0x44471b=getCoordinate(_0x778218,_0x1cb9fc);_0x530dbc+=getSquaredDistance(_0x27439f,_0x44471b);}if(_0x548a4a<_0x35a24e){const _0x3eebf5=getCoordinate(_0x778218,_0x548a4a),_0x392917=interpolateCoordinate(_0x778218,_0x35a24e);_0x530dbc+=getSquaredDistance(_0x3eebf5,_0x392917);}for(let _0x34ab4b=_0x1cb9fc;_0x34ab4b<_0x548a4a-0x1;++_0x34ab4b){const _0x52926e=getCoordinate(_0x778218,_0x34ab4b),_0x3ac6f6=getCoordinate(_0x778218,_0x34ab4b+0x1);_0x530dbc+=getSquaredDistance(_0x52926e,_0x3ac6f6);}return _0x530dbc;}function appendGeometryTraceTargets(_0x48ba8f,_0x1779c7,_0x24081d){const _0x51ad96=_0x13f9fc;if(_0x1779c7 instanceof _0x25759e){appendTraceTarget(_0x48ba8f,_0x1779c7[_0x51ad96(0x129)](),![],_0x24081d);return;}if(_0x1779c7 instanceof _0x2988a9){const _0xcf9f06=_0x1779c7[_0x51ad96(0x129)]();for(let _0x163083=0x0,_0x3f60b8=_0xcf9f06[_0x51ad96(0x19a)];_0x163083<_0x3f60b8;++_0x163083){appendTraceTarget(_0x48ba8f,_0xcf9f06[_0x163083],![],_0x24081d);}return;}if(_0x1779c7 instanceof _0x10e345){const _0x35a584=_0x1779c7['getCoordinates']();for(let _0xff0fce=0x0,_0x365f7b=_0x35a584[_0x51ad96(0x19a)];_0xff0fce<_0x365f7b;++_0xff0fce){appendTraceTarget(_0x48ba8f,_0x35a584[_0xff0fce],!![],_0x24081d);}return;}if(_0x1779c7 instanceof _0x5b94bb){const _0x5596cc=_0x1779c7[_0x51ad96(0x129)]();for(let _0x158eb3=0x0,_0x49de4e=_0x5596cc['length'];_0x158eb3<_0x49de4e;++_0x158eb3){const _0x1206b9=_0x5596cc[_0x158eb3];for(let _0x1a5c0d=0x0,_0x265b06=_0x1206b9[_0x51ad96(0x19a)];_0x1a5c0d<_0x265b06;++_0x1a5c0d){appendTraceTarget(_0x48ba8f,_0x1206b9[_0x1a5c0d],!![],_0x24081d);}}return;}if(_0x1779c7 instanceof _0x4200cd){const _0x248a4e=_0x1779c7['getGeometries']();for(let _0x7452ba=0x0;_0x7452ba<_0x248a4e[_0x51ad96(0x19a)];++_0x7452ba){appendGeometryTraceTargets(_0x48ba8f,_0x248a4e[_0x7452ba],_0x24081d);}return;}}const sharedUpdateInfo={'index':-0x1,'endIndex':NaN};function getTraceTargetUpdate(_0x4a3969,_0x48eb93,_0x11cfad,_0x3a10ae){const _0x1eb475=_0x13f9fc,_0x4987fd=_0x4a3969[0x0],_0x344df1=_0x4a3969[0x1];let _0x1dfd7f=Infinity,_0x2a7508=-0x1,_0x89f78=NaN;for(let _0x22d981=0x0;_0x22d981<_0x48eb93[_0x1eb475(0x12e)][_0x1eb475(0x19a)];++_0x22d981){const _0xcbf683=_0x48eb93[_0x1eb475(0x12e)][_0x22d981],_0x4bb07a=_0xcbf683[_0x1eb475(0x19f)];let _0x50a3d8=Infinity,_0x47083d;for(let _0xcd8bf4=0x0;_0xcd8bf4<_0x4bb07a['length']-0x1;++_0xcd8bf4){const _0x2178fb=_0x4bb07a[_0xcd8bf4],_0x5279fb=_0x4bb07a[_0xcd8bf4+0x1],_0x2dffd1=getPointSegmentRelationship(_0x4987fd,_0x344df1,_0x2178fb,_0x5279fb);_0x2dffd1[_0x1eb475(0x152)]<_0x50a3d8&&(_0x50a3d8=_0x2dffd1[_0x1eb475(0x152)],_0x47083d=_0xcd8bf4+_0x2dffd1[_0x1eb475(0x195)]);}if(_0x50a3d8<_0x1dfd7f){_0x1dfd7f=_0x50a3d8;if(_0xcbf683[_0x1eb475(0x126)]&&_0x48eb93[_0x1eb475(0x131)]===_0x22d981){if(_0xcbf683[_0x1eb475(0x18e)]>_0xcbf683[_0x1eb475(0x13f)])_0x47083d<_0xcbf683[_0x1eb475(0x13f)]&&(_0x47083d+=_0x4bb07a['length']);else _0xcbf683['endIndex']<_0xcbf683[_0x1eb475(0x13f)]&&(_0x47083d>_0xcbf683[_0x1eb475(0x13f)]&&(_0x47083d-=_0x4bb07a[_0x1eb475(0x19a)]));}_0x89f78=_0x47083d,_0x2a7508=_0x22d981;}}const _0xb3bc1=_0x48eb93['targets'][_0x2a7508];let _0x266b42=_0xb3bc1[_0x1eb475(0x126)];if(_0x48eb93[_0x1eb475(0x131)]===_0x2a7508&&_0x266b42){const _0xcfa66d=interpolateCoordinate(_0xb3bc1[_0x1eb475(0x19f)],_0x89f78),_0x507240=_0x11cfad[_0x1eb475(0x167)](_0xcfa66d);distance(_0x507240,_0x48eb93[_0x1eb475(0x101)])>_0x3a10ae&&(_0x266b42=![]);}if(_0x266b42){const _0x305842=_0xb3bc1[_0x1eb475(0x19f)],_0x3c57af=_0x305842[_0x1eb475(0x19a)],_0x105bb0=_0xb3bc1[_0x1eb475(0x13f)],_0x2a7830=_0x89f78;if(_0x105bb0<_0x2a7830){const _0x43c8a8=getCumulativeSquaredDistance(_0x305842,_0x105bb0,_0x2a7830),_0x46b50d=getCumulativeSquaredDistance(_0x305842,_0x105bb0,_0x2a7830-_0x3c57af);_0x46b50d<_0x43c8a8&&(_0x89f78-=_0x3c57af);}else{const _0x40b73a=getCumulativeSquaredDistance(_0x305842,_0x105bb0,_0x2a7830),_0x748327=getCumulativeSquaredDistance(_0x305842,_0x105bb0,_0x2a7830+_0x3c57af);_0x748327<_0x40b73a&&(_0x89f78+=_0x3c57af);}}return sharedUpdateInfo['index']=_0x2a7508,sharedUpdateInfo[_0x1eb475(0x18e)]=_0x89f78,sharedUpdateInfo;}function appendTraceTarget(_0x18b0f8,_0x5f23f7,_0x2dfa2c,_0x3eb3d4){const _0xfad455=_0x13f9fc,_0x2d5fa0=_0x18b0f8[0x0],_0x456db4=_0x18b0f8[0x1];for(let _0x261eda=0x0,_0x18dd50=_0x5f23f7[_0xfad455(0x19a)]-0x1;_0x261eda<_0x18dd50;++_0x261eda){const _0x49bbb5=_0x5f23f7[_0x261eda],_0x19f72f=_0x5f23f7[_0x261eda+0x1],_0x27fcaf=getPointSegmentRelationship(_0x2d5fa0,_0x456db4,_0x49bbb5,_0x19f72f);if(_0x27fcaf[_0xfad455(0x152)]===0x0){const _0x3136c5=_0x261eda+_0x27fcaf[_0xfad455(0x195)];_0x3eb3d4[_0xfad455(0x15c)]({'coordinates':_0x5f23f7,'ring':_0x2dfa2c,'startIndex':_0x3136c5,'endIndex':_0x3136c5});return;}}}const sharedRel={'along':0x0,'squaredDistance':0x0};function getPointSegmentRelationship(_0x199826,_0x458a75,_0x500584,_0x29c343){const _0x7803be=_0x13f9fc,_0xdd3061=_0x500584[0x0],_0x5580d3=_0x500584[0x1],_0x5006e3=_0x29c343[0x0],_0x4e9168=_0x29c343[0x1],_0x1e179c=_0x5006e3-_0xdd3061,_0xe0e408=_0x4e9168-_0x5580d3;let _0x382f3e=0x0,_0x478c5e=_0xdd3061,_0x2a041b=_0x5580d3;return(_0x1e179c!==0x0||_0xe0e408!==0x0)&&(_0x382f3e=clamp(((_0x199826-_0xdd3061)*_0x1e179c+(_0x458a75-_0x5580d3)*_0xe0e408)/(_0x1e179c*_0x1e179c+_0xe0e408*_0xe0e408),0x0,0x1),_0x478c5e+=_0x1e179c*_0x382f3e,_0x2a041b+=_0xe0e408*_0x382f3e),sharedRel[_0x7803be(0x195)]=_0x382f3e,sharedRel[_0x7803be(0x152)]=toFixed(squaredDistance(_0x199826,_0x458a75,_0x478c5e,_0x2a041b),0xa),sharedRel;}function interpolateCoordinate(_0x498fdf,_0x522650){const _0x300b04=_0x13f9fc,_0x2243db=_0x498fdf[_0x300b04(0x19a)];let _0x219d55=Math[_0x300b04(0x192)](_0x522650);const _0x2b2166=_0x522650-_0x219d55;if(_0x219d55>=_0x2243db)_0x219d55-=_0x2243db;else _0x219d55<0x0&&(_0x219d55+=_0x2243db);let _0x509328=_0x219d55+0x1;_0x509328>=_0x2243db&&(_0x509328-=_0x2243db);const _0x6e3510=_0x498fdf[_0x219d55],_0xf8ebbb=_0x6e3510[0x0],_0x29c399=_0x6e3510[0x1],_0x3fdfca=_0x498fdf[_0x509328],_0x31c400=_0x3fdfca[0x0]-_0xf8ebbb,_0x41e5a7=_0x3fdfca[0x1]-_0x29c399;return[_0xf8ebbb+_0x31c400*_0x2b2166,_0x29c399+_0x41e5a7*_0x2b2166];}class Draw extends _0x47ebc0{constructor(_0x3991bd){const _0x4ddf52=_0x13f9fc,_0x1e517a=_0x3991bd;!_0x1e517a[_0x4ddf52(0x118)]&&(_0x1e517a[_0x4ddf52(0x118)]=FALSE);super(_0x1e517a),this['on'],this[_0x4ddf52(0x144)],this['un'],this[_0x4ddf52(0x114)]=![],this['downPx_']=null,this[_0x4ddf52(0x113)],this['lastDragTime_'],this[_0x4ddf52(0x14d)],this[_0x4ddf52(0x10e)]=![],this[_0x4ddf52(0x154)]=_0x3991bd[_0x4ddf52(0x100)]?_0x3991bd['source']:null,this['features_']=_0x3991bd[_0x4ddf52(0x1a2)]?_0x3991bd[_0x4ddf52(0x1a2)]:null,this['snapTolerance_']=_0x3991bd[_0x4ddf52(0x115)]?_0x3991bd['snapTolerance']:0xc,this[_0x4ddf52(0x18c)]=_0x3991bd[_0x4ddf52(0x13d)],this[_0x4ddf52(0x166)]=getMode(this[_0x4ddf52(0x18c)]),this[_0x4ddf52(0x11e)]=!!_0x3991bd[_0x4ddf52(0x140)],this[_0x4ddf52(0x13e)]=_0x3991bd[_0x4ddf52(0x173)]?_0x3991bd[_0x4ddf52(0x173)]:this[_0x4ddf52(0x166)]===_0x4ddf52(0x145)?0x3:0x2,this[_0x4ddf52(0x14f)]=this[_0x4ddf52(0x166)]===_0x4ddf52(0x165)?0x2:_0x3991bd['maxPoints']?_0x3991bd[_0x4ddf52(0x108)]:Infinity,this[_0x4ddf52(0x109)]=_0x3991bd['finishCondition']?_0x3991bd[_0x4ddf52(0x102)]:TRUE,this[_0x4ddf52(0x19d)]=_0x3991bd[_0x4ddf52(0x11d)]?_0x3991bd[_0x4ddf52(0x11d)]:'XY';let _0x44c8be=_0x3991bd[_0x4ddf52(0x174)];if(!_0x44c8be){const _0x5dce2a=this[_0x4ddf52(0x166)];if(_0x5dce2a==='Circle')_0x44c8be=(_0x49d16d,_0x5324ac,_0x5d1db4)=>{const _0x199e5d=_0x4ddf52,_0x543f09=_0x5324ac?_0x5324ac:new _0x1e8e63([NaN,NaN]),_0x2932a1=fromUserCoordinate(_0x49d16d[0x0],_0x5d1db4),_0x33ebbb=_0x470f55(_0x2932a1,fromUserCoordinate(_0x49d16d[_0x49d16d[_0x199e5d(0x19a)]-0x1],_0x5d1db4));_0x543f09[_0x199e5d(0x16c)](_0x2932a1,Math[_0x199e5d(0x151)](_0x33ebbb),this['geometryLayout_']);const _0x458bb6=getUserProjection();return _0x458bb6&&_0x543f09['transform'](_0x5d1db4,_0x458bb6),_0x543f09;};else{let _0x4ee795;if(_0x5dce2a===_0x4ddf52(0x161))_0x4ee795=_0xeaa65;else{if(_0x5dce2a===_0x4ddf52(0x179))_0x4ee795=_0x25759e;else _0x5dce2a===_0x4ddf52(0x145)&&(_0x4ee795=_0x10e345);}_0x44c8be=(_0x3a3894,_0x2a6cb7,_0x122bb9)=>{const _0x2e4c27=_0x4ddf52;return _0x2a6cb7?_0x5dce2a==='Polygon'?_0x3a3894[0x0][_0x2e4c27(0x19a)]?_0x2a6cb7['setCoordinates']([_0x3a3894[0x0][_0x2e4c27(0x149)]([_0x3a3894[0x0][0x0]])],this[_0x2e4c27(0x19d)]):_0x2a6cb7['setCoordinates']([],this['geometryLayout_']):_0x2a6cb7['setCoordinates'](_0x3a3894,this[_0x2e4c27(0x19d)]):_0x2a6cb7=new _0x4ee795(_0x3a3894,this['geometryLayout_']),_0x2a6cb7;};}}this[_0x4ddf52(0x18f)]=_0x44c8be,this[_0x4ddf52(0x107)]=_0x3991bd[_0x4ddf52(0x193)]!==undefined?_0x3991bd['dragVertexDelay']:0x1f4,this[_0x4ddf52(0x169)]=null,this['sketchFeature_']=null,this[_0x4ddf52(0x128)]=null,this[_0x4ddf52(0x19b)]=null,this[_0x4ddf52(0x182)]=null,this[_0x4ddf52(0x171)]=null,this[_0x4ddf52(0x146)]=_0x3991bd[_0x4ddf52(0x11f)]?_0x3991bd[_0x4ddf52(0x11f)]*_0x3991bd[_0x4ddf52(0x11f)]:0x24,this[_0x4ddf52(0x130)]=new _0xaa51d4({'source':new _0x1b672b({'useSpatialIndex':![],'wrapX':_0x3991bd['wrapX']?_0x3991bd[_0x4ddf52(0x142)]:![]}),'style':_0x3991bd[_0x4ddf52(0x12d)]?_0x3991bd['style']:getDefaultStyleFunction(),'updateWhileInteracting':!![]}),this[_0x4ddf52(0x1a0)]=_0x3991bd[_0x4ddf52(0x175)],this[_0x4ddf52(0x159)]=_0x3991bd[_0x4ddf52(0x127)]?_0x3991bd[_0x4ddf52(0x127)]:noModifierKeys,this[_0x4ddf52(0x1a1)],_0x3991bd['freehand']?this[_0x4ddf52(0x1a1)]=always:this[_0x4ddf52(0x1a1)]=_0x3991bd[_0x4ddf52(0x15a)]?_0x3991bd['freehandCondition']:shiftKeyOnly,this[_0x4ddf52(0x10c)],this[_0x4ddf52(0x183)](_0x3991bd[_0x4ddf52(0x164)]||![]),this[_0x4ddf52(0x10b)]={'active':![]},this[_0x4ddf52(0x18b)]=_0x3991bd[_0x4ddf52(0x158)]||_0x3991bd[_0x4ddf52(0x100)]||null,this[_0x4ddf52(0x186)](_0x57fdaa[_0x4ddf52(0x13c)],this[_0x4ddf52(0x17a)]);}[_0x13f9fc(0x183)](_0x264ab2){const _0x137491=_0x13f9fc;let _0x496d51;if(!_0x264ab2)_0x496d51=never;else _0x264ab2===!![]?_0x496d51=always:_0x496d51=_0x264ab2;this[_0x137491(0x10c)]=_0x496d51;}['setMap'](_0x29b704){const _0x587d99=_0x13f9fc;super[_0x587d99(0x12c)](_0x29b704),this[_0x587d99(0x17a)]();}[_0x13f9fc(0x117)](){const _0x1fef2d=_0x13f9fc;return this[_0x1fef2d(0x130)];}['handleEvent'](_0x4212a6){const _0x3fcc73=_0x13f9fc;_0x4212a6['originalEvent'][_0x3fcc73(0x13d)]===_0x1642c8[_0x3fcc73(0x189)]&&_0x4212a6[_0x3fcc73(0x138)][_0x3fcc73(0x132)]();this['freehand_']=this[_0x3fcc73(0x166)]!==_0x3fcc73(0x161)&&this['freehandCondition_'](_0x4212a6);let _0x5d8e00=_0x4212a6['type']===_0x45e2df[_0x3fcc73(0x157)],_0x366abd=!![];if(!this['freehand_']&&this[_0x3fcc73(0x163)]&&_0x4212a6['type']===_0x45e2df['POINTERDRAG']){const _0x1af116=Date[_0x3fcc73(0x16b)]();_0x1af116-this[_0x3fcc73(0x163)]>=this[_0x3fcc73(0x107)]?(this[_0x3fcc73(0x15e)]=_0x4212a6[_0x3fcc73(0x123)],this[_0x3fcc73(0x114)]=!this[_0x3fcc73(0x10e)],_0x5d8e00=!![]):this[_0x3fcc73(0x163)]=undefined,this[_0x3fcc73(0x114)]&&this[_0x3fcc73(0x113)]!==undefined&&(clearTimeout(this[_0x3fcc73(0x113)]),this[_0x3fcc73(0x113)]=undefined);}if(this[_0x3fcc73(0x10e)]&&_0x4212a6[_0x3fcc73(0x13d)]===_0x45e2df[_0x3fcc73(0x124)]&&this[_0x3fcc73(0x184)]!==null)this[_0x3fcc73(0x13a)](_0x4212a6[_0x3fcc73(0x141)]),_0x366abd=![];else{if(this[_0x3fcc73(0x10e)]&&_0x4212a6[_0x3fcc73(0x13d)]===_0x45e2df[_0x3fcc73(0x197)])_0x366abd=![];else{if(_0x5d8e00&&this['getPointerCount']()<0x2){_0x366abd=_0x4212a6[_0x3fcc73(0x13d)]===_0x45e2df['POINTERMOVE'];if(_0x366abd&&this['freehand_'])this[_0x3fcc73(0xff)](_0x4212a6),this['shouldHandle_']&&_0x4212a6[_0x3fcc73(0x138)][_0x3fcc73(0x132)]();else(_0x4212a6[_0x3fcc73(0x138)][_0x3fcc73(0x14c)]===_0x3fcc73(0x136)||_0x4212a6[_0x3fcc73(0x13d)]===_0x45e2df['POINTERDRAG']&&this[_0x3fcc73(0x113)]===undefined)&&this['handlePointerMove_'](_0x4212a6);}else _0x4212a6['type']===_0x45e2df['DBLCLICK']&&(_0x366abd=![]);}}return super['handleEvent'](_0x4212a6)&&_0x366abd;}[_0x13f9fc(0x137)](_0x460221){const _0x2138de=_0x13f9fc;this[_0x2138de(0x114)]=!this[_0x2138de(0x10e)];if(this['freehand_'])return this[_0x2138de(0x15e)]=_0x460221[_0x2138de(0x123)],!this[_0x2138de(0x169)]&&this[_0x2138de(0x19e)](_0x460221[_0x2138de(0x141)]),!![];if(!this[_0x2138de(0x159)](_0x460221))return this[_0x2138de(0x163)]=undefined,![];return this['lastDragTime_']=Date[_0x2138de(0x16b)](),this[_0x2138de(0x113)]=setTimeout(()=>{const _0x43d356=_0x2138de;this[_0x43d356(0xff)](new _0x1aa051(_0x45e2df[_0x43d356(0x157)],_0x460221['map'],_0x460221[_0x43d356(0x138)],![],_0x460221[_0x43d356(0x10d)]));},this[_0x2138de(0x107)]),this[_0x2138de(0x15e)]=_0x460221[_0x2138de(0x123)],!![];}[_0x13f9fc(0x120)](){this['traceState_']={'active':![]};}[_0x13f9fc(0x170)](_0x3df65e){const _0x133c90=_0x13f9fc;if(!this[_0x133c90(0x18b)]||!this[_0x133c90(0x10c)](_0x3df65e))return;if(this[_0x133c90(0x10b)][_0x133c90(0x103)]){this[_0x133c90(0x120)]();return;}const _0x153ba9=this['getMap'](),_0x1abd70=_0x153ba9[_0x133c90(0x196)]([_0x3df65e[_0x133c90(0x123)][0x0]-this[_0x133c90(0x17c)],_0x3df65e[_0x133c90(0x123)][0x1]+this[_0x133c90(0x17c)]]),_0x52be78=_0x153ba9['getCoordinateFromPixel']([_0x3df65e[_0x133c90(0x123)][0x0]+this['snapTolerance_'],_0x3df65e[_0x133c90(0x123)][0x1]-this[_0x133c90(0x17c)]]),_0x31037d=boundingExtent([_0x1abd70,_0x52be78]),_0x5ac1e9=this['traceSource_'][_0x133c90(0x180)](_0x31037d);if(_0x5ac1e9[_0x133c90(0x19a)]===0x0)return;const _0x467a8f=getTraceTargets(_0x3df65e[_0x133c90(0x141)],_0x5ac1e9);_0x467a8f[_0x133c90(0x19a)]&&(this[_0x133c90(0x10b)]={'active':!![],'startPx':_0x3df65e[_0x133c90(0x123)][_0x133c90(0x125)](),'targets':_0x467a8f,'targetIndex':-0x1});}[_0x13f9fc(0x13b)](_0x12cd81,_0x50b957){const _0x3b90bb=_0x13f9fc,_0x5341f6=_0x12cd81['startIndex']<=_0x12cd81[_0x3b90bb(0x18e)],_0x22123a=_0x12cd81[_0x3b90bb(0x13f)]<=_0x50b957;if(_0x5341f6===_0x22123a){if(_0x5341f6&&_0x50b957>_0x12cd81[_0x3b90bb(0x18e)]||!_0x5341f6&&_0x50b957<_0x12cd81[_0x3b90bb(0x18e)])this[_0x3b90bb(0x185)](_0x12cd81,_0x12cd81['endIndex'],_0x50b957);else(_0x5341f6&&_0x50b957<_0x12cd81['endIndex']||!_0x5341f6&&_0x50b957>_0x12cd81[_0x3b90bb(0x18e)])&&this[_0x3b90bb(0x12a)](_0x50b957,_0x12cd81[_0x3b90bb(0x18e)]);}else this[_0x3b90bb(0x12a)](_0x12cd81['startIndex'],_0x12cd81[_0x3b90bb(0x18e)]),this[_0x3b90bb(0x185)](_0x12cd81,_0x12cd81[_0x3b90bb(0x13f)],_0x50b957);}[_0x13f9fc(0x12a)](_0x44ee31,_0x2b4afe){const _0x2699d3=_0x13f9fc;if(_0x44ee31===_0x2b4afe)return;let _0x3b7477=0x0;if(_0x44ee31<_0x2b4afe){const _0x434d6a=Math['ceil'](_0x44ee31);let _0x273c6f=Math['floor'](_0x2b4afe);_0x273c6f===_0x2b4afe&&(_0x273c6f-=0x1),_0x3b7477=_0x273c6f-_0x434d6a+0x1;}else{const _0x4a8c84=Math[_0x2699d3(0x192)](_0x44ee31);let _0x510d86=Math['ceil'](_0x2b4afe);_0x510d86===_0x2b4afe&&(_0x510d86+=0x1),_0x3b7477=_0x4a8c84-_0x510d86+0x1;}_0x3b7477>0x0&&this['removeLastPoints_'](_0x3b7477);}[_0x13f9fc(0x185)](_0x59c40a,_0x3e50b5,_0x463db3){const _0x3a31bd=_0x13f9fc;if(_0x3e50b5===_0x463db3)return;const _0x9e7a2d=[];if(_0x3e50b5<_0x463db3){const _0x4d50d0=Math[_0x3a31bd(0x139)](_0x3e50b5);let _0x595c3b=Math['floor'](_0x463db3);_0x595c3b===_0x463db3&&(_0x595c3b-=0x1);for(let _0x35a40e=_0x4d50d0;_0x35a40e<=_0x595c3b;++_0x35a40e){_0x9e7a2d[_0x3a31bd(0x15c)](getCoordinate(_0x59c40a[_0x3a31bd(0x19f)],_0x35a40e));}}else{const _0x3c4633=Math[_0x3a31bd(0x192)](_0x3e50b5);let _0x1cdd9b=Math['ceil'](_0x463db3);_0x1cdd9b===_0x463db3&&(_0x1cdd9b+=0x1);for(let _0x3544cc=_0x3c4633;_0x3544cc>=_0x1cdd9b;--_0x3544cc){_0x9e7a2d[_0x3a31bd(0x15c)](getCoordinate(_0x59c40a[_0x3a31bd(0x19f)],_0x3544cc));}}_0x9e7a2d[_0x3a31bd(0x19a)]&&this[_0x3a31bd(0x16a)](_0x9e7a2d);}[_0x13f9fc(0x14e)](_0x5e50b8){const _0x2fadf8=_0x13f9fc,_0x221cda=this[_0x2fadf8(0x10b)];if(!_0x221cda[_0x2fadf8(0x103)])return;if(_0x221cda[_0x2fadf8(0x131)]===-0x1){if(distance(_0x221cda[_0x2fadf8(0x101)],_0x5e50b8[_0x2fadf8(0x123)])<this[_0x2fadf8(0x17c)])return;}const _0x57f653=getTraceTargetUpdate(_0x5e50b8[_0x2fadf8(0x141)],_0x221cda,this[_0x2fadf8(0x17f)](),this[_0x2fadf8(0x17c)]);if(_0x221cda[_0x2fadf8(0x131)]!==_0x57f653['index']){if(_0x221cda[_0x2fadf8(0x131)]!==-0x1){const _0x2878e=_0x221cda[_0x2fadf8(0x12e)][_0x221cda[_0x2fadf8(0x131)]];this[_0x2fadf8(0x12a)](_0x2878e[_0x2fadf8(0x13f)],_0x2878e[_0x2fadf8(0x18e)]);}const _0x3a1acd=_0x221cda[_0x2fadf8(0x12e)][_0x57f653[_0x2fadf8(0x11c)]];this[_0x2fadf8(0x185)](_0x3a1acd,_0x3a1acd[_0x2fadf8(0x13f)],_0x57f653[_0x2fadf8(0x18e)]);}else{const _0x27da01=_0x221cda[_0x2fadf8(0x12e)][_0x221cda['targetIndex']];this[_0x2fadf8(0x13b)](_0x27da01,_0x57f653[_0x2fadf8(0x18e)]);}_0x221cda['targetIndex']=_0x57f653['index'];const _0x59a63d=_0x221cda[_0x2fadf8(0x12e)][_0x221cda[_0x2fadf8(0x131)]];_0x59a63d[_0x2fadf8(0x18e)]=_0x57f653['endIndex'];const _0x3aed4c=interpolateCoordinate(_0x59a63d['coordinates'],_0x59a63d[_0x2fadf8(0x18e)]),_0x5ccac5=this[_0x2fadf8(0x17f)]()[_0x2fadf8(0x167)](_0x3aed4c);_0x5e50b8[_0x2fadf8(0x141)]=_0x3aed4c,_0x5e50b8[_0x2fadf8(0x123)]=[Math[_0x2fadf8(0x105)](_0x5ccac5[0x0]),Math[_0x2fadf8(0x105)](_0x5ccac5[0x1])];}[_0x13f9fc(0x104)](_0x205729){const _0x19fe25=_0x13f9fc;let _0x13a75b=!![];if(this['getPointerCount']()===0x0){this[_0x19fe25(0x113)]&&(clearTimeout(this[_0x19fe25(0x113)]),this[_0x19fe25(0x113)]=undefined);this[_0x19fe25(0xff)](_0x205729);const _0x23c819=this[_0x19fe25(0x10b)]['active'];this['toggleTraceState_'](_0x205729);if(this[_0x19fe25(0x114)]){const _0x1d3d08=!this[_0x19fe25(0x169)];_0x1d3d08&&this[_0x19fe25(0x19e)](_0x205729[_0x19fe25(0x141)]);if(!_0x1d3d08&&this[_0x19fe25(0x10e)])this[_0x19fe25(0x17d)]();else!this[_0x19fe25(0x10e)]&&(!_0x1d3d08||this[_0x19fe25(0x166)]==='Point')&&(this[_0x19fe25(0x148)](_0x205729[_0x19fe25(0x123)],_0x23c819)?this[_0x19fe25(0x109)](_0x205729)&&this['finishDrawing']():this['addToDrawing_'](_0x205729['coordinate']));_0x13a75b=![];}else this[_0x19fe25(0x10e)]&&this[_0x19fe25(0x1a3)]();}return!_0x13a75b&&this[_0x19fe25(0x11e)]&&_0x205729[_0x19fe25(0x132)](),_0x13a75b;}[_0x13f9fc(0xff)](_0x2fa58f){const _0x1d5d2d=_0x13f9fc;this['pointerType_']=_0x2fa58f[_0x1d5d2d(0x138)][_0x1d5d2d(0x14c)];if(this[_0x1d5d2d(0x15e)]&&(!this[_0x1d5d2d(0x10e)]&&this[_0x1d5d2d(0x114)]||this[_0x1d5d2d(0x10e)]&&!this[_0x1d5d2d(0x114)])){const _0xea293d=this[_0x1d5d2d(0x15e)],_0x4c42c5=_0x2fa58f[_0x1d5d2d(0x123)],_0x1a1b6a=_0xea293d[0x0]-_0x4c42c5[0x0],_0x1e99ce=_0xea293d[0x1]-_0x4c42c5[0x1],_0x50e050=_0x1a1b6a*_0x1a1b6a+_0x1e99ce*_0x1e99ce;this[_0x1d5d2d(0x114)]=this[_0x1d5d2d(0x10e)]?_0x50e050>this[_0x1d5d2d(0x146)]:_0x50e050<=this[_0x1d5d2d(0x146)];if(!this[_0x1d5d2d(0x114)])return;}if(!this[_0x1d5d2d(0x169)]){this[_0x1d5d2d(0x143)](_0x2fa58f['coordinate'][_0x1d5d2d(0x125)]());return;}this[_0x1d5d2d(0x14e)](_0x2fa58f),this[_0x1d5d2d(0x17b)](_0x2fa58f[_0x1d5d2d(0x141)]);}[_0x13f9fc(0x148)](_0x16e373,_0x176502){const _0x47fd6e=_0x13f9fc;let _0x35a195=![];if(this['sketchFeature_']){let _0x424756=![],_0xec3675=[this[_0x47fd6e(0x169)]];const _0x3d58b5=this[_0x47fd6e(0x166)];if(_0x3d58b5===_0x47fd6e(0x161))_0x35a195=!![];else{if(_0x3d58b5==='Circle')_0x35a195=this[_0x47fd6e(0x19b)][_0x47fd6e(0x19a)]===0x2;else{if(_0x3d58b5===_0x47fd6e(0x179))_0x424756=!_0x176502&&this['sketchCoords_']['length']>this[_0x47fd6e(0x13e)];else{if(_0x3d58b5===_0x47fd6e(0x145)){const _0x233452=this[_0x47fd6e(0x19b)];_0x424756=_0x233452[0x0][_0x47fd6e(0x19a)]>this[_0x47fd6e(0x13e)],_0xec3675=[_0x233452[0x0][0x0],_0x233452[0x0][_0x233452[0x0]['length']-0x2]],_0x176502?_0xec3675=[_0x233452[0x0][0x0]]:_0xec3675=[_0x233452[0x0][0x0],_0x233452[0x0][_0x233452[0x0]['length']-0x2]];}}}}if(_0x424756){const _0x197d86=this[_0x47fd6e(0x17f)]();for(let _0x4bf033=0x0,_0x5a16df=_0xec3675[_0x47fd6e(0x19a)];_0x4bf033<_0x5a16df;_0x4bf033++){const _0x26a7af=_0xec3675[_0x4bf033],_0x188a65=_0x197d86[_0x47fd6e(0x167)](_0x26a7af),_0x5a9654=_0x16e373[0x0]-_0x188a65[0x0],_0x19cf50=_0x16e373[0x1]-_0x188a65[0x1],_0x337add=this['freehand_']?0x1:this[_0x47fd6e(0x17c)];_0x35a195=Math['sqrt'](_0x5a9654*_0x5a9654+_0x19cf50*_0x19cf50)<=_0x337add;if(_0x35a195){this[_0x47fd6e(0x169)]=_0x26a7af;break;}}}}return _0x35a195;}[_0x13f9fc(0x143)](_0x2fe0af){const _0x3054fc=_0x13f9fc;if(!this[_0x3054fc(0x128)])this[_0x3054fc(0x128)]=new _0x26ba60(new _0xeaa65(_0x2fe0af)),this[_0x3054fc(0x121)]();else{const _0x36dff0=this[_0x3054fc(0x128)]['getGeometry']();_0x36dff0[_0x3054fc(0x15b)](_0x2fe0af);}}[_0x13f9fc(0x10f)](_0x8b31bc){const _0x14ff4c=_0x13f9fc;!this['sketchLine_']&&(this[_0x14ff4c(0x182)]=new _0x26ba60());const _0x3eb2f7=_0x8b31bc[_0x14ff4c(0x10a)](0x0);let _0x3436e1=this[_0x14ff4c(0x182)]['getGeometry']();!_0x3436e1?(_0x3436e1=new _0x25759e(_0x3eb2f7[_0x14ff4c(0x176)](),_0x3eb2f7[_0x14ff4c(0x111)]()),this[_0x14ff4c(0x182)][_0x14ff4c(0x11b)](_0x3436e1)):(_0x3436e1[_0x14ff4c(0x191)](_0x3eb2f7[_0x14ff4c(0x111)](),_0x3eb2f7[_0x14ff4c(0x176)]()),_0x3436e1[_0x14ff4c(0x15f)]());}[_0x13f9fc(0x19e)](_0x1c603f){const _0x16da0b=_0x13f9fc,_0x2f7413=this[_0x16da0b(0x17f)]()[_0x16da0b(0x18a)]()[_0x16da0b(0x160)](),_0x33cefe=getStrideForLayout(this['geometryLayout_']);while(_0x1c603f[_0x16da0b(0x19a)]<_0x33cefe){_0x1c603f[_0x16da0b(0x15c)](0x0);}this['finishCoordinate_']=_0x1c603f;if(this[_0x16da0b(0x166)]==='Point')this[_0x16da0b(0x19b)]=_0x1c603f['slice']();else this[_0x16da0b(0x166)]===_0x16da0b(0x145)?(this[_0x16da0b(0x19b)]=[[_0x1c603f['slice'](),_0x1c603f['slice']()]],this[_0x16da0b(0x171)]=this[_0x16da0b(0x19b)][0x0]):this['sketchCoords_']=[_0x1c603f[_0x16da0b(0x125)](),_0x1c603f[_0x16da0b(0x125)]()];this[_0x16da0b(0x171)]&&(this[_0x16da0b(0x182)]=new _0x26ba60(new _0x25759e(this[_0x16da0b(0x171)])));const _0x3a7f31=this['geometryFunction_'](this['sketchCoords_'],undefined,_0x2f7413);this[_0x16da0b(0x184)]=new _0x26ba60(),this[_0x16da0b(0x1a0)]&&this[_0x16da0b(0x184)][_0x16da0b(0x198)](this['geometryName_']),this[_0x16da0b(0x184)][_0x16da0b(0x11b)](_0x3a7f31),this[_0x16da0b(0x121)](),this[_0x16da0b(0x116)](new DrawEvent(DrawEventType['DRAWSTART'],this[_0x16da0b(0x184)]));}['modifyDrawing_'](_0x3422fa){const _0x403a19=_0x13f9fc,_0x41918c=this[_0x403a19(0x17f)](),_0x8a4b5d=this[_0x403a19(0x184)][_0x403a19(0x147)](),_0x20cd9b=_0x41918c[_0x403a19(0x18a)]()[_0x403a19(0x160)](),_0x58b6e3=getStrideForLayout(this['geometryLayout_']);let _0x12824e,_0x72f54f;while(_0x3422fa['length']<_0x58b6e3){_0x3422fa[_0x403a19(0x15c)](0x0);}if(this[_0x403a19(0x166)]===_0x403a19(0x161))_0x72f54f=this[_0x403a19(0x19b)];else this['mode_']===_0x403a19(0x145)?(_0x12824e=this[_0x403a19(0x19b)][0x0],_0x72f54f=_0x12824e[_0x12824e['length']-0x1],this[_0x403a19(0x148)](_0x41918c['getPixelFromCoordinate'](_0x3422fa))&&(_0x3422fa=this[_0x403a19(0x169)][_0x403a19(0x125)]())):(_0x12824e=this[_0x403a19(0x19b)],_0x72f54f=_0x12824e[_0x12824e[_0x403a19(0x19a)]-0x1]);_0x72f54f[0x0]=_0x3422fa[0x0],_0x72f54f[0x1]=_0x3422fa[0x1],this[_0x403a19(0x18f)](this[_0x403a19(0x19b)],_0x8a4b5d,_0x20cd9b);if(this[_0x403a19(0x128)]){const _0x5b6670=this['sketchPoint_'][_0x403a19(0x147)]();_0x5b6670[_0x403a19(0x15b)](_0x3422fa);}if(_0x8a4b5d[_0x403a19(0x12b)]()===_0x403a19(0x145)&&this[_0x403a19(0x166)]!=='Polygon')this[_0x403a19(0x10f)](_0x8a4b5d);else{if(this[_0x403a19(0x171)]){const _0x50af5b=this[_0x403a19(0x182)][_0x403a19(0x147)]();_0x50af5b['setCoordinates'](this[_0x403a19(0x171)]);}}this['updateSketchFeatures_']();}[_0x13f9fc(0x13a)](_0x2b1554){const _0x924b56=_0x13f9fc,_0x18d04e=this[_0x924b56(0x184)][_0x924b56(0x147)](),_0x3685b7=this[_0x924b56(0x17f)]()['getView']()[_0x924b56(0x160)]();let _0x417955,_0x279e01;const _0x5c952e=this[_0x924b56(0x166)];if(_0x5c952e===_0x924b56(0x179)||_0x5c952e===_0x924b56(0x165))this[_0x924b56(0x169)]=_0x2b1554[_0x924b56(0x125)](),_0x279e01=this['sketchCoords_'],_0x279e01[_0x924b56(0x19a)]>=this[_0x924b56(0x14f)]&&(this[_0x924b56(0x10e)]?_0x279e01['pop']():_0x417955=!![]),_0x279e01[_0x924b56(0x15c)](_0x2b1554[_0x924b56(0x125)]()),this['geometryFunction_'](_0x279e01,_0x18d04e,_0x3685b7);else _0x5c952e===_0x924b56(0x145)&&(_0x279e01=this[_0x924b56(0x19b)][0x0],_0x279e01[_0x924b56(0x19a)]>=this['maxPoints_']&&(this[_0x924b56(0x10e)]?_0x279e01[_0x924b56(0x110)]():_0x417955=!![]),_0x279e01[_0x924b56(0x15c)](_0x2b1554[_0x924b56(0x125)]()),_0x417955&&(this[_0x924b56(0x169)]=_0x279e01[0x0]),this['geometryFunction_'](this[_0x924b56(0x19b)],_0x18d04e,_0x3685b7));this[_0x924b56(0x143)](_0x2b1554[_0x924b56(0x125)]()),this['updateSketchFeatures_']();if(_0x417955)return this['finishDrawing']();return this['sketchFeature_'];}[_0x13f9fc(0x106)](_0x117d66){const _0x475111=_0x13f9fc;if(!this[_0x475111(0x184)])return;const _0x79b097=this[_0x475111(0x184)][_0x475111(0x147)](),_0xfebd79=this[_0x475111(0x17f)]()[_0x475111(0x18a)]()[_0x475111(0x160)](),_0x300135=this['mode_'];for(let _0x342da9=0x0;_0x342da9<_0x117d66;++_0x342da9){let _0x29b5b3;if(_0x300135===_0x475111(0x179)||_0x300135===_0x475111(0x165)){_0x29b5b3=this[_0x475111(0x19b)],_0x29b5b3[_0x475111(0x14b)](-0x2,0x1);if(_0x29b5b3[_0x475111(0x19a)]>=0x2){this[_0x475111(0x169)]=_0x29b5b3[_0x29b5b3['length']-0x2][_0x475111(0x125)]();const _0x4256c3=this[_0x475111(0x169)][_0x475111(0x125)]();_0x29b5b3[_0x29b5b3[_0x475111(0x19a)]-0x1]=_0x4256c3,this[_0x475111(0x143)](_0x4256c3);}this['geometryFunction_'](_0x29b5b3,_0x79b097,_0xfebd79),_0x79b097[_0x475111(0x12b)]()===_0x475111(0x145)&&this['sketchLine_']&&this[_0x475111(0x10f)](_0x79b097);}else{if(_0x300135===_0x475111(0x145)){_0x29b5b3=this[_0x475111(0x19b)][0x0],_0x29b5b3['splice'](-0x2,0x1);const _0x26288c=this[_0x475111(0x182)][_0x475111(0x147)]();if(_0x29b5b3[_0x475111(0x19a)]>=0x2){const _0x25829f=_0x29b5b3[_0x29b5b3[_0x475111(0x19a)]-0x2]['slice']();_0x29b5b3[_0x29b5b3[_0x475111(0x19a)]-0x1]=_0x25829f,this['createOrUpdateSketchPoint_'](_0x25829f);}_0x26288c[_0x475111(0x15b)](_0x29b5b3),this[_0x475111(0x18f)](this['sketchCoords_'],_0x79b097,_0xfebd79);}}if(_0x29b5b3[_0x475111(0x19a)]===0x1){this['abortDrawing']();break;}}this[_0x475111(0x121)]();}[_0x13f9fc(0x162)](){this['removeLastPoints_'](0x1);}['finishDrawing'](){const _0x41aacd=_0x13f9fc,_0x4ab45f=this['abortDrawing_']();if(!_0x4ab45f)return null;let _0x1c2c14=this['sketchCoords_'];const _0x3520d3=_0x4ab45f['getGeometry'](),_0x1114de=this[_0x41aacd(0x17f)]()[_0x41aacd(0x18a)]()[_0x41aacd(0x160)]();if(this[_0x41aacd(0x166)]===_0x41aacd(0x179))_0x1c2c14[_0x41aacd(0x110)](),this[_0x41aacd(0x18f)](_0x1c2c14,_0x3520d3,_0x1114de);else this[_0x41aacd(0x166)]===_0x41aacd(0x145)&&(_0x1c2c14[0x0][_0x41aacd(0x110)](),this[_0x41aacd(0x18f)](_0x1c2c14,_0x3520d3,_0x1114de),_0x1c2c14=_0x3520d3[_0x41aacd(0x129)]());if(this[_0x41aacd(0x18c)]==='MultiPoint')_0x4ab45f[_0x41aacd(0x11b)](new _0x148add([_0x1c2c14]));else{if(this['type_']===_0x41aacd(0x11a))_0x4ab45f['setGeometry'](new _0x2988a9([_0x1c2c14]));else this['type_']===_0x41aacd(0x12f)&&_0x4ab45f[_0x41aacd(0x11b)](new _0x5b94bb([_0x1c2c14]));}return this[_0x41aacd(0x116)](new DrawEvent(DrawEventType[_0x41aacd(0x133)],_0x4ab45f)),this[_0x41aacd(0x14a)]&&this[_0x41aacd(0x14a)]['push'](_0x4ab45f),this[_0x41aacd(0x154)]&&this[_0x41aacd(0x154)][_0x41aacd(0x178)](_0x4ab45f),_0x4ab45f;}[_0x13f9fc(0x188)](){const _0x13e4fc=_0x13f9fc;this[_0x13e4fc(0x169)]=null;const _0x5b4485=this[_0x13e4fc(0x184)];return this['sketchFeature_']=null,this['sketchPoint_']=null,this[_0x13e4fc(0x182)]=null,this[_0x13e4fc(0x130)][_0x13e4fc(0x112)]()['clear'](!![]),this['deactivateTrace_'](),_0x5b4485;}['abortDrawing'](){const _0x2e8d47=_0x13f9fc,_0x4531fa=this['abortDrawing_']();_0x4531fa&&this[_0x2e8d47(0x116)](new DrawEvent(DrawEventType[_0x2e8d47(0x194)],_0x4531fa));}[_0x13f9fc(0x16a)](_0x177fee){const _0x5bb616=_0x13f9fc,_0x3c3d29=this['mode_'],_0x43390b=!this[_0x5bb616(0x184)];_0x43390b&&this[_0x5bb616(0x19e)](_0x177fee[0x0]);let _0x2b91e3;if(_0x3c3d29===_0x5bb616(0x179)||_0x3c3d29===_0x5bb616(0x165))_0x2b91e3=this[_0x5bb616(0x19b)];else{if(_0x3c3d29===_0x5bb616(0x145))_0x2b91e3=this[_0x5bb616(0x19b)]&&this['sketchCoords_'][_0x5bb616(0x19a)]?this['sketchCoords_'][0x0]:[];else return;}_0x43390b&&_0x2b91e3['shift']();_0x2b91e3[_0x5bb616(0x110)]();for(let _0x568d0f=0x0;_0x568d0f<_0x177fee[_0x5bb616(0x19a)];_0x568d0f++){this['addToDrawing_'](_0x177fee[_0x568d0f]);}const _0x3b2f5c=_0x177fee[_0x177fee[_0x5bb616(0x19a)]-0x1];this['sketchFeature_']=this['addToDrawing_'](_0x3b2f5c),this[_0x5bb616(0x17b)](_0x3b2f5c);}[_0x13f9fc(0x150)](_0x347e77){const _0x2ce6c2=_0x13f9fc,_0x4ac8b3=_0x347e77[_0x2ce6c2(0x147)](),_0x4ee573=_0x4ac8b3;this[_0x2ce6c2(0x184)]=_0x347e77,this[_0x2ce6c2(0x19b)]=_0x4ee573[_0x2ce6c2(0x129)]();const _0x3505d8=this[_0x2ce6c2(0x19b)][this[_0x2ce6c2(0x19b)][_0x2ce6c2(0x19a)]-0x1];this[_0x2ce6c2(0x169)]=_0x3505d8[_0x2ce6c2(0x125)](),this[_0x2ce6c2(0x19b)]['push'](_0x3505d8[_0x2ce6c2(0x125)]()),this[_0x2ce6c2(0x128)]=new _0x26ba60(new _0xeaa65(_0x3505d8)),this[_0x2ce6c2(0x121)](),this[_0x2ce6c2(0x116)](new DrawEvent(DrawEventType[_0x2ce6c2(0x199)],this[_0x2ce6c2(0x184)]));}['updateSketchFeatures_'](){const _0x52a78a=_0x13f9fc,_0x4fb87f=[];this[_0x52a78a(0x184)]&&_0x4fb87f['push'](this['sketchFeature_']);this['sketchLine_']&&_0x4fb87f[_0x52a78a(0x15c)](this[_0x52a78a(0x182)]);this[_0x52a78a(0x128)]&&_0x4fb87f[_0x52a78a(0x15c)](this[_0x52a78a(0x128)]);const _0x4f55e1=this[_0x52a78a(0x130)][_0x52a78a(0x112)]();_0x4f55e1[_0x52a78a(0x18d)](!![]),_0x4f55e1[_0x52a78a(0x16e)](_0x4fb87f);}[_0x13f9fc(0x17a)](){const _0x2cac4c=_0x13f9fc,_0x3409cb=this[_0x2cac4c(0x17f)](),_0x20f0bc=this[_0x2cac4c(0x155)]();(!_0x3409cb||!_0x20f0bc)&&this[_0x2cac4c(0x1a3)](),this[_0x2cac4c(0x130)][_0x2cac4c(0x12c)](_0x20f0bc?_0x3409cb:null);}}function getDefaultStyleFunction(){const _0x4d9683=createEditingStyle();return function(_0x33d5c1,_0x3f5a46){const _0x24dada=_0x13bc;return _0x4d9683[_0x33d5c1[_0x24dada(0x147)]()[_0x24dada(0x12b)]()];};}export function createRegularPolygon(_0x784da5,_0x53b84f){return function(_0x5e6b78,_0x44dd90,_0x1889df){const _0x30427e=_0x13bc,_0xbcb60=fromUserCoordinate(_0x5e6b78[0x0],_0x1889df),_0x25c525=fromUserCoordinate(_0x5e6b78[_0x5e6b78['length']-0x1],_0x1889df),_0x57d7d5=Math['sqrt'](_0x470f55(_0xbcb60,_0x25c525));_0x44dd90=_0x44dd90||fromCircle(new _0x1e8e63(_0xbcb60),_0x784da5);let _0x42d39d=_0x53b84f;if(!_0x53b84f&&_0x53b84f!==0x0){const _0x51c1ca=_0x25c525[0x0]-_0xbcb60[0x0],_0x2667ca=_0x25c525[0x1]-_0xbcb60[0x1];_0x42d39d=Math[_0x30427e(0x19c)](_0x2667ca,_0x51c1ca);}makeRegular(_0x44dd90,_0xbcb60,_0x57d7d5,_0x42d39d);const _0x291237=getUserProjection();return _0x291237&&_0x44dd90[_0x30427e(0x135)](_0x1889df,_0x291237),_0x44dd90;};}export function createBox(){return function(_0x557ff7,_0x2efc46,_0x2c9ea5){const _0x5d2f48=_0x13bc,_0x1b9175=boundingExtent([_0x557ff7[0x0],_0x557ff7[_0x557ff7[_0x5d2f48(0x19a)]-0x1]][_0x5d2f48(0x15d)](function(_0x3f3261){return fromUserCoordinate(_0x3f3261,_0x2c9ea5);})),_0x963974=[[getBottomLeft(_0x1b9175),getBottomRight(_0x1b9175),getTopRight(_0x1b9175),getTopLeft(_0x1b9175),getBottomLeft(_0x1b9175)]];_0x2efc46?_0x2efc46['setCoordinates'](_0x963974):_0x2efc46=new _0x10e345(_0x963974);const _0x1e99b4=getUserProjection();return _0x1e99b4&&_0x2efc46[_0x5d2f48(0x135)](_0x2c9ea5,_0x1e99b4),_0x2efc46;};}function getMode(_0x547d0a){const _0x1356b6=_0x13f9fc;switch(_0x547d0a){case _0x1356b6(0x161):case _0x1356b6(0x177):return _0x1356b6(0x161);case _0x1356b6(0x179):case'MultiLineString':return _0x1356b6(0x179);case _0x1356b6(0x145):case _0x1356b6(0x12f):return _0x1356b6(0x145);case _0x1356b6(0x165):return _0x1356b6(0x165);default:throw new Error(_0x1356b6(0x190)+_0x547d0a);}}export default Draw;function _0x3a1f(){const _0xaeb88e=['stopClick','coordinate','wrapX','createOrUpdateSketchPoint_','once','Polygon','squaredClickTolerance_','getGeometry','atFinish_','concat','features_','splice','pointerType','pointerType_','updateTrace_','maxPoints_','extend','sqrt','squaredDistance','122JAJayb','source_','getActive','577560IVrUoZ','POINTERMOVE','traceSource','condition_','freehandCondition','setCoordinates','push','map','downPx_','changed','getProjection','Point','removeLastPoint','lastDragTime_','trace','Circle','mode_','getPixelFromCoordinate','drawabort','finishCoordinate_','appendCoordinates','now','setCenterAndRadius','3078945KgoKpJ','addFeatures','15331VoSiJp','toggleTraceState_','sketchLineCoords_','drawstart','minPoints','geometryFunction','geometryName','getFlatCoordinates','MultiPoint','addFeature','LineString','updateState_','modifyDrawing_','snapTolerance_','finishDrawing','3633672hrfQZT','getMap','getFeaturesInExtent','12172446XvKRtE','sketchLine_','setTrace','sketchFeature_','addTracedCoordinates_','addChangeListener','16494rlJNes','abortDrawing_','CONTEXTMENU','getView','traceSource_','type_','clear','endIndex','geometryFunction_','Invalid\x20type:\x20','setFlatCoordinates','floor','dragVertexDelay','DRAWABORT','along','getCoordinateFromPixel','POINTERDOWN','setGeometryName','DRAWSTART','length','sketchCoords_','atan2','geometryLayout_','startDrawing_','coordinates','geometryName_','freehandCondition_','features','abortDrawing','handlePointerMove_','source','startPx','finishCondition','active','handleUpEvent','round','removeLastPoints_','dragVertexDelay_','maxPoints','finishCondition_','getLinearRing','traceState_','traceCondition_','frameState','freehand_','createOrUpdateCustomSketchLine_','pop','getLayout','getSource','downTimeout_','shouldHandle_','snapTolerance','dispatchEvent','getOverlay','stopDown','2930892oEDhWx','MultiLineString','setGeometry','index','geometryLayout','stopClick_','clickTolerance','deactivateTrace_','updateSketchFeatures_','854hkRQzM','pixel','POINTERDRAG','slice','ring','condition','sketchPoint_','getCoordinates','removeTracedCoordinates_','getType','setMap','style','targets','MultiPolygon','overlay_','targetIndex','preventDefault','DRAWEND','drawend','transform','mouse','handleDownEvent','originalEvent','ceil','addToDrawing_','addOrRemoveTracedCoordinates_','ACTIVE','type','minPoints_','startIndex'];_0x3a1f=function(){return _0xaeb88e;};return _0x3a1f();}