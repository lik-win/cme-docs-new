(function(_0x8e08a5,_0x28489b){const _0x1e355e=_0x3d0f,_0x1e2d48=_0x8e08a5();while(!![]){try{const _0x4891d7=-parseInt(_0x1e355e(0xba))/0x1+-parseInt(_0x1e355e(0xa7))/0x2*(parseInt(_0x1e355e(0xaf))/0x3)+parseInt(_0x1e355e(0x9f))/0x4*(-parseInt(_0x1e355e(0xc7))/0x5)+parseInt(_0x1e355e(0xa3))/0x6*(-parseInt(_0x1e355e(0xa5))/0x7)+parseInt(_0x1e355e(0xbc))/0x8*(parseInt(_0x1e355e(0xa8))/0x9)+parseInt(_0x1e355e(0xb7))/0xa+-parseInt(_0x1e355e(0xac))/0xb;if(_0x4891d7===_0x28489b)break;else _0x1e2d48['push'](_0x1e2d48['shift']());}catch(_0x2ca611){_0x1e2d48['push'](_0x1e2d48['shift']());}}}(_0x5cae,0x576b4));import _0x2955b2 from'./Immediate.js';import{Icon}from'../../style.js';function _0x5cae(){const _0x5e31ca=['LineString','sort','toString','5skvqjs','width','getGeometryFunction','height','getRotateWithView','Point','data','push','getRotation','Polygon','#00000','getImageData','340456KISVJp','keys','getZIndex','getImage','13782IYbwQp','Circle','7VtFHlo','clone','146svXpin','4517406QdrJkE','round','length','floor','2822567gGFtOq','replace','getAnchor','10059edrklM','setStyle','getFill','setTransform','canvas','imageSmoothingEnabled','getScale','fillRect','7094260RNJfho','padStart','isArray','264515yWlQnN','fillStyle','8GTEDAs','getStyleFunction','getStroke','drawGeometry','Multi','getGeometriesArrayRecursive','map','getType'];_0x5cae=function(){return _0x5e31ca;};return _0x5cae();}import{ascending}from'../../array.js';import{clamp}from'../../math.js';import{createCanvasContext2D}from'../../dom.js';import{getTransformFromProjections,getUserProjection,toUserExtent}from'../../proj.js';import{intersects}from'../../extent.js';function _0x3d0f(_0x16db4d,_0xf9bc33){const _0x5cae2a=_0x5cae();return _0x3d0f=function(_0x3d0fc3,_0x4e4c7c){_0x3d0fc3=_0x3d0fc3-0x98;let _0x38d0e9=_0x5cae2a[_0x3d0fc3];return _0x38d0e9;},_0x3d0f(_0x16db4d,_0xf9bc33);}export const HIT_DETECT_RESOLUTION=0.5;export function createHitDetectionImageData(_0x3fd6c5,_0x87eef5,_0x3d4ce1,_0x616078,_0x15f88,_0x1047e0,_0xc4dba6,_0xa4c297,_0xdf0b18){const _0x4daa7e=_0x3d0f,_0x392f4d=_0xdf0b18?toUserExtent(_0x15f88,_0xdf0b18):_0x15f88,_0x53662d=_0x3fd6c5[0x0]*HIT_DETECT_RESOLUTION,_0x3e627a=_0x3fd6c5[0x1]*HIT_DETECT_RESOLUTION,_0x23d1da=createCanvasContext2D(_0x53662d,_0x3e627a);_0x23d1da[_0x4daa7e(0xb4)]=![];const _0x3541ff=_0x23d1da[_0x4daa7e(0xb3)],_0x167234=new _0x2955b2(_0x23d1da,HIT_DETECT_RESOLUTION,_0x15f88,null,_0xc4dba6,_0xa4c297,_0xdf0b18?getTransformFromProjections(getUserProjection(),_0xdf0b18):null),_0x440261=_0x3d4ce1[_0x4daa7e(0xaa)],_0x20665a=Math[_0x4daa7e(0xab)]((0x100*0x100*0x100-0x1)/_0x440261),_0x2e9a23={};for(let _0x118c33=0x1;_0x118c33<=_0x440261;++_0x118c33){const _0x30412d=_0x3d4ce1[_0x118c33-0x1],_0x1917e4=_0x30412d[_0x4daa7e(0xbd)]()||_0x616078;if(!_0x1917e4)continue;let _0x223ccc=_0x1917e4(_0x30412d,_0x1047e0);if(!_0x223ccc)continue;!Array[_0x4daa7e(0xb9)](_0x223ccc)&&(_0x223ccc=[_0x223ccc]);const _0x59c885=_0x118c33*_0x20665a,_0x768155=_0x59c885[_0x4daa7e(0xc6)](0x10)[_0x4daa7e(0xb8)](0x7,_0x4daa7e(0x9d));for(let _0x3310da=0x0,_0xb34687=_0x223ccc['length'];_0x3310da<_0xb34687;++_0x3310da){const _0x1f1418=_0x223ccc[_0x3310da],_0x57b83f=_0x1f1418[_0x4daa7e(0xc9)]()(_0x30412d);if(!_0x57b83f||!intersects(_0x392f4d,_0x57b83f['getExtent']()))continue;const _0x1b5e7a=_0x1f1418[_0x4daa7e(0xa6)](),_0x1cc6a1=_0x1b5e7a[_0x4daa7e(0xb1)]();_0x1cc6a1&&_0x1cc6a1['setColor'](_0x768155);const _0x5422ce=_0x1b5e7a[_0x4daa7e(0xbe)]();_0x5422ce&&(_0x5422ce['setColor'](_0x768155),_0x5422ce['setLineDash'](null));_0x1b5e7a['setText'](undefined);const _0x1f3def=_0x1f1418[_0x4daa7e(0xa2)]();if(_0x1f3def){const _0x197edf=_0x1f3def['getImageSize']();if(!_0x197edf)continue;const _0x833748=createCanvasContext2D(_0x197edf[0x0],_0x197edf[0x1],undefined,{'alpha':![]}),_0x5c8ade=_0x833748[_0x4daa7e(0xb3)];_0x833748[_0x4daa7e(0xbb)]=_0x768155,_0x833748[_0x4daa7e(0xb6)](0x0,0x0,_0x5c8ade[_0x4daa7e(0xc8)],_0x5c8ade[_0x4daa7e(0xca)]),_0x1b5e7a['setImage'](new Icon({'img':_0x5c8ade,'anchor':_0x1f3def[_0x4daa7e(0xae)](),'anchorXUnits':'pixels','anchorYUnits':'pixels','offset':_0x1f3def['getOrigin'](),'opacity':0x1,'size':_0x1f3def['getSize'](),'scale':_0x1f3def[_0x4daa7e(0xb5)](),'rotation':_0x1f3def[_0x4daa7e(0x9b)](),'rotateWithView':_0x1f3def[_0x4daa7e(0xcb)]()}));}const _0x2b7d61=_0x1b5e7a[_0x4daa7e(0xa1)]()||0x0;let _0x19bc23=_0x2e9a23[_0x2b7d61];!_0x19bc23&&(_0x19bc23={},_0x2e9a23[_0x2b7d61]=_0x19bc23,_0x19bc23[_0x4daa7e(0x9c)]=[],_0x19bc23[_0x4daa7e(0xa4)]=[],_0x19bc23[_0x4daa7e(0xc4)]=[],_0x19bc23[_0x4daa7e(0x98)]=[]);const _0x30e569=_0x57b83f['getType']();if(_0x30e569==='GeometryCollection'){const _0x1e04f4=_0x57b83f[_0x4daa7e(0xc1)]();for(let _0x4f6515=0x0,_0x795ae3=_0x1e04f4[_0x4daa7e(0xaa)];_0x4f6515<_0x795ae3;++_0x4f6515){const _0x1c2120=_0x1e04f4[_0x4f6515];_0x19bc23[_0x1c2120[_0x4daa7e(0xc3)]()[_0x4daa7e(0xad)](_0x4daa7e(0xc0),'')][_0x4daa7e(0x9a)](_0x1c2120,_0x1b5e7a);}}else _0x19bc23[_0x30e569[_0x4daa7e(0xad)](_0x4daa7e(0xc0),'')][_0x4daa7e(0x9a)](_0x57b83f,_0x1b5e7a);}}const _0x49f607=Object[_0x4daa7e(0xa0)](_0x2e9a23)[_0x4daa7e(0xc2)](Number)[_0x4daa7e(0xc5)](ascending);for(let _0x34865f=0x0,_0x111921=_0x49f607[_0x4daa7e(0xaa)];_0x34865f<_0x111921;++_0x34865f){const _0x19d1d2=_0x2e9a23[_0x49f607[_0x34865f]];for(const _0x473519 in _0x19d1d2){const _0x7f57b1=_0x19d1d2[_0x473519];for(let _0x2ea50a=0x0,_0x79028=_0x7f57b1[_0x4daa7e(0xaa)];_0x2ea50a<_0x79028;_0x2ea50a+=0x2){_0x167234[_0x4daa7e(0xb0)](_0x7f57b1[_0x2ea50a+0x1]);for(let _0x18b6eb=0x0,_0x466295=_0x87eef5[_0x4daa7e(0xaa)];_0x18b6eb<_0x466295;++_0x18b6eb){_0x167234[_0x4daa7e(0xb2)](_0x87eef5[_0x18b6eb]),_0x167234[_0x4daa7e(0xbf)](_0x7f57b1[_0x2ea50a]);}}}}return _0x23d1da[_0x4daa7e(0x9e)](0x0,0x0,_0x3541ff['width'],_0x3541ff['height']);}export function hitDetect(_0x3b2d73,_0x186889,_0x522ea4){const _0x9df597=_0x3d0f,_0x428db9=[];if(_0x522ea4){const _0x27b8b3=Math['floor'](Math['round'](_0x3b2d73[0x0])*HIT_DETECT_RESOLUTION),_0x500ec6=Math[_0x9df597(0xab)](Math[_0x9df597(0xa9)](_0x3b2d73[0x1])*HIT_DETECT_RESOLUTION),_0x553440=(clamp(_0x27b8b3,0x0,_0x522ea4['width']-0x1)+clamp(_0x500ec6,0x0,_0x522ea4[_0x9df597(0xca)]-0x1)*_0x522ea4['width'])*0x4,_0x52e5c6=_0x522ea4[_0x9df597(0x99)][_0x553440],_0x218dbb=_0x522ea4[_0x9df597(0x99)][_0x553440+0x1],_0x1cbbe5=_0x522ea4[_0x9df597(0x99)][_0x553440+0x2],_0x56ba07=_0x1cbbe5+0x100*(_0x218dbb+0x100*_0x52e5c6),_0x30d4bc=Math['floor']((0x100*0x100*0x100-0x1)/_0x186889['length']);_0x56ba07&&_0x56ba07%_0x30d4bc===0x0&&_0x428db9['push'](_0x186889[_0x56ba07/_0x30d4bc-0x1]);}return _0x428db9;}