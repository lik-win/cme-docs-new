var _0x37524c=_0x1dd7;function _0x1dd7(_0x8d7b0e,_0x4a8a21){var _0x46e50c=_0x46e5();return _0x1dd7=function(_0x1dd7d5,_0x1df72d){_0x1dd7d5=_0x1dd7d5-0x143;var _0x5f5d61=_0x46e50c[_0x1dd7d5];return _0x5f5d61;},_0x1dd7(_0x8d7b0e,_0x4a8a21);}(function(_0x55cb3c,_0x41ad90){var _0x97dc88=_0x1dd7,_0x25265d=_0x55cb3c();while(!![]){try{var _0x421526=parseInt(_0x97dc88(0x163))/0x1*(parseInt(_0x97dc88(0x172))/0x2)+parseInt(_0x97dc88(0x153))/0x3+-parseInt(_0x97dc88(0x170))/0x4*(parseInt(_0x97dc88(0x169))/0x5)+-parseInt(_0x97dc88(0x167))/0x6*(parseInt(_0x97dc88(0x175))/0x7)+parseInt(_0x97dc88(0x166))/0x8+parseInt(_0x97dc88(0x156))/0x9+-parseInt(_0x97dc88(0x145))/0xa*(-parseInt(_0x97dc88(0x154))/0xb);if(_0x421526===_0x41ad90)break;else _0x25265d['push'](_0x25265d['shift']());}catch(_0x5333d3){_0x25265d['push'](_0x25265d['shift']());}}}(_0x46e5,0x3361e));function _0x46e5(){var _0x25e2bc=['5526SzdVBh','change','scale','7uTCOBm','number','calculateExtent','onload','extent','changed','crossOrigin','width','10sfrRRF','setCrop','height','url','max','bind','attributions','canvasFunction','center','rotate','imageRotate','min','setMask','naturalWidth','1000644UPqFxH','2595043DxyUBt','getExtent','1812843pOUMFt','getContext','setScale','_image','calculateImage','crop','logo','image','object','mask','getRotation','_imageSize','drawImage','3lwqDYq','getCenter','setCenter','34864Ynbhym','2265702XIjocl','getCrop','320OxNHmS','setRotation','naturalHeight','getMask','getScale','projection','length','12216MzbpCI','createElement'];_0x46e5=function(){return _0x25e2bc;};return _0x46e5();}import _0x414d0e from'../../source/ImageCanvas.js';import _0x305de7 from'../../geom/Polygon.js';import{boundingExtent as _0xbc5ef2}from'../../extent.js';import{fromExtent as _0xbe6831}from'../../geom/Polygon.js';var cme_source_GeoImage=class olsourceGeoImage extends _0x414d0e{constructor(_0x34242e){var _0x445047=_0x1dd7,_0x3770ee={'attributions':_0x34242e[_0x445047(0x14b)],'logo':_0x34242e[_0x445047(0x15c)],'projection':_0x34242e[_0x445047(0x16e)]};_0x3770ee[_0x445047(0x14c)]=function(_0x1eb1a2,_0x3b3bd8,_0x12a3f5,_0x2e0978){var _0x59f59d=_0x445047;return this[_0x59f59d(0x15a)](_0x1eb1a2,_0x3b3bd8,_0x12a3f5,_0x2e0978);},super(_0x3770ee),this['_image']=_0x34242e[_0x445047(0x15d)]?_0x34242e[_0x445047(0x15d)]:new Image(),this['_image'][_0x445047(0x143)]=_0x34242e['crossOrigin'],this[_0x445047(0x159)][_0x445047(0x178)]=function(){var _0x557056=_0x445047;this[_0x557056(0x146)](this[_0x557056(0x15b)]),this[_0x557056(0x17a)]();}[_0x445047(0x14a)](this);if(!_0x34242e[_0x445047(0x15d)])this[_0x445047(0x159)]['src']=_0x34242e[_0x445047(0x148)];this[_0x445047(0x14d)]=_0x34242e['imageCenter'],this[_0x445047(0x158)](_0x34242e['imageScale']),this[_0x445047(0x14e)]=_0x34242e[_0x445047(0x14f)]?_0x34242e[_0x445047(0x14f)]:0x0,this[_0x445047(0x15b)]=_0x34242e['imageCrop'],this[_0x445047(0x15f)]=_0x34242e['imageMask'],this[_0x445047(0x146)](this[_0x445047(0x15b)]),this['on'](_0x445047(0x173),function(){var _0x368e8c=_0x445047;this['set'](_0x368e8c(0x179),this[_0x368e8c(0x177)]());}['bind'](this));}['calculateImage'](_0x5e564f,_0x58cae1,_0x12bcd0,_0x4e6df3){var _0x2f9346=_0x1dd7;if(!this[_0x2f9346(0x14d)])return;var _0x2f4065=document[_0x2f9346(0x171)]('canvas');_0x2f4065[_0x2f9346(0x144)]=_0x4e6df3[0x0],_0x2f4065[_0x2f9346(0x147)]=_0x4e6df3[0x1];var _0x95b323=_0x2f4065[_0x2f9346(0x157)]('2d');if(!this[_0x2f9346(0x161)])return _0x2f4065;function _0xffd9f5(_0x14eb82){return[(_0x14eb82[0x0]-_0x5e564f[0x0])/(_0x5e564f[0x2]-_0x5e564f[0x0])*_0x4e6df3[0x0],(_0x14eb82[0x1]-_0x5e564f[0x3])/(_0x5e564f[0x1]-_0x5e564f[0x3])*_0x4e6df3[0x1]];}if(this['mask']){_0x95b323['beginPath']();var _0x160ba0=_0xffd9f5(this[_0x2f9346(0x15f)][0x0]);_0x95b323['moveTo'](_0x160ba0[0x0],_0x160ba0[0x1]);for(var _0xa17379=0x1;_0xa17379<this[_0x2f9346(0x15f)]['length'];_0xa17379++){_0x160ba0=_0xffd9f5(this[_0x2f9346(0x15f)][_0xa17379]),_0x95b323['lineTo'](_0x160ba0[0x0],_0x160ba0[0x1]);}_0x95b323['clip']();}var _0x11e27f=_0xffd9f5(this['center']),_0x24a116=(this['_image'][_0x2f9346(0x152)]/0x2-this[_0x2f9346(0x15b)][0x0])*this[_0x2f9346(0x174)][0x0]/_0x58cae1*_0x12bcd0,_0x2a0f67=(this[_0x2f9346(0x159)][_0x2f9346(0x16b)]/0x2-this[_0x2f9346(0x15b)][0x1])*this['scale'][0x1]/_0x58cae1*_0x12bcd0,_0x52755c=this['_imageSize'][0x0]*this[_0x2f9346(0x174)][0x0]/_0x58cae1*_0x12bcd0,_0x3b6e85=this[_0x2f9346(0x161)][0x1]*this[_0x2f9346(0x174)][0x1]/_0x58cae1*_0x12bcd0;_0x95b323['translate'](_0x11e27f[0x0],_0x11e27f[0x1]);if(this[_0x2f9346(0x14e)])_0x95b323['rotate'](this[_0x2f9346(0x14e)]);return _0x95b323[_0x2f9346(0x162)](this['_image'],this[_0x2f9346(0x15b)][0x0],this[_0x2f9346(0x15b)][0x1],this[_0x2f9346(0x161)][0x0],this[_0x2f9346(0x161)][0x1],-_0x24a116,-_0x2a0f67,_0x52755c,_0x3b6e85),_0x2f4065;}['getCenter'](){return this['center'];}[_0x37524c(0x165)](_0x16bc75){var _0x22d352=_0x37524c;this[_0x22d352(0x14d)]=_0x16bc75,this[_0x22d352(0x17a)]();}[_0x37524c(0x16d)](){var _0x331148=_0x37524c;return this[_0x331148(0x174)];}[_0x37524c(0x158)](_0x2a640f){var _0x22e745=_0x37524c;switch(typeof _0x2a640f){case'number':_0x2a640f=[_0x2a640f,_0x2a640f];break;case _0x22e745(0x15e):if(_0x2a640f[_0x22e745(0x16f)]!=0x2)return;break;default:return;}this[_0x22e745(0x174)]=_0x2a640f,this[_0x22e745(0x17a)]();}['getRotation'](){var _0x1833f9=_0x37524c;return this[_0x1833f9(0x14e)];}[_0x37524c(0x16a)](_0xfe5c5d){var _0xcd23da=_0x37524c;this[_0xcd23da(0x14e)]=_0xfe5c5d,this[_0xcd23da(0x17a)]();}['getGeoImage'](){var _0x2b11fa=_0x37524c;return this[_0x2b11fa(0x159)];}[_0x37524c(0x168)](){return this['crop'];}[_0x37524c(0x151)](_0x2452e2){var _0x3bab15=_0x37524c;this[_0x3bab15(0x15f)]=_0x2452e2,this['changed']();}[_0x37524c(0x16c)](){var _0x3b6805=_0x37524c;return this[_0x3b6805(0x15f)];}['setCrop'](_0x4b7d5c){var _0x5b43ca=_0x37524c;if(!this[_0x5b43ca(0x159)][_0x5b43ca(0x152)]){this['crop']=_0x4b7d5c;return;}if(_0x4b7d5c){switch(typeof _0x4b7d5c){case _0x5b43ca(0x176):_0x4b7d5c=[_0x4b7d5c,_0x4b7d5c,this[_0x5b43ca(0x159)][_0x5b43ca(0x152)]-_0x4b7d5c,this['_image'][_0x5b43ca(0x16b)]-_0x4b7d5c];break;case'object':if(_0x4b7d5c['length']!=0x4)return;break;default:return;}_0x4b7d5c=_0xbc5ef2([[_0x4b7d5c[0x0],_0x4b7d5c[0x1]],[_0x4b7d5c[0x2],_0x4b7d5c[0x3]]]),this['crop']=[Math[_0x5b43ca(0x149)](0x0,_0x4b7d5c[0x0]),Math[_0x5b43ca(0x149)](0x0,_0x4b7d5c[0x1]),Math[_0x5b43ca(0x150)](this[_0x5b43ca(0x159)][_0x5b43ca(0x152)],_0x4b7d5c[0x2]),Math['min'](this['_image'][_0x5b43ca(0x16b)],_0x4b7d5c[0x3])];}else this[_0x5b43ca(0x15b)]=[0x0,0x0,this['_image'][_0x5b43ca(0x152)],this[_0x5b43ca(0x159)][_0x5b43ca(0x16b)]];if(this['crop'][0x2]<=this[_0x5b43ca(0x15b)][0x0])this[_0x5b43ca(0x15b)][0x2]=this[_0x5b43ca(0x15b)][0x0]+0x1;if(this[_0x5b43ca(0x15b)][0x3]<=this[_0x5b43ca(0x15b)][0x1])this['crop'][0x3]=this[_0x5b43ca(0x15b)][0x1]+0x1;this[_0x5b43ca(0x161)]=[this[_0x5b43ca(0x15b)][0x2]-this[_0x5b43ca(0x15b)][0x0],this[_0x5b43ca(0x15b)][0x3]-this[_0x5b43ca(0x15b)][0x1]],this[_0x5b43ca(0x17a)]();}['getExtent'](_0x5e0140){var _0x14e44d=_0x37524c,_0x19e0f6=this['get'](_0x14e44d(0x179));if(!_0x19e0f6)_0x19e0f6=this[_0x14e44d(0x177)]();if(_0x5e0140)for(var _0x2b3463=0x0;_0x2b3463<_0x5e0140[_0x14e44d(0x16f)];_0x2b3463++){_0x5e0140[_0x2b3463]=_0x19e0f6[_0x2b3463];}return _0x19e0f6;}[_0x37524c(0x177)](_0x50f415){var _0x10a644=_0x37524c,_0x2a4d05;if(_0x50f415!==![]&&this[_0x10a644(0x16c)]())_0x2a4d05=new _0x305de7([this[_0x10a644(0x16c)]()]);else{var _0x3f8fcf=this[_0x10a644(0x164)](),_0x238948=this['getScale'](),_0x27367c=this['getGeoImage']()[_0x10a644(0x144)]*_0x238948[0x0],_0xb900c1=this['getGeoImage']()[_0x10a644(0x147)]*_0x238948[0x1],_0xbabff6=_0xbc5ef2([[_0x3f8fcf[0x0]-_0x27367c/0x2,_0x3f8fcf[0x1]-_0xb900c1/0x2],[_0x3f8fcf[0x0]+_0x27367c/0x2,_0x3f8fcf[0x1]+_0xb900c1/0x2]]);_0x2a4d05=_0xbe6831(_0xbabff6),_0x2a4d05[_0x10a644(0x14e)](-this[_0x10a644(0x160)](),_0x3f8fcf);}var _0x5590ba=_0x2a4d05[_0x10a644(0x155)]();return _0x5590ba;}};export default cme_source_GeoImage;