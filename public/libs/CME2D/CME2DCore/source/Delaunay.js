var _0x46e6ba=_0x3b58;(function(_0x2ede92,_0x57ba42){var _0x7c9f37=_0x3b58,_0xf08a12=_0x2ede92();while(!![]){try{var _0xce88e8=-parseInt(_0x7c9f37(0x1a5))/0x1*(-parseInt(_0x7c9f37(0x18b))/0x2)+parseInt(_0x7c9f37(0x195))/0x3+parseInt(_0x7c9f37(0x19f))/0x4+parseInt(_0x7c9f37(0x180))/0x5*(-parseInt(_0x7c9f37(0x192))/0x6)+parseInt(_0x7c9f37(0x16e))/0x7*(parseInt(_0x7c9f37(0x171))/0x8)+-parseInt(_0x7c9f37(0x17c))/0x9*(-parseInt(_0x7c9f37(0x175))/0xa)+parseInt(_0x7c9f37(0x178))/0xb*(-parseInt(_0x7c9f37(0x19e))/0xc);if(_0xce88e8===_0x57ba42)break;else _0xf08a12['push'](_0xf08a12['shift']());}catch(_0xb1129){_0xf08a12['push'](_0xf08a12['shift']());}}}(_0x52d1,0x1aa7a));function _0x52d1(){var _0x147bfd=['200088jMZsNm','center','getCircumCircle','removefeature','_addTriangle','listpt','error','intersectSegs','concat','93792yrcxiu','261544peSRJy','getCoordinates','splice','sort','[DELAUNAY:removePoint]\x20No\x20edge\x20found','forEach','17pHtjHp','atan2','hull','slice','104594bbGdms','geometry','push','104QPCICj','removeFeature','addFeature','_nodes','150XJIZiD','del','flipTriangles','253LTquRp','flip','set','forEachFeatureIntersectingExtent','56214UGCPLP','clear','Point','length','635BYMETQ','_onAddNode','getNodes','_ptInTriangle','get','addfeature','source','pop','inCircle','epsilon','getProperties','9158GvLijf','getNodesAt','unshift','getTrianglesAt','bind','getGeometry','getFeaturesAtCoordinate','9870vLUiOy','getFeatures','feature'];_0x52d1=function(){return _0x147bfd;};return _0x52d1();}import _0x5e4540 from'../../source/Vector.js';import _0x5d7e1f from'../../Feature.js';import _0x3a1618 from'../../geom/Polygon.js';import{boundingExtent as _0x245264}from'../../extent.js';import{buffer as _0x26d4b2}from'../../extent.js';function _0x3b58(_0x276355,_0x320eef){var _0x52d1ab=_0x52d1();return _0x3b58=function(_0x3b5859,_0x50071e){_0x3b5859=_0x3b5859-0x16d;var _0x5d5bc0=_0x52d1ab[_0x3b5859];return _0x5d5bc0;},_0x3b58(_0x276355,_0x320eef);}import{cme_coordinate_equal,cme_coordinate_dist2d}from'../geom/GeomUtils.js';import _0x3f0307 from'../geom/ConvexHull.js';var cme_source_Delaunay=class olsourceDelaunay extends _0x5e4540{constructor(_0x6e42c9){var _0x41dfdf=_0x3b58;_0x6e42c9=_0x6e42c9||{};var _0x54005b=_0x6e42c9[_0x41dfdf(0x186)];delete _0x6e42c9[_0x41dfdf(0x186)],super(_0x6e42c9),this[_0x41dfdf(0x174)]=_0x54005b,this[_0x41dfdf(0x1a7)]=[],this['_nodes']['on'](_0x41dfdf(0x185),this[_0x41dfdf(0x181)][_0x41dfdf(0x18f)](this)),this[_0x41dfdf(0x174)]['on'](_0x41dfdf(0x198),this['_onRemoveNode']['bind'](this)),this[_0x41dfdf(0x17a)](_0x41dfdf(0x189),_0x6e42c9[_0x41dfdf(0x189)]||0.0001);}[_0x46e6ba(0x17d)](_0x4a1c9b){var _0x297480=_0x46e6ba;super[_0x297480(0x17d)](_0x4a1c9b),this['getNodeSource']()[_0x297480(0x17d)](_0x4a1c9b);}[_0x46e6ba(0x199)](_0x36cc5d){var _0x339f9c=_0x46e6ba;_0x36cc5d['push'](_0x36cc5d[0x0]);var _0x1421ec=new _0x5d7e1f(new _0x3a1618([_0x36cc5d]));return this[_0x339f9c(0x173)](_0x1421ec),this[_0x339f9c(0x179)]['push'](_0x1421ec),_0x1421ec;}[_0x46e6ba(0x182)](){var _0x16c3b3=_0x46e6ba;return this[_0x16c3b3(0x174)][_0x16c3b3(0x193)]();}['getNodeSource'](){var _0x464e1a=_0x46e6ba;return this[_0x464e1a(0x174)];}['_onRemoveNode'](_0x56d9cd){var _0x2dbe7b=_0x46e6ba,_0x2e143d=_0x56d9cd[_0x2dbe7b(0x194)][_0x2dbe7b(0x190)]()[_0x2dbe7b(0x1a0)]();if(!_0x2e143d)return;if(this['getNodesAt'](_0x2e143d)[_0x2dbe7b(0x17f)])return;var _0xe4770f=this['getTrianglesAt'](_0x2e143d);this['flip']=[];var _0x24adf5,_0xa50f73=[];while(_0xe4770f[_0x2dbe7b(0x17f)]){var _0x56c021=_0xe4770f['pop']();this[_0x2dbe7b(0x172)](_0x56c021),_0x56c021=_0x56c021[_0x2dbe7b(0x190)]()[_0x2dbe7b(0x1a0)]()[0x0];var _0x273138=[];for(_0x24adf5=0x0;_0x24adf5<0x3;_0x24adf5++){_0x26eedb=_0x56c021[_0x24adf5],!cme_coordinate_equal(_0x26eedb,_0x2e143d)&&_0x273138[_0x2dbe7b(0x170)](_0x26eedb);}_0xa50f73[_0x2dbe7b(0x170)](_0x273138);}_0x273138=_0xa50f73[_0x2dbe7b(0x187)](),_0x24adf5=0x0;function _0x23f8d3(_0x4a802d,_0x198e9d,_0x367d5e){var _0x50f970=_0x2dbe7b;if(cme_coordinate_equal(_0x4a802d,_0x273138[_0x367d5e])){if(_0x367d5e)_0x273138[_0x50f970(0x170)](_0x198e9d);else _0x273138[_0x50f970(0x18d)](_0x198e9d);return!![];}return![];}while(!![]){var _0x4dd9a8=_0xa50f73[_0x24adf5];_0x23f8d3(_0x4dd9a8[0x0],_0x4dd9a8[0x1],0x0)||_0x23f8d3(_0x4dd9a8[0x1],_0x4dd9a8[0x0],0x0)||_0x23f8d3(_0x4dd9a8[0x0],_0x4dd9a8[0x1],_0x273138[_0x2dbe7b(0x17f)]-0x1)||_0x23f8d3(_0x4dd9a8[0x1],_0x4dd9a8[0x0],_0x273138[_0x2dbe7b(0x17f)]-0x1)?(_0xa50f73[_0x2dbe7b(0x1a1)](_0x24adf5,0x1),_0x24adf5=0x0):_0x24adf5++;if(!_0xa50f73['length'])break;if(_0x24adf5>=_0xa50f73[_0x2dbe7b(0x17f)])throw _0x2dbe7b(0x1a3);}var _0x54e8b3=cme_coordinate_equal(_0x273138[0x0],_0x273138[_0x273138[_0x2dbe7b(0x17f)]-0x1]);if(_0x54e8b3)_0x273138[_0x2dbe7b(0x187)]();var _0x26eedb;for(_0x24adf5;_0x26eedb=this[_0x2dbe7b(0x1a7)][_0x24adf5];_0x24adf5++){if(cme_coordinate_equal(_0x2e143d,_0x26eedb)){this[_0x2dbe7b(0x1a7)][_0x2dbe7b(0x1a1)](_0x24adf5,0x1);break;}}this[_0x2dbe7b(0x1a7)]=_0x3f0307(this[_0x2dbe7b(0x1a7)][_0x2dbe7b(0x19d)](_0x273138));var _0xb682eb=function(_0x55f44f){var _0x2f4cbe=_0x2dbe7b,_0x5dd069,_0x444615=0x0;for(var _0x1607ed=0x0;_0x1607ed<_0x55f44f[_0x2f4cbe(0x17f)];_0x1607ed++){_0x5dd069=(_0x1607ed+0x1)%_0x55f44f[_0x2f4cbe(0x17f)],_0x444615+=(_0x55f44f[_0x5dd069][0x0]-_0x55f44f[_0x1607ed][0x0])*(_0x55f44f[_0x5dd069][0x1]+_0x55f44f[_0x1607ed][0x1]);}return _0x444615>=0x0?0x1:-0x1;},_0x4b5046,_0x35b08a=_0x273138[_0x2dbe7b(0x16d)]();_0x54e8b3?_0x4b5046=_0xb682eb(_0x273138):(_0x35b08a[_0x2dbe7b(0x170)](_0x2e143d),_0x4b5046=_0xb682eb(_0x35b08a));for(_0x24adf5=0x0;_0x24adf5<=_0x273138[_0x2dbe7b(0x17f)]+0x1;_0x24adf5++){if(_0x273138['length']<0x3)break;var _0x230a81=[_0x273138[_0x24adf5%_0x273138[_0x2dbe7b(0x17f)]],_0x273138[(_0x24adf5+0x1)%_0x273138[_0x2dbe7b(0x17f)]],_0x273138[(_0x24adf5+0x2)%_0x273138[_0x2dbe7b(0x17f)]]];if(_0xb682eb(_0x230a81)===_0x4b5046){var _0x2bc18b=!![];for(var _0xffe5e2=_0x24adf5+0x3;_0xffe5e2<_0x24adf5+_0x273138[_0x2dbe7b(0x17f)];_0xffe5e2++){if(this[_0x2dbe7b(0x188)](_0x273138[_0xffe5e2%_0x273138['length']],_0x230a81)){_0x2bc18b=![];break;}}_0x2bc18b&&(this[_0x2dbe7b(0x199)](_0x230a81),_0x273138[_0x2dbe7b(0x1a1)]((_0x24adf5+0x1)%_0x273138[_0x2dbe7b(0x17f)],0x1),_0x24adf5=-0x1);}}this[_0x2dbe7b(0x177)]();}[_0x46e6ba(0x181)](_0x2924f3){var _0x349e3d=_0x46e6ba,_0x51a788=_0x2924f3[_0x349e3d(0x194)],_0x35f151,_0x2b7f37;if(_0x51a788[_0x349e3d(0x190)]()['getType']()!==_0x349e3d(0x17e)){this[_0x349e3d(0x174)][_0x349e3d(0x172)](_0x51a788);return;}this[_0x349e3d(0x179)]=[];var _0x459c9f=this[_0x349e3d(0x182)](),_0x2b2cf5=_0x51a788['getGeometry']()[_0x349e3d(0x1a0)]();if(this[_0x349e3d(0x18c)](_0x2b2cf5)[_0x349e3d(0x17f)]>0x1){this[_0x349e3d(0x174)][_0x349e3d(0x172)](_0x51a788);return;}if(_0x459c9f[_0x349e3d(0x17f)]<=0x3){if(_0x459c9f[_0x349e3d(0x17f)]===0x3){var _0x5bcbea=[];for(_0x35f151=0x0;_0x35f151<0x3;_0x35f151++)_0x5bcbea[_0x349e3d(0x170)](_0x459c9f[_0x35f151][_0x349e3d(0x190)]()[_0x349e3d(0x1a0)]());this[_0x349e3d(0x199)](_0x5bcbea),this['hull']=_0x3f0307(_0x5bcbea);}return;}var _0x2398ff=this[_0x349e3d(0x191)](_0x2b2cf5)[0x0];if(_0x2398ff){this[_0x349e3d(0x172)](_0x2398ff),_0x2398ff['set']('del',!![]);var _0x48260c=_0x2398ff[_0x349e3d(0x190)]()['getCoordinates']()[0x0];for(_0x35f151=0x0;_0x35f151<0x3;_0x35f151++){this[_0x349e3d(0x199)]([_0x2b2cf5,_0x48260c[_0x35f151],_0x48260c[(_0x35f151+0x1)%0x3]]);}}else{var _0x27c360=this[_0x349e3d(0x1a7)][_0x349e3d(0x16d)]();_0x27c360['push'](_0x2b2cf5),_0x27c360=_0x3f0307(_0x27c360);for(_0x35f151=0x0;_0x2b7f37=_0x27c360[_0x35f151];_0x35f151++){if(cme_coordinate_equal(_0x2b7f37,_0x2b2cf5))break;}_0x35f151=_0x35f151!==0x0?_0x35f151-0x1:_0x27c360[_0x349e3d(0x17f)]-0x1;var _0x555048=_0x27c360[_0x35f151],_0x2237b9=_0x27c360[(_0x35f151+0x2)%_0x27c360['length']];for(_0x35f151=0x0;_0x2b7f37=this[_0x349e3d(0x1a7)][_0x35f151];_0x35f151++){if(cme_coordinate_equal(_0x2b7f37,_0x555048))break;}while(!![]){if(_0x35f151>0x3e8){console[_0x349e3d(0x19b)]('[DELAUNAY:addPoint]\x20Too\x20many\x20iterations');break;}_0x35f151++,_0x2b7f37=this[_0x349e3d(0x1a7)][_0x35f151%this[_0x349e3d(0x1a7)][_0x349e3d(0x17f)]],this[_0x349e3d(0x199)]([_0x2b2cf5,_0x2b7f37,_0x555048]),_0x555048=_0x2b7f37;if(_0x2b7f37[0x0]===_0x2237b9[0x0]&&_0x2b7f37[0x1]===_0x2237b9[0x1])break;}this[_0x349e3d(0x1a7)]=_0x27c360;}this[_0x349e3d(0x177)]();}[_0x46e6ba(0x177)](){var _0x4c6240=_0x46e6ba,_0x348aee=0x3e8,_0x376fab;while(this[_0x4c6240(0x179)][_0x4c6240(0x17f)]){if(_0x348aee--<0x0){console[_0x4c6240(0x19b)]('[DELAUNAY:flipTriangles]\x20Too\x20many\x20iterations');break;}var _0x26a5ca=this[_0x4c6240(0x179)][_0x4c6240(0x187)]();if(_0x26a5ca['get'](_0x4c6240(0x176)))continue;var _0x3b6a57=_0x26a5ca['getGeometry']()['getCoordinates']()[0x0];for(var _0x381642=0x0;_0x381642<0x3;_0x381642++){var _0x1ef406=[(_0x3b6a57[(_0x381642+0x1)%0x3][0x0]+_0x3b6a57[_0x381642][0x0])/0x2,(_0x3b6a57[(_0x381642+0x1)%0x3][0x1]+_0x3b6a57[_0x381642][0x1])/0x2],_0x10ff33=this[_0x4c6240(0x18e)](_0x1ef406),_0x2b6487=null;if(_0x10ff33[_0x4c6240(0x17f)]>0x1){var _0x2e9f6f=_0x10ff33[0x0][_0x4c6240(0x190)]()['getCoordinates']()[0x0],_0x1de0c3=_0x10ff33[0x1][_0x4c6240(0x190)]()[_0x4c6240(0x1a0)]()[0x0];for(_0x376fab=0x0;_0x376fab<_0x1de0c3['length'];_0x376fab++){if(!this[_0x4c6240(0x183)](_0x1de0c3[_0x376fab],_0x2e9f6f)){_0x2b6487=_0x1de0c3[_0x376fab];break;}}}if(_0x2b6487){if(this[_0x4c6240(0x188)](_0x2b6487,_0x2e9f6f)){var _0x1694ca;for(_0x376fab=0x0;_0x376fab<_0x2e9f6f['length'];_0x376fab++){if(!this[_0x4c6240(0x183)](_0x2e9f6f[_0x376fab],_0x1de0c3)){_0x1694ca=_0x2e9f6f[_0x4c6240(0x1a1)](_0x376fab,0x1)[0x0];break;}}if(this[_0x4c6240(0x19c)]([_0x2b6487,_0x1694ca],_0x2e9f6f)){while(_0x10ff33[_0x4c6240(0x17f)]){var _0x25528f=_0x10ff33['pop']();_0x25528f['set'](_0x4c6240(0x176),!![]),this['removeFeature'](_0x25528f);}this[_0x4c6240(0x199)]([_0x2b6487,_0x1694ca,_0x2e9f6f[0x0]]),this[_0x4c6240(0x199)]([_0x2b6487,_0x1694ca,_0x2e9f6f[0x1]]);}}}}}}['intersectSegs'](_0x4f1871,_0x1ce9c7){var _0x3a5dfb=_0x4f1871[0x1][0x0]-_0x4f1871[0x0][0x0],_0x5a67ab=_0x4f1871[0x1][0x1]-_0x4f1871[0x0][0x1],_0x61a426=_0x1ce9c7[0x1][0x0]-_0x1ce9c7[0x0][0x0],_0x302cc2=_0x1ce9c7[0x1][0x1]-_0x1ce9c7[0x0][0x1],_0x400c15=_0x3a5dfb*_0x302cc2-_0x5a67ab*_0x61a426;if(_0x400c15!=0x0){var _0x303e2c=(_0x3a5dfb*_0x4f1871[0x0][0x1]-_0x3a5dfb*_0x1ce9c7[0x0][0x1]-_0x5a67ab*_0x4f1871[0x0][0x0]+_0x5a67ab*_0x1ce9c7[0x0][0x0])/_0x400c15;return 0x0<_0x303e2c&&_0x303e2c<0x1;}else return![];}['_ptInTriangle'](_0x55596e,_0x880744){for(var _0x107d87=0x0,_0x2b7181;_0x2b7181=_0x880744[_0x107d87];_0x107d87++){if(cme_coordinate_equal(_0x55596e,_0x2b7181))return!![];}return![];}[_0x46e6ba(0x19a)](_0x5bdbcf){var _0x2a5fc5=_0x46e6ba,_0x50d1ea='';for(var _0x3b33eb=0x0,_0x524276;_0x524276=_0x5bdbcf[_0x3b33eb];_0x3b33eb++){var _0x453241=this[_0x2a5fc5(0x174)]['getClosestFeatureToCoordinate'](_0x524276);if(!cme_coordinate_equal(_0x453241[_0x2a5fc5(0x190)]()[_0x2a5fc5(0x1a0)](),_0x524276))_0x453241=null;_0x50d1ea+=(_0x50d1ea?',\x20':'')+(_0x453241?_0x453241[_0x2a5fc5(0x184)]('id'):'?');}return _0x50d1ea;}[_0x46e6ba(0x188)](_0x21fa9b,_0xfe673b){var _0x751d0c=_0x46e6ba,_0x56bd07=this[_0x751d0c(0x197)](_0xfe673b);return cme_coordinate_dist2d(_0x21fa9b,_0x56bd07[_0x751d0c(0x196)])<_0x56bd07['radius'];}[_0x46e6ba(0x197)](_0x17a096){var _0x371a52=_0x17a096[0x0][0x0],_0x1585e4=_0x17a096[0x0][0x1],_0x5e33a6=_0x17a096[0x1][0x0],_0x2f9f37=_0x17a096[0x1][0x1],_0x4f8968=_0x17a096[0x2][0x0],_0x4ee6eb=_0x17a096[0x2][0x1],_0x125949=(_0x371a52-_0x5e33a6)/(_0x2f9f37-_0x1585e4),_0x164766=(_0x371a52-_0x4f8968)/(_0x4ee6eb-_0x1585e4),_0x417e35=(_0x1585e4+_0x2f9f37)/0x2-_0x125949*(_0x371a52+_0x5e33a6)/0x2,_0x29a80c=(_0x1585e4+_0x4ee6eb)/0x2-_0x164766*(_0x371a52+_0x4f8968)/0x2,_0x3b15fa=(_0x29a80c-_0x417e35)/(_0x125949-_0x164766),_0x4f298d=_0x125949*_0x3b15fa+_0x417e35,_0x57e7eb=[_0x3b15fa,_0x4f298d];return{'center':_0x57e7eb,'radius':cme_coordinate_dist2d(_0x57e7eb,_0x17a096[0x0])};}[_0x46e6ba(0x18e)](_0x1cb877){var _0xc4459=_0x46e6ba,_0x148d80=_0x26d4b2(_0x245264([_0x1cb877]),this['get'](_0xc4459(0x189))),_0x5db695=[];return this[_0xc4459(0x17b)](_0x148d80,function(_0x9b8f97){var _0x51d660=_0xc4459;_0x5db695[_0x51d660(0x170)](_0x9b8f97);}),_0x5db695;}[_0x46e6ba(0x18c)](_0x45fac4){var _0x42a8ec=_0x46e6ba,_0x33ba0b=_0x26d4b2(_0x245264([_0x45fac4]),this[_0x42a8ec(0x184)]('epsilon'));return this['_nodes']['getFeaturesInExtent'](_0x33ba0b);}['calculateVoronoi'](_0x5cb910){var _0x2efc0b=[];return this['getNodes']()['forEach'](function(_0x5a9563){var _0x4ff781=_0x3b58,_0x421d09=_0x5a9563[_0x4ff781(0x190)]()[_0x4ff781(0x1a0)](),_0x4bf40b=![];if(_0x5cb910!==!![])for(var _0x544137=0x0;_0x544137<this[_0x4ff781(0x1a7)]['length'];_0x544137++){if(cme_coordinate_equal(_0x421d09,this['hull'][_0x544137])){_0x4bf40b=!![];break;}}if(!_0x4bf40b){var _0xde9340=this['getTrianglesAt'](_0x421d09),_0x1183eb=[];_0xde9340[_0x4ff781(0x1a4)](function(_0x34f323){var _0x4ac485=_0x4ff781,_0x12256e=this['getCircumCircle'](_0x34f323[_0x4ac485(0x190)]()[_0x4ac485(0x1a0)]()[0x0]);_0x1183eb[_0x4ac485(0x170)]({'pt':_0x12256e['center'],'d':Math[_0x4ac485(0x1a6)](_0x12256e[_0x4ac485(0x196)][0x1]-_0x421d09[0x1],_0x12256e['center'][0x0]-_0x421d09[0x0])});}[_0x4ff781(0x18f)](this)),_0x1183eb[_0x4ff781(0x1a2)](function(_0x3b2b2a,_0x4a9db9){return _0x3b2b2a['d']-_0x4a9db9['d'];});var _0x85e646=[];_0x1183eb['forEach'](function(_0x26a025){var _0x329289=_0x4ff781;_0x85e646[_0x329289(0x170)](_0x26a025['pt']);}),_0x85e646[_0x4ff781(0x170)](_0x85e646[0x0]);var _0x9bad8d=_0x5a9563[_0x4ff781(0x18a)]();_0x9bad8d[_0x4ff781(0x16f)]=new _0x3a1618([_0x85e646]),_0x2efc0b['push'](new _0x5d7e1f(_0x9bad8d));}}['bind'](this)),_0x2efc0b;}};export default cme_source_Delaunay;