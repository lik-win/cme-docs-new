var _0x3f73a=_0xc06b;(function(_0x19200b,_0x1881e7){var _0x3f8e04=_0xc06b,_0x4b1ce2=_0x19200b();while(!![]){try{var _0x338035=-parseInt(_0x3f8e04(0xf2))/0x1+parseInt(_0x3f8e04(0xee))/0x2+-parseInt(_0x3f8e04(0xf8))/0x3+-parseInt(_0x3f8e04(0xfb))/0x4+parseInt(_0x3f8e04(0xcb))/0x5*(parseInt(_0x3f8e04(0xf5))/0x6)+parseInt(_0x3f8e04(0xcd))/0x7+parseInt(_0x3f8e04(0xc9))/0x8*(-parseInt(_0x3f8e04(0xed))/0x9);if(_0x338035===_0x1881e7)break;else _0x4b1ce2['push'](_0x4b1ce2['shift']());}catch(_0x2aaf63){_0x4b1ce2['push'](_0x4b1ce2['shift']());}}}(_0x4977,0x50d35));import _0x4a96cf from'../../interaction/Interaction.js';import _0x41303e from'../../source/Vector.js';import _0x2c4494 from'../../Collection.js';import{boundingExtent as _0x38456c,buffer as _0xd53904}from'../../extent.js';import'../geom/LineStringSplitAt.js';function _0xc06b(_0x395ee7,_0x83e7e9){var _0x4977fc=_0x4977();return _0xc06b=function(_0xc06b04,_0x1b9b32){_0xc06b04=_0xc06b04-0xc8;var _0x594dd9=_0x4977fc[_0xc06b04];return _0x594dd9;},_0xc06b(_0x395ee7,_0x83e7e9);}var cme_interaction_Splitter=class olinteractionSplitter extends _0x4a96cf{constructor(_0x538b67){var _0x935819=_0xc06b;_0x538b67=_0x538b67||{},super({'handleEvent':function(_0x2c4aff){var _0x56729e=_0xc06b;return _0x2c4aff[_0x56729e(0xdd)]!=_0x56729e(0xf7)&&_0x2c4aff['type']!='pointerdrag'?(this[_0x56729e(0xea)]&&(this[_0x56729e(0xd6)](this[_0x56729e(0xea)][_0x56729e(0xe2)]),this[_0x56729e(0xea)]=null),this[_0x56729e(0xfa)]=![]):this['moving_']=!![],!![];}}),this[_0x935819(0xe5)]=[],this[_0x935819(0xf6)]=[];_0x538b67['features']?this[_0x935819(0xf0)]=new _0x41303e({'features':_0x538b67[_0x935819(0xf3)]}):this[_0x935819(0xf0)]=_0x538b67[_0x935819(0xcc)]?_0x538b67[_0x935819(0xcc)]:new _0x41303e({'features':new _0x2c4494()});var _0x3e4d2d=this[_0x935819(0xcf)];_0x538b67['triggerFeatures']&&(_0x3e4d2d=new _0x41303e({'features':_0x538b67[_0x935819(0xd4)]})),_0x3e4d2d?(_0x3e4d2d['on'](_0x935819(0xec),this[_0x935819(0xe4)]['bind'](this)),_0x3e4d2d['on'](_0x935819(0xe6),this[_0x935819(0xe8)][_0x935819(0xd0)](this)),_0x3e4d2d['on'](_0x935819(0xd5),this[_0x935819(0xe7)][_0x935819(0xd0)](this))):(this[_0x935819(0xf0)]['on']('addfeature',this['onAddFeature'][_0x935819(0xd0)](this)),this[_0x935819(0xf0)]['on'](_0x935819(0xe6),this['onChangeFeature'][_0x935819(0xd0)](this)),this[_0x935819(0xf0)]['on'](_0x935819(0xd5),this[_0x935819(0xe7)]['bind'](this))),this[_0x935819(0xca)]=_0x538b67[_0x935819(0xe1)]||1e-10,this['filterSplit_']=_0x538b67[_0x935819(0xd7)]||function(){return!![];};}[_0x3f73a(0xd3)](_0x2a1c1a,_0x391fd5){var _0x52fe02=_0x3f73a,_0x149924=this[_0x52fe02(0xca)],_0x5b7932=_0x2a1c1a[0x0][0x0]-_0x2a1c1a[0x1][0x0],_0x4a525d=_0x391fd5[0x0][0x0]-_0x391fd5[0x1][0x0],_0x2c7e6c=_0x2a1c1a[0x0][0x1]-_0x2a1c1a[0x1][0x1],_0x6bd6d1=_0x391fd5[0x0][0x1]-_0x391fd5[0x1][0x1],_0x48c28e=_0x5b7932*_0x6bd6d1-_0x2c7e6c*_0x4a525d;if(Math[_0x52fe02(0xe9)](_0x48c28e)<_0x149924)return![];else{var _0x3ba1df=((_0x2a1c1a[0x0][0x0]-_0x391fd5[0x1][0x0])*_0x6bd6d1-(_0x2a1c1a[0x0][0x1]-_0x391fd5[0x1][0x1])*_0x4a525d)/_0x48c28e;if(Math['abs'](_0x3ba1df)<_0x149924)return _0x2a1c1a[0x0];if(Math[_0x52fe02(0xe9)](0x1-_0x3ba1df)<_0x149924)return _0x2a1c1a[0x1];if(_0x3ba1df<0x0||_0x3ba1df>0x1)return![];var _0x5d3ab7=((_0x2a1c1a[0x0][0x1]-_0x391fd5[0x1][0x1])*_0x5b7932-(_0x2a1c1a[0x0][0x0]-_0x391fd5[0x1][0x0])*_0x2c7e6c)/_0x48c28e;if(Math[_0x52fe02(0xe9)](_0x5d3ab7)<_0x149924)return _0x391fd5[0x1];if(Math['abs'](0x1-_0x5d3ab7)<_0x149924)return _0x391fd5[0x0];if(_0x5d3ab7<0x0||_0x5d3ab7>0x1)return![];var _0x5718f3=_0x2a1c1a[0x0][0x0]*_0x2a1c1a[0x1][0x1]-_0x2a1c1a[0x0][0x1]*_0x2a1c1a[0x1][0x0],_0x198558=_0x391fd5[0x0][0x0]*_0x391fd5[0x1][0x1]-_0x391fd5[0x0][0x1]*_0x391fd5[0x1][0x0],_0x39cfb4=[(_0x5718f3*_0x4a525d-_0x198558*_0x5b7932)/_0x48c28e,(_0x5718f3*_0x6bd6d1-_0x198558*_0x2c7e6c)/_0x48c28e];return _0x39cfb4;}}['splitSource'](_0x1a9839,_0x2fbc81){var _0x112dba=_0x3f73a;if(!this[_0x112dba(0xef)]())return;if(this[_0x112dba(0xdc)])return;this[_0x112dba(0xf0)][_0x112dba(0xc8)]({'type':_0x112dba(0xe0),'feaure':_0x1a9839,'source':this[_0x112dba(0xf0)]}),this['dispatchEvent']({'type':'beforesplit','feaure':_0x1a9839,'source':this[_0x112dba(0xf0)]}),_0x2fbc81?this[_0x112dba(0xdf)](_0x1a9839):setTimeout(function(){var _0xc7195=_0x112dba;this[_0xc7195(0xdf)](_0x1a9839);}[_0x112dba(0xd0)](this));}['_splitSource'](_0x12ea58){var _0x1a76e5=_0x3f73a,_0x1a27a1,_0x541a45,_0x1d490e;this[_0x1a76e5(0xdc)]=!![],this[_0x1a76e5(0xe5)]=[],this[_0x1a76e5(0xf6)]=[];var _0x1ab420=_0x12ea58['getGeometry']()['getCoordinates']();switch(_0x12ea58[_0x1a76e5(0xd1)]()['getType']()){case'Point':{_0x1ab420=[_0x1ab420];break;}case _0x1a76e5(0xce):{break;}default:{_0x1ab420=[];break;}}var _0x3deb32,_0x1216bb,_0x12b241=[];function _0x55357f(_0x2d55a5){var _0x3a7a76=_0x1a76e5;if(_0x2d55a5!==_0x12ea58&&_0x2d55a5[_0x3a7a76(0xd1)]()[_0x3a7a76(0xeb)]){var _0x3ac1b6=_0x2d55a5[_0x3a7a76(0xd1)]()[_0x3a7a76(0xf4)]();for(var _0x5abd60=0x0;_0x5abd60<_0x3ac1b6['length']-0x1;_0x5abd60++){var _0x42cc81=this['intersectSegs'](_0x3deb32,[_0x3ac1b6[_0x5abd60],_0x3ac1b6[_0x5abd60+0x1]]);if(_0x42cc81){_0x12b241[_0x3a7a76(0xf1)](_0x42cc81),_0x45b1b9=_0x2d55a5[_0x3a7a76(0xd1)]()[_0x3a7a76(0xeb)](_0x42cc81,this[_0x3a7a76(0xca)]);if(_0x45b1b9&&_0x45b1b9[_0x3a7a76(0xd9)]>0x1)return _0x415258=_0x2d55a5,!![];}}}return![];}_0x1ab420['length']===0x1&&(_0x3deb32=[_0x1ab420[0x0],_0x1ab420[0x0]],_0x1216bb=_0xd53904(_0x38456c(_0x3deb32),this[_0x1a76e5(0xca)]),this[_0x1a76e5(0xf0)][_0x1a76e5(0xdb)](_0x1216bb,function(_0x26136e){var _0x3f35ec=_0x1a76e5;if(_0x26136e['getGeometry']()['splitAt']){var _0x2c8a0a=_0x26136e['getGeometry']()[_0x3f35ec(0xeb)](_0x1ab420[0x0],this[_0x3f35ec(0xca)]);if(_0x2c8a0a[_0x3f35ec(0xd9)]>0x1){this[_0x3f35ec(0xf0)]['removeFeature'](_0x26136e);for(_0x541a45=0x0;_0x541a45<_0x2c8a0a[_0x3f35ec(0xd9)];_0x541a45++){_0x1d490e=_0x26136e[_0x3f35ec(0xda)](),_0x1d490e['setGeometry'](_0x2c8a0a[_0x541a45]),this['source_'][_0x3f35ec(0xf9)](_0x1d490e);}}}}[_0x1a76e5(0xd0)](this)));for(_0x1a27a1=0x0;_0x1a27a1<_0x1ab420['length']-0x1;_0x1a27a1++){_0x3deb32=[_0x1ab420[_0x1a27a1],_0x1ab420[_0x1a27a1+0x1]],_0x1216bb=_0xd53904(_0x38456c(_0x3deb32),this[_0x1a76e5(0xca)]);var _0x45b1b9;while(!![]){var _0x415258=![];this[_0x1a76e5(0xf0)][_0x1a76e5(0xdb)](_0x1216bb,_0x55357f[_0x1a76e5(0xd0)](this));if(_0x415258){var _0x3ae320=_0x415258;this[_0x1a76e5(0xf0)][_0x1a76e5(0xd2)](_0x3ae320);for(_0x541a45=0x0;_0x541a45<_0x45b1b9[_0x1a76e5(0xd9)];_0x541a45++){_0x1d490e=_0x3ae320['clone'](),_0x1d490e[_0x1a76e5(0xd8)](_0x45b1b9[_0x541a45]),this[_0x1a76e5(0xf0)][_0x1a76e5(0xf9)](_0x1d490e);}}else break;}}for(_0x1a27a1=0x0;_0x1a27a1<_0x1ab420[_0x1a76e5(0xd9)]-0x2;_0x1a27a1++){for(var _0x387cb7=_0x1a27a1+0x1;_0x387cb7<_0x1ab420[_0x1a76e5(0xd9)]-0x1;_0x387cb7++){var _0x2659d9=this[_0x1a76e5(0xd3)]([_0x1ab420[_0x1a27a1],_0x1ab420[_0x1a27a1+0x1]],[_0x1ab420[_0x387cb7],_0x1ab420[_0x387cb7+0x1]]);_0x2659d9&&_0x2659d9!=_0x1ab420[_0x1a27a1+0x1]&&_0x12b241[_0x1a76e5(0xf1)](_0x2659d9);}}var _0x107858=![];if(_0x12b241[_0x1a76e5(0xd9)]){var _0x5f3923=_0x12ea58['getGeometry']()[_0x1a76e5(0xeb)](_0x12b241,this[_0x1a76e5(0xca)]);if(_0x5f3923[_0x1a76e5(0xd9)]>0x1){for(_0x541a45=0x0;_0x541a45<_0x5f3923['length'];_0x541a45++){_0x1d490e=_0x12ea58[_0x1a76e5(0xda)](),_0x1d490e[_0x1a76e5(0xd8)](_0x5f3923[_0x541a45]),this[_0x1a76e5(0xf0)][_0x1a76e5(0xf9)](_0x1d490e);}_0x107858=!![];}}setTimeout(function(){var _0x4dfa29=_0x1a76e5;if(_0x107858)this['source_'][_0x4dfa29(0xd2)](_0x12ea58);this[_0x4dfa29(0xf0)]['dispatchEvent']({'type':_0x4dfa29(0xde),'featureAdded':this[_0x4dfa29(0xe5)],'featureRemoved':this[_0x4dfa29(0xf6)],'source':this[_0x4dfa29(0xf0)]}),this[_0x4dfa29(0xc8)]({'type':_0x4dfa29(0xde),'featureAdded':this[_0x4dfa29(0xe5)],'featureRemoved':this[_0x4dfa29(0xf6)],'source':this['source_']}),this[_0x4dfa29(0xdc)]=![];}[_0x1a76e5(0xd0)](this));}[_0x3f73a(0xe4)](_0x36075d){var _0x194f45=_0x3f73a;this['splitSource'](_0x36075d[_0x194f45(0xe2)]),this[_0x194f45(0xdc)]&&this[_0x194f45(0xe5)]['push'](_0x36075d[_0x194f45(0xe2)]);}[_0x3f73a(0xe7)](_0x4f3eb9){var _0x165fe0=_0x3f73a;if(this[_0x165fe0(0xdc)]){var _0x57450a=this[_0x165fe0(0xe5)][_0x165fe0(0xe3)](_0x4f3eb9[_0x165fe0(0xe2)]);_0x57450a==-0x1?this[_0x165fe0(0xf6)][_0x165fe0(0xf1)](_0x4f3eb9[_0x165fe0(0xe2)]):this[_0x165fe0(0xe5)]['splice'](_0x57450a,0x1);}}[_0x3f73a(0xe8)](_0x4cf5d4){var _0x3852eb=_0x3f73a;this[_0x3852eb(0xfa)]?this['lastEvent_']=_0x4cf5d4:this[_0x3852eb(0xd6)](_0x4cf5d4[_0x3852eb(0xe2)],!![]);}};function _0x4977(){var _0x1f2e80=['aftersplit','_splitSource','beforesplit','tolerance','feature','indexOf','onAddFeature','added_','changefeature','onRemoveFeature','onChangeFeature','abs','lastEvent_','splitAt','addfeature','45WaQOrI','1140382xRfkvl','getActive','source_','push','318810BwdhgZ','features','getCoordinates','3595614BxhghR','removed_','pointermove','479586iCDgvR','addFeature','moving_','1387168gfPrjt','dispatchEvent','977336rOxOjV','tolerance_','5yziFIz','source','4185300KPtxqG','LineString','triggerSource','bind','getGeometry','removeFeature','intersectSegs','triggerFeatures','removefeature','splitSource','filter','setGeometry','length','clone','forEachFeatureIntersectingExtent','splitting','type'];_0x4977=function(){return _0x1f2e80;};return _0x4977();}export default cme_interaction_Splitter;