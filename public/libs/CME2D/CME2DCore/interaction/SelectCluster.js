var _0x1b4838=_0x5107;function _0x4668(){var _0x2b2d4e=['selectCluster','sin','select','drawPointGeometry','getImage','setMap','selectclusterlink','animate','getExtent','overlayLayer_','changed','_listener','setImageStyle','time','getClusterExtent','7oFnWaC','features','min','addFeatures','1418884qYrzpy','45PycCwz','push','7775880ExIdux','selectCluster_','set','selectclusterfeature','327406jKolty','3060lxZySX','5394612jOQZzh','cos','get','getSource','pointRadius','deselected','listenerKey_','filter_','getFeatures','getFeaturesAtPixel','getTime','forEach','change:resolution','getStyle','filter','spiral','getCoordinates','animateCluster_','autoClose','toggleCondition','frameState','Cluster\x20overlay','animationDuration','getGeometry','maxObjects','setStyle','featureStyle','7223560oFYRbE','layers','getScale','getLayer','wrapX','getView','selectcluserfeatures','removeFeature','1486984AbKfyt','bind','function','20608sEDJAq','postcompose','44TfWLYv','clear','vectorContext','9jBVwjz','getCenter','getResolution','setScale','_autoClose','getMap','circleMaxObjects','length'];_0x4668=function(){return _0x2b2d4e;};return _0x4668();}(function(_0x2c8a2a,_0x17139c){var _0x3015c7=_0x5107,_0xc1a9f5=_0x2c8a2a();while(!![]){try{var _0xb8e90e=-parseInt(_0x3015c7(0x13e))/0x1*(-parseInt(_0x3015c7(0xfa))/0x2)+-parseInt(_0x3015c7(0x127))/0x3*(-parseInt(_0x3015c7(0x142))/0x4)+-parseInt(_0x3015c7(0x117))/0x5+-parseInt(_0x3015c7(0xfb))/0x6*(parseInt(_0x3015c7(0x122))/0x7)+parseInt(_0x3015c7(0x11f))/0x8*(-parseInt(_0x3015c7(0x143))/0x9)+parseInt(_0x3015c7(0x145))/0xa+-parseInt(_0x3015c7(0x124))/0xb*(-parseInt(_0x3015c7(0xfc))/0xc);if(_0xb8e90e===_0x17139c)break;else _0xc1a9f5['push'](_0xc1a9f5['shift']());}catch(_0x46f74b){_0xc1a9f5['push'](_0xc1a9f5['shift']());}}}(_0x4668,0xde417));import _0x54cd95 from'../../Map.js';import _0x43b9cc from'../../Collection.js';import _0x1ac117 from'../../layer/Vector.js';import _0x2a3d32 from'../../source/Vector.js';function _0x5107(_0x1a176e,_0x3ff88c){var _0x46681f=_0x4668();return _0x5107=function(_0x5107e0,_0xa4cda6){_0x5107e0=_0x5107e0-0xf7;var _0x409fd5=_0x46681f[_0x5107e0];return _0x409fd5;},_0x5107(_0x1a176e,_0x3ff88c);}import _0x528972 from'../../interaction/Select.js';import _0xead068 from'../../Feature.js';import _0x27a0ad from'../../geom/LineString.js';import{unByKey as _0x2b8735}from'../../Observable.js';import{easeOut as _0x82b919}from'../../easing.js';import _0x5154d8 from'../../geom/Point.js';import _0x569a82 from'../../style/Style.js';import _0x1059f0 from'../../style/Circle.js';import _0x3fee26 from'../util/getVectorContext.js';import{createEmpty as _0x4e3fa2}from'../../extent.js';import{extend as _0x508f04}from'../../extent.js';import{singleClick as _0x65ca6b}from'../../events/condition.js';var cme_interaction_SelectCluster=class olinteractionSelectCluster extends _0x528972{constructor(_0x340898){var _0xb4b4f1=_0x5107;_0x340898=_0x340898||{};var _0x1eeccb=new _0x1ac117({'source':new _0x2a3d32({'features':new _0x43b9cc(),'wrapX':_0x340898[_0xb4b4f1(0x11b)],'useSpatialIndex':!![]}),'name':_0xb4b4f1(0x111),'updateWhileAnimating':!![],'updateWhileInteracting':!![],'displayInLayerSwitcher':![],'style':_0x340898[_0xb4b4f1(0x116)]});if(_0x340898[_0xb4b4f1(0x118)]){if(typeof _0x340898[_0xb4b4f1(0x118)]==_0xb4b4f1(0x121)){var _0x5b6825=_0x340898[_0xb4b4f1(0x118)];_0x340898['layers']=function(_0xfe6246){return _0xfe6246===_0x1eeccb||_0x5b6825(_0xfe6246);};}else _0x340898['layers'][_0xb4b4f1(0x144)]&&_0x340898[_0xb4b4f1(0x118)][_0xb4b4f1(0x144)](_0x1eeccb);}if(_0x340898[_0xb4b4f1(0x10a)]){var _0x27abd1=_0x340898[_0xb4b4f1(0x10a)];_0x340898[_0xb4b4f1(0x10a)]=function(_0x29086d,_0x367862){var _0x467e8a=_0xb4b4f1;if(!_0x367862&&_0x29086d[_0x467e8a(0xfe)](_0x467e8a(0x135)))return![];else return _0x27abd1(_0x29086d,_0x367862);};}else _0x340898[_0xb4b4f1(0x10a)]=function(_0x5488ff,_0x2af506){var _0x553ef5=_0xb4b4f1;if(!_0x2af506&&_0x5488ff['get'](_0x553ef5(0x135)))return![];else return!![];};_0x340898['autoClose']===![]&&!_0x340898[_0xb4b4f1(0x10f)]&&(_0x340898[_0xb4b4f1(0x10f)]=_0x65ca6b),super(_0x340898),this['overlayLayer_']=_0x1eeccb,this[_0xb4b4f1(0x103)]=_0x340898['filter'],this[_0xb4b4f1(0x100)]=_0x340898['pointRadius']||0xc,this['circleMaxObjects']=_0x340898['circleMaxObjects']||0xa,this[_0xb4b4f1(0x114)]=_0x340898['maxObjects']||0x3c,this[_0xb4b4f1(0x10b)]=_0x340898[_0xb4b4f1(0x10b)]!==![],this[_0xb4b4f1(0x136)]=_0x340898['animate'],this[_0xb4b4f1(0x112)]=_0x340898['animationDuration']||0x1f4,this[_0xb4b4f1(0xf7)]=_0x340898['selectCluster']!==![],this[_0xb4b4f1(0x12b)]=_0x340898[_0xb4b4f1(0x10e)]!==![],this['on'](_0xb4b4f1(0x131),this[_0xb4b4f1(0x12f)][_0xb4b4f1(0x120)](this));}[_0x1b4838(0x134)](_0x5ed4e6){var _0x1766fc=_0x1b4838;this[_0x1766fc(0x12c)]()&&this[_0x1766fc(0x12c)]()['removeLayer'](this[_0x1766fc(0x138)]);if(this[_0x1766fc(0x13a)])_0x2b8735(this['_listener']);this[_0x1766fc(0x13a)]=null,super[_0x1766fc(0x134)](_0x5ed4e6),this[_0x1766fc(0x138)][_0x1766fc(0x134)](_0x5ed4e6),_0x5ed4e6&&_0x5ed4e6[_0x1766fc(0x11c)]()&&(this[_0x1766fc(0x13a)]=_0x5ed4e6[_0x1766fc(0x11c)]()['on'](_0x1766fc(0x108),this[_0x1766fc(0x125)][_0x1766fc(0x120)](this)));}[_0x1b4838(0x125)](){var _0x485b3e=_0x1b4838;this['getFeatures']()[_0x485b3e(0x125)](),this[_0x485b3e(0x138)][_0x485b3e(0xff)]()[_0x485b3e(0x125)]();}[_0x1b4838(0x11a)](){var _0xef6398=_0x1b4838;return this[_0xef6398(0x138)];}[_0x1b4838(0x12f)](_0x2ba0a4){var _0x1f0dad=_0x1b4838;_0x2ba0a4 instanceof _0xead068&&(_0x2ba0a4={'selected':[_0x2ba0a4]});if(!_0x2ba0a4['selected']['length']){if(this['_autoClose'])this[_0x1f0dad(0x125)]();else{var _0x14e9b9=_0x2ba0a4[_0x1f0dad(0x101)];_0x14e9b9['forEach'](_0x1b3de5=>{var _0x555193=_0x1f0dad,_0xb21538=_0x1b3de5[_0x555193(0xfe)](_0x555193(0x11d));_0xb21538&&_0xb21538[_0x555193(0x107)](_0x238b2e=>{var _0x31f94a=_0x555193;this['overlayLayer_'][_0x31f94a(0xff)]()[_0x31f94a(0x11e)](_0x238b2e);});});}return;}var _0x17ff13=_0x2ba0a4['selected'][0x0];if(_0x17ff13[_0x1f0dad(0xfe)](_0x1f0dad(0xf9)))return;var _0x26dbd2=this[_0x1f0dad(0x138)][_0x1f0dad(0xff)]();this['_autoClose']&&_0x26dbd2['clear']();var _0x47a00f=_0x17ff13[_0x1f0dad(0xfe)](_0x1f0dad(0x13f));if(!_0x47a00f||_0x47a00f[_0x1f0dad(0x12e)]==0x1)return;if(!this[_0x1f0dad(0xf7)])this[_0x1f0dad(0x104)]()[_0x1f0dad(0x125)]();var _0x4a07c3=_0x17ff13[_0x1f0dad(0x113)]()[_0x1f0dad(0x10c)](),_0x12d254=this[_0x1f0dad(0x12c)]()[_0x1f0dad(0x11c)]()['getResolution'](),_0x3374c6,_0x42c1e5,_0x44228a,_0x16e50b,_0xdeb364,_0x2aba80,_0xedef63,_0x67057a=[];if(!this[_0x1f0dad(0x10b)]||_0x47a00f[_0x1f0dad(0x12e)]<=this['circleMaxObjects']){_0x16e50b=Math[_0x1f0dad(0x140)](_0x47a00f['length'],this[_0x1f0dad(0x12d)]),_0x3374c6=_0x12d254*this[_0x1f0dad(0x100)]*(0.5+_0x16e50b/0x4);for(_0x44228a=0x0;_0x44228a<_0x16e50b;_0x44228a++){_0x42c1e5=0x2*Math['PI']*_0x44228a/_0x16e50b;if(_0x16e50b==0x2||_0x16e50b==0x4)_0x42c1e5+=Math['PI']/0x4;_0xdeb364=[_0x4a07c3[0x0]+_0x3374c6*Math[_0x1f0dad(0x130)](_0x42c1e5),_0x4a07c3[0x1]+_0x3374c6*Math[_0x1f0dad(0xfd)](_0x42c1e5)],_0x2aba80=new _0xead068({'selectclusterfeature':!![],'features':[_0x47a00f[_0x44228a]],'geometry':new _0x5154d8(_0xdeb364)}),_0x2aba80[_0x1f0dad(0x115)](_0x47a00f[_0x44228a][_0x1f0dad(0x109)]()),_0x67057a[_0x1f0dad(0x144)](_0x2aba80),_0xedef63=new _0xead068({'selectclusterlink':!![],'geometry':new _0x27a0ad([_0x4a07c3,_0xdeb364])}),_0x67057a['push'](_0xedef63);}}else{_0x42c1e5=0x0;var _0x16e3d2=0x2*this[_0x1f0dad(0x100)];_0x16e50b=Math[_0x1f0dad(0x140)](this[_0x1f0dad(0x114)],_0x47a00f['length']);for(_0x44228a=0x0;_0x44228a<_0x16e50b;_0x44228a++){_0x3374c6=_0x16e3d2/0x2+_0x16e3d2*_0x42c1e5/(0x2*Math['PI']),_0x42c1e5=_0x42c1e5+(_0x16e3d2+0.1)/_0x3374c6;var _0x559bb0=_0x12d254*_0x3374c6*Math[_0x1f0dad(0x130)](_0x42c1e5),_0x13a9b3=_0x12d254*_0x3374c6*Math['cos'](_0x42c1e5);_0xdeb364=[_0x4a07c3[0x0]+_0x559bb0,_0x4a07c3[0x1]+_0x13a9b3],_0x2aba80=new _0xead068({'selectclusterfeature':!![],'features':[_0x47a00f[_0x44228a]],'geometry':new _0x5154d8(_0xdeb364)}),_0x2aba80[_0x1f0dad(0x115)](_0x47a00f[_0x44228a][_0x1f0dad(0x109)]()),_0x67057a[_0x1f0dad(0x144)](_0x2aba80),_0xedef63=new _0xead068({'selectclusterlink':!![],'geometry':new _0x27a0ad([_0x4a07c3,_0xdeb364])}),_0x67057a[_0x1f0dad(0x144)](_0xedef63);}}_0x17ff13[_0x1f0dad(0xf8)](_0x1f0dad(0x11d),_0x67057a),this[_0x1f0dad(0x136)]?this[_0x1f0dad(0x10d)](_0x4a07c3,_0x67057a):_0x26dbd2[_0x1f0dad(0x141)](_0x67057a);}[_0x1b4838(0x10d)](_0x480a45,_0x28440a){var _0x3f5268=_0x1b4838;this[_0x3f5268(0x102)]&&_0x2b8735(this[_0x3f5268(0x102)]);if(!_0x28440a[_0x3f5268(0x12e)])return;var _0x557dce=this[_0x3f5268(0x138)][_0x3f5268(0x109)](),_0xee23a2=typeof _0x557dce==_0x3f5268(0x121)?_0x557dce:_0x557dce['length']?function(){return _0x557dce;}:function(){return[_0x557dce];},_0x240e98=this[_0x3f5268(0x112)]||0x1f4,_0x22f463=new Date()[_0x3f5268(0x106)]();function _0x46f60c(_0x5d2bf3){var _0xecc21d=_0x3f5268,_0x33933e=_0x5d2bf3[_0xecc21d(0x126)]||_0x3fee26(_0x5d2bf3),_0x48bca8=_0x5d2bf3['frameState']['pixelRatio'],_0x527ed7=this[_0xecc21d(0x12c)]()[_0xecc21d(0x11c)]()[_0xecc21d(0x129)](),_0x47680a=_0x82b919((_0x5d2bf3['frameState'][_0xecc21d(0x13c)]-_0x22f463)/_0x240e98);for(var _0x751826=0x0,_0x6df186;_0x6df186=_0x28440a[_0x751826];_0x751826++)if(_0x6df186[_0xecc21d(0xfe)]('features')){var _0x5cfb05=_0x6df186['getGeometry']()[_0xecc21d(0x10c)]();_0x5cfb05[0x0]=_0x480a45[0x0]+_0x47680a*(_0x5cfb05[0x0]-_0x480a45[0x0]),_0x5cfb05[0x1]=_0x480a45[0x1]+_0x47680a*(_0x5cfb05[0x1]-_0x480a45[0x1]);var _0x3304c3=new _0x5154d8(_0x5cfb05),_0x3759bb=_0xee23a2(_0x6df186,_0x527ed7);for(var _0x5b6743=0x0;_0x5b6743<_0x3759bb[_0xecc21d(0x12e)];_0x5b6743++){var _0xff488b,_0x571c03=_0x54cd95['prototype'][_0xecc21d(0x105)]?![]:_0x3759bb[_0x5b6743][_0xecc21d(0x133)]();_0x571c03&&(_0xff488b=_0x571c03[_0xecc21d(0x119)](),_0x571c03[_0xecc21d(0x12a)](_0x48bca8));_0x33933e['setStyle']?(_0x33933e['setStyle'](_0x3759bb[_0x5b6743]),_0x33933e['drawGeometry'](_0x3304c3)):(_0x33933e[_0xecc21d(0x13b)](_0x571c03),_0x33933e[_0xecc21d(0x132)](_0x3304c3));if(_0x571c03)_0x571c03[_0xecc21d(0x12a)](_0xff488b);}}if(_0x47680a>0x1){_0x2b8735(this[_0xecc21d(0x102)]),this[_0xecc21d(0x138)][_0xecc21d(0xff)]()[_0xecc21d(0x141)](_0x28440a),this[_0xecc21d(0x138)][_0xecc21d(0x139)]();return;}_0x5d2bf3[_0xecc21d(0x110)][_0xecc21d(0x136)]=!![];}this['listenerKey_']=this[_0x3f5268(0x138)]['on']([_0x3f5268(0x123),'postrender'],_0x46f60c[_0x3f5268(0x120)](this));var _0x3720d5=new _0xead068(new _0x5154d8(this[_0x3f5268(0x12c)]()[_0x3f5268(0x11c)]()[_0x3f5268(0x128)]()));_0x3720d5[_0x3f5268(0x115)](new _0x569a82({'image':new _0x1059f0({})})),this[_0x3f5268(0x138)]['getSource']()['addFeature'](_0x3720d5);}[_0x1b4838(0x13d)](_0x71504){var _0x4cb865=_0x1b4838;if(!_0x71504[_0x4cb865(0xfe)](_0x4cb865(0x13f)))return null;var _0x338832=_0x4e3fa2();_0x71504['get'](_0x4cb865(0x13f))[_0x4cb865(0x107)](function(_0x34ccc3){var _0x18f73f=_0x4cb865;_0x338832=_0x508f04(_0x338832,_0x34ccc3['getGeometry']()[_0x18f73f(0x137)]());});if(_0x338832[0x0]===_0x338832[0x2]&&_0x338832[0x1]===_0x338832[0x3])return null;return _0x338832;}};export default cme_interaction_SelectCluster;