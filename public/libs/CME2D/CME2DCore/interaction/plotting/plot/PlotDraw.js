var _0x4af8ae=_0x1062;(function(_0x462870,_0x53a89e){var _0x3db1f7=_0x1062,_0x162cb3=_0x462870();while(!![]){try{var _0x5c87d9=-parseInt(_0x3db1f7(0x116))/0x1+parseInt(_0x3db1f7(0xf0))/0x2*(parseInt(_0x3db1f7(0x10e))/0x3)+parseInt(_0x3db1f7(0x128))/0x4*(parseInt(_0x3db1f7(0x115))/0x5)+parseInt(_0x3db1f7(0x126))/0x6+-parseInt(_0x3db1f7(0xfb))/0x7+parseInt(_0x3db1f7(0x109))/0x8*(-parseInt(_0x3db1f7(0x107))/0x9)+parseInt(_0x3db1f7(0xf4))/0xa*(parseInt(_0x3db1f7(0x114))/0xb);if(_0x5c87d9===_0x53a89e)break;else _0x162cb3['push'](_0x162cb3['shift']());}catch(_0x216969){_0x162cb3['push'](_0x162cb3['shift']());}}}(_0x174c,0xddb94));import _0x537122 from'../../../../Observable.js';import _0xef91df from'./PlotFactory.js';import{distance}from'./utils/plotutil.js';import _0x203645 from'./Constants.js';import _0x5dcb96 from'./events/FeatureEvent.js';import _0x5c6891 from'./events/DrawEvent.js';function _0x174c(){var _0xb67c9b=['drawOverlay','3386654EWYpOQ','HELPER_HIDDEN_DIV','getInteractions','getMapParentElement','30ghrLin','feature','parentNode','isDrawing','ADDING_MOUSE_MOVE','removeFeature','activateMapTools','6955193hoLwEP','removeOverlay','setMap','coordinate','disconnectEventHandlers','#FF0000','contextmenu','HELPER_shizi','_ls_mapNextClick','Vector','pointermove','setStyle','4338fFQNoQ','create','5056lEHLwD','mapDoubleClickHandler','item','VectorLayer','getViewport','3myADvC','mapNextClickHandler','DRAW_END','push','points','dblClickZoomInteraction','1077263djnnte','858085mbPPOK','984261qJWcSI','draw_overlay','get','plot','addLayer','getTargetElement','_ls_mousedown','deactivateMapTools','map','style','length','getPointCount','mapMouseMoveHandler','div','setPoints','_ls_mapfirstclick','4132122nKNffT','addOverlay','12flULZM','finishDrawing','sid','center-center','plotType','featureSource','name','fixPointCount','rgba(0,255,0,0.4)','clear','_ls_pointmove','freehand','drawEnd','removeChild','dispatchEvent','click','mapFirstClickHandler','mousedown','set','Style','deactivate','ADD_CONTROL_POINT','mapViewport','_ls_dbclick','preventDefault'];_0x174c=function(){return _0xb67c9b;};return _0x174c();}function _0x1062(_0x131392,_0x2aedb5){var _0x174cac=_0x174c();return _0x1062=function(_0x10623b,_0x395422){_0x10623b=_0x10623b-0xe6;var _0x5406b9=_0x174cac[_0x10623b];return _0x5406b9;},_0x1062(_0x131392,_0x2aedb5);}import{connectEvent,disconnectEvent}from'../util/core.js';import _0x329b4c from'./utils/ol.js';import _0xf68ab0 from'../../../../interaction/DoubleClickZoom.js';import*as _0x4044ef from'../util/domutil.js';import _0x111747 from'../../../../Overlay.js';class PlotDraw extends _0x537122{constructor(_0x496b7e){var _0x28d6ea=_0x1062;super(),this['elementTable']={},this[_0x28d6ea(0x112)]=null,this['sid']=0x0,this[_0x28d6ea(0x119)]=null,this['feature']=null,this[_0x28d6ea(0x12c)]=null,this[_0x28d6ea(0xec)]=null,this[_0x28d6ea(0x113)]=null;var _0x4e4f01=new _0x329b4c['Stroke']({'color':_0x28d6ea(0x100),'width':0x2}),_0x2b9ea8=new _0x329b4c['Fill']({'color':_0x28d6ea(0x130)});this[_0x28d6ea(0x11f)]=new _0x329b4c[(_0x28d6ea(0xe9))]({'fill':_0x2b9ea8,'stroke':_0x4e4f01}),this[_0x28d6ea(0x12d)]=new _0x329b4c[(_0x28d6ea(0x104))](),this[_0x28d6ea(0xef)]=new _0x329b4c[(_0x28d6ea(0x10c))]({'source':this[_0x28d6ea(0x12d)],'zIndex':0x3e7}),this[_0x28d6ea(0xef)][_0x28d6ea(0x106)](this[_0x28d6ea(0x11f)]),this[_0x28d6ea(0xef)][_0x28d6ea(0xe8)](_0x28d6ea(0x12e),_0x28d6ea(0x117)),this[_0x28d6ea(0xfd)](_0x496b7e);}['setMap'](_0x6557c0){var _0x24b3cb=_0x1062;this['map']=_0x6557c0,this[_0x24b3cb(0xec)]=this[_0x24b3cb(0x11e)][_0x24b3cb(0x10d)]();}['activate'](_0xc46904){var _0x4f2b09=_0x1062;this[_0x4f2b09(0xea)](),this['deactivateMapTools'](),this[_0x4f2b09(0x125)]=connectEvent(this['map'],'click',this['mapFirstClickHandler'],this),this[_0x4f2b09(0x12c)]=_0xc46904,this[_0x4f2b09(0x11e)][_0x4f2b09(0x11a)](this[_0x4f2b09(0xef)]);}['deactivate'](){var _0x5c46dc=_0x1062;this[_0x5c46dc(0xff)](),this[_0x5c46dc(0x11e)]['removeLayer'](this[_0x5c46dc(0xef)]),this[_0x5c46dc(0x12d)][_0x5c46dc(0x131)](),this['points']=[],this[_0x5c46dc(0x119)]=null,this[_0x5c46dc(0xf5)]=null,this['plotType']=null,this[_0x5c46dc(0xfa)]();}[_0x4af8ae(0x11e)];[_0x4af8ae(0xf7)](){return this['plotType']!=null;}[_0x4af8ae(0xe6)](_0x2ddc56){var _0x271c5e=_0x4af8ae;this['points'][_0x271c5e(0x111)](_0x2ddc56[_0x271c5e(0xfe)]),this[_0x271c5e(0x119)]=_0xef91df['createPlot'](this[_0x271c5e(0x11e)],this['plotType'],this[_0x271c5e(0x112)]),this['feature']=new _0x329b4c['Feature'](this[_0x271c5e(0x119)]),this['featureSource']['addFeature'](this[_0x271c5e(0xf5)]),disconnectEvent(this['map'],_0x271c5e(0x137),this[_0x271c5e(0x125)]),this[_0x271c5e(0x125)]=null,this[_0x271c5e(0x136)](new _0x5c6891(_0x5c6891[_0x271c5e(0xeb)],{'freehand':this[_0x271c5e(0x119)][_0x271c5e(0x133)],'current':this[_0x271c5e(0x119)][_0x271c5e(0x121)](),'total':this['plot'][_0x271c5e(0x12f)],'position':_0x2ddc56[_0x271c5e(0xfe)]}));if(this[_0x271c5e(0x119)][_0x271c5e(0x12f)]==this['plot']['getPointCount']()){this['mapDoubleClickHandler'](_0x2ddc56);return;}this[_0x271c5e(0x103)]=connectEvent(this[_0x271c5e(0x11e)],_0x271c5e(0x137),this[_0x271c5e(0x10f)],this),!this[_0x271c5e(0x119)][_0x271c5e(0x133)]&&(this['_ls_dbclick']=connectEvent(this['map'],_0x271c5e(0x101),this[_0x271c5e(0x10a)],this)),this[_0x271c5e(0x132)]=connectEvent(this[_0x271c5e(0x11e)],_0x271c5e(0x105),this[_0x271c5e(0x122)],this);}[_0x4af8ae(0x122)](_0x5ec25e){var _0x3c4dab=_0x4af8ae,_0x27de8a=_0x5ec25e[_0x3c4dab(0xfe)];if(distance(_0x27de8a,this[_0x3c4dab(0x112)][this[_0x3c4dab(0x112)]['length']-0x1])<_0x203645['ZERO_TOLERANCE'])return;if(!this['plot'][_0x3c4dab(0x133)]){var _0x20d317=this[_0x3c4dab(0x112)]['concat']([_0x27de8a]);this[_0x3c4dab(0x119)][_0x3c4dab(0x124)](_0x20d317);}else this[_0x3c4dab(0x112)][_0x3c4dab(0x111)](_0x27de8a),this[_0x3c4dab(0x119)][_0x3c4dab(0x124)](this[_0x3c4dab(0x112)]);this[_0x3c4dab(0x136)](new _0x5c6891(_0x5c6891[_0x3c4dab(0xf8)],{'freehand':this['plot'][_0x3c4dab(0x133)],'current':this[_0x3c4dab(0x119)][_0x3c4dab(0x121)](),'total':this[_0x3c4dab(0x119)][_0x3c4dab(0x12f)],'position':_0x5ec25e[_0x3c4dab(0xfe)]}));}[_0x4af8ae(0xf3)](){var _0x205bf7=_0x4af8ae,_0x5cbb77=this[_0x205bf7(0x11e)][_0x205bf7(0x11b)]();if(!_0x5cbb77)return;return _0x5cbb77['parentNode'];}[_0x4af8ae(0x10f)](_0x3e1dc6){var _0x22f6f6=_0x4af8ae;if(!this[_0x22f6f6(0x119)]['freehand']){if(distance(_0x3e1dc6[_0x22f6f6(0xfe)],this[_0x22f6f6(0x112)][this[_0x22f6f6(0x112)][_0x22f6f6(0x120)]-0x1])<_0x203645['ZERO_TOLERANCE'])return;}this[_0x22f6f6(0x12a)]=this[_0x22f6f6(0x12a)]+0x1;var _0x496da1=this[_0x22f6f6(0xf3)](),_0x45a1e5=_0x4044ef['createHidden']('div',_0x496da1,_0x203645[_0x22f6f6(0xf1)]+'-'+this[_0x22f6f6(0x12a)]),_0x35bd7=_0x203645[_0x22f6f6(0x102)]+'-'+this[_0x22f6f6(0x12a)];_0x4044ef[_0x22f6f6(0x108)](_0x22f6f6(0x123),_0x203645[_0x22f6f6(0x102)],_0x45a1e5,_0x35bd7);var _0x3e16a3=_0x4044ef[_0x22f6f6(0x118)](_0x35bd7),_0x23ba92=new _0x111747({'id':_0x35bd7,'position':_0x3e1dc6[_0x22f6f6(0xfe)],'positioning':_0x22f6f6(0x12b),'element':_0x3e16a3});this[_0x22f6f6(0x11e)][_0x22f6f6(0x127)](_0x23ba92),this[_0x22f6f6(0x112)][_0x22f6f6(0x111)](_0x3e1dc6[_0x22f6f6(0xfe)]),this['plot'][_0x22f6f6(0x124)](this[_0x22f6f6(0x112)]),this[_0x22f6f6(0x136)](new _0x5c6891(_0x5c6891[_0x22f6f6(0xeb)],{'freehand':this[_0x22f6f6(0x119)][_0x22f6f6(0x133)],'current':this[_0x22f6f6(0x119)][_0x22f6f6(0x121)](),'total':this[_0x22f6f6(0x119)][_0x22f6f6(0x12f)],'position':_0x3e1dc6[_0x22f6f6(0xfe)]}));if(this[_0x22f6f6(0x119)][_0x22f6f6(0x12f)]==this[_0x22f6f6(0x119)]['getPointCount']()){this[_0x22f6f6(0x10a)](_0x3e1dc6);return;}this[_0x22f6f6(0x119)]&&this[_0x22f6f6(0x119)][_0x22f6f6(0x133)]&&this[_0x22f6f6(0x10a)](_0x3e1dc6);}[_0x4af8ae(0x10a)](_0x36614b){var _0x3eb128=_0x4af8ae,_0x5651a2=document['getElementsByClassName'](_0x203645[_0x3eb128(0x102)]);for(var _0x48593c=_0x5651a2[_0x3eb128(0x120)]-0x1;_0x48593c>=0x0;_0x48593c--){_0x5651a2[_0x48593c][_0x3eb128(0xf6)][_0x3eb128(0x135)](_0x5651a2[_0x48593c]);}this['disconnectEventHandlers'](),this[_0x3eb128(0x119)][_0x3eb128(0x129)](),_0x36614b[_0x3eb128(0xee)](),this[_0x3eb128(0x134)](_0x36614b);}[_0x4af8ae(0xff)](){var _0x2a1643=_0x4af8ae;disconnectEvent(this[_0x2a1643(0x11e)],'click',this[_0x2a1643(0x125)]),disconnectEvent(this[_0x2a1643(0x11e)],_0x2a1643(0x137),this[_0x2a1643(0x103)]),disconnectEvent(this['map'],_0x2a1643(0x105),this[_0x2a1643(0x132)]),disconnectEvent(this[_0x2a1643(0x11e)],_0x2a1643(0x101),this[_0x2a1643(0x101)]),disconnectEvent(this[_0x2a1643(0x11e)],_0x2a1643(0x101),this[_0x2a1643(0xed)]),disconnectEvent(this[_0x2a1643(0x11e)],_0x2a1643(0xe7),this[_0x2a1643(0x11c)]),this[_0x2a1643(0x125)]=null,this[_0x2a1643(0x103)]=null,this['_ls_pointmove']=null,this['_ls_dbclick']=null,this[_0x2a1643(0x11c)]=null,this['contextmenu']=null;}[_0x4af8ae(0x134)](_0x487934){var _0x57f215=_0x4af8ae;this[_0x57f215(0x12d)][_0x57f215(0xf9)](this[_0x57f215(0xf5)]),this[_0x57f215(0xfa)](),this[_0x57f215(0xff)](),this['map'][_0x57f215(0xfc)](this[_0x57f215(0xef)]),this['points']=[],this[_0x57f215(0x119)]=null,this['plotType']=null,this[_0x57f215(0x136)](new _0x5dcb96(_0x5dcb96[_0x57f215(0x110)],this[_0x57f215(0xf5)])),this[_0x57f215(0xf5)]=null;}[_0x4af8ae(0x11d)](){var _0x56b45b=_0x4af8ae,_0x3ffa76=this[_0x56b45b(0x11e)][_0x56b45b(0xf2)](),_0x53d124=_0x3ffa76['getLength']();for(var _0x17b950=0x0;_0x17b950<_0x53d124;_0x17b950++){var _0x3e435b=_0x3ffa76[_0x56b45b(0x10b)](_0x17b950);if(_0x3e435b instanceof _0xf68ab0){this['dblClickZoomInteraction']=_0x3e435b,_0x3ffa76['remove'](_0x3e435b);break;}}}[_0x4af8ae(0xfa)](){var _0x4d6c42=_0x4af8ae;this['dblClickZoomInteraction']!=null&&(this[_0x4d6c42(0x11e)][_0x4d6c42(0xf2)]()[_0x4d6c42(0x111)](this['dblClickZoomInteraction']),this[_0x4d6c42(0x113)]=null);}}export default PlotDraw;