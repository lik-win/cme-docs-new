const _0x25eb14=_0x4599;(function(_0x257733,_0x2e4ee4){const _0x48e969=_0x4599,_0x4ca700=_0x257733();while(!![]){try{const _0x5e213a=-parseInt(_0x48e969(0x102))/0x1*(parseInt(_0x48e969(0x12a))/0x2)+parseInt(_0x48e969(0x135))/0x3+parseInt(_0x48e969(0x107))/0x4+parseInt(_0x48e969(0xf7))/0x5+-parseInt(_0x48e969(0x123))/0x6*(parseInt(_0x48e969(0x150))/0x7)+-parseInt(_0x48e969(0x14f))/0x8+parseInt(_0x48e969(0x145))/0x9*(parseInt(_0x48e969(0x13e))/0xa);if(_0x5e213a===_0x2e4ee4)break;else _0x4ca700['push'](_0x4ca700['shift']());}catch(_0x4cf5e2){_0x4ca700['push'](_0x4ca700['shift']());}}}(_0x2f73,0xc6fc5));import _0x411008 from'../../../../Observable';import _0x162719 from'./PlotFactory.js';import _0xf4961f from'../../../../Overlay.js';import _0x52f945 from'./PlotDraw.js';import _0x1eb66f from'./PlotEdit.js';import _0x21cfa3 from'./events/FeatureEvent.js';import _0x289765 from'./events/FeatureOperatorEvent.js';import _0x4cc316 from'./events/DrawEvent.js';import _0xaee414 from'./core/FeatureOperator.js';import _0x2ef1ea from'./Constants.js';function _0x4599(_0x1f26fd,_0x527bf0){const _0x2f731f=_0x2f73();return _0x4599=function(_0x459979,_0x1b461c){_0x459979=_0x459979-0xf7;let _0x3c9935=_0x2f731f[_0x459979];return _0x3c9935;},_0x4599(_0x1f26fd,_0x527bf0);}import{combineOpts}from'../util/core.js';import _0x99265c from'../../../../style/Style.js';import _0x557ad2 from'./utils/ol.js';import _0x36aa6b from'../../../../Feature.js';class PlottingLayer extends _0x411008{constructor(_0x294615,_0x40ad4a){const _0x3a2d48=_0x4599;super(),this[_0x3a2d48(0x12b)]=_0x294615,this[_0x3a2d48(0x108)]={},this['opts']={},this[_0x3a2d48(0x137)]=[],this[_0x3a2d48(0x132)]=null,this[_0x3a2d48(0x103)]=null,this[_0x3a2d48(0x118)]=null,this[_0x3a2d48(0x143)]=null,this[_0x3a2d48(0x110)]=null,this[_0x3a2d48(0x125)]=null,combineOpts(this[_0x3a2d48(0x128)],this[_0x3a2d48(0x108)],_0x40ad4a),this[_0x3a2d48(0x132)]=this[_0x3a2d48(0x134)](),this[_0x3a2d48(0x103)]=new _0x1eb66f(_0x294615),this[_0x3a2d48(0x118)]=new _0x52f945(_0x294615),this[_0x3a2d48(0x114)]();}[_0x25eb14(0x114)](){const _0x3ef20d=_0x25eb14;this[_0x3ef20d(0x118)]['on'](_0x21cfa3['DRAW_END'],_0x43c33c=>{const _0x15291d=_0x3ef20d;this[_0x15291d(0x104)](_0x43c33c);}),this[_0x3ef20d(0x118)]['on'](_0x4cc316[_0x3ef20d(0xf8)],_0x55fc61=>{const _0x5d65ab=_0x3ef20d;!this[_0x5d65ab(0x143)]&&this[_0x5d65ab(0x130)](),this[_0x5d65ab(0x109)](_0x55fc61[_0x5d65ab(0x13b)]);}),this[_0x3ef20d(0x118)]['on'](_0x4cc316[_0x3ef20d(0x124)],_0x2ab7cf=>{const _0xad2139=_0x3ef20d;!this['help_overlay']&&this[_0xad2139(0x130)](),this['_setHelpOverlayState'](_0x2ab7cf['drawstate']);}),this['plotEdit']['on'](_0x21cfa3[_0x3ef20d(0x111)],_0x561592=>{const _0x431a23=_0x3ef20d;console[_0x431a23(0x139)]('SELECT',_0x561592[_0x431a23(0x121)]),this[_0x431a23(0x127)](new _0x289765(_0x289765[_0x431a23(0x111)],this[_0x431a23(0x133)](_0x561592[_0x431a23(0x121)],this[_0x431a23(0x132)])));}),this['plotEdit']['on'](_0x21cfa3[_0x3ef20d(0x136)],_0x36c3c9=>{const _0x1cc6fe=_0x3ef20d;this[_0x1cc6fe(0x127)](new _0x289765(_0x289765['DEACTIVATE'],this['_getFeatureOperator'](_0x36c3c9[_0x1cc6fe(0x121)],this[_0x1cc6fe(0x132)]))),console['log'](_0x1cc6fe(0xfe),_0x36c3c9[_0x1cc6fe(0x121)]);}),this[_0x3ef20d(0x125)]=this['map']['on'](_0x3ef20d(0x10e),_0xf9cc6b=>{const _0x5032be=_0x3ef20d;if(!this['plotDraw']||this[_0x5032be(0x118)][_0x5032be(0x12e)]())return;const _0x4f22aa=this[_0x5032be(0x12b)][_0x5032be(0x13f)](_0xf9cc6b[_0x5032be(0x149)],(_0x21f103,_0x16e7d3)=>{return _0x21f103;});_0x4f22aa&&!_0x4f22aa[_0x5032be(0x14b)](_0x2ef1ea['SE_DISABLED'])?(this[_0x5032be(0x103)]['activate'](_0x4f22aa),this[_0x5032be(0x127)](new _0x289765(_0x289765[_0x5032be(0x111)],this[_0x5032be(0x133)](_0x4f22aa,this[_0x5032be(0x132)])))):this[_0x5032be(0x103)][_0x5032be(0x119)]();})['listener'];}[_0x25eb14(0x10a)](){const _0x3e88f0=_0x25eb14;this[_0x3e88f0(0x118)]['un']([_0x4cc316[_0x3e88f0(0xf8)],_0x4cc316['ADDING_MOUSE_MOVE'],_0x21cfa3['DRAW_END']]),this[_0x3e88f0(0x103)]['un']([_0x21cfa3[_0x3e88f0(0x111)],_0x21cfa3[_0x3e88f0(0x136)]]),this[_0x3e88f0(0x125)]&&(this[_0x3e88f0(0x12b)]['un'](_0x3e88f0(0x10e),this[_0x3e88f0(0x125)]),this['_ls_mapclick']=null);}['_createHelpOverlay'](){const _0x137fc8=_0x25eb14;this[_0x137fc8(0x110)]&&this[_0x137fc8(0x110)][_0x137fc8(0x11f)]['removeChild'](this[_0x137fc8(0x110)]),this[_0x137fc8(0x110)]=document['createElement']('div'),this[_0x137fc8(0x110)][_0x137fc8(0x10d)]=_0x137fc8(0x10b),this[_0x137fc8(0x143)]=new _0xf4961f({'element':this[_0x137fc8(0x110)],'offset':[0xf,0x0],'positioning':_0x137fc8(0x12f)}),this[_0x137fc8(0x12b)]['addOverlay'](this['help_overlay']);}[_0x25eb14(0x106)](){const _0x24db79=_0x25eb14;this[_0x24db79(0x110)]&&(this[_0x24db79(0x110)][_0x24db79(0x11f)][_0x24db79(0x151)](this['help_overlay_ele']),this[_0x24db79(0x110)]=null),this[_0x24db79(0x143)]&&(this[_0x24db79(0x12b)][_0x24db79(0x10c)](this['help_overlay']),this[_0x24db79(0x143)]=null);}[_0x25eb14(0x134)](){const _0xdab184=_0x25eb14,_0x5760f4=new _0x557ad2[(_0xdab184(0x129))]({'source':new _0x557ad2['Vector']()});return _0x5760f4[_0xdab184(0x113)](this['map']),_0x5760f4;}[_0x25eb14(0x104)](_0x1e59bb){const _0xe0b308=_0x25eb14,_0x3c8d4f=_0x1e59bb['feature'];this[_0xe0b308(0x106)](),this[_0xe0b308(0x11d)](_0x3c8d4f),this['plotEdit'][_0xe0b308(0x138)](_0x3c8d4f);}[_0x25eb14(0x109)](_0x224100){const _0x5f4bea=_0x25eb14;if(!this[_0x5f4bea(0x110)])return;const _0x255524=_0x5f4bea(0x144),_0x4395a5=!_0x224100[_0x5f4bea(0x11b)]?_0x5f4bea(0x14a):_0x5f4bea(0x101)+_0x224100[_0x5f4bea(0x11b)]+_0x5f4bea(0x117),_0x4b601c='当前是第'+_0x224100[_0x5f4bea(0x140)]+'个,',_0x256924=!_0x224100[_0x5f4bea(0x11b)]?_0x5f4bea(0x14e):_0x5f4bea(0x147);this[_0x5f4bea(0x110)][_0x5f4bea(0x12c)]=_0x224100[_0x5f4bea(0x12d)]?_0x255524:_0x4395a5+_0x4b601c+_0x256924,this[_0x5f4bea(0x143)]['setPosition'](_0x224100['position']);}[_0x25eb14(0x11d)](_0x2e1961,_0x181317){const _0x18a24e=_0x25eb14,_0x266935=this[_0x18a24e(0x133)](_0x2e1961,this[_0x18a24e(0x132)],_0x181317||this[_0x18a24e(0x137)][_0x18a24e(0x141)]+0x1);return this[_0x18a24e(0x137)][_0x18a24e(0x11a)](_0x266935),_0x266935;}[_0x25eb14(0x126)](){const _0x2aeb99=_0x25eb14;this[_0x2aeb99(0x137)][_0x2aeb99(0x112)]((_0x3dd6d7,_0x210de5)=>{const _0x72d138=_0x2aeb99;return _0x3dd6d7[_0x72d138(0x121)][_0x72d138(0xfd)]()[_0x72d138(0xff)]-_0x210de5[_0x72d138(0x121)][_0x72d138(0xfd)]()[_0x72d138(0xff)];});}[_0x25eb14(0x100)](_0x5d3b9d){const _0x29a060=_0x25eb14;for(let _0x289b16=0x0;_0x289b16<this['feature_operators'][_0x29a060(0x141)];_0x289b16++){if(_0x5d3b9d['guid']==this[_0x29a060(0x137)][_0x289b16][_0x29a060(0xfc)])return _0x289b16;}}[_0x25eb14(0x14d)](){const _0x48ed82=_0x25eb14;this[_0x48ed82(0x137)][_0x48ed82(0x12b)]((_0x25d344,_0x2b6f46)=>{const _0x262c06=_0x48ed82,_0x58eb5a=_0x25d344[_0x262c06(0x121)][_0x262c06(0xfd)]();if(_0x58eb5a instanceof Array)_0x58eb5a[_0x262c06(0x148)](_0x3c52a0=>_0x3c52a0[_0x262c06(0x13c)](_0x2b6f46+0x1));else _0x58eb5a instanceof _0x99265c&&_0x58eb5a[_0x262c06(0x13c)](_0x2b6f46+0x1);_0x25d344[_0x262c06(0x121)][_0x262c06(0x120)](_0x58eb5a);});}[_0x25eb14(0x133)](_0x2b03f5,_0x286352,_0xfa1e83){const _0x180538=_0x25eb14;for(let _0x48087a=0x0;_0x48087a<this[_0x180538(0x137)][_0x180538(0x141)];_0x48087a++){const _0x54af0e=this[_0x180538(0x137)][_0x48087a];if(_0x54af0e[_0x180538(0x121)]==_0x2b03f5)return _0x54af0e;}return new _0xaee414(_0x2b03f5,_0x286352,_0xfa1e83);}['addFeaturePlot']({type:_0x54615c,data:_0x396026}){const _0x20f3bd=_0x25eb14,_0x46adf3=_0x162719[_0x20f3bd(0x116)](this['map'],_0x54615c,_0x396026),_0x3df57c=new _0x36aa6b(_0x46adf3),_0x3e869c=this['_addFeature'](_0x3df57c,0x3e7);}['loadFromService'](_0x5e6d0b,_0x45bf2e,_0x226bb2){if(!_0x5e6d0b){_0x226bb2();return;}}[_0x25eb14(0x105)](_0xc90080,_0x4be805,_0x5bedc7){if(!_0xc90080){_0x5bedc7();return;}}[_0x25eb14(0x131)](_0x4e2ab4){const _0x18c9e4=_0x25eb14;this['plotDraw'][_0x18c9e4(0x138)](_0x4e2ab4);}[_0x25eb14(0x13a)](_0x2611d0){const _0x325cdd=_0x25eb14;this[_0x325cdd(0x132)]['getSource']()['removeFeature'](_0x2611d0[_0x325cdd(0x121)]),this[_0x325cdd(0x103)]['deactivate']();const _0x1e5483=this[_0x325cdd(0x100)](_0x2611d0);_0x2611d0['destory'](),this[_0x325cdd(0x137)][_0x325cdd(0x115)](_0x1e5483,0x1),this['_sortByZindex'](),this['_resetZIndex']();}[_0x25eb14(0x122)](_0x168eea){const _0x55f747=_0x25eb14;return this[_0x55f747(0x103)][_0x55f747(0x119)](),this[_0x55f747(0x137)]['map'](_0x2943a1=>{const _0x270085=_0x55f747;this['showLayer'][_0x270085(0x13d)]()[_0x270085(0x13a)](_0x2943a1[_0x270085(0x121)]),_0x2943a1[_0x270085(0xfb)]();},this),this[_0x55f747(0x137)][_0x55f747(0x115)](0x0,this[_0x55f747(0x137)][_0x55f747(0x141)]),this;}[_0x25eb14(0xf9)](_0x4bafa5){const _0x31c605=_0x25eb14;this['_sortByZindex']();const _0x261a28=this[_0x31c605(0x100)](_0x4bafa5);ArrTools[_0x31c605(0xf9)](this[_0x31c605(0x137)],_0x261a28),this[_0x31c605(0x14d)]();}[_0x25eb14(0x11e)](_0x1e915e){const _0x25e8de=_0x25eb14;this[_0x25e8de(0x126)]();const _0x4b0d50=this[_0x25e8de(0x100)](_0x1e915e);ArrTools[_0x25e8de(0x11e)](this[_0x25e8de(0x137)],_0x4b0d50),this[_0x25e8de(0x14d)]();}[_0x25eb14(0x14c)](_0x10dfaa){const _0x27f4d5=_0x25eb14;this[_0x27f4d5(0x126)]();const _0x5b1c31=this['_getFeatureOperatorIndex'](_0x10dfaa);ArrTools[_0x27f4d5(0x10f)](this[_0x27f4d5(0x137)],_0x5b1c31),this[_0x27f4d5(0x14d)]();}[_0x25eb14(0xfa)](_0x385ba8){const _0x33f7f5=_0x25eb14;this['_sortByZindex']();const _0x1f2d2c=this['_getFeatureOperatorIndex'](_0x385ba8);ArrTools[_0x33f7f5(0x11c)](this[_0x33f7f5(0x137)],_0x1f2d2c),this[_0x33f7f5(0x14d)]();}[_0x25eb14(0xfb)](){const _0x54b0a5=_0x25eb14;this['map'][_0x54b0a5(0x142)](this[_0x54b0a5(0x132)]),this[_0x54b0a5(0x132)]=null,this[_0x54b0a5(0x103)][_0x54b0a5(0x119)](),this[_0x54b0a5(0x103)]=null,this[_0x54b0a5(0x118)][_0x54b0a5(0x119)](),this[_0x54b0a5(0x118)]=null,this[_0x54b0a5(0x12b)][_0x54b0a5(0x10c)](this[_0x54b0a5(0x143)]),this[_0x54b0a5(0x143)]=null,this['help_overlay_ele']=null,this[_0x54b0a5(0x146)]();}}function _0x2f73(){const _0x3cedf4=['removeFeature','drawstate','setZIndex','getSource','6190NtDjRp','forEachFeatureAtPixel','current','length','removeLayer','help_overlay','当前随意绘制。单击结束','37890cubObB','dispose','点击继续绘制。','forEach','pixel','当前图元控制点无限制，','get','setToTop','_resetZIndex','双击结束绘制','8525656kgmhzt','7390411AZlHnL','removeChild','6306150oUNvGl','ADD_CONTROL_POINT','moveUp','setToBottom','destory','guid','getStyle','164_________________________','zIndex','_getFeatureOperatorIndex','图元共','1nmEZFy','plotEdit','_onDrawEnd','saveToService','_removeHelpOverlay','1722328rpDwYx','defaults','_setHelpOverlayState','_unbindListener','tooltip\x20hidden\x20se-tooltip','removeOverlay','className','click','moveToTop','help_overlay_ele','ACTIVATE','sort','setMap','_bindListener','splice','createPlot','个控制点，','plotDraw','deactivate','push','total','moveToBottom','_addFeature','moveDown','parentNode','setStyle','feature','clearFeatures','6EcaXKg','ADDING_MOUSE_MOVE','_ls_mapclick','_sortByZindex','dispatchEvent','opts','VectorLayer','2783686frAIVV','map','innerHTML','freehand','isDrawing','center-left','_createHelpOverlay','addFeature','showLayer','_getFeatureOperator','_createShowLayer','91698DuEhwr','DEACTIVATE','feature_operators','activate','log'];_0x2f73=function(){return _0x3cedf4;};return _0x2f73();}export{PlottingLayer,_0x289765 as FeatureOperatorEvent};