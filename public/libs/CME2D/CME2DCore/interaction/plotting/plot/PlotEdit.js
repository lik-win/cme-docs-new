var _0x48b298=_0xf73f;(function(_0x3abde2,_0x3c7e33){var _0x511bbe=_0xf73f,_0x5af902=_0x3abde2();while(!![]){try{var _0x3c496a=-parseInt(_0x511bbe(0xdb))/0x1+parseInt(_0x511bbe(0xfa))/0x2+-parseInt(_0x511bbe(0x115))/0x3*(-parseInt(_0x511bbe(0xf2))/0x4)+parseInt(_0x511bbe(0xdf))/0x5*(-parseInt(_0x511bbe(0x10e))/0x6)+-parseInt(_0x511bbe(0xfb))/0x7+parseInt(_0x511bbe(0xec))/0x8*(parseInt(_0x511bbe(0xc3))/0x9)+parseInt(_0x511bbe(0xfd))/0xa;if(_0x3c496a===_0x3c7e33)break;else _0x5af902['push'](_0x5af902['shift']());}catch(_0x1544cd){_0x5af902['push'](_0x5af902['shift']());}}}(_0x4a7e,0x55bdb));import _0x1e89ee from'./utils/ol.js';import _0xb47329 from'../../../../Observable.js';function _0x4a7e(){var _0x195551=['image_','parentNode','ACTIVATE','915360zAcrki','1945979iTTwOx','mete_high_pressure','5663430NbLjwf','getStyle','mete_windbarb','initControlPoints','mouseOver','createHidden','default.js','mete_warm_center','setPositioning','mete_low_pressure','mapDragPan','map','getLength','move.js','removeListener','HELPER_HIDDEN_DIV','getOverlayById','276KytjKJ','pointerup','activate','forEach','HELPER_CONTROL_POINT_DIV','plotMouseOverOutHandler','getControlPoints','9SExvue','render','rotation_','DEACTIVATE','_ls_pointdrag','mousedown','points','pointermove','setPoints','getViewport','updatePoint','mouseup','pixel','addListener','controlPoints','getInteractions','dispatchEvent','stopPropagation','text_','activeControlPointId','_is_controlpoint_pointermove','plotMouseUpHandler','forEachFeatureAtPixel','plotMouseMoveHandler','style','target','3313962wOgkeB','addEventListener','cursor','mapBrowserEventHandler_','coordinate','touchstart','setPosition','deactivate','disableMapDragPan','Feature','mete_cold_center','get','removeOverlay','controlPointMouseDownHandler','create','startPoint','length','isPlot','addOverlay','pointerdrag','_ls_pointermove','elementTable','initHelperDom','enableMapDragPan','291074EWwQoC','controlPointMouseMoveHandler','destroyHelperDom','push','73905MEKmiF','getPoints','angle','type','getMapParentElement','remove','setStyle','disconnectEventHandlers','_ls_pointerdown','preventDefault','_ls_pointup','item','activePlot','8nBVXFG','plotMouseDownHandler','getGeometry','controlPointMouseUpHandler','pointerdown','touchend','277268abtQFz','div','setActive','ghostControlPoints','center-center'];_0x4a7e=function(){return _0x195551;};return _0x4a7e();}import _0x24f525 from'../../../../Overlay.js';import _0x1441f5 from'./Constants.js';import*as _0x31dcfe from'../util/domutil.js';import _0x202c55 from'./events/FeatureEvent.js';import{connectEvent,disconnectEvent}from'../util/core.js';import _0x4c90e4 from'../../../../geom/Point.js';import*as _0x5b7595 from'./utils/plotutil.js';import _0x362224 from'../../../../style/Style.js';import _0xe17c07 from'../../../../interaction/DragPan.js';class PlotEdit extends _0xb47329{constructor(_0x305f76){var _0x136e28=_0xf73f;super();if(!_0x305f76)return;this['activePlot']=null,this['startPoint']=null,this[_0x136e28(0xf5)]=null,this['controlPoints']=null,this[_0x136e28(0x108)]=_0x305f76,this['mapViewport']=this[_0x136e28(0x108)][_0x136e28(0x11e)](),this[_0x136e28(0x101)]=![],this[_0x136e28(0xd8)]={},this[_0x136e28(0x128)]=null,this[_0x136e28(0x107)]=null,this[_0x136e28(0xd7)]=null,this[_0x136e28(0x119)]=null,this[_0x136e28(0xe7)]=null,this[_0x136e28(0xe9)]=null,this['_is_controlpoint_pointermove']=null;}[_0x48b298(0xd9)](){var _0x184212=_0x48b298;if(!this[_0x184212(0x108)]||!this[_0x184212(0xeb)])return;var _0x223fd8=this[_0x184212(0xe3)]();if(!_0x223fd8)return;var _0x236a4a=_0x31dcfe[_0x184212(0x102)]('div',_0x223fd8,_0x1441f5[_0x184212(0x10c)]),_0x4ed6f8=this[_0x184212(0x114)]();for(var _0x30a892=0x0;_0x30a892<_0x4ed6f8[_0x184212(0xd3)];_0x30a892++){var _0x2e3204=_0x1441f5[_0x184212(0x112)]+'-'+_0x30a892;_0x31dcfe[_0x184212(0xd1)](_0x184212(0xf3),_0x1441f5[_0x184212(0x112)],_0x236a4a,_0x2e3204),this[_0x184212(0xd8)][_0x2e3204]=_0x30a892;}}[_0x48b298(0xe3)](){var _0x5b339d=_0x48b298,_0xbeb310=this[_0x5b339d(0x108)]['getTargetElement']();if(!_0xbeb310)return;return _0xbeb310[_0x5b339d(0xf8)];}[_0x48b298(0xdd)](){var _0x4e6cb2=_0x48b298;if(this[_0x4e6cb2(0x123)]){for(var _0x5d02a5=0x0;_0x5d02a5<this[_0x4e6cb2(0x123)][_0x4e6cb2(0xd3)];_0x5d02a5++){this['map'][_0x4e6cb2(0xcf)](this[_0x4e6cb2(0x123)][_0x5d02a5]);var _0x15b884=_0x31dcfe[_0x4e6cb2(0xce)](_0x1441f5[_0x4e6cb2(0x112)]+'-'+_0x5d02a5);_0x15b884&&_0x31dcfe['removeListener'](_0x15b884,_0x4e6cb2(0x11a),this[_0x4e6cb2(0xd0)],this);}this[_0x4e6cb2(0x123)]=null;}var _0x4d6966=this[_0x4e6cb2(0xe3)](),_0x5a9b60=_0x31dcfe[_0x4e6cb2(0xce)](_0x1441f5[_0x4e6cb2(0x10c)]);_0x5a9b60&&_0x4d6966&&_0x31dcfe[_0x4e6cb2(0xe4)](_0x5a9b60,_0x4d6966);}[_0x48b298(0x100)](){var _0x3a6313=_0x48b298;if(!this[_0x3a6313(0x108)])return;this[_0x3a6313(0x123)]=[];var _0xf6f337=this[_0x3a6313(0x114)]();let _0x35987e=null;this[_0x3a6313(0x108)][_0x3a6313(0x124)]()[_0x3a6313(0x111)](_0x6a379b=>{_0x6a379b instanceof _0xe17c07&&(_0x35987e=_0x6a379b);}),_0x35987e[_0x3a6313(0xf4)](!![]);for(var _0xcf2993=0x0;_0xcf2993<_0xf6f337['length'];_0xcf2993++){var _0x54f78e=_0x1441f5[_0x3a6313(0x112)]+'-'+_0xcf2993,_0x387f42=_0x31dcfe[_0x3a6313(0xce)](_0x54f78e),_0x1b0a54=new _0x24f525({'id':_0x54f78e,'position':_0xf6f337[_0xcf2993],'positioning':_0x3a6313(0xf6),'element':_0x387f42});this[_0x3a6313(0x123)][_0x3a6313(0xde)](_0x1b0a54),this[_0x3a6313(0x108)][_0x3a6313(0xd5)](_0x1b0a54),_0x31dcfe[_0x3a6313(0x122)](_0x387f42,_0x3a6313(0x11a),this['controlPointMouseDownHandler'],this),_0x31dcfe['addListener'](_0x387f42,_0x3a6313(0xc8),this['controlPointMouseDownHandler'],this);}this[_0x3a6313(0xbd)]=_0x5b819d=>{var _0x438d15=_0x3a6313;this[_0x438d15(0xdc)](_0x5b819d);},this[_0x3a6313(0x108)][_0x3a6313(0xc6)][_0x3a6313(0xc4)](_0x3a6313(0x11c),this[_0x3a6313(0xbd)]);}[_0x48b298(0xd0)](_0x490619){var _0x46bcdd=_0x48b298;_0x490619['preventDefault']();var _0x25fe92=_0x490619['target']['id'];this[_0x46bcdd(0x128)]=_0x25fe92,_0x31dcfe['addListener'](_0x490619[_0x46bcdd(0xc2)],_0x46bcdd(0x120),this[_0x46bcdd(0xef)],this),_0x31dcfe[_0x46bcdd(0x122)](_0x490619['target'],'touchend',this[_0x46bcdd(0xef)],this);}[_0x48b298(0xdc)](_0x5b1fac){var _0x28e1ef=_0x48b298,_0x8d6080=_0x5b1fac['coordinate'];if(this['activeControlPointId']){var _0x42884d=this[_0x28e1ef(0xeb)][_0x28e1ef(0xee)](),_0x1af482=this[_0x28e1ef(0xd8)][this[_0x28e1ef(0x128)]];_0x42884d[_0x28e1ef(0x11f)](_0x8d6080,_0x1af482);var _0x3ce837=this[_0x28e1ef(0xeb)][_0x28e1ef(0xfe)]();if(_0x42884d[_0x28e1ef(0xe2)]==_0x28e1ef(0xff))_0x3ce837[_0x28e1ef(0xf7)][_0x28e1ef(0x117)]=Math['PI']/0x2-_0x5b7595[_0x28e1ef(0xe1)](_0x42884d[_0x28e1ef(0x11b)][0x0],_0x42884d['points'][0x1]),this[_0x28e1ef(0xeb)][_0x28e1ef(0xe5)](new _0x362224({'geometry':new _0x4c90e4(_0x42884d[_0x28e1ef(0x11b)][0x0]),'image':_0x3ce837[_0x28e1ef(0xf7)],'text':_0x3ce837[_0x28e1ef(0x127)]}));else(_0x42884d[_0x28e1ef(0xe2)]==_0x28e1ef(0xfc)||_0x42884d[_0x28e1ef(0xe2)]==_0x28e1ef(0x106)||_0x42884d[_0x28e1ef(0xe2)]=='mete_warm_center'||_0x42884d[_0x28e1ef(0xe2)]=='mete_cold_center')&&(_0x3ce837[_0x28e1ef(0xf7)]['rotation_']=Math['PI']/0x2-_0x5b7595['angle'](_0x42884d[_0x28e1ef(0x11b)][0x0],_0x42884d[_0x28e1ef(0x11b)][0x1]),this[_0x28e1ef(0xeb)][_0x28e1ef(0xe5)](new _0x362224({'geometry':new _0x4c90e4(_0x42884d[_0x28e1ef(0x11b)][0x0]),'image':_0x3ce837[_0x28e1ef(0xf7)]})));var _0x2730f4=this[_0x28e1ef(0x108)][_0x28e1ef(0x10d)](this[_0x28e1ef(0x128)]);_0x2730f4[_0x28e1ef(0xc9)](_0x8d6080);}}[_0x48b298(0xef)](_0x372eb6){var _0x2242fe=_0x48b298;this[_0x2242fe(0x128)]=null,_0x31dcfe['removeListener'](_0x372eb6[_0x2242fe(0xc2)],_0x2242fe(0x120),this['controlPointMouseUpHandler'],this),_0x31dcfe[_0x2242fe(0x10b)](_0x372eb6['target'],_0x2242fe(0xf1),this['controlPointMouseUpHandler'],this);}[_0x48b298(0x110)](_0x268905){var _0x562307=_0x48b298;if(!_0x268905||!(_0x268905 instanceof _0x1e89ee[_0x562307(0xcc)])||_0x268905==this[_0x562307(0xeb)])return;var _0x1bcd90=_0x268905[_0x562307(0xee)]();if(!_0x1bcd90[_0x562307(0xd4)]||!_0x1bcd90['isPlot']())return;this[_0x562307(0xca)](),this[_0x562307(0xeb)]=_0x268905,this['_ls_pointermove']=connectEvent(this[_0x562307(0x108)],'pointermove',this[_0x562307(0x113)],this),this[_0x562307(0xe7)]=connectEvent(this[_0x562307(0x108)],_0x562307(0xf0),this[_0x562307(0xed)],this),this[_0x562307(0xd9)](),this['initControlPoints'](),this[_0x562307(0x108)][_0x562307(0x116)](),this[_0x562307(0x125)](new _0x202c55(_0x202c55[_0x562307(0xf9)],this[_0x562307(0xeb)]));}[_0x48b298(0x114)](){var _0x24ecba=_0x48b298;if(!this[_0x24ecba(0xeb)])return[];var _0x24c869=this['activePlot'][_0x24ecba(0xee)]();return _0x24c869[_0x24ecba(0xe0)]();}[_0x48b298(0x113)](_0x19f187){var _0x384a24=_0x48b298,_0x44de23=this[_0x384a24(0x108)][_0x384a24(0xbf)](_0x19f187[_0x384a24(0x121)],function(_0xc722b,_0x1c4311){return _0xc722b;});_0x44de23&&_0x44de23==this['activePlot']?!this[_0x384a24(0x101)]&&(this[_0x384a24(0x101)]=!![],this[_0x384a24(0x108)]['getViewport']()[_0x384a24(0xc1)][_0x384a24(0xc5)]=_0x384a24(0x10a)):this[_0x384a24(0x101)]&&(this[_0x384a24(0x101)]=![],this[_0x384a24(0x108)][_0x384a24(0x11e)]()[_0x384a24(0xc1)][_0x384a24(0xc5)]=_0x384a24(0x103));}[_0x48b298(0xed)](_0x4c686a){var _0x186f0b=_0x48b298,_0x15dec9=this[_0x186f0b(0x108)]['forEachFeatureAtPixel'](_0x4c686a[_0x186f0b(0x121)],function(_0x18c080,_0x106486){return _0x18c080;});if(!_0x15dec9||_0x15dec9!=this['activePlot'])return;_0x4c686a[_0x186f0b(0xe8)](),this[_0x186f0b(0xf5)]=this[_0x186f0b(0x114)](),this[_0x186f0b(0xd2)]=_0x4c686a[_0x186f0b(0xc7)],this[_0x186f0b(0xcb)](),this['_ls_pointup']=connectEvent(this[_0x186f0b(0x108)],_0x186f0b(0x10f),this[_0x186f0b(0xbe)],this),this[_0x186f0b(0x119)]=connectEvent(this[_0x186f0b(0x108)],_0x186f0b(0xd6),this[_0x186f0b(0xc0)],this);}[_0x48b298(0xc0)](_0x57030f){var _0xe81ffe=_0x48b298;_0x57030f[_0xe81ffe(0x126)](),_0x57030f['preventDefault']();var _0x8aca37=_0x57030f[_0xe81ffe(0xc7)],_0x212200=_0x8aca37[0x0]-this[_0xe81ffe(0xd2)][0x0],_0x220bc8=_0x8aca37[0x1]-this['startPoint'][0x1],_0x3349ea=[];for(var _0x5ec896=0x0;_0x5ec896<this[_0xe81ffe(0xf5)]['length'];_0x5ec896++){var _0x94d451=this['ghostControlPoints'][_0x5ec896],_0x161550=[_0x94d451[0x0]+_0x212200,_0x94d451[0x1]+_0x220bc8];_0x3349ea[_0xe81ffe(0xde)](_0x161550);var _0x1d4aaa=_0x1441f5['HELPER_CONTROL_POINT_DIV']+'-'+_0x5ec896,_0x4fed54=this[_0xe81ffe(0x108)]['getOverlayById'](_0x1d4aaa);_0x4fed54[_0xe81ffe(0xc9)](_0x161550),_0x4fed54[_0xe81ffe(0x105)](_0xe81ffe(0xf6));}var _0x8dcb5b=this[_0xe81ffe(0xeb)][_0xe81ffe(0xee)]();_0x8dcb5b[_0xe81ffe(0x11d)](_0x3349ea);var _0x3149e3=this[_0xe81ffe(0xeb)][_0xe81ffe(0xfe)](),_0x5152ad=[0x0,0x0];if(_0x8dcb5b['type']==_0xe81ffe(0xff))_0x3149e3[_0xe81ffe(0xf7)]['rotation_']=Math['PI']/0x2-_0x5b7595['angle'](_0x8dcb5b[_0xe81ffe(0x11b)][0x0],_0x8dcb5b[_0xe81ffe(0x11b)][0x1]),this[_0xe81ffe(0xeb)][_0xe81ffe(0xe5)](new _0x362224({'geometry':new _0x4c90e4(_0x8dcb5b['points'][0x0]),'image':_0x3149e3[_0xe81ffe(0xf7)],'text':_0x3149e3[_0xe81ffe(0x127)]}));else(_0x8dcb5b[_0xe81ffe(0xe2)]==_0xe81ffe(0xfc)||_0x8dcb5b[_0xe81ffe(0xe2)]=='mete_low_pressure'||_0x8dcb5b[_0xe81ffe(0xe2)]==_0xe81ffe(0x104)||_0x8dcb5b[_0xe81ffe(0xe2)]==_0xe81ffe(0xcd))&&(_0x3149e3['image_'][_0xe81ffe(0x117)]=Math['PI']/0x2-_0x5b7595['angle'](_0x8dcb5b[_0xe81ffe(0x11b)][0x0],_0x8dcb5b['points'][0x1]),this[_0xe81ffe(0xeb)][_0xe81ffe(0xe5)](new _0x362224({'geometry':new _0x4c90e4(_0x8dcb5b['points'][0x0]),'image':_0x3149e3[_0xe81ffe(0xf7)]})));}['plotMouseUpHandler'](_0x419966){var _0x31ddba=_0x48b298;this[_0x31ddba(0xda)](),disconnectEvent(this['map'],_0x31ddba(0x10f),this[_0x31ddba(0xe9)]),disconnectEvent(this[_0x31ddba(0x108)],'pointerdrag',this[_0x31ddba(0x119)]),this['_ls_pointup']=null,this['_ls_pointdrag']=null;}[_0x48b298(0xe6)](){var _0x31df62=_0x48b298;disconnectEvent(this['map'],_0x31df62(0x11c),this[_0x31df62(0xd7)]),disconnectEvent(this[_0x31df62(0x108)],_0x31df62(0xf0),this[_0x31df62(0xe7)]),disconnectEvent(this[_0x31df62(0x108)],_0x31df62(0x10f),this[_0x31df62(0xe9)]),disconnectEvent(this[_0x31df62(0x108)],_0x31df62(0xd6),this['_ls_pointdrag']),this[_0x31df62(0xd7)]=null,this['_ls_pointerdown']=null,this['_ls_pointup']=null,this[_0x31df62(0x119)]=null,this['_is_controlpoint_pointermove']&&(this[_0x31df62(0x108)][_0x31df62(0xc6)]['removeEventListener'](_0x31df62(0x11c),this[_0x31df62(0xbd)]),this[_0x31df62(0xbd)]=null);}[_0x48b298(0xca)](){var _0x60f7ad=_0x48b298;let _0x44414e=null;this['activePlot']&&(_0x44414e=this[_0x60f7ad(0xeb)]);this['activePlot']=null,this['mouseOver']=![],this[_0x60f7ad(0xdd)](),this[_0x60f7ad(0xe6)](),this[_0x60f7ad(0xd8)]={},this['activeControlPointId']=null,this[_0x60f7ad(0xd2)]=null;if(_0x44414e)this['dispatchEvent'](new _0x202c55(_0x202c55[_0x60f7ad(0x118)],_0x44414e));}[_0x48b298(0xcb)](){var _0xba5a49=_0x48b298,_0x51b771=this[_0xba5a49(0x108)]['getInteractions'](),_0x2d6322=_0x51b771[_0xba5a49(0x109)]();for(var _0x57a4dd=0x0;_0x57a4dd<_0x2d6322;_0x57a4dd++){var _0x5e43a2=_0x51b771[_0xba5a49(0xea)](_0x57a4dd);if(_0x5e43a2 instanceof _0xe17c07){this[_0xba5a49(0x107)]=_0x5e43a2,_0x5e43a2[_0xba5a49(0xf4)](![]);break;}}}[_0x48b298(0xda)](){var _0x2ad59c=_0x48b298;this[_0x2ad59c(0x107)]!=null&&(this[_0x2ad59c(0x107)][_0x2ad59c(0xf4)](!![]),this[_0x2ad59c(0x107)]=null);}}function _0xf73f(_0x52a163,_0x1d3bee){var _0x4a7e10=_0x4a7e();return _0xf73f=function(_0xf73f37,_0x4e88e0){_0xf73f37=_0xf73f37-0xbd;var _0x2f829c=_0x4a7e10[_0xf73f37];return _0x2f829c;},_0xf73f(_0x52a163,_0x1d3bee);}export default PlotEdit;