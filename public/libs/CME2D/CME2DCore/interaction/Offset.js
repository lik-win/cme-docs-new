var _0x579c07=_0x5b2c;function _0x5b2c(_0x158df9,_0x3a8c93){var _0x418990=_0x4189();return _0x5b2c=function(_0x5b2c7c,_0x40cb57){_0x5b2c7c=_0x5b2c7c-0xa1;var _0x5c4850=_0x418990[_0x5b2c7c];return _0x5c4850;},_0x5b2c(_0x158df9,_0x3a8c93);}(function(_0x33e572,_0x5c9321){var _0x1dc1e8=_0x5b2c,_0xb145e6=_0x33e572();while(!![]){try{var _0x40f879=parseInt(_0x1dc1e8(0xb3))/0x1+-parseInt(_0x1dc1e8(0xa4))/0x2+-parseInt(_0x1dc1e8(0xd3))/0x3*(-parseInt(_0x1dc1e8(0xd9))/0x4)+parseInt(_0x1dc1e8(0xbd))/0x5+-parseInt(_0x1dc1e8(0xaa))/0x6+-parseInt(_0x1dc1e8(0xd4))/0x7*(-parseInt(_0x1dc1e8(0xc4))/0x8)+parseInt(_0x1dc1e8(0xcf))/0x9*(-parseInt(_0x1dc1e8(0xc8))/0xa);if(_0x40f879===_0x5c9321)break;else _0xb145e6['push'](_0xb145e6['shift']());}catch(_0x5dc256){_0xb145e6['push'](_0xb145e6['shift']());}}}(_0x4189,0x8358c));import _0x10cfd2 from'../../interaction/Pointer.js';import _0x34d78d from'../../geom/LineString.js';import _0x3538b3 from'../../geom/Polygon.js';function _0x4189(){var _0xc0c9e6=['originalEvent','feature','sqrt','style','dispatchEvent','cursor','getFeatureAtPixel_','geomType','coordinate','4971485lOMyiW','handleDragEvent_','getTargetElement','layers','clone','segment','features','1098600xsnFdX','modifystart','previousCursor_','setStyle','1910jvSGDJ','coordinates','offsetstart','_filter','handleMoveEvent_','layers_','handleUpEvent_','46017GBRUSQ','frameState','length','get','606mhkLKp','35ShJzFo','handleDownEvent_','geom','source_','currentStyle_','9792cSQBWb','getType','test','features_','1275604uFYodC','getClosestPoint','setGeometry','pixel','Polygon','_modifystart','3689724BujUzI','pointer','set','current_','map','getCoordinates','LineString','getGeometry','offsetting','591917PgXHdL'];_0x4189=function(){return _0xc0c9e6;};return _0x4189();}import{cme_coordinate_dist2d,cme_coordinate_findSegment,cme_coordinate_offsetCoords}from'../geom/GeomUtils.js';import _0x53446b from'../style/defaultStyle.js';var cme_interaction_Offset=class olinteractionOffset extends _0x10cfd2{constructor(_0x53dab0){var _0x4e99f9=_0x5b2c;_0x53dab0=_0x53dab0||{},super({'handleDownEvent':function(_0x1f8050){var _0x535438=_0x5b2c;return _0x38f3f4[_0x535438(0xd5)](_0x1f8050);},'handleDragEvent':function(_0x1931f5){return _0x38f3f4['handleDragEvent_'](_0x1931f5);},'handleMoveEvent':function(_0xccb1ac){var _0x239d73=_0x5b2c;return _0x38f3f4[_0x239d73(0xcc)](_0xccb1ac);},'handleUpEvent':function(_0x410b4b){var _0x59955a=_0x5b2c;return _0x38f3f4[_0x59955a(0xce)](_0x410b4b);}});var _0x38f3f4=this;this[_0x4e99f9(0xcb)]=_0x53dab0['filter'],this[_0x4e99f9(0xa3)]=_0x53dab0[_0x4e99f9(0xc3)],this[_0x4e99f9(0xcd)]=_0x53dab0[_0x4e99f9(0xc0)]?_0x53dab0[_0x4e99f9(0xc0)]instanceof Array?_0x53dab0[_0x4e99f9(0xc0)]:[_0x53dab0[_0x4e99f9(0xc0)]]:null,this[_0x4e99f9(0xac)]('duplicate',_0x53dab0['duplicate']),this[_0x4e99f9(0xd7)]=_0x53dab0['source'],this['_style']=typeof _0x53dab0['style']==='function'?_0x53dab0[_0x4e99f9(0xb7)]:function(){var _0xc2f154=_0x4e99f9;if(_0x53dab0[_0xc2f154(0xb7)])return _0x53dab0[_0xc2f154(0xb7)];else return _0x53446b(!![]);},this[_0x4e99f9(0xc6)]=![];}[_0x579c07(0xba)](_0x342287){var _0x530635=_0x579c07,_0x329f49=this;return this['getMap']()['forEachFeatureAtPixel'](_0x342287[_0x530635(0xa7)],function(_0x27565a,_0x2f42fa){var _0x3fbc6f=_0x530635,_0xf2b4ad;if(_0x329f49[_0x3fbc6f(0xcb)]&&!_0x329f49[_0x3fbc6f(0xcb)](_0x27565a,_0x2f42fa))return![];if(_0x329f49[_0x3fbc6f(0xcd)])for(var _0x4d5d9d=0x0;_0x4d5d9d<_0x329f49[_0x3fbc6f(0xcd)]['length'];_0x4d5d9d++){if(_0x329f49[_0x3fbc6f(0xcd)][_0x4d5d9d]===_0x2f42fa){_0xf2b4ad=_0x27565a;break;}}else _0x329f49[_0x3fbc6f(0xa3)]?_0x329f49[_0x3fbc6f(0xa3)]['forEach'](function(_0x27284d){_0x27284d===_0x27565a&&(_0xf2b4ad=_0x27565a);}):_0xf2b4ad=_0x27565a;var _0x4166cd=_0xf2b4ad[_0x3fbc6f(0xb1)]()[_0x3fbc6f(0xa1)]();if(_0xf2b4ad&&/Polygon|LineString/[_0x3fbc6f(0xa2)](_0x4166cd)){if(_0x4166cd===_0x3fbc6f(0xa8)&&_0xf2b4ad['getGeometry']()[_0x3fbc6f(0xaf)]()[_0x3fbc6f(0xd1)]>0x1)return![];var _0x45bd17=_0xf2b4ad[_0x3fbc6f(0xb1)]()[_0x3fbc6f(0xa5)](_0x342287[_0x3fbc6f(0xbc)]),_0x3b11a3=_0x45bd17[0x0]-_0x342287['coordinate'][0x0],_0x5d731a=_0x45bd17[0x1]-_0x342287[_0x3fbc6f(0xbc)][0x1],_0x2b2c86=Math[_0x3fbc6f(0xb6)](_0x3b11a3*_0x3b11a3+_0x5d731a*_0x5d731a)/_0x342287[_0x3fbc6f(0xd0)]['viewState']['resolution'];return _0x2b2c86<0x5?{'feature':_0xf2b4ad,'hit':_0x45bd17,'coordinates':_0xf2b4ad['getGeometry']()['getCoordinates'](),'geom':_0xf2b4ad['getGeometry']()[_0x3fbc6f(0xc1)](),'geomType':_0x4166cd}:![];}else return![];},{'hitTolerance':0x5});}[_0x579c07(0xd5)](_0x17c4d3){var _0x3b1a83=_0x579c07;return this[_0x3b1a83(0xad)]=this['getFeatureAtPixel_'](_0x17c4d3),this[_0x3b1a83(0xad)]?(this['currentStyle_']=this['current_'][_0x3b1a83(0xb5)]['getStyle'](),this[_0x3b1a83(0xd7)]&&(this[_0x3b1a83(0xd2)]('duplicate')||_0x17c4d3[_0x3b1a83(0xb4)]['ctrlKey'])?(this[_0x3b1a83(0xad)]['feature']=this['current_'][_0x3b1a83(0xb5)]['clone'](),this[_0x3b1a83(0xad)]['feature']['setStyle'](this['_style'](this['current_']['feature'])),this['source_']['addFeature'](this[_0x3b1a83(0xad)][_0x3b1a83(0xb5)])):(this[_0x3b1a83(0xad)][_0x3b1a83(0xb5)][_0x3b1a83(0xc7)](this['_style'](this['current_']['feature'])),this[_0x3b1a83(0xa9)]=!![]),this[_0x3b1a83(0xb8)]({'type':_0x3b1a83(0xca),'feature':this[_0x3b1a83(0xad)][_0x3b1a83(0xb5)],'offset':0x0}),!![]):![];}[_0x579c07(0xbe)](_0x14cf94){var _0x1f2802=_0x579c07;this[_0x1f2802(0xa9)]&&(this['dispatchEvent']({'type':_0x1f2802(0xc5),'features':[this['current_'][_0x1f2802(0xb5)]]}),this[_0x1f2802(0xa9)]=![]);var _0x230cb7=this[_0x1f2802(0xad)][_0x1f2802(0xd6)][_0x1f2802(0xa5)](_0x14cf94[_0x1f2802(0xbc)]),_0x517800=cme_coordinate_dist2d(_0x230cb7,_0x14cf94['coordinate']),_0x11cc7f,_0xc01eca,_0x2e8387,_0x3e3f8e;switch(this['current_'][_0x1f2802(0xbb)]){case _0x1f2802(0xa8):{_0x11cc7f=cme_coordinate_findSegment(_0x230cb7,this[_0x1f2802(0xad)][_0x1f2802(0xc9)][0x0])['segment'];if(_0x11cc7f){_0xc01eca=[_0x11cc7f[0x1][0x0]-_0x11cc7f[0x0][0x0],_0x11cc7f[0x1][0x1]-_0x11cc7f[0x0][0x1]],_0x2e8387=[_0x14cf94[_0x1f2802(0xbc)][0x0]-_0x230cb7[0x0],_0x14cf94[_0x1f2802(0xbc)][0x1]-_0x230cb7[0x1]];_0xc01eca[0x0]*_0x2e8387[0x1]-_0xc01eca[0x1]*_0x2e8387[0x0]>0x0&&(_0x517800=-_0x517800);_0x3e3f8e=[];for(var _0x5d691f=0x0;_0x5d691f<this['current_'][_0x1f2802(0xc9)][_0x1f2802(0xd1)];_0x5d691f++){_0x3e3f8e['push'](cme_coordinate_offsetCoords(this[_0x1f2802(0xad)]['coordinates'][_0x5d691f],_0x5d691f==0x0?_0x517800:-_0x517800));}this[_0x1f2802(0xad)]['feature'][_0x1f2802(0xa6)](new _0x3538b3(_0x3e3f8e));}break;}case _0x1f2802(0xb0):{_0x11cc7f=cme_coordinate_findSegment(_0x230cb7,this[_0x1f2802(0xad)]['coordinates'])[_0x1f2802(0xc2)];_0x11cc7f&&(_0xc01eca=[_0x11cc7f[0x1][0x0]-_0x11cc7f[0x0][0x0],_0x11cc7f[0x1][0x1]-_0x11cc7f[0x0][0x1]],_0x2e8387=[_0x14cf94[_0x1f2802(0xbc)][0x0]-_0x230cb7[0x0],_0x14cf94[_0x1f2802(0xbc)][0x1]-_0x230cb7[0x1]],_0xc01eca[0x0]*_0x2e8387[0x1]-_0xc01eca[0x1]*_0x2e8387[0x0]>0x0&&(_0x517800=-_0x517800),_0x3e3f8e=cme_coordinate_offsetCoords(this[_0x1f2802(0xad)][_0x1f2802(0xc9)],_0x517800),this[_0x1f2802(0xad)][_0x1f2802(0xb5)][_0x1f2802(0xa6)](new _0x34d78d(_0x3e3f8e)));break;}default:{break;}}this[_0x1f2802(0xb8)]({'type':_0x1f2802(0xb2),'feature':this[_0x1f2802(0xad)]['feature'],'offset':_0x517800,'segment':[_0x230cb7,_0x14cf94[_0x1f2802(0xbc)]],'coordinate':_0x14cf94[_0x1f2802(0xbc)]});}[_0x579c07(0xce)](_0x36074e){var _0x21d003=_0x579c07;!this[_0x21d003(0xa9)]&&this[_0x21d003(0xb8)]({'type':'offsetend','feature':this[_0x21d003(0xad)][_0x21d003(0xb5)],'coordinate':_0x36074e[_0x21d003(0xbc)]}),this[_0x21d003(0xad)][_0x21d003(0xb5)]['setStyle'](this[_0x21d003(0xd8)]),this[_0x21d003(0xad)]=![];}[_0x579c07(0xcc)](_0x1b3353){var _0x36b0e9=_0x579c07,_0x416318=this[_0x36b0e9(0xba)](_0x1b3353);_0x416318?(this[_0x36b0e9(0xc6)]===![]&&(this['previousCursor_']=_0x1b3353['map'][_0x36b0e9(0xbf)]()[_0x36b0e9(0xb7)][_0x36b0e9(0xb9)]),_0x1b3353[_0x36b0e9(0xae)]['getTargetElement']()['style'][_0x36b0e9(0xb9)]=_0x36b0e9(0xab)):(_0x1b3353[_0x36b0e9(0xae)][_0x36b0e9(0xbf)]()['style'][_0x36b0e9(0xb9)]=this['previousCursor_'],this[_0x36b0e9(0xc6)]=![]);}};export default cme_interaction_Offset;