var _0x530d71=_0x3db7;(function(_0x3c0f97,_0x435c3c){var _0x2d77d1=_0x3db7,_0x3c9a29=_0x3c0f97();while(!![]){try{var _0x1f3ab4=-parseInt(_0x2d77d1(0x1b5))/0x1+-parseInt(_0x2d77d1(0x1d7))/0x2*(parseInt(_0x2d77d1(0x1ce))/0x3)+-parseInt(_0x2d77d1(0x1eb))/0x4+parseInt(_0x2d77d1(0x1d1))/0x5*(parseInt(_0x2d77d1(0x1ab))/0x6)+parseInt(_0x2d77d1(0x1d6))/0x7+-parseInt(_0x2d77d1(0x1fe))/0x8*(-parseInt(_0x2d77d1(0x200))/0x9)+parseInt(_0x2d77d1(0x1e1))/0xa;if(_0x1f3ab4===_0x435c3c)break;else _0x3c9a29['push'](_0x3c9a29['shift']());}catch(_0xe909ba){_0x3c9a29['push'](_0x3c9a29['shift']());}}}(_0x2e5c,0xded5b));import _0x4a91d2 from'../../interaction/Interaction.js';import _0x630406 from'../style/defaultStyle.js';import _0x33c2c8 from'../../Collection.js';import _0x2ad04d from'../../layer/Vector.js';import _0x524551 from'../../source/Vector.js';import _0x900ce1 from'../../geom/Circle.js';function _0x2e5c(){var _0x1697a7=['source_','style','Polygon','finishDrawing','centerCondition','setGeometryName','prototype','dblclick','8472gPjqVn','features_','2727mawFrt','coordPx_','lastEvent','max','coordinate','started_','handleMoveEvent_','downPx_','36AOqSor','reset','drawstart','pointerdown','condition','_eventTime','keydown','coord_','setSides','clear','958406vchFox','pointerup','getMap','dispatchEvent','pixel','upPx_','atan2','drawcancel','drawing','squaredClickTolerance_','maxCircleCoordinates','square_','bind','feature_','conditionFn_','canRotate_','abs','default','min','sides_','setGeometry','round','getSource','centeredFn_','geometryName','1207353faEDVA','end_','canRotate','820070OrDnio','removeLayer','source','getGeom_','drawPoint_','792134VVfDiV','6XFhInn','drawSketch_','squareFn_','shiftKey','geometryName_','getType','DrawRegular\x20overlay','getExtent','center_','originalEvent','21845200WdISUk','clickTolerance','drawend','centered_','addFeature','sqrt','push','setMap','startAngle','setActive','2096612aBHxML','sign','getPixelFromCoordinate','handleEvent_','pointerdrag','overlayLayer_','_longTouch','type','maxCircleCoordinates_','pointermove','metaKey'];_0x2e5c=function(){return _0x1697a7;};return _0x2e5c();}import{fromCircle as _0x3e9fc0}from'../../geom/Polygon.js';import _0x724ab7 from'../../geom/Point.js';import _0x45ed6c from'../../geom/LineString.js';import _0x472dc1 from'../../geom/Polygon.js';import _0x6158d5 from'../../Feature.js';var cme_interaction_DrawRegular=class olinteractionDrawRegular extends _0x4a91d2{constructor(_0x5284ba){var _0x4b1c5b=_0x3db7;_0x5284ba=_0x5284ba||{},super({'handleEvent':function(_0x4422f4){var _0x270b84=_0x3db7;return _0x16b75d[_0x270b84(0x1ee)](_0x4422f4);}});var _0x16b75d=this;this['squaredClickTolerance_']=_0x5284ba['clickTolerance']?_0x5284ba[_0x4b1c5b(0x1e2)]*_0x5284ba[_0x4b1c5b(0x1e2)]:0x24,this['maxCircleCoordinates_']=_0x5284ba[_0x4b1c5b(0x1bf)]||0x64,this['features_']=_0x5284ba['features'],this[_0x4b1c5b(0x1f6)]=_0x5284ba[_0x4b1c5b(0x1d3)],this['conditionFn_']=_0x5284ba[_0x4b1c5b(0x1af)],this[_0x4b1c5b(0x1d9)]=_0x5284ba['squareCondition'],this[_0x4b1c5b(0x1cc)]=_0x5284ba[_0x4b1c5b(0x1fa)],this[_0x4b1c5b(0x1c4)]=_0x5284ba[_0x4b1c5b(0x1d0)]!==![],this[_0x4b1c5b(0x1db)]=_0x5284ba[_0x4b1c5b(0x1cd)]||'geometry',this[_0x4b1c5b(0x1b3)](_0x5284ba['sides']);var _0xbe51e7=_0x630406(!![]);this['sketch_']=new _0x33c2c8(),this[_0x4b1c5b(0x1f0)]=new _0x2ad04d({'source':new _0x524551({'features':this['sketch_'],'useSpatialIndex':![]}),'name':_0x4b1c5b(0x1dd),'displayInLayerSwitcher':![],'style':_0x5284ba[_0x4b1c5b(0x1f7)]||_0xbe51e7});}[_0x530d71(0x1e8)](_0x553d11){var _0x53a41a=_0x530d71;if(this['getMap']())this[_0x53a41a(0x1b7)]()[_0x53a41a(0x1d2)](this['overlayLayer_']);super[_0x53a41a(0x1e8)](_0x553d11),this[_0x53a41a(0x1f0)][_0x53a41a(0x1e8)](_0x553d11);}['setActive'](_0x35e4cf){var _0x1117c4=_0x530d71;this[_0x1117c4(0x1ac)](),super[_0x1117c4(0x1ea)](_0x35e4cf);}[_0x530d71(0x1ac)](){var _0x3f186e=_0x530d71;if(this['overlayLayer_'])this['overlayLayer_'][_0x3f186e(0x1cb)]()['clear']();this[_0x3f186e(0x205)]=![];}[_0x530d71(0x1b3)](_0x3d7e6a){_0x3d7e6a=parseInt(_0x3d7e6a),this['sides_']=_0x3d7e6a>0x2?_0x3d7e6a:0x0;}[_0x530d71(0x1d0)](_0x3dcd38){var _0x2cb4b8=_0x530d71;if(_0x3dcd38===!![]||_0x3dcd38===![])this[_0x2cb4b8(0x1c4)]=_0x3dcd38;return this[_0x2cb4b8(0x1c4)];}['getSides'](){var _0x3ccee6=_0x530d71;return this[_0x3ccee6(0x1c8)];}['getGeom_'](){var _0x1b0bbf=_0x530d71;this['overlayLayer_']['getSource']()['clear']();if(!this['center_'])return![];var _0x4e2c50;if(this[_0x1b0bbf(0x1b2)]){var _0xcb0605=this[_0x1b0bbf(0x1df)],_0x29b287=this[_0x1b0bbf(0x1b2)],_0x28ba8d,_0x4df558,_0x543e82,_0x774718,_0xb5e438;if(!this['sides_']&&this[_0x1b0bbf(0x1c0)]&&!this[_0x1b0bbf(0x1e4)])return _0xcb0605=[(_0x29b287[0x0]+_0xcb0605[0x0])/0x2,(_0x29b287[0x1]+_0xcb0605[0x1])/0x2],_0x28ba8d=[_0x29b287[0x0]-_0xcb0605[0x0],_0x29b287[0x1]-_0xcb0605[0x1]],_0x543e82=Math[_0x1b0bbf(0x1e6)](_0x28ba8d[0x0]*_0x28ba8d[0x0]+_0x28ba8d[0x1]*_0x28ba8d[0x1]),_0x774718=new _0x900ce1(_0xcb0605,_0x543e82,'XY'),_0xb5e438=this[_0x1b0bbf(0x1b7)]()[_0x1b0bbf(0x1ed)](_0xcb0605),_0x4df558=Math['max'](0x64,Math[_0x1b0bbf(0x1c5)](_0xb5e438[0x0]-this['coordPx_'][0x0]),Math[_0x1b0bbf(0x1c5)](_0xb5e438[0x1]-this[_0x1b0bbf(0x201)][0x1])),_0x4df558=Math[_0x1b0bbf(0x1c7)](this[_0x1b0bbf(0x1f3)],Math[_0x1b0bbf(0x1ca)](_0x4df558/0x3)),_0x3e9fc0(_0x774718,_0x4df558,0x0);else{var _0x4dd577=this[_0x1b0bbf(0x1c4)]&&this[_0x1b0bbf(0x1e4)]&&this[_0x1b0bbf(0x1c0)];_0x28ba8d=[_0x29b287[0x0]-_0xcb0605[0x0],_0x29b287[0x1]-_0xcb0605[0x1]];if(this[_0x1b0bbf(0x1c0)]&&!_0x4dd577){var _0x23dbc3=Math[_0x1b0bbf(0x203)](Math[_0x1b0bbf(0x1c5)](_0x28ba8d[0x0]),Math[_0x1b0bbf(0x1c5)](_0x28ba8d[0x1]));_0x29b287=[_0xcb0605[0x0]+(_0x28ba8d[0x0]>0x0?_0x23dbc3:-_0x23dbc3),_0xcb0605[0x1]+(_0x28ba8d[0x1]>0x0?_0x23dbc3:-_0x23dbc3)];}_0x543e82=Math[_0x1b0bbf(0x1e6)](_0x28ba8d[0x0]*_0x28ba8d[0x0]+_0x28ba8d[0x1]*_0x28ba8d[0x1]);if(_0x543e82>0x0){_0x774718=new _0x900ce1(_0xcb0605,_0x543e82,'XY');var _0xb6148;if(_0x4dd577)_0xb6148=Math[_0x1b0bbf(0x1bb)](_0x28ba8d[0x1],_0x28ba8d[0x0]);else _0xb6148=this[_0x1b0bbf(0x1e9)][this[_0x1b0bbf(0x1c8)]]||this[_0x1b0bbf(0x1e9)][_0x1b0bbf(0x1c6)];this[_0x1b0bbf(0x1c8)]?_0x4e2c50=_0x3e9fc0(_0x774718,this[_0x1b0bbf(0x1c8)],_0xb6148):(_0xb5e438=this[_0x1b0bbf(0x1b7)]()['getPixelFromCoordinate'](this['center_']),_0x4df558=Math[_0x1b0bbf(0x203)](0x64,Math[_0x1b0bbf(0x1c5)](_0xb5e438[0x0]-this[_0x1b0bbf(0x201)][0x0]),Math[_0x1b0bbf(0x1c5)](_0xb5e438[0x1]-this[_0x1b0bbf(0x201)][0x1])),_0x4df558=Math['min'](this[_0x1b0bbf(0x1f3)],Math[_0x1b0bbf(0x1ca)](_0x4df558/(this[_0x1b0bbf(0x1e4)]?0x3:0x5))),_0x4e2c50=_0x3e9fc0(_0x774718,_0x4df558,0x0));if(_0x4dd577)return _0x4e2c50;var _0x4b587b=_0x4e2c50[_0x1b0bbf(0x1de)]();if(!this[_0x1b0bbf(0x1e4)])_0xcb0605=this['center_'];else _0xcb0605=[0x2*this[_0x1b0bbf(0x1df)][0x0]-this[_0x1b0bbf(0x1b2)][0x0],0x2*this[_0x1b0bbf(0x1df)][0x1]-this[_0x1b0bbf(0x1b2)][0x1]];var _0x82c0b4=(_0xcb0605[0x0]-_0x29b287[0x0])/(_0x4b587b[0x0]-_0x4b587b[0x2]),_0xb87306=(_0xcb0605[0x1]-_0x29b287[0x1])/(_0x4b587b[0x1]-_0x4b587b[0x3]);if(this[_0x1b0bbf(0x1c0)]){var _0x2284ee=Math['min'](Math[_0x1b0bbf(0x1c5)](_0x82c0b4),Math[_0x1b0bbf(0x1c5)](_0xb87306));_0x82c0b4=Math[_0x1b0bbf(0x1ec)](_0x82c0b4)*_0x2284ee,_0xb87306=Math[_0x1b0bbf(0x1ec)](_0xb87306)*_0x2284ee;}var _0x4c335a=[_0xcb0605[0x0]-_0x4b587b[0x0]*_0x82c0b4,_0xcb0605[0x1]-_0x4b587b[0x1]*_0xb87306];return _0x4e2c50['applyTransform'](function(_0x282e4d,_0x573c1c,_0x2733d8){for(var _0x562e42=0x0;_0x562e42<_0x282e4d['length'];_0x562e42+=_0x2733d8){_0x573c1c[_0x562e42]=_0x282e4d[_0x562e42]*_0x82c0b4+_0x4c335a[0x0],_0x573c1c[_0x562e42+0x1]=_0x282e4d[_0x562e42+0x1]*_0xb87306+_0x4c335a[0x1];}return _0x573c1c;}),_0x4e2c50;}}}return new _0x724ab7(this[_0x1b0bbf(0x1df)]);}[_0x530d71(0x1d8)](_0x4cf5b5){var _0x2e5756=_0x530d71;this['overlayLayer_'][_0x2e5756(0x1cb)]()[_0x2e5756(0x1b4)]();if(_0x4cf5b5){this[_0x2e5756(0x1c0)]=this[_0x2e5756(0x1d9)]?this[_0x2e5756(0x1d9)](_0x4cf5b5):_0x4cf5b5[_0x2e5756(0x1e0)][_0x2e5756(0x1da)],this[_0x2e5756(0x1e4)]=this[_0x2e5756(0x1cc)]?this[_0x2e5756(0x1cc)](_0x4cf5b5):_0x4cf5b5[_0x2e5756(0x1e0)][_0x2e5756(0x1f5)]||_0x4cf5b5[_0x2e5756(0x1e0)]['ctrlKey'];var _0x1b6e48=this[_0x2e5756(0x1d4)]();if(_0x1b6e48){var _0x32a68a=this[_0x2e5756(0x1c2)];if(_0x1b6e48[_0x2e5756(0x1dc)]()===_0x2e5756(0x1f8))_0x32a68a['getGeometry']()['setCoordinates'](_0x1b6e48['getCoordinates']());return this[_0x2e5756(0x1f0)][_0x2e5756(0x1cb)]()[_0x2e5756(0x1e5)](_0x32a68a),this[_0x2e5756(0x1b2)]&&this[_0x2e5756(0x1c0)]&&(this[_0x2e5756(0x1c4)]&&this[_0x2e5756(0x1e4)]&&this['coord_']||!this[_0x2e5756(0x1c8)]&&!this[_0x2e5756(0x1e4)])&&this[_0x2e5756(0x1f0)]['getSource']()[_0x2e5756(0x1e5)](new _0x6158d5(new _0x45ed6c([this[_0x2e5756(0x1df)],this[_0x2e5756(0x1b2)]]))),_0x32a68a;}}}[_0x530d71(0x1d5)](_0x545f3d,_0xc00a98){var _0x90e921=_0x530d71;if(!_0xc00a98)this['overlayLayer_'][_0x90e921(0x1cb)]()['clear']();this[_0x90e921(0x1f0)][_0x90e921(0x1cb)]()[_0x90e921(0x1e5)](new _0x6158d5(new _0x724ab7(_0x545f3d)));}['handleEvent_'](_0x2d891f){var _0x455b80=_0x530d71,_0x4ac795,_0x13b095;this[_0x455b80(0x1b0)]=new Date();switch(_0x2d891f[_0x455b80(0x1f2)]){case _0x455b80(0x1ae):{if(this['conditionFn_']&&!this[_0x455b80(0x1c3)](_0x2d891f))break;this['downPx_']=_0x2d891f[_0x455b80(0x1b9)],this['start_'](_0x2d891f);var _0x44a8d9=0x1f4;this[_0x455b80(0x1f1)]=![],setTimeout(function(){var _0x3da46c=_0x455b80;this[_0x3da46c(0x1f1)]=new Date()-this[_0x3da46c(0x1b0)]>0.9*_0x44a8d9;if(this[_0x3da46c(0x1f1)])this['handleMoveEvent_'](_0x2d891f);}[_0x455b80(0x1c1)](this),_0x44a8d9);break;}case _0x455b80(0x1b6):{this['started_']&&this[_0x455b80(0x1b2)]&&(_0x4ac795=this['downPx_'][0x0]-_0x2d891f[_0x455b80(0x1b9)][0x0],_0x13b095=this['downPx_'][0x1]-_0x2d891f[_0x455b80(0x1b9)][0x1],_0x4ac795*_0x4ac795+_0x13b095*_0x13b095<=this['squaredClickTolerance_']&&(this[_0x455b80(0x202)]==_0x455b80(0x1f4)||this[_0x455b80(0x202)]==_0x455b80(0x1b1)?this[_0x455b80(0x1cf)](_0x2d891f):(_0x4ac795=this[_0x455b80(0x1ba)][0x0]-_0x2d891f[_0x455b80(0x1b9)][0x0],_0x13b095=this[_0x455b80(0x1ba)][0x1]-_0x2d891f[_0x455b80(0x1b9)][0x1],_0x4ac795*_0x4ac795+_0x13b095*_0x13b095<=this[_0x455b80(0x1be)]?this[_0x455b80(0x1cf)](_0x2d891f):(this[_0x455b80(0x1a9)](_0x2d891f),this['drawPoint_'](_0x2d891f['coordinate'],!![])))));this['upPx_']=_0x2d891f[_0x455b80(0x1b9)];break;}case _0x455b80(0x1ef):{if(this[_0x455b80(0x205)]){var _0x480620=this['getMap']()['getPixelFromCoordinate'](this[_0x455b80(0x1df)]);_0x4ac795=_0x480620[0x0]-_0x2d891f[_0x455b80(0x1b9)][0x0],_0x13b095=_0x480620[0x1]-_0x2d891f[_0x455b80(0x1b9)][0x1],_0x4ac795*_0x4ac795+_0x13b095*_0x13b095<=this[_0x455b80(0x1be)]&&this['reset']();}return!this[_0x455b80(0x1f1)];}case'pointermove':{this[_0x455b80(0x205)]&&(_0x4ac795=this[_0x455b80(0x1aa)][0x0]-_0x2d891f[_0x455b80(0x1b9)][0x0],_0x13b095=this[_0x455b80(0x1aa)][0x1]-_0x2d891f['pixel'][0x1],_0x4ac795*_0x4ac795+_0x13b095*_0x13b095>this['squaredClickTolerance_']&&(this[_0x455b80(0x1a9)](_0x2d891f),this[_0x455b80(0x202)]=_0x2d891f[_0x455b80(0x1f2)]));break;}default:{this[_0x455b80(0x202)]=_0x2d891f[_0x455b80(0x1f2)];if(this['started_']&&_0x2d891f['type']===_0x455b80(0x1fd))return![];break;}}return!![];}[_0x530d71(0x1f9)](){var _0x389b17=_0x530d71;this[_0x389b17(0x205)]&&this[_0x389b17(0x1b2)]&&this['end_']({'pixel':this[_0x389b17(0x1ba)],'coordinate':this['coord_']});}['handleMoveEvent_'](_0x5bc306){var _0x183931=_0x530d71;if(this[_0x183931(0x205)]){this[_0x183931(0x1b2)]=_0x5bc306[_0x183931(0x204)],this['coordPx_']=_0x5bc306[_0x183931(0x1b9)];var _0x519e77=this[_0x183931(0x1d8)](_0x5bc306);this[_0x183931(0x1b8)]({'type':_0x183931(0x1bd),'feature':_0x519e77,'pixel':_0x5bc306[_0x183931(0x1b9)],'startCoordinate':this[_0x183931(0x1df)],'coordinate':_0x5bc306[_0x183931(0x204)],'square':this[_0x183931(0x1c0)],'centered':this['centered_']});}else this[_0x183931(0x1d5)](_0x5bc306[_0x183931(0x204)]);}['start_'](_0x51d3de){var _0x59c4e3=_0x530d71;if(!this['started_']){this[_0x59c4e3(0x205)]=!![],this['center_']=_0x51d3de[_0x59c4e3(0x204)],this[_0x59c4e3(0x1b2)]=null;var _0x31c57e=this[_0x59c4e3(0x1c2)]=new _0x6158d5({});_0x31c57e[_0x59c4e3(0x1fb)](this[_0x59c4e3(0x1db)]||'geometry'),_0x31c57e[_0x59c4e3(0x1c9)](new _0x472dc1([[_0x51d3de[_0x59c4e3(0x204)],_0x51d3de[_0x59c4e3(0x204)],_0x51d3de['coordinate']]])),this[_0x59c4e3(0x1d8)](_0x51d3de),this[_0x59c4e3(0x1b8)]({'type':_0x59c4e3(0x1ad),'feature':_0x31c57e,'pixel':_0x51d3de[_0x59c4e3(0x1b9)],'coordinate':_0x51d3de[_0x59c4e3(0x204)]});}else this[_0x59c4e3(0x1b2)]=_0x51d3de[_0x59c4e3(0x204)];}[_0x530d71(0x1cf)](_0x8d897a){var _0x7a3eb2=_0x530d71;this[_0x7a3eb2(0x1b2)]=_0x8d897a[_0x7a3eb2(0x204)],this[_0x7a3eb2(0x205)]=![];if(this[_0x7a3eb2(0x1b2)]&&(this[_0x7a3eb2(0x1df)][0x0]!==this['coord_'][0x0]||this[_0x7a3eb2(0x1df)][0x1]!==this[_0x7a3eb2(0x1b2)][0x1])){var _0x53a61a=this['feature_'];_0x53a61a[_0x7a3eb2(0x1c9)](this[_0x7a3eb2(0x1d4)]());if(this[_0x7a3eb2(0x1f6)])this[_0x7a3eb2(0x1f6)][_0x7a3eb2(0x1e5)](_0x53a61a);else{if(this[_0x7a3eb2(0x1ff)])this[_0x7a3eb2(0x1ff)][_0x7a3eb2(0x1e7)](_0x53a61a);}this[_0x7a3eb2(0x1b8)]({'type':_0x7a3eb2(0x1e3),'feature':_0x53a61a,'pixel':_0x8d897a[_0x7a3eb2(0x1b9)],'coordinate':_0x8d897a[_0x7a3eb2(0x204)],'square':this[_0x7a3eb2(0x1c0)],'centered':this[_0x7a3eb2(0x1e4)]});}else this[_0x7a3eb2(0x1b8)]({'type':_0x7a3eb2(0x1bc),'feature':null,'pixel':_0x8d897a[_0x7a3eb2(0x1b9)],'coordinate':_0x8d897a[_0x7a3eb2(0x204)],'square':this[_0x7a3eb2(0x1c0)],'centered':this['centered_']});this[_0x7a3eb2(0x1df)]=this['coord_']=null,this[_0x7a3eb2(0x1d8)]();}};cme_interaction_DrawRegular[_0x530d71(0x1fc)]['startAngle']={'default':Math['PI']/0x2,0x3:-Math['PI']/0x2,0x4:Math['PI']/0x4};function _0x3db7(_0x435841,_0x799a7c){var _0x2e5c4b=_0x2e5c();return _0x3db7=function(_0x3db7cd,_0x1bbcbe){_0x3db7cd=_0x3db7cd-0x1a9;var _0x18d111=_0x2e5c4b[_0x3db7cd];return _0x18d111;},_0x3db7(_0x435841,_0x799a7c);}export default cme_interaction_DrawRegular;