var _0x401da5=_0x3132;(function(_0x217908,_0x27c822){var _0x18ab04=_0x3132,_0x22447b=_0x217908();while(!![]){try{var _0xc11e8=-parseInt(_0x18ab04(0x159))/0x1+-parseInt(_0x18ab04(0x148))/0x2+parseInt(_0x18ab04(0x112))/0x3*(-parseInt(_0x18ab04(0x14a))/0x4)+-parseInt(_0x18ab04(0x15a))/0x5+-parseInt(_0x18ab04(0x140))/0x6*(parseInt(_0x18ab04(0x107))/0x7)+-parseInt(_0x18ab04(0x102))/0x8+parseInt(_0x18ab04(0x152))/0x9;if(_0xc11e8===_0x27c822)break;else _0x22447b['push'](_0x22447b['shift']());}catch(_0xa64683){_0x22447b['push'](_0x22447b['shift']());}}}(_0x5c7a,0x3efda));import{transform as _0x13d1b0}from'../../proj.js';import{transformExtent as _0x5d2cc6}from'../../proj.js';function _0x3132(_0x24f39d,_0x4f6727){var _0x5c7a07=_0x5c7a();return _0x3132=function(_0x3132b2,_0x39861d){_0x3132b2=_0x3132b2-0xfe;var _0x527ada=_0x5c7a07[_0x3132b2];return _0x527ada;},_0x3132(_0x24f39d,_0x4f6727);}function _0x5c7a(){var _0xec9034=['StreetAddress','coordinates','searchCommune','call','copy','calculateExtent','reverseGeocode','XML','<RequestHeader/>','properties','geoportail/ols','completion','zipcode','</XLS>','INSEE','reverse','getProjection','parse','gml:Point','terr','insee','</gml:pos></gml:Point>','useExtent','lonlat','join','GeocodedAddress','StreetAddress,PositionOfInterest','requestData','set','street','https://wxs.ign.fr/','get','getHistory','ajax','bind','timeout','</Address>','https://data.geopf.fr/geocodage/completion','name','toFixed','typing','maxItems','6qpJlYu','<Address\x20countryCode=\x22PositionOfInterest\x22>','<a\x20href=\x22https://www.geoportail.gouv.fr/\x22\x20target=\x22new\x22>&copy;\x20IGN-Géoportail</a>','apiKey','bbox','country','getMap','commune','42058xVziuk','features','164zctoEg','departmentcode','textContent','version','prototype','\x20\x20</ReverseGeocodeRequest>','postcode','\x20\x20\x20<ReverseGeocodePreference>','15322653UuijwC','<XLS\x20xmlns:xls=\x22http://www.opengis.net/xls\x22\x20xmlns:gml=\x22http://www.opengis.net/gml\x22\x20xmlns=\x22http://www.opengis.net/xls\x22\x20xmlns:xsi=\x22http://www.w3.org/2001/XMLSchema-instance\x22\x20version=\x221.2\x22\x20xsi:schemaLocation=\x22http://www.opengis.net/xls\x20http://schemas.opengis.net/ols/1.2/olsAll.xsd\x22>','shift','getView','split','kind','\x20</Request>','470636cWQgvI','995170UUciIm','EPSG:4326','PositionOfInterest','getElementsByTagName','test','select','getTitle','&lat=','essentiels','<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22?>','className','trim','<freeFormAddress>','getCenter','position','&index=parcel&limit=1','click','ols/apis/completion','type','geometry','city','Commune','2014000WKTffp','Place','municipalitycode','IGNF','url','2447053kBmDyq','parseFromString','replace','/ols/apis/completion','districtcode','fulltext','function','_handleSelect','/geoportail/geocodage/rest/0.1/completion','\x20\x20<ReverseGeocodeRequest>','poiType','11157VDxRJW','<Request\x20requestID=\x221\x22\x20version=\x221.2\x22\x20methodName=\x22LocationUtilityService\x22>','\x20\x20\x20\x20<gml:Point><gml:pos>','handleResponse'];_0x5c7a=function(){return _0xec9034;};return _0x5c7a();}import _0x3aac49 from'./Search.js';import _0x22dd08 from'./SearchJSON.js';var cme_contrcme_SearchGeoportail=class olcontrolSearchGeoportail extends _0x22dd08{constructor(_0x1b89cb){var _0x163087=_0x3132;_0x1b89cb=_0x1b89cb||{},_0x1b89cb[_0x163087(0x164)]=_0x1b89cb[_0x163087(0x164)]||_0x163087(0x105),_0x1b89cb[_0x163087(0x13e)]=_0x1b89cb[_0x163087(0x13e)]||0x1f4;if(_0x1b89cb[_0x163087(0x14d)]==0x1)_0x1b89cb[_0x163087(0x106)]='https://wxs.ign.fr/'+(_0x1b89cb[_0x163087(0x143)]||_0x163087(0x162))+_0x163087(0x10a),_0x1b89cb[_0x163087(0x11a)]=_0x163087(0x142);else _0x1b89cb[_0x163087(0x14d)]==0x2?(_0x1b89cb[_0x163087(0x106)]=_0x163087(0x134)+(_0x1b89cb[_0x163087(0x143)]||_0x163087(0x162))+_0x163087(0x10f),_0x1b89cb['copy']='<a\x20href=\x22https://www.geoportail.gouv.fr/\x22\x20target=\x22new\x22>&copy;\x20IGN-Géoportail</a>'):(_0x1b89cb['url']=_0x163087(0x13b),_0x1b89cb[_0x163087(0x11a)]='<a\x20href=\x22https://geoservices.ign.fr/\x22\x20target=\x22new\x22>&copy;\x20IGN-Géoplateforme</a>');super(_0x1b89cb),this['set'](_0x163087(0x168),_0x1b89cb[_0x163087(0x168)]),this['set'](_0x163087(0x12c),_0x1b89cb[_0x163087(0x12c)]),this['set'](_0x163087(0x144),_0x1b89cb['bbox']),this[_0x163087(0x132)](_0x163087(0xfe),_0x1b89cb[_0x163087(0xfe)]||_0x163087(0x130)),this[_0x163087(0x132)]('terr',_0x1b89cb['terr']),this[_0x163087(0x132)](_0x163087(0x139),_0x1b89cb[_0x163087(0x139)]||0x7d0);}[_0x401da5(0x11c)](_0x432044,_0x1c87af){var _0x4207c0=_0x401da5,_0x51470a=_0x13d1b0(_0x432044,this[_0x4207c0(0x146)]()[_0x4207c0(0x155)]()[_0x4207c0(0x126)](),_0x4207c0(0x15b));this[_0x4207c0(0x10e)]({'x':_0x51470a[0x0],'y':_0x51470a[0x1],'fulltext':_0x51470a[0x0][_0x4207c0(0x13d)](0x6)+','+_0x51470a[0x1]['toFixed'](0x6)},!![],_0x1c87af);var _0x3c7975=this['get'](_0x4207c0(0xfe))==='Commune'?_0x4207c0(0x15c):this['get'](_0x4207c0(0xfe))||_0x4207c0(0x116);if(/,/[_0x4207c0(0x15e)](_0x3c7975))_0x3c7975=_0x4207c0(0x116);var _0x4cec2d=this['get'](_0x4207c0(0x106))[_0x4207c0(0x109)](_0x4207c0(0x16b),_0x4207c0(0x120))['replace'](_0x4207c0(0x121),_0x4207c0(0x125));if(/ols/[_0x4207c0(0x15e)](_0x4cec2d)){var _0x14e9ab=_0x4207c0(0x163)+_0x4207c0(0x153)+'\x20<Request\x20requestID=\x221\x22\x20version=\x221.2\x22\x20methodName=\x22ReverseGeocodeRequest\x22\x20maximumResponses=\x221\x22\x20>'+_0x4207c0(0x110)+_0x4207c0(0x151)+_0x3c7975+'</ReverseGeocodePreference>'+'\x20\x20\x20<Position>'+_0x4207c0(0x114)+_0x51470a[0x1]+'\x20'+_0x51470a[0x0]+_0x4207c0(0x12b)+'\x20\x20\x20</Position>'+_0x4207c0(0x14f)+_0x4207c0(0x158)+_0x4207c0(0x123);this[_0x4207c0(0x137)](_0x4cec2d,{'xls':_0x14e9ab},function(_0x39b999){var _0x3734c8=_0x4207c0,_0x5dafb3={};if(!_0x39b999)_0x5dafb3={'x':_0x51470a[0x0],'y':_0x51470a[0x1],'fulltext':_0x51470a[0x0]['toFixed'](0x6)+','+_0x51470a[0x1][_0x3734c8(0x13d)](0x6)};else{_0x39b999=_0x39b999[_0x3734c8(0x109)](/\n|\r/g,'');var _0x281e80=_0x39b999[_0x3734c8(0x109)](/.*<gml:pos>(.*)<\/gml:pos>.*/,'$1')[_0x3734c8(0x156)]('\x20');if(!Number(_0x281e80[0x1])&&!Number(_0x281e80[0x0]))_0x5dafb3={'x':_0x51470a[0x0],'y':_0x51470a[0x1],'fulltext':_0x51470a[0x0]['toFixed'](0x6)+','+_0x51470a[0x1][_0x3734c8(0x13d)](0x6)};else{_0x5dafb3['x']=_0x51470a[0x0],_0x5dafb3['y']=_0x51470a[0x1],_0x5dafb3[_0x3734c8(0x100)]=_0x39b999[_0x3734c8(0x109)](/.*<Place type="Municipality">([^<]*)<\/Place>.*/,'$1'),_0x5dafb3[_0x3734c8(0x12a)]=_0x39b999['replace'](/.*<Place type="INSEE">([^<]*)<\/Place>.*/,'$1'),_0x5dafb3['zipcode']=_0x39b999[_0x3734c8(0x109)](/.*<PostalCode>([^<]*)<\/PostalCode>.*/,'$1');if(/<Street>/[_0x3734c8(0x15e)](_0x39b999)){_0x5dafb3[_0x3734c8(0x157)]='',_0x5dafb3[_0x3734c8(0x145)]=_0x3734c8(0x116),_0x5dafb3['street']=_0x39b999[_0x3734c8(0x109)](/.*<Street>([^<]*)<\/Street>.*/,'$1');var _0x3aebc7=_0x39b999['replace'](/.*<Building number="([^"]*).*/,'$1');_0x5dafb3[_0x3734c8(0x10c)]=_0x3aebc7+'\x20'+_0x5dafb3[_0x3734c8(0x133)]+',\x20'+_0x5dafb3['zipcode']+'\x20'+_0x5dafb3[_0x3734c8(0x100)];}else _0x5dafb3['kind']=_0x39b999[_0x3734c8(0x109)](/.*<Place type="Nature">([^<]*)<\/Place>.*/,'$1'),_0x5dafb3[_0x3734c8(0x145)]='PositionOfInterest',_0x5dafb3[_0x3734c8(0x133)]='',_0x5dafb3[_0x3734c8(0x10c)]=_0x5dafb3[_0x3734c8(0x122)]+'\x20'+_0x5dafb3[_0x3734c8(0x100)];}}typeof _0x1c87af===_0x3734c8(0x10d)?_0x1c87af['call'](this,[_0x5dafb3]):(this[_0x3734c8(0x136)]()[_0x3734c8(0x154)](),this[_0x3734c8(0x10e)](_0x5dafb3,!![],_0x1c87af));}[_0x4207c0(0x138)](this),{'timeout':this['get'](_0x4207c0(0x139)),'dataType':'XML'});}else this[_0x4207c0(0x137)](_0x4cec2d+'?lon='+_0x51470a[0x0]+_0x4207c0(0x161)+_0x51470a[0x1],{},function(_0x5b784e){var _0x583501=_0x4207c0,_0x468d7a;try{_0x5b784e=JSON[_0x583501(0x127)](_0x5b784e)[_0x583501(0x149)][0x0],_0x468d7a=_0x5b784e['properties'],_0x468d7a['x']=_0x5b784e[_0x583501(0xff)][_0x583501(0x117)][0x0],_0x468d7a['y']=_0x5b784e['geometry'][_0x583501(0x117)][0x1],_0x468d7a[_0x583501(0x16a)]=_0x51470a,_0x468d7a['name']?_0x468d7a[_0x583501(0x10c)]=_0x468d7a[_0x583501(0x13c)]+',\x20'+_0x468d7a[_0x583501(0x150)]+'\x20'+_0x468d7a[_0x583501(0x100)]:_0x468d7a[_0x583501(0x10c)]=_0x468d7a[_0x583501(0x150)]+'\x20'+_0x468d7a['city'];}catch(_0x2b78e6){_0x468d7a={'x':_0x51470a[0x0],'y':_0x51470a[0x1],'lonlat':_0x51470a,'fulltext':_0x51470a[0x0][_0x583501(0x13d)](0x6)+','+_0x51470a[0x1][_0x583501(0x13d)](0x6)};}typeof _0x1c87af===_0x583501(0x10d)?_0x1c87af[_0x583501(0x119)](this,[_0x468d7a]):(this[_0x583501(0x136)]()[_0x583501(0x154)](),this[_0x583501(0x10e)](_0x468d7a,!![],_0x1c87af));}[_0x4207c0(0x138)](this),{'timeout':this[_0x4207c0(0x135)](_0x4207c0(0x139)),'dataType':_0x4207c0(0x11d)});}[_0x401da5(0x160)](_0x1da09e){var _0x4df55e=_0x401da5;return _0x1da09e[_0x4df55e(0x10c)];}[_0x401da5(0x131)](_0x36b3cc){var _0x5157be=_0x401da5,_0x59b371={'text':_0x36b3cc,'type':this['get'](_0x5157be(0xfe))===_0x5157be(0x101)?'PositionOfInterest':this[_0x5157be(0x135)](_0x5157be(0xfe))||'StreetAddress,PositionOfInterest','terr':this[_0x5157be(0x135)](_0x5157be(0x129))||undefined,'maximumResponses':this[_0x5157be(0x135)](_0x5157be(0x13f))};if(this[_0x5157be(0x135)]('type')===_0x5157be(0x101))_0x59b371[_0x5157be(0x111)]=_0x5157be(0x147);if(this['get']('position')){var _0x2fb997=this[_0x5157be(0x146)]()[_0x5157be(0x155)]()[_0x5157be(0x167)]();_0x59b371[_0x5157be(0x12d)]=_0x13d1b0(_0x2fb997,this[_0x5157be(0x146)]()['getView']()[_0x5157be(0x126)](),_0x5157be(0x15b))[_0x5157be(0x12e)](',');}if(this[_0x5157be(0x135)](_0x5157be(0x144)))_0x59b371['bbox']=_0x5d2cc6(this[_0x5157be(0x135)]('bbox'),this['getMap']()[_0x5157be(0x155)]()[_0x5157be(0x126)](),_0x5157be(0x15b))[_0x5157be(0x12e)](',');else{if(this[_0x5157be(0x135)](_0x5157be(0x12c))){var _0x2032fd=this[_0x5157be(0x146)]()[_0x5157be(0x155)]()[_0x5157be(0x11b)]();_0x59b371[_0x5157be(0x144)]=_0x5d2cc6(_0x2032fd,this['getMap']()[_0x5157be(0x155)]()[_0x5157be(0x126)](),_0x5157be(0x15b))[_0x5157be(0x12e)](',');}}return _0x59b371;}[_0x401da5(0x115)](_0x248be6){return _0x248be6['results'];}[_0x401da5(0x15f)](_0x1fba09,_0x56ca97,_0x5a4b1d,_0x122f6f){var _0x3fe23d=_0x401da5;if(_0x1fba09['x']||_0x1fba09['y']){var _0x12e1dc=[Number(_0x1fba09['x']),Number(_0x1fba09['y'])];try{_0x12e1dc=_0x13d1b0(_0x12e1dc,_0x3fe23d(0x15b),this[_0x3fe23d(0x146)]()[_0x3fe23d(0x155)]()[_0x3fe23d(0x126)]());}catch(_0xd1eaa1){}this[_0x3fe23d(0x135)](_0x3fe23d(0xfe))===_0x3fe23d(0x101)?this[_0x3fe23d(0x118)](_0x1fba09,function(){var _0x4271a1=_0x3fe23d;_0x3aac49[_0x4271a1(0x14e)][_0x4271a1(0x15f)][_0x4271a1(0x119)](this,_0x1fba09,_0x56ca97,_0x12e1dc,_0x122f6f);}['bind'](this)):super[_0x3fe23d(0x15f)](_0x1fba09,_0x56ca97,_0x12e1dc,_0x122f6f);}else this[_0x3fe23d(0x118)](_0x1fba09);}[_0x401da5(0x118)](_0x268c8c,_0x257a66){var _0x1138c6=_0x401da5,_0x2e7e3f=this['get'](_0x1138c6(0x106))[_0x1138c6(0x109)](_0x1138c6(0x16b),_0x1138c6(0x120))[_0x1138c6(0x109)](_0x1138c6(0x121),_0x1138c6(0x125));if(/ols/['test'](_0x2e7e3f)){var _0x234084='<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22?>'+_0x1138c6(0x153)+_0x1138c6(0x11e)+_0x1138c6(0x113)+'<GeocodeRequest\x20returnFreeForm=\x22false\x22>'+_0x1138c6(0x141)+_0x1138c6(0x166)+_0x268c8c[_0x1138c6(0x122)]+'\x20'+_0x268c8c[_0x1138c6(0x100)]+'+</freeFormAddress>'+_0x1138c6(0x13a)+'</GeocodeRequest>'+'</Request>'+_0x1138c6(0x123);this[_0x1138c6(0x137)](this[_0x1138c6(0x135)]('url')['replace'](_0x1138c6(0x16b),_0x1138c6(0x120)),{'xls':_0x234084},function(_0x33691f){var _0x379d87=_0x1138c6;if(_0x33691f){var _0x505f7a=new DOMParser(),_0x5973e1=_0x505f7a[_0x379d87(0x108)](_0x33691f,'text/xml'),_0x57505f=_0x5973e1[_0x379d87(0x15d)](_0x379d87(0x12f))[0x0],_0x48cbc1=_0x57505f[_0x379d87(0x15d)](_0x379d87(0x128))[0x0]['textContent'][_0x379d87(0x165)]()[_0x379d87(0x156)]('\x20');_0x268c8c['x']=Number(_0x48cbc1[0x1]),_0x268c8c['y']=Number(_0x48cbc1[0x0]);var _0x111f89=_0x57505f[_0x379d87(0x15d)](_0x379d87(0x103));for(var _0x6ff893=0x0;_0x6ff893<_0x111f89['length'];_0x6ff893++){switch(_0x111f89[_0x6ff893]['attributes'][_0x379d87(0xfe)]['value']){case'Nature':_0x268c8c['kind']=_0x111f89[_0x6ff893][_0x379d87(0x14c)];break;case _0x379d87(0x124):_0x268c8c[_0x379d87(0x12a)]=_0x111f89[_0x6ff893][_0x379d87(0x14c)];break;}}if(_0x268c8c['x']||_0x268c8c['y']){if(_0x257a66)_0x257a66[_0x379d87(0x119)](this,[_0x268c8c]);else this[_0x379d87(0x10e)](_0x268c8c);}}}[_0x1138c6(0x138)](this),{'dataType':_0x1138c6(0x11d)});}else this['ajax'](_0x2e7e3f+'?lon='+_0x268c8c['x']+_0x1138c6(0x161)+_0x268c8c['y']+_0x1138c6(0x169),{},function(_0x2d2da4){var _0x5d18cd=_0x1138c6;try{var _0x9a79df=JSON[_0x5d18cd(0x127)](_0x2d2da4)[_0x5d18cd(0x149)][0x0];_0x268c8c[_0x5d18cd(0x12a)]=_0x9a79df[_0x5d18cd(0x11f)][_0x5d18cd(0x14b)]+_0x9a79df[_0x5d18cd(0x11f)][_0x5d18cd(0x104)],_0x268c8c['districtcode']=_0x9a79df[_0x5d18cd(0x11f)][_0x5d18cd(0x10b)],_0x257a66?_0x257a66[_0x5d18cd(0x119)](this,[_0x268c8c]):this[_0x5d18cd(0x10e)](_0x268c8c);}catch(_0x4fc462){}}['bind'](this),{'timeout':this[_0x1138c6(0x135)]('timeout'),'dataType':_0x1138c6(0x11d)});}};export default cme_contrcme_SearchGeoportail;