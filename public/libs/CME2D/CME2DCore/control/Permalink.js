var _0x5c120b=_0x3e93;(function(_0x1d3e39,_0x56ffeb){var _0x10e029=_0x3e93,_0x1156f0=_0x1d3e39();while(!![]){try{var _0x4057b7=-parseInt(_0x10e029(0xe5))/0x1*(-parseInt(_0x10e029(0x105))/0x2)+-parseInt(_0x10e029(0x11d))/0x3+parseInt(_0x10e029(0xf8))/0x4+parseInt(_0x10e029(0xeb))/0x5+-parseInt(_0x10e029(0xd5))/0x6*(parseInt(_0x10e029(0xe1))/0x7)+parseInt(_0x10e029(0xee))/0x8*(-parseInt(_0x10e029(0x123))/0x9)+-parseInt(_0x10e029(0x106))/0xa*(-parseInt(_0x10e029(0x118))/0xb);if(_0x4057b7===_0x56ffeb)break;else _0x1156f0['push'](_0x1156f0['shift']());}catch(_0x343c4f){_0x1156f0['push'](_0x1156f0['shift']());}}}(_0x29b0,0x60e97));import{unByKey as _0x340d1d}from'../../Observable.js';function _0x3e93(_0x331167,_0x3b6ca1){var _0x29b0ae=_0x29b0();return _0x3e93=function(_0x3e937a,_0x3d7728){_0x3e937a=_0x3e937a-0xd5;var _0x1a5141=_0x29b0ae[_0x3e937a];return _0x1a5141;},_0x3e93(_0x331167,_0x3b6ca1);}function _0x29b0(){var _0x58a182=['addEventListener','_tout','undefined','getArray','appendChild','getUrlParams','moveend','visible','layerChange_','&l=','anchor','10230xmCGps','split','&r=','replaceState_','length','1342554pHHGEq','hash','_listener','lat','getZoom','fixed','4698927dMoIvw','hasOwnProperty','layerStr_','warn','button','getCenter','EPSG:4326','permalink','setMap','hidden','toFixed','change','getMap','setCenter','call','function','fixed_','setZoom','setUrlReplace','gh=','setUrlParam','initial','34806BdKXpb','create','getInitialPosition','protocol','_localStorage','setRotation','getProjection','replace','location','getView','setOpacity','getUrlReplace','413AXFQjo','get','onclick','getLayerByLink','117242ZFjlPh','geohash','getLink','setVisible','round','opacity','1917305fpZrwq','setPosition','setGeohash','8SyPxQR','localStorage','origin','host','lon','getLayerGroup','replaceState','createElement','&lat=','Failed\x20to\x20access\x20localStorage...','1100856DiQWNj','position','viewChange_','pathname','div','\x20ol-unselectable\x20ol-control','hide','getRotation','ol@permalink','bind','history','set','&z=','6VvsUsX','7510RdqNQs','urlReplace','getLayers','hash_','touchstart','search_','getUrlParam'];_0x29b0=function(){return _0x58a182;};return _0x29b0();}import _0x354b77 from'../../control/Control.js';import{transform as _0xe5c761}from'../../proj.js';import _0xd03f10 from'../util/element.js';import{toLonLat as _0x4e7607}from'../geom/geohash.js';import{fromLonLat as _0x4e740c}from'../geom/geohash.js';var cme_contrcme_Permalink=class olcontrolPermalink extends _0x354b77{constructor(_0x3f264e){var _0x33d559=_0x3e93,_0x55962a=_0x3f264e||{},_0x1fe615=document[_0x33d559(0xf5)](_0x33d559(0xfc));super({'element':_0x1fe615,'target':_0x55962a['target']});var _0x8019ee=this,_0x4e18b0=document[_0x33d559(0xf5)](_0x33d559(0x127));_0xd03f10[_0x33d559(0xd6)]('I',{'parent':_0x4e18b0}),this['replaceState_']=_0x55962a[_0x33d559(0x107)]!==![],this[_0x33d559(0x133)]=_0x55962a[_0x33d559(0x122)]||0x6,this['hash_']=_0x55962a[_0x33d559(0x117)]?'#':'?',this[_0x33d559(0xd9)]=_0x55962a[_0x33d559(0xef)];if(!this[_0x33d559(0xd9)])try{localStorage['removeItem'](_0x33d559(0x100));}catch(_0x20b68e){console[_0x33d559(0x126)](_0x33d559(0xf7));}function _0x1106bf(){var _0x1b114a=_0x33d559;typeof _0x55962a[_0x1b114a(0xe3)]==_0x1b114a(0x132)?_0x55962a[_0x1b114a(0xe3)](_0x8019ee['getLink']()):_0x8019ee[_0x1b114a(0x135)](!_0x8019ee[_0x1b114a(0x11b)]);}_0x4e18b0[_0x33d559(0x10d)]('click',_0x1106bf,![]),_0x4e18b0[_0x33d559(0x10d)](_0x33d559(0x10a),_0x1106bf,![]),_0x1fe615['className']=(_0x55962a['className']||'ol-permalink')+_0x33d559(0xfd),_0x1fe615[_0x33d559(0x111)](_0x4e18b0);if(_0x55962a[_0x33d559(0x12c)]||_0x55962a[_0x33d559(0x114)]===![])_0xd03f10[_0x33d559(0xfe)](_0x1fe615);this[_0x33d559(0x103)]('geohash',_0x55962a[_0x33d559(0xe6)]),this['set'](_0x33d559(0x138),![]),this['on'](_0x33d559(0x12e),this[_0x33d559(0xfa)][_0x33d559(0x101)](this)),this[_0x33d559(0x10b)]={};var _0x5d19ce={},_0x5a6abe=document[_0x33d559(0xdd)][_0x33d559(0x11e)]||document['location']['search']||'';if(this[_0x33d559(0x11b)]&&!_0x5a6abe&&this[_0x33d559(0xd9)])try{_0x5a6abe=localStorage[_0x33d559(0x100)];}catch(_0x5bdf5d){console[_0x33d559(0x126)](_0x33d559(0xf7));}if(_0x5a6abe){_0x5a6abe=_0x5a6abe['replace'](/(^#|^\?)/,'')[_0x33d559(0x119)]('&');for(var _0x433f48=0x0;_0x433f48<_0x5a6abe[_0x33d559(0x11c)];_0x433f48++){var _0x38621e=_0x5a6abe[_0x433f48][_0x33d559(0x119)]('=');switch(_0x38621e[0x0]){case _0x33d559(0xf2):case'lat':case'z':case'r':{_0x5d19ce[_0x38621e[0x0]]=_0x38621e[0x1];break;}case'gh':{const _0xafc2a=_0x38621e[0x1][_0x33d559(0x119)]('-'),_0x118a25=_0x4e7607(_0xafc2a[0x0]);_0x5d19ce['lon']=_0x118a25[0x0],_0x5d19ce[_0x33d559(0x120)]=_0x118a25[0x1],_0x5d19ce['z']=_0xafc2a[0x1];break;}case'l':break;default:this['search_'][_0x38621e[0x0]]=_0x38621e[0x1];}}}_0x5d19ce['hasOwnProperty'](_0x33d559(0xf2))&&this['set']('initial',_0x5d19ce);if(this[_0x33d559(0x11b)])this[_0x33d559(0xec)]();}[_0x5c120b(0xd7)](){var _0x24bc64=_0x5c120b;return this[_0x24bc64(0xe2)]('initial');}[_0x5c120b(0x12b)](_0x3d84ee){var _0x164795=_0x5c120b;this[_0x164795(0x11f)]&&(_0x340d1d(this[_0x164795(0x11f)][_0x164795(0x12e)]),_0x340d1d(this['_listener'][_0x164795(0x113)])),this[_0x164795(0x11f)]=null,super[_0x164795(0x12b)][_0x164795(0x131)](this,_0x3d84ee),_0x3d84ee&&(this[_0x164795(0x11f)]={'change':_0x3d84ee[_0x164795(0xf3)]()['on'](_0x164795(0x12e),this[_0x164795(0x115)][_0x164795(0x101)](this)),'moveend':_0x3d84ee['on'](_0x164795(0x113),this[_0x164795(0xfa)]['bind'](this))},this[_0x164795(0xec)]());}['getLayerByLink'](_0x540cd0,_0x115039){var _0x3cd5bc=_0x5c120b;if(!_0x115039&&this[_0x3cd5bc(0x12f)]())_0x115039=this[_0x3cd5bc(0x12f)]()[_0x3cd5bc(0x108)]()[_0x3cd5bc(0x110)]();for(var _0x5479c3=0x0;_0x5479c3<_0x115039[_0x3cd5bc(0x11c)];_0x5479c3++){if(_0x115039[_0x5479c3][_0x3cd5bc(0xe2)](_0x3cd5bc(0x12a))==_0x540cd0)return _0x115039[_0x5479c3];if(_0x115039[_0x5479c3]['getLayers']){var _0x4fde85=this[_0x3cd5bc(0xe4)](_0x540cd0,_0x115039[_0x5479c3][_0x3cd5bc(0x108)]()[_0x3cd5bc(0x110)]());if(_0x4fde85)return _0x4fde85;}}return![];}[_0x5c120b(0xed)](_0x3284be){var _0x3b671e=_0x5c120b;this[_0x3b671e(0x103)]('geohash',_0x3284be),this[_0x3b671e(0x137)]();}[_0x5c120b(0xec)](_0x1f8d1d){var _0x125be9=_0x5c120b,_0x1cb55b=this[_0x125be9(0x12f)]();if(!_0x1cb55b)return;var _0x22696b=this[_0x125be9(0x11b)]||_0x1f8d1d?document['location']['hash']||document[_0x125be9(0xdd)]['search']:'';if(!_0x22696b&&this[_0x125be9(0xd9)])try{_0x22696b=localStorage['ol@permalink'];}catch(_0x258fe3){console[_0x125be9(0x126)]('Failed\x20to\x20access\x20localStorage...');}if(!_0x22696b)return;var _0x50d5a7,_0x5ee3b8,_0x3a9395={};_0x22696b=_0x22696b[_0x125be9(0xdc)](/(^#|^\?)/,'')[_0x125be9(0x119)]('&');for(_0x50d5a7=0x0;_0x50d5a7<_0x22696b[_0x125be9(0x11c)];_0x50d5a7++){_0x5ee3b8=_0x22696b[_0x50d5a7][_0x125be9(0x119)]('='),_0x3a9395[_0x5ee3b8[0x0]]=_0x5ee3b8[0x1];}if(_0x3a9395['gh']){var _0x13b8f0=_0x3a9395['gh'][_0x125be9(0x119)]('-'),_0x19d72a=_0x4e7607(_0x13b8f0[0x0]);_0x3a9395[_0x125be9(0xf2)]=_0x19d72a[0x0],_0x3a9395[_0x125be9(0x120)]=_0x19d72a[0x1],_0x3a9395['z']=_0x13b8f0[0x1];}var _0x17f18e=_0xe5c761([Number(_0x3a9395[_0x125be9(0xf2)]),Number(_0x3a9395[_0x125be9(0x120)])],_0x125be9(0x129),_0x1cb55b[_0x125be9(0xde)]()[_0x125be9(0xdb)]());if(_0x17f18e[0x0]&&_0x17f18e[0x1])_0x1cb55b[_0x125be9(0xde)]()[_0x125be9(0x130)](_0x17f18e);if(_0x3a9395['z'])_0x1cb55b[_0x125be9(0xde)]()[_0x125be9(0x134)](Number(_0x3a9395['z']));if(_0x3a9395['r'])_0x1cb55b[_0x125be9(0xde)]()[_0x125be9(0xda)](Number(_0x3a9395['r']));function _0x257476(_0x250109){var _0xbab73a=_0x125be9;if(!_0x250109)_0x250109=_0x1cb55b['getLayers']()[_0xbab73a(0x110)]();for(var _0x2227fe=0x0;_0x2227fe<_0x250109['length'];_0x2227fe++){_0x250109[_0x2227fe][_0xbab73a(0xe2)](_0xbab73a(0x12a))&&_0x250109[_0x2227fe]['setVisible'](![]),_0x250109[_0x2227fe][_0xbab73a(0x108)]&&_0x257476(_0x250109[_0x2227fe][_0xbab73a(0x108)]()[_0xbab73a(0x110)]());}}if(_0x3a9395['l']){_0x257476();var _0x3bee3e=_0x3a9395['l']['split']('|');for(_0x50d5a7=0x0;_0x50d5a7<_0x3bee3e[_0x125be9(0x11c)];_0x50d5a7++){_0x5ee3b8=_0x3bee3e[_0x50d5a7][_0x125be9(0x119)](':');var _0x47abd7=this[_0x125be9(0xe4)](_0x5ee3b8[0x0]),_0x2c97de=Number(_0x5ee3b8[0x1]);_0x47abd7&&(_0x47abd7[_0x125be9(0xdf)](_0x2c97de),_0x47abd7[_0x125be9(0xe8)](!![]));}}}[_0x5c120b(0x112)](){var _0x22de20=_0x5c120b;return this[_0x22de20(0x10b)];}[_0x5c120b(0x137)](_0x42d291,_0x3bdc77){var _0x291a20=_0x5c120b;if(_0x42d291){if(_0x3bdc77===undefined||_0x3bdc77==='')delete this['search_'][encodeURIComponent(_0x42d291)];else this[_0x291a20(0x10b)][encodeURIComponent(_0x42d291)]=encodeURIComponent(_0x3bdc77);}this[_0x291a20(0xfa)]();}[_0x5c120b(0x10c)](_0x5416db){var _0x37ac7f=_0x5c120b;return decodeURIComponent(this[_0x37ac7f(0x10b)][encodeURIComponent(_0x5416db)]||'');}['hasUrlParam'](_0x2000b7){var _0x242520=_0x5c120b;return this[_0x242520(0x10b)][_0x242520(0x124)](encodeURIComponent(_0x2000b7));}['getLink'](_0x56bbca){var _0x300ab=_0x5c120b,_0x59319b=this[_0x300ab(0x12f)](),_0x33260a=_0xe5c761(_0x59319b['getView']()[_0x300ab(0x128)](),_0x59319b[_0x300ab(0xde)]()[_0x300ab(0xdb)](),'EPSG:4326'),_0x3583c7=Math['round'](_0x59319b[_0x300ab(0xde)]()[_0x300ab(0x121)]()*0xa)/0xa,_0x3ca599=_0x59319b['getView']()[_0x300ab(0xff)](),_0x3e4f04=this[_0x300ab(0x125)],_0xcba1d2=(_0x3ca599?_0x300ab(0x11a)+Math[_0x300ab(0xe9)](_0x3ca599*0x2710)/0x2710:'')+(_0x3e4f04?_0x300ab(0x116)+_0x3e4f04:'');if(this[_0x300ab(0xe2)]('geohash')){var _0x156ce0=_0x4e740c(_0x33260a,0x8);_0xcba1d2=_0x300ab(0x136)+_0x156ce0+'-'+_0x3583c7+_0xcba1d2;}else _0xcba1d2='lon='+_0x33260a[0x0][_0x300ab(0x12d)](this[_0x300ab(0x133)])+_0x300ab(0xf6)+_0x33260a[0x1][_0x300ab(0x12d)](this[_0x300ab(0x133)])+_0x300ab(0x104)+_0x3583c7+_0xcba1d2;if(_0x56bbca===_0x300ab(0xf9))return _0xcba1d2;for(var _0x296db1 in this['search_']){_0xcba1d2+='&'+_0x296db1+(typeof this[_0x300ab(0x10b)][_0x296db1]!==_0x300ab(0x10f)?'='+this[_0x300ab(0x10b)][_0x296db1]:'');}if(_0x56bbca)return _0xcba1d2;return document[_0x300ab(0xdd)][_0x300ab(0xd8)]+'//'+document['location'][_0x300ab(0xf1)]+document['location'][_0x300ab(0xfb)]+this[_0x300ab(0x109)]+_0xcba1d2;}[_0x5c120b(0xe0)](){var _0x280ffa=_0x5c120b;return this[_0x280ffa(0x11b)];}[_0x5c120b(0x135)](_0x51dff8){var _0x8b7556=_0x5c120b;try{this['replaceState_']=_0x51dff8;if(!_0x51dff8){var _0x4694f1='';for(var _0x318091 in this[_0x8b7556(0x10b)]){_0x4694f1+=(_0x4694f1==''?'?':'&')+_0x318091+(typeof this['search_'][_0x318091]!==_0x8b7556(0x10f)?'='+this[_0x8b7556(0x10b)][_0x318091]:'');}window['history'][_0x8b7556(0xf4)](null,null,document[_0x8b7556(0xdd)][_0x8b7556(0xf0)]+document[_0x8b7556(0xdd)][_0x8b7556(0xfb)]+_0x4694f1);}else window[_0x8b7556(0x102)][_0x8b7556(0xf4)](null,null,this[_0x8b7556(0xe7)]());}catch(_0x15d383){}}[_0x5c120b(0xfa)](){var _0x52fa97=_0x5c120b;try{if(this['replaceState_'])window['history'][_0x52fa97(0xf4)](null,null,this[_0x52fa97(0xe7)]());}catch(_0xf18b93){}if(this[_0x52fa97(0xd9)])try{localStorage[_0x52fa97(0x100)]=this[_0x52fa97(0xe7)](this[_0x52fa97(0xd9)]);}catch(_0xd1ec8c){console[_0x52fa97(0x126)](_0x52fa97(0xf7));}}[_0x5c120b(0x115)](){var _0x2375f7=_0x5c120b;this[_0x2375f7(0x10e)]&&(clearTimeout(this['_tout']),this['_tout']=null),this[_0x2375f7(0x10e)]=setTimeout(function(){var _0xe9cce9=_0x2375f7;this[_0xe9cce9(0x10e)]=null;var _0x4f8862='';function _0x90812d(_0x2571b6){var _0x2703e6=_0xe9cce9;for(var _0x98b194=0x0;_0x98b194<_0x2571b6['length'];_0x98b194++){if(_0x2571b6[_0x98b194]['getVisible']()&&_0x2571b6[_0x98b194][_0x2703e6(0xe2)]('permalink')){if(_0x4f8862)_0x4f8862+='|';_0x4f8862+=_0x2571b6[_0x98b194][_0x2703e6(0xe2)](_0x2703e6(0x12a))+':'+_0x2571b6[_0x98b194][_0x2703e6(0xe2)](_0x2703e6(0xea));}if(_0x2571b6[_0x98b194][_0x2703e6(0x108)])_0x90812d(_0x2571b6[_0x98b194][_0x2703e6(0x108)]()[_0x2703e6(0x110)]());}}_0x90812d(this[_0xe9cce9(0x12f)]()['getLayers']()['getArray']()),this[_0xe9cce9(0x125)]=_0x4f8862,this[_0xe9cce9(0xfa)]();}[_0x2375f7(0x101)](this),0xc8);}};export default cme_contrcme_Permalink;