var _0x584a6a=_0xee1d;function _0xee1d(_0x11a163,_0x153e19){var _0x5e1676=_0x5e16();return _0xee1d=function(_0xee1da6,_0x2273a9){_0xee1da6=_0xee1da6-0x1df;var _0x3c4fe9=_0x5e1676[_0xee1da6];return _0x3c4fe9;},_0xee1d(_0x11a163,_0x153e19);}(function(_0x15495f,_0x26568b){var _0x579ae0=_0xee1d,_0xc2a75f=_0x15495f();while(!![]){try{var _0x41e6dd=-parseInt(_0x579ae0(0x1fe))/0x1*(-parseInt(_0x579ae0(0x1eb))/0x2)+-parseInt(_0x579ae0(0x1e7))/0x3*(parseInt(_0x579ae0(0x1e3))/0x4)+parseInt(_0x579ae0(0x1e0))/0x5*(parseInt(_0x579ae0(0x1fd))/0x6)+-parseInt(_0x579ae0(0x212))/0x7*(parseInt(_0x579ae0(0x1ec))/0x8)+parseInt(_0x579ae0(0x206))/0x9*(parseInt(_0x579ae0(0x1e5))/0xa)+-parseInt(_0x579ae0(0x1f9))/0xb+parseInt(_0x579ae0(0x20a))/0xc*(-parseInt(_0x579ae0(0x200))/0xd);if(_0x41e6dd===_0x26568b)break;else _0xc2a75f['push'](_0xc2a75f['shift']());}catch(_0x43da86){_0xc2a75f['push'](_0xc2a75f['shift']());}}}(_0x5e16,0xe3aac));function _0x5e16(){var _0x595802=['timeLog','feature','contour','194478KPtvfi','8UvyLyc','del','seg','push','test','_edges','setCoordinates','edge','keepEnds','get','geom','chain','simplifyVisvalingam','8498160ZHmUUV','getEdges','_calcEdges','concat','24SquGpK','13dqegGa','geometry','312572ucuWuI','find','time','getType','arcs','_getArcs','9fJexbU','length','getCoordinates','shift','684YwtUgC','bind','split','setFeatures','getGeometry','index','pow','typeGeom','5317354KfUhJx','minPoints','prev','simplify','forEach','_chainEdges','2223365lTUdfd','ratio','setGeometry','71436MBeqiE','nom','13639030miPNWT','area','96Ezaxgv'];_0x5e16=function(){return _0x595802;};return _0x5e16();}import _0x3fa755 from'../../Object.js';import{cme_coordinate_equal}from'./GeomUtils.js';import _0x27e10e from'../../Feature.js';import _0x21d32c from'./visvalingam.js';var cme_geom_Simplificator=class olgeomSimplificator extends _0x3fa755{constructor(_0x2b2061){var _0x596ff4=_0xee1d;super(_0x2b2061),this[_0x596ff4(0x1f1)]=[];}[_0x584a6a(0x1fa)](){return this['_edges'];}[_0x584a6a(0x20d)](_0x2bc6f1,_0x5edb3e){var _0x5f0033=_0x584a6a;console[_0x5f0033(0x202)](_0x5f0033(0x204));if(_0x5edb3e)_0x5edb3e=Math[_0x5f0033(0x210)](0xa,_0x5edb3e);var _0x5727b3=this[_0x5f0033(0x1fb)](_0x2bc6f1,_0x5edb3e);return console[_0x5f0033(0x1e8)](_0x5f0033(0x204)),console['time'](_0x5f0033(0x1f7)),this[_0x5f0033(0x1f1)]=this[_0x5f0033(0x1df)](_0x5727b3),console[_0x5f0033(0x1e8)]('chain'),this[_0x5f0033(0x1f1)];}['getFeatures'](){var _0x378439=_0x584a6a,_0x2636e8=[];return this[_0x378439(0x1f1)]['forEach'](function(_0x3254ff){var _0x18068c=_0x378439;_0x3254ff[_0x18068c(0x1f5)](_0x18068c(0x1f3))['forEach'](function(_0x2cd8bc){var _0x382d97=_0x18068c,_0x13aa92=_0x2636e8[_0x382d97(0x201)](function(_0xe48f41){var _0x3458bb=_0x382d97;return _0x2cd8bc[_0x3458bb(0x1e9)]===_0xe48f41[_0x3458bb(0x1e9)];});!_0x13aa92&&(_0x13aa92={'feature':_0x2cd8bc[_0x382d97(0x1e9)],'contour':{}},_0x2636e8['push'](_0x13aa92));if(!_0x13aa92[_0x382d97(0x1ea)][_0x2cd8bc['contour']])_0x13aa92[_0x382d97(0x1ea)][_0x2cd8bc[_0x382d97(0x1ea)]]=[];_0x13aa92[_0x382d97(0x1ea)][_0x2cd8bc['contour']][_0x382d97(0x1ef)]({'edge':_0x3254ff,'index':_0x2cd8bc[_0x382d97(0x20f)]});});}),_0x2636e8[_0x378439(0x216)](function(_0x4689cc){var _0x551ff4=_0x378439;_0x4689cc[_0x551ff4(0x211)]=_0x4689cc[_0x551ff4(0x1e9)][_0x551ff4(0x20e)]()[_0x551ff4(0x203)](),_0x4689cc[_0x551ff4(0x1e4)]=_0x4689cc[_0x551ff4(0x1e9)][_0x551ff4(0x1f5)](_0x551ff4(0x1e4));var _0x37b660=[];for(let _0x382609 in _0x4689cc['contour']){var _0x5343c1=_0x382609[_0x551ff4(0x20c)]('-');_0x5343c1[_0x551ff4(0x209)]();var _0x4e98d6=_0x37b660;while(_0x5343c1[_0x551ff4(0x207)]){var _0x312b52=parseInt(_0x5343c1['shift']());!_0x4e98d6[_0x312b52]&&(_0x4e98d6[_0x312b52]=[]),_0x4e98d6=_0x4e98d6[_0x312b52];}_0x4689cc[_0x551ff4(0x1ea)][_0x382609]['sort'](function(_0x349a9a,_0x447e9f){var _0x414810=_0x551ff4;return _0x349a9a[_0x414810(0x20f)]-_0x447e9f['index'];}),_0x4689cc[_0x551ff4(0x1ea)][_0x382609][_0x551ff4(0x216)](function(_0x2a0792){var _0x5e03fe=_0x551ff4,_0x4ada8f=_0x2a0792[_0x5e03fe(0x1f3)][_0x5e03fe(0x20e)]()[_0x5e03fe(0x208)]();if(!_0x4e98d6[_0x5e03fe(0x207)]||cme_coordinate_equal(_0x4e98d6[_0x4e98d6[_0x5e03fe(0x207)]-0x1],_0x4ada8f[0x0]))for(let _0x179a7c=_0x4e98d6[_0x5e03fe(0x207)]?0x1:0x0;_0x179a7c<_0x4ada8f['length'];_0x179a7c++){_0x4e98d6[_0x5e03fe(0x1ef)](_0x4ada8f[_0x179a7c]);}else{if(cme_coordinate_equal(_0x4e98d6[0x0],_0x4ada8f[0x0]))for(let _0x24c397=0x1;_0x24c397<_0x4ada8f[_0x5e03fe(0x207)];_0x24c397++){_0x4e98d6['unshift'](_0x4ada8f[_0x24c397]);}else{if(cme_coordinate_equal(_0x4e98d6[0x0],_0x4ada8f[_0x4ada8f[_0x5e03fe(0x207)]-0x1]))for(let _0x1268ca=_0x4ada8f['length']-0x2;_0x1268ca>=0x0;_0x1268ca--){_0x4e98d6['unshift'](_0x4ada8f[_0x1268ca]);}else for(let _0x2d00ca=_0x4ada8f[_0x5e03fe(0x207)]-0x2;_0x2d00ca>=0x0;_0x2d00ca--){_0x4e98d6[_0x5e03fe(0x1ef)](_0x4ada8f[_0x2d00ca]);}}}});}_0x4689cc[_0x551ff4(0x1f6)]=_0x37b660,_0x4689cc[_0x551ff4(0x1e9)]['getGeometry']()[_0x551ff4(0x1f2)](_0x37b660);}),_0x2636e8;}[_0x584a6a(0x1f8)](_0x4c3bfe){var _0x140fa4=_0x584a6a;this[_0x140fa4(0x1f1)][_0x140fa4(0x216)](function(_0x38a1e3){var _0x3afefc=_0x140fa4,_0x391e59=_0x38a1e3[_0x3afefc(0x1f5)](_0x3afefc(0x1f3))[0x0][_0x3afefc(0x1e9)][_0x3afefc(0x20e)]()[_0x3afefc(0x203)]();_0x38a1e3[_0x3afefc(0x1e2)](_0x38a1e3['get']('geom')[_0x3afefc(0x1f8)]({'area':_0x4c3bfe[_0x3afefc(0x1e6)],'dist':_0x4c3bfe['dist'],'ratio':_0x4c3bfe[_0x3afefc(0x1e1)],'minPoints':_0x4c3bfe[_0x3afefc(0x213)],'keepEnds':/Polygon/[_0x3afefc(0x1f0)](_0x391e59)?!![]:_0x4c3bfe[_0x3afefc(0x1f4)]}));});}[_0x584a6a(0x215)](_0x439138){var _0x3f8d77=_0x584a6a;this['_edges'][_0x3f8d77(0x216)](function(_0xd6464c){var _0x4cecdf=_0x3f8d77;_0xd6464c[_0x4cecdf(0x1e2)](_0xd6464c[_0x4cecdf(0x1f5)]('geom')[_0x4cecdf(0x215)](_0x439138));});}[_0x584a6a(0x1fb)](_0x489450,_0x3174bd){var _0x5bc03e=_0x584a6a,_0x559744={},_0x4d0638,_0x1a1f02;function _0x4b0939(_0x8f9321,_0x452a90,_0x43925c){var _0x3d8d8b=_0xee1d,_0x49982e=_0x452a90[_0x3d8d8b(0x1ee)][0x0]+'-'+_0x452a90[_0x3d8d8b(0x1ee)][0x1],_0x1364ff=_0x559744[_0x49982e];!_0x1364ff&&(_0x49982e=_0x452a90[_0x3d8d8b(0x1ee)][0x1]+'-'+_0x452a90[_0x3d8d8b(0x1ee)][0x0],_0x1364ff=_0x559744[_0x49982e]);if(_0x1364ff)_0x1364ff[_0x3d8d8b(0x1f3)][_0x3d8d8b(0x1ef)]({'feature':_0x8f9321,'contour':_0x452a90[_0x3d8d8b(0x1ea)],'index':_0x43925c}),_0x4d0638='';else{var _0x3282a0={'geometry':_0x452a90[_0x3d8d8b(0x1ee)],'edge':[{'feature':_0x8f9321,'contour':_0x452a90[_0x3d8d8b(0x1ea)],'index':_0x43925c}],'prev':_0x4d0638===_0x452a90[_0x3d8d8b(0x1ea)]?_0x1a1f02:![]};_0x4d0638=_0x452a90[_0x3d8d8b(0x1ea)],_0x1a1f02=_0x3282a0,_0x559744[_0x49982e]=_0x3282a0;}}_0x489450[_0x5bc03e(0x216)](function(_0x588f6d){var _0x2ea316=_0x5bc03e;if(!/Point/[_0x2ea316(0x1f0)](_0x588f6d[_0x2ea316(0x20e)]()[_0x2ea316(0x203)]())){var _0x33fcaa=this[_0x2ea316(0x205)](_0x588f6d[_0x2ea316(0x20e)]()[_0x2ea316(0x208)](),[],'0',_0x3174bd);_0x4d0638='',_0x33fcaa[_0x2ea316(0x216)](function(_0x198d3c,_0x324e93){_0x4b0939(_0x588f6d,_0x198d3c,_0x324e93);});}}['bind'](this));var _0x4fb51e=[];for(var _0x199da1 in _0x559744)_0x4fb51e['push'](_0x559744[_0x199da1]);return _0x4fb51e;}[_0x584a6a(0x205)](_0x48b25e,_0x356daa,_0x2c25f9,_0x11b46e){var _0x18e6f8=_0x584a6a;return _0x48b25e[0x0][0x0][0x0][_0x18e6f8(0x207)]?_0x48b25e['forEach'](function(_0x5a1f5b,_0x451375){var _0x34152d=_0x18e6f8;this[_0x34152d(0x205)](_0x5a1f5b,_0x356daa,_0x2c25f9+'-'+_0x451375,_0x11b46e);}[_0x18e6f8(0x20b)](this)):_0x48b25e[_0x18e6f8(0x216)](function(_0x526e75,_0x351eb6){var _0x3a26e4,_0x46bc65=_0x526e75[0x0],_0x47f543=_0x2c25f9+'-'+_0x351eb6;for(var _0x23cfce=0x1;_0x23cfce<_0x526e75['length'];_0x23cfce++){_0x3a26e4=_0x526e75[_0x23cfce],!cme_coordinate_equal(_0x46bc65,_0x3a26e4)&&_0x356daa['push']({'seg':[_0x46bc65,_0x3a26e4],'contour':_0x47f543}),_0x46bc65=_0x3a26e4;}}),_0x356daa;}[_0x584a6a(0x1df)](_0x568a2e){var _0x30e0cb=_0x584a6a;function _0x1bf7d2(_0x5c083a,_0xe76c51){var _0x30a65b=_0xee1d;if(_0x5c083a[_0x30a65b(0x207)]===_0xe76c51[_0x30a65b(0x207)]){var _0x1fc2a4,_0x11a211,_0x5576ac;for(var _0x51e2fd=0x0;_0x51e2fd<_0x5c083a['length'];_0x51e2fd++){_0x11a211=_0x5c083a[_0x51e2fd],_0x1fc2a4=![];for(var _0x189891=0x0;_0x189891<_0xe76c51[_0x30a65b(0x207)];_0x189891++){_0x5576ac=_0xe76c51[_0x189891];if(_0x11a211[_0x30a65b(0x1e9)]===_0x5576ac['feature']&&_0x11a211['contour']===_0x5576ac[_0x30a65b(0x1ea)]){_0x1fc2a4=!![];break;}}if(!_0x1fc2a4)return![];}return!![];}return![];}function _0x3599b4(_0x3f259b){var _0x8c1b8d=_0xee1d;if(_0x3f259b[_0x8c1b8d(0x1ed)])return;var _0x391cb7=_0x3f259b[_0x8c1b8d(0x214)];if(!_0x391cb7)return;if(_0x1bf7d2(_0x3f259b[_0x8c1b8d(0x1f3)],_0x391cb7[_0x8c1b8d(0x1f3)])){_0x391cb7[_0x8c1b8d(0x1ed)]=!![];var _0x319a2d=_0x391cb7[_0x8c1b8d(0x1ff)],_0x11eb0c=_0x3f259b[_0x8c1b8d(0x1ff)];_0x11eb0c[_0x8c1b8d(0x209)](),_0x3f259b[_0x8c1b8d(0x1ff)]=_0x319a2d[_0x8c1b8d(0x1fc)](_0x11eb0c),_0x3f259b[_0x8c1b8d(0x214)]=_0x391cb7[_0x8c1b8d(0x214)],_0x3599b4(_0x3f259b);}}_0x568a2e['forEach'](_0x3599b4);var _0x33820c=[];return _0x568a2e[_0x30e0cb(0x216)](function(_0x2da48a){var _0x5a525e=_0x30e0cb;!_0x2da48a['del']&&_0x33820c[_0x5a525e(0x1ef)](new _0x27e10e({'geometry':new _0x21d32c(_0x2da48a[_0x5a525e(0x1ff)]),'geom':new _0x21d32c(_0x2da48a['geometry']),'edge':_0x2da48a[_0x5a525e(0x1f3)],'prev':_0x2da48a[_0x5a525e(0x214)]}));}),_0x33820c;}};export default cme_geom_Simplificator;