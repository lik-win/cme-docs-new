const _0x4d8939=_0x5d23;(function(_0xc081cc,_0x22f059){const _0x37a842=_0x5d23,_0x8f46c6=_0xc081cc();while(!![]){try{const _0x1cc8e8=parseInt(_0x37a842(0x216))/0x1*(parseInt(_0x37a842(0x204))/0x2)+-parseInt(_0x37a842(0x1d2))/0x3+-parseInt(_0x37a842(0x200))/0x4*(parseInt(_0x37a842(0x1e4))/0x5)+parseInt(_0x37a842(0x206))/0x6*(-parseInt(_0x37a842(0x21a))/0x7)+-parseInt(_0x37a842(0x20f))/0x8+-parseInt(_0x37a842(0x1e1))/0x9+parseInt(_0x37a842(0x21c))/0xa;if(_0x1cc8e8===_0x22f059)break;else _0x8f46c6['push'](_0x8f46c6['shift']());}catch(_0x200a93){_0x8f46c6['push'](_0x8f46c6['shift']());}}}(_0x2226,0xf0516));import _0x444374 from'../../../../source/ImageCanvas.js';import _0xcbbea3 from'../../../../layer/Image.js';function _0x5d23(_0x344c72,_0x4b5df4){const _0x2226f9=_0x2226();return _0x5d23=function(_0x5d23fe,_0x3a7d37){_0x5d23fe=_0x5d23fe-0x1c0;let _0xd20188=_0x2226f9[_0x5d23fe];return _0xd20188;},_0x5d23(_0x344c72,_0x4b5df4);}import{transformExtent,transform}from'../../../../proj.js';function _0x2226(){const _0x294ffc=['texParameterf','uBuffer_','aVertexCoords','windData','uniform1f','vertexCoordsBuffer','rgb(142,\x20179,\x20184)','getImageData','getExtension','createTexture','worldPixelRatio','this.layer.getProperties()','setProperties','vBuffer_','616089fcbKOV','_render','rgb(104,\x20180,\x20179)','setFillData','opacity','?v=','createGL','updateLatLngCoords','makeCilirRamp','windTexture','getCode','_getScaleBounds','height','bindAttribute','uniform1i','5450031mGNPsF','getProjection','u_max','1165EMvgAz','onload','windImage','TEXTURE_MIN_FILTER','rgb(57,\x2091,\x20147)','random','getProperties','TEXTURE_WRAP_T','TEXTURE1','createBuffer','createLinearGradient','log','abs','EPSG:3857','getContext','uTexture','activeTexture','drawArrays','_boundsToCoords','latLngCoordsBuffer','TEXTURE0','u_min','ramp_max','addfillWebGLLayer','addColorStop','WEBKIT_EXT_texture_filter_anisotropic','viewport','BLEND','100RhpnYU','webgl','EXT_texture_filter_anisotropic','anonymous','3452886trLWly','map','18vALDtR','LUMINANCE','activateTexture','texImage2D','width','FLOAT','useProgram','min','LINEAR','2236384uGudKS','aLatLngCoords','max','rgb(170,\x2084,\x2067)','TEXTURE_WRAP_S','getView','uColorRamp','1MEVbuN','worldExtent','getPixelFromCoordinate','TEXTURE_2D','1284178cAPaoT','canvas','9045560VGjvNE','createElement','InitWebGLFunction','rgb(58,\x20117,\x2053)','_glOpts','bindTexture','createProgram','setSource','fillRect','params','program','rgb(173,\x20136,\x2057)','colorRampTexture','CLAMP_TO_EDGE','TRIANGLE_STRIP','layer','colors','length','enable','dataUrl','EPSG:4326','dataHeight_','ramp_min'];_0x2226=function(){return _0x294ffc;};return _0x2226();}import*as _0x202020 from'./utilFill.js';import _0x22081e from'../shaders/fill.vert.glsl.js';import _0xed5ce4 from'../shaders/fill.frag.glsl-3857.js';export class fillWebGLLayer{constructor(){const _0x4302c5=_0x5d23;this['colors']=[[0x3de,'rgb(94,60,81)'],[0x3e3,_0x4302c5(0x212)],[0x3e8,_0x4302c5(0x227)],[0x3ed,_0x4302c5(0x21f)],[0x3f2,_0x4302c5(0x1e8)],[0x3f7,'rgb(57,\x20131,\x20147)'],[0x3fc,'rgb(57,\x20131,\x20147)'],[0x401,_0x4302c5(0x1d4)],[0x406,_0x4302c5(0x1ca)]],this[_0x4302c5(0x220)]='',this[_0x4302c5(0x205)]='',this[_0x4302c5(0x1c7)]='',this['canvas']='',this['gl']='',this['program']='',this[_0x4302c5(0x1db)]='',this[_0x4302c5(0x22b)],this['colorRampTexture']='',this[_0x4302c5(0x1c9)]='',this['latLngCoordsBuffer']='',this[_0x4302c5(0x217)]='',this[_0x4302c5(0x1ce)]='',this[_0x4302c5(0x1e6)]='';}async[_0x4d8939(0x1fb)](_0x54eea6){return await new Promise(_0x11f34c=>{const _0x22319c=_0x5d23;this['map']=_0x54eea6['map'];let _0x3f1f75=_0x54eea6['params'];this['windData']=_0x3f1f75[_0x22319c(0x1c7)],this['opacity']=_0x3f1f75['opacity'],this['colors']=_0x3f1f75['colors'],this['canvas']=document[_0x22319c(0x21d)](_0x22319c(0x21b)),this['gl']=this[_0x22319c(0x1d8)](this[_0x22319c(0x21b)]),this['windImage']=new Image(),this[_0x22319c(0x1e6)]['crossOrigin']=_0x22319c(0x203),this[_0x22319c(0x1e6)]['src']=this['windData'][_0x22319c(0x1c0)]+_0x22319c(0x1d7)+Math[_0x22319c(0x1e9)](),this['windImage'][_0x22319c(0x1e5)]=()=>{const _0x315032=_0x22319c;let _0x9cea53=this['map'][_0x315032(0x214)]()[_0x315032(0x1e2)]()[_0x315032(0x1dc)]();this[_0x315032(0x226)]=_0x202020[_0x315032(0x222)](this['gl'],_0x22081e,_0xed5ce4),this['gl'][_0x315032(0x20c)](this[_0x315032(0x226)][_0x315032(0x226)]),this[_0x315032(0x228)]=_0x202020[_0x315032(0x1cd)](this['gl'],this['gl'][_0x315032(0x20e)],this[_0x315032(0x1da)](this[_0x315032(0x22c)]),0x10,0x10),this[_0x315032(0x1c9)]=_0x202020[_0x315032(0x1ed)](this['gl'],new Float32Array([-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1,-0x1])),this[_0x315032(0x1f7)]=_0x202020[_0x315032(0x1ed)](this['gl'],new Float32Array([0x0,0x1,0x0,0x0,0x1,0x1,0x1,0x0])),this[_0x315032(0x1db)]=_0x202020[_0x315032(0x1cd)](this['gl'],this['gl']['LINEAR'],this[_0x315032(0x1e6)]);let _0x511024=this;const _0x390ccf=new _0x444374({'ratio':0x1,'projection':this[_0x315032(0x205)][_0x315032(0x214)]()[_0x315032(0x1e2)]()[_0x315032(0x1dc)](),'canvasFunction':(_0x5ebe47,_0x5ac5ab,_0x15a441,_0x105281)=>{const _0x57c0c6=_0x315032;return this[_0x57c0c6(0x217)]=_0x5ebe47,this['worldPixelRatio']=_0x15a441,this[_0x57c0c6(0x21b)]['width']=_0x105281[0x0],this[_0x57c0c6(0x21b)][_0x57c0c6(0x1de)]=_0x105281[0x1],this['gl'][_0x57c0c6(0x1fe)](0x0,0x0,this[_0x57c0c6(0x21b)][_0x57c0c6(0x20a)],this[_0x57c0c6(0x21b)][_0x57c0c6(0x1de)]),_0x511024['setFillData'](this[_0x57c0c6(0x1c7)]),this[_0x57c0c6(0x21b)];}});return this['layer']=new _0xcbbea3({'source':_0x390ccf}),this[_0x315032(0x22b)][_0x315032(0x1d0)](_0x54eea6[_0x315032(0x225)]),console[_0x315032(0x1ef)](_0x315032(0x1cf),this[_0x315032(0x22b)][_0x315032(0x1ea)]()),_0x11f34c(this[_0x315032(0x22b)]);};});}[_0x4d8939(0x21e)](_0x46cf25){const _0x3de5d5=_0x4d8939;this[_0x3de5d5(0x205)]=_0x46cf25['map'];let _0xed4f09=_0x46cf25[_0x3de5d5(0x225)];this[_0x3de5d5(0x1c7)]=_0xed4f09['windData'],this[_0x3de5d5(0x1d6)]=_0xed4f09[_0x3de5d5(0x1d6)],this[_0x3de5d5(0x22c)]=_0xed4f09['colors'],this[_0x3de5d5(0x21b)]=document['createElement'](_0x3de5d5(0x21b)),this['gl']=this[_0x3de5d5(0x1d8)](this['canvas']);let _0x3c3bda=this[_0x3de5d5(0x205)][_0x3de5d5(0x214)]()['getProjection']()[_0x3de5d5(0x1dc)]();this[_0x3de5d5(0x226)]=_0x202020[_0x3de5d5(0x222)](this['gl'],_0x22081e,_0xed5ce4),this['gl'][_0x3de5d5(0x20c)](this[_0x3de5d5(0x226)][_0x3de5d5(0x226)]),this[_0x3de5d5(0x228)]=_0x202020[_0x3de5d5(0x1cd)](this['gl'],this['gl']['LINEAR'],this[_0x3de5d5(0x1da)](this[_0x3de5d5(0x22c)]),0x10,0x10),this['vertexCoordsBuffer']=_0x202020[_0x3de5d5(0x1ed)](this['gl'],new Float32Array([-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1,-0x1])),this['latLngCoordsBuffer']=_0x202020[_0x3de5d5(0x1ed)](this['gl'],new Float32Array([0x0,0x1,0x0,0x0,0x1,0x1,0x1,0x0])),this['windTexture']=_0x202020['createTexture'](this['gl'],this['gl'][_0x3de5d5(0x20e)],this[_0x3de5d5(0x1e6)]);let _0x3ad242=this;const _0x4bc910=new _0x444374({'ratio':0x1,'projection':this[_0x3de5d5(0x205)][_0x3de5d5(0x214)]()['getProjection']()[_0x3de5d5(0x1dc)](),'canvasFunction':(_0x2337ed,_0xa1ca36,_0x3ef4ca,_0x311b6c)=>{const _0x4292c1=_0x3de5d5;return this[_0x4292c1(0x217)]=_0x2337ed,this[_0x4292c1(0x1ce)]=_0x3ef4ca,this[_0x4292c1(0x21b)][_0x4292c1(0x20a)]=_0x311b6c[0x0],this['canvas'][_0x4292c1(0x1de)]=_0x311b6c[0x1],this['gl'][_0x4292c1(0x1fe)](0x0,0x0,this[_0x4292c1(0x21b)][_0x4292c1(0x20a)],this['canvas']['height']),_0x3ad242['setFillData'](this[_0x4292c1(0x1c7)]),this[_0x4292c1(0x21b)];}});return _0x4bc910;}['UpdateDataSource'](_0x4f233f){const _0x171282=_0x4d8939;let _0x5251d0=this[_0x171282(0x21e)](_0x4f233f);this['layer'][_0x171282(0x223)](_0x5251d0),this['layer']['setProperties'](_0x4f233f[_0x171282(0x225)]);}['createGL'](_0x5f297b){const _0x55e154=_0x4d8939;this['_glOpts']={'antialiasing':!![],'alpha':!![]};let _0x1b0efb=_0x5f297b[_0x55e154(0x1f2)](_0x55e154(0x201),this['_glOpts'])||_0x5f297b['getContext']('experimental-webgl',this[_0x55e154(0x220)]);if(_0x1b0efb){let _0xb2d031=_0x1b0efb[_0x55e154(0x1cc)](_0x55e154(0x202))||_0x1b0efb[_0x55e154(0x1cc)]('MOZ_EXT_texture_filter_anisotropic')||_0x1b0efb[_0x55e154(0x1cc)](_0x55e154(0x1fd));if(!_0xb2d031){}}else{}return _0x1b0efb;}[_0x4d8939(0x1d5)](_0xb4f335){this['_render']();}[_0x4d8939(0x1d3)](){const _0x5da7ff=_0x4d8939;this['gl'][_0x5da7ff(0x1fe)](0x0,0x0,this['gl'][_0x5da7ff(0x21b)][_0x5da7ff(0x20a)],this['gl'][_0x5da7ff(0x21b)][_0x5da7ff(0x1de)]),this['gl']['clearColor'](0.5,0.5,0.5,0x0),this['gl'][_0x5da7ff(0x22e)](this['gl'][_0x5da7ff(0x1ff)]);let _0x1ec60e=this[_0x5da7ff(0x1dd)]();this['updateLatLngCoords'](this[_0x5da7ff(0x1f6)](_0x1ec60e)),_0x202020[_0x5da7ff(0x1df)](this['gl'],this[_0x5da7ff(0x1c9)],this[_0x5da7ff(0x226)][_0x5da7ff(0x1c6)],0x2),_0x202020['bindAttribute'](this['gl'],this['latLngCoordsBuffer'],this[_0x5da7ff(0x226)][_0x5da7ff(0x210)],0x2),this['gl']['uniform1f'](this[_0x5da7ff(0x226)][_0x5da7ff(0x1f9)],this[_0x5da7ff(0x1c7)][_0x5da7ff(0x20d)]),this['gl'][_0x5da7ff(0x1c8)](this[_0x5da7ff(0x226)][_0x5da7ff(0x1e3)],this['windData'][_0x5da7ff(0x211)]),_0x202020['bindTexture'](this['gl'],this[_0x5da7ff(0x1db)],0x0),_0x202020['bindTexture'](this['gl'],this[_0x5da7ff(0x228)],0x1),this['gl'][_0x5da7ff(0x1e0)](this[_0x5da7ff(0x226)][_0x5da7ff(0x1f3)],0x0),this['gl'][_0x5da7ff(0x1e0)](this[_0x5da7ff(0x226)][_0x5da7ff(0x215)],0x1),this['gl'][_0x5da7ff(0x1f5)](this['gl'][_0x5da7ff(0x22a)],0x0,0x4);}[_0x4d8939(0x1dd)](){const _0x4bc629=_0x4d8939;let _0x15ab3a=this[_0x4bc629(0x205)]['getView']()[_0x4bc629(0x1e2)]()[_0x4bc629(0x1dc)](),_0x403171=0x0,_0x311584=0x0;if(_0x15ab3a==_0x4bc629(0x1f1))_0x403171=this[_0x4bc629(0x205)][_0x4bc629(0x218)](transform([-0xb4,85.05112877980659],_0x4bc629(0x1c1),_0x15ab3a)),_0x311584=this['map']['getPixelFromCoordinate'](transform([0xb4,-85.05112877980659],'EPSG:4326',_0x15ab3a));else{if(_0x15ab3a==_0x4bc629(0x1c1))_0x403171=this[_0x4bc629(0x205)][_0x4bc629(0x218)](transform([-0xb4,0x5a],_0x4bc629(0x1c1),_0x15ab3a)),_0x311584=this['map']['getPixelFromCoordinate'](transform([0xb4,-0x5a],_0x4bc629(0x1c1),_0x15ab3a));else _0x15ab3a=='Albers'&&(_0x403171=this[_0x4bc629(0x205)]['getPixelFromCoordinate'](transform([-0xb3,0x5a],'EPSG:4326',_0x15ab3a)),_0x311584=this[_0x4bc629(0x205)]['getPixelFromCoordinate'](transform([0xb3,-0x5a],_0x4bc629(0x1c1),_0x15ab3a)));}let _0xdd7df0=Math[_0x4bc629(0x1f0)](_0x311584[0x0]-_0x403171[0x0]),_0x1fd613=Math[_0x4bc629(0x1f0)](_0x311584[0x1]-_0x403171[0x1]),_0x28f4fd=this[_0x4bc629(0x205)]['getPixelFromCoordinate']([this['worldExtent'][0x0],this[_0x4bc629(0x217)][0x3]]),_0xb01e1b=[];_0xb01e1b[0x0]=_0x28f4fd[0x0]-_0x403171[0x0],_0xb01e1b[0x1]=_0x28f4fd[0x1]-_0x403171[0x1];let _0x13f1d0=this['map'][_0x4bc629(0x218)]([this['worldExtent'][0x2],this['worldExtent'][0x1]]),_0x44e269=[];_0x44e269[0x0]=_0x13f1d0[0x0]-_0x403171[0x0],_0x44e269[0x1]=_0x13f1d0[0x1]-_0x403171[0x1];let _0x21848e=_0xb01e1b[0x0],_0x14d1e1=_0x44e269[0x0],_0xf6f5eb=_0xb01e1b[0x1],_0x5a3e12=_0x44e269[0x1],_0x5b7042=_0x21848e/_0xdd7df0-0.5,_0x2f15c4=_0x14d1e1/_0xdd7df0-0.5,_0x43b2d0=0x1-_0xf6f5eb/_0x1fd613,_0x139885=0x1-_0x5a3e12/_0x1fd613;return[_0x5b7042,_0x2f15c4,_0x139885,_0x43b2d0];}['_boundsToCoords'](_0x2de946){let _0x3227e1=[_0x2de946[0x0],_0x2de946[0x3],_0x2de946[0x0],_0x2de946[0x2],_0x2de946[0x1],_0x2de946[0x3],_0x2de946[0x1],_0x2de946[0x2]];return _0x3227e1;}[_0x4d8939(0x208)](_0x5e740f,_0x47d1b8,_0x2a2662){const _0x247a2f=_0x4d8939;this['gl'][_0x247a2f(0x1f4)](_0x47d1b8===0x0?this['gl'][_0x247a2f(0x1f8)]:this['gl'][_0x247a2f(0x1ec)]);const _0x2e1544=this['gl'][_0x247a2f(0x1cd)]();this['gl'][_0x247a2f(0x221)](this['gl'][_0x247a2f(0x219)],_0x2e1544),this['gl'][_0x247a2f(0x1c4)](this['gl'][_0x247a2f(0x219)],this['gl']['TEXTURE_MAG_FILTER'],this['gl'][_0x247a2f(0x20e)]),this['gl']['texParameterf'](this['gl'][_0x247a2f(0x219)],this['gl'][_0x247a2f(0x1e7)],this['gl'][_0x247a2f(0x20e)]),this['gl']['texParameteri'](this['gl']['TEXTURE_2D'],this['gl'][_0x247a2f(0x213)],this['gl'][_0x247a2f(0x229)]),this['gl']['texParameteri'](this['gl'][_0x247a2f(0x219)],this['gl'][_0x247a2f(0x1eb)],this['gl'][_0x247a2f(0x229)]);const _0x54b6d6=this['gl'][_0x247a2f(0x207)],_0x1cf0d3=_0x2a2662['dataWidth_'],_0x51a161=_0x2a2662[_0x247a2f(0x1c2)],_0x489df9=0x0,_0x20183c=this['gl'][_0x247a2f(0x207)],_0x9dc0a3=this['gl'][_0x247a2f(0x20b)],_0x36bcb0=_0x47d1b8===0x0?_0x2a2662[_0x247a2f(0x1c5)]:_0x2a2662[_0x247a2f(0x1d1)];this['gl'][_0x247a2f(0x209)](this['gl'][_0x247a2f(0x219)],0x0,_0x54b6d6,_0x1cf0d3,_0x51a161,_0x489df9,_0x20183c,_0x9dc0a3,_0x36bcb0);}[_0x4d8939(0x1d9)](_0x400764){const _0x4b5f48=_0x4d8939;this[_0x4b5f48(0x1f7)]=_0x202020[_0x4b5f48(0x1ed)](this['gl'],new Float32Array(_0x400764));}[_0x4d8939(0x1da)](_0x134d6e){const _0x57a3f4=_0x4d8939,_0x1499a8=this[_0x57a3f4(0x22c)][0x0][0x0],_0x382fcf=this['colors'][this[_0x57a3f4(0x22c)]['length']-0x1][0x0];this['gl'][_0x57a3f4(0x1c8)](this['program'][_0x57a3f4(0x1c3)],_0x1499a8),this['gl']['uniform1f'](this['program'][_0x57a3f4(0x1fa)],_0x382fcf);const _0x45ddc0=document[_0x57a3f4(0x21d)](_0x57a3f4(0x21b)),_0xef64d6=_0x45ddc0[_0x57a3f4(0x1f2)]('2d');_0x45ddc0[_0x57a3f4(0x20a)]=0x100,_0x45ddc0['height']=0x1;const _0x1c3ece=_0xef64d6[_0x57a3f4(0x1ee)](0x0,0x0,0x100,0x0);for(let _0x3172c2=0x0;_0x3172c2<this['colors'][_0x57a3f4(0x22d)];_0x3172c2++){const _0x402f03=(this[_0x57a3f4(0x22c)][_0x3172c2][0x0]-_0x1499a8)/(_0x382fcf-_0x1499a8);_0x1c3ece[_0x57a3f4(0x1fc)](_0x402f03,this[_0x57a3f4(0x22c)][_0x3172c2][0x1]);}return _0xef64d6['fillStyle']=_0x1c3ece,_0xef64d6[_0x57a3f4(0x224)](0x0,0x0,0x100,0x1),new Uint8Array(_0xef64d6[_0x57a3f4(0x1cb)](0x0,0x0,0x100,0x1)['data']);}}