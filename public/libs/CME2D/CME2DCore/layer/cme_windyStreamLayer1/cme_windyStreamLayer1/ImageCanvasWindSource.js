function _0x5190(){const _0x314ed1=['getCofCanvasData','getGDALNoData','getResolution','windData','ratio_','bind','loadWindData','getExtension','toDataURL','Your\x20browser\x20doesn`t\x20support\x20anisotropic\x20filtering.\x20\x20Ordinary\x20MIP\x20mapping\x20will\x20be\x20used.','MOZ_EXT_texture_filter_anisotropic','floor','wind/single/2024090512_021/0/0/0.jpg','download','factor','canvasFunction','extent_','getImageInternal','onload','downloadDataURL','myaf','get','href','preSize','createElement','34182DSSVzg','webgl','setWind','getHeight','renderedRevision_','url','width','getWidth','warn','canvasElement','5734917GgWyno','getContext','height','numParticles','appendChild','slice','getCofTifData','resize','13638oQdkUK','resolutions','log','state','1594940eKpruE','ratio','fill','projection','_render','287886qkOIcD','updateBounds','src','findMinMax','88qrwcCt','windData---------------------','4848935hOUYrz','796184fBFhPi','createImageData','length','experimental-webgl','159bSqCLX','findNearestResolution','Your\x20browser\x20doesn`t\x20seem\x20to\x20support\x20WebGL.','_gl','canvas','changed','canvas_','data','stringify','draw','image1.png','newData[0].length','createGL','getRevision','options','putImageData','extent','2024090512_021','bounds','readRasters','interpolate','WEBKIT_EXT_texture_filter_anisotropic','\x20imageData.data.length','30wGIdeJ','getScaleBounds','body','loading','width\x20height\x20','image','_remove','wind','normalbounds','click'];_0x5190=function(){return _0x314ed1;};return _0x5190();}const _0x3b3db1=_0x65ee;(function(_0x3db2a9,_0x5462a5){const _0x14f182=_0x65ee,_0x509c3f=_0x3db2a9();while(!![]){try{const _0x514797=-parseInt(_0x14f182(0xd2))/0x1*(-parseInt(_0x14f182(0xbe))/0x2)+parseInt(_0x14f182(0xac))/0x3*(parseInt(_0x14f182(0xcb))/0x4)+parseInt(_0x14f182(0xc2))/0x5+parseInt(_0x14f182(0xc7))/0x6+parseInt(_0x14f182(0xcd))/0x7+parseInt(_0x14f182(0xce))/0x8+parseInt(_0x14f182(0xb6))/0x9*(-parseInt(_0x14f182(0xe9))/0xa);if(_0x514797===_0x5462a5)break;else _0x509c3f['push'](_0x509c3f['shift']());}catch(_0x3cefee){_0x509c3f['push'](_0x509c3f['shift']());}}}(_0x5190,0x8e32f));import _0x31338c from'../../../ImageCanvas.js';import _0x16e49d from'../../../source/Image.js';import{containsExtent,getHeight,getWidth,scaleFromCenter}from'../../../extent.js';import _0x24e306 from'axios';import _0x2c7abb from'./index.js';import{fromUrl,Pool}from'geotiff';function _0x65ee(_0x166523,_0x2787e1){const _0x51903d=_0x5190();return _0x65ee=function(_0x65ee91,_0x4172f0){_0x65ee91=_0x65ee91-0x9b;let _0x51fa2c=_0x51903d[_0x65ee91];return _0x51fa2c;},_0x65ee(_0x166523,_0x2787e1);}class ImageCanvasWindSource extends _0x16e49d{constructor(_0xbbe20d){const _0x4e1762=_0x65ee;_0xbbe20d=_0xbbe20d?_0xbbe20d:{},super({'attributions':_0xbbe20d['attributions'],'interpolate':_0xbbe20d[_0x4e1762(0xe6)],'projection':_0xbbe20d[_0x4e1762(0xc5)],'resolutions':_0xbbe20d[_0x4e1762(0xbf)],'state':_0xbbe20d[_0x4e1762(0xc1)]}),this[_0x4e1762(0xe0)]=_0xbbe20d,this[_0x4e1762(0xec)]=!![],this[_0x4e1762(0xd8)]=null,this[_0x4e1762(0xb0)]=0x0,this['ratio_']=_0xbbe20d[_0x4e1762(0xc3)]!==undefined?_0xbbe20d[_0x4e1762(0xc3)]:1.5,this['preSize']=null,this[_0x4e1762(0xf6)]=null;}['_renderFunction'](_0x135677){const _0x246444=_0x65ee;return this[_0x246444(0xbc)](_0x135677);}[_0x3b3db1(0xa4)](_0xde2b85,_0x17bdc0,_0x407ff1,_0x494223){const _0x5a21cd=_0x3b3db1;_0x17bdc0=this[_0x5a21cd(0xd3)](_0x17bdc0);let _0x35eae1=this[_0x5a21cd(0xd8)];if(_0x35eae1&&this[_0x5a21cd(0xb0)]==this[_0x5a21cd(0xdf)]()&&_0x35eae1[_0x5a21cd(0xf5)]()==_0x17bdc0&&_0x35eae1['getPixelRatio']()==_0x407ff1&&containsExtent(_0x35eae1['getExtent'](),_0xde2b85))return _0x35eae1;_0xde2b85=_0xde2b85[_0x5a21cd(0xbb)](),scaleFromCenter(_0xde2b85,this[_0x5a21cd(0xf7)]);const _0x128e3d=getWidth(_0xde2b85)/_0x17bdc0,_0x2a14fe=getHeight(_0xde2b85)/_0x17bdc0,_0x36f61d=[_0x128e3d*_0x407ff1,_0x2a14fe*_0x407ff1],_0x129d6a=this[_0x5a21cd(0xa2)](_0xde2b85,_0x17bdc0,_0x407ff1,_0x36f61d,_0x494223);return _0x129d6a&&(_0x35eae1=new _0x31338c(_0xde2b85,_0x17bdc0,_0x407ff1,_0x129d6a)),this['canvas_']=_0x35eae1,this[_0x5a21cd(0xb0)]=this[_0x5a21cd(0xdf)](),_0x35eae1;}[_0x3b3db1(0xa2)](_0x3d4b60,_0x144ec8,_0x223fb2,_0x3ea5cf,_0x39a2d0){const _0x551702=_0x3b3db1;let _0x19d9cc=null;!this[_0x551702(0xb5)]?(_0x19d9cc=document['createElement'](_0x551702(0xd6)),this[_0x551702(0xb5)]=_0x19d9cc,this[_0x551702(0xd5)]=this['createGL'](_0x19d9cc),this['wind']=new _0x2c7abb(this['_gl'],this[_0x551702(0xe0)]),this[_0x551702(0xf0)]['numParticles']=this[_0x551702(0xe0)][_0x551702(0xb9)]||0x3a98):_0x19d9cc=this['canvasElement'];_0x19d9cc[_0x551702(0xb2)]=_0x3ea5cf[0x0],_0x19d9cc[_0x551702(0xb8)]=_0x3ea5cf[0x1];if(!this[_0x551702(0xec)]){const _0x22281d=this[_0x551702(0xea)](_0x3d4b60,_0x39a2d0[_0x551702(0xa3)]);this[_0x551702(0xf0)][_0x551702(0xc8)](_0x22281d),(this[_0x551702(0xaa)][0x0]!=_0x3ea5cf[0x0]||this[_0x551702(0xaa)][0x1]!=_0x3ea5cf[0x1])&&this[_0x551702(0xf0)][_0x551702(0xbd)](),this['wind'][_0x551702(0xdb)]();}return this[_0x551702(0xaa)]=_0x3ea5cf,_0x19d9cc;}[_0x3b3db1(0xf9)](){const _0x5bd941=_0x3b3db1,_0x23d544=this[_0x5bd941(0xe0)]['jsonUrl'],_0x5d38db=this['options']['imageUrl'];_0x24e306({'method':_0x5bd941(0xa8),'url':_0x23d544,'responseType':'json'})['then'](_0x3c1e1c=>{const _0x3e01ff=_0x5bd941;let _0x169b6f=_0x3c1e1c[_0x3e01ff(0xd9)];const _0x1c6337=new Image();_0x169b6f[_0x3e01ff(0xee)]=_0x1c6337,_0x1c6337['src']=_0x5d38db,_0x1c6337[_0x3e01ff(0xa5)]=()=>{const _0x560d7c=_0x3e01ff;this['windData']=_0x169b6f,console['log'](_0x560d7c(0xf6)),console[_0x560d7c(0xc0)](_0x169b6f),this['wind'][_0x560d7c(0xae)](_0x169b6f),this[_0x560d7c(0xf0)]['resize'](),this[_0x560d7c(0xec)]=![];};}),this['myaf']=requestAnimationFrame(this[_0x5bd941(0xc6)][_0x5bd941(0xf8)](this));}['getWorkerPool'](){let _0x4f169c;return!_0x4f169c&&(_0x4f169c=new Pool()),_0x4f169c;}async[_0x3b3db1(0xbc)](_0x5caf9b){const _0x1b3e5c=_0x3b3db1;let _0x200b8b=_0x5caf9b[_0x1b3e5c(0xb1)];console[_0x1b3e5c(0xc0)](_0x1b3e5c(0xb1),_0x5caf9b);let _0x34b125=_0x5caf9b[_0x1b3e5c(0xa1)]||0xa;console[_0x1b3e5c(0xc0)](_0x1b3e5c(0xa1),_0x34b125);const _0x57cf8a=await fromUrl(_0x200b8b),_0x75df04=await _0x57cf8a['getImage'](),_0xaf3f69=_0x75df04[_0x1b3e5c(0xb3)](),_0x2266ae=_0x75df04[_0x1b3e5c(0xaf)](),_0x3f5453=_0x75df04['getBoundingBox'](),_0x569593=_0x75df04[_0x1b3e5c(0xf4)](),_0xc063ed=Math[_0x1b3e5c(0x9e)](_0xaf3f69/_0x34b125),_0x57bb36=Math['floor'](_0x2266ae/_0x34b125);let _0x5a110e=0xf4240,_0x5b6e79=-_0x5a110e;const _0x468ec9=await _0x75df04[_0x1b3e5c(0xe5)]({'pool':this['getWorkerPool']()}),_0x26c697=new Array(_0xc063ed*_0x57bb36)[_0x1b3e5c(0xc4)](0x0),_0x41923d=new Array(_0xc063ed*_0x57bb36)[_0x1b3e5c(0xc4)](0x0);console[_0x1b3e5c(0xc0)]('width\x20height\x20',_0xc063ed,_0x57bb36);const _0x267568=document[_0x1b3e5c(0xab)](_0x1b3e5c(0xd6));_0x267568[_0x1b3e5c(0xb2)]=_0xc063ed,_0x267568[_0x1b3e5c(0xb8)]=_0x57bb36;const _0x54347e=_0x267568[_0x1b3e5c(0xb7)]('2d'),_0x482713=_0x54347e['createImageData'](_0xc063ed,_0x57bb36);console[_0x1b3e5c(0xc0)](_0x1b3e5c(0xe8),_0x482713[_0x1b3e5c(0xd9)][_0x1b3e5c(0xd0)]);let _0x13333b=0x0;for(let _0xebee5a=0x0;_0xebee5a<_0x2266ae;_0xebee5a+=_0x34b125){for(let _0x4e163b=0x0;_0x4e163b<_0xaf3f69;_0x4e163b+=_0x34b125){const _0x18fdf8=Math[_0x1b3e5c(0x9e)](_0x4e163b/_0x34b125),_0x3e1078=Math['floor'](_0xebee5a/_0x34b125),_0x5544a5=_0xebee5a*_0xaf3f69+_0x4e163b,_0x5a4d5c=_0x3e1078*_0xc063ed+_0x18fdf8;_0x26c697[_0x5a4d5c]+=_0x468ec9[0x0][_0x5544a5],_0x41923d[_0x5a4d5c]+=_0x468ec9[0x1][_0x5544a5],_0x13333b++;}}let _0x5cd17b=[_0x26c697,_0x41923d];const {min:_0x5e281f,max:_0x1e99e5}=this['findMinMax'](_0x5cd17b[0x0]),{min:_0x838930,max:_0x203727}=this[_0x1b3e5c(0xca)](_0x5cd17b[0x1]);console[_0x1b3e5c(0xc0)](_0x1b3e5c(0xdd),_0x5cd17b[0x0]['length']);for(let _0x1c1303=0x0;_0x1c1303<_0x5cd17b[0x0][_0x1b3e5c(0xd0)];_0x1c1303++){let _0x4e2f8e=_0x5cd17b[0x0][_0x1c1303],_0x262f78=_0x5cd17b[0x1][_0x1c1303];_0x482713[_0x1b3e5c(0xd9)][_0x1c1303*0x4]=Math['floor'](0xff*(_0x4e2f8e-_0x5e281f)/(_0x1e99e5-_0x5e281f)),_0x482713['data'][_0x1c1303*0x4+0x1]=Math[_0x1b3e5c(0x9e)](0xff*(_0x262f78-_0x838930)/(_0x203727-_0x838930)),_0x482713[_0x1b3e5c(0xd9)][_0x1c1303*0x4+0x2]=0xff,_0x482713['data'][_0x1c1303*0x4+0x3]=0xff;}console[_0x1b3e5c(0xc0)](_0x1b3e5c(0xed),_0x267568[_0x1b3e5c(0xb2)],_0x267568[_0x1b3e5c(0xb8)]),_0x54347e[_0x1b3e5c(0xe1)](_0x482713,0x0,0x0);const _0x15ddd8=_0x267568[_0x1b3e5c(0x9b)](),_0x424f20=_0x5caf9b['projCode']||0x10e6;console[_0x1b3e5c(0xc0)](_0x1b3e5c(0xe4),JSON[_0x1b3e5c(0xda)](_0x3f5453));let _0x1142d2=this[_0x1b3e5c(0xea)](_0x3f5453,[-0xb4,-0x5a,0xb4,0x5a]);console['log'](_0x1b3e5c(0xf1),JSON[_0x1b3e5c(0xda)](_0x1142d2));let _0x28cbc2={'url':_0x5caf9b[_0x1b3e5c(0xb1)],'image':_0x15ddd8,'projCode':_0x424f20,'layerExtent':_0x5caf9b[_0x1b3e5c(0xe2)]||[-0xb4,-0x5a,0xb4,0x5a],'date':_0x1b3e5c(0xe3),'mode':null,'width':_0xc063ed,'height':_0x57bb36,'minzoom':0x0,'maxzoom':0x0,'tiles':_0x1b3e5c(0x9f),'uMax':_0x1e99e5,'uMin':_0x5e281f,'vMax':_0x203727,'vMin':_0x838930};console[_0x1b3e5c(0xc0)](_0x1b3e5c(0xcc),_0x28cbc2);const _0xe3960c=new Image();_0x28cbc2[_0x1b3e5c(0xee)]=_0xe3960c,_0xe3960c[_0x1b3e5c(0xc9)]=_0x15ddd8,_0xe3960c['onload']=()=>{const _0x27bce0=_0x1b3e5c;this[_0x27bce0(0xf6)]=_0x28cbc2,console[_0x27bce0(0xc0)]('windData'),console['log'](_0x28cbc2),this['wind'][_0x27bce0(0xae)](_0x28cbc2),this[_0x27bce0(0xf0)][_0x27bce0(0xbd)](),this[_0x27bce0(0xec)]=![];},this[_0x1b3e5c(0xa7)]=requestAnimationFrame(this[_0x1b3e5c(0xc6)]['bind'](this));}[_0x3b3db1(0xf3)](_0x168fac,_0x444aee,_0x543386,_0x5edb07,_0x4a1219,_0x40a6c8,_0x5e2497){const _0x25ec25=_0x3b3db1,_0x18b200=document['createElement'](_0x25ec25(0xd6));_0x18b200[_0x25ec25(0xb2)]=_0x168fac,_0x18b200[_0x25ec25(0xb8)]=_0x444aee;const _0x388fa4=_0x18b200[_0x25ec25(0xb7)]('2d'),_0x286b06=_0x388fa4[_0x25ec25(0xcf)](_0x168fac,_0x444aee),_0x5b8800=_0x543386[0x0],_0x2f8322=_0x543386[0x1],_0x4fc095=_0x286b06[_0x25ec25(0xd9)];for(let _0x541132=0x0;_0x541132<_0x5b8800[_0x25ec25(0xd0)];_0x541132++){let _0x16124d=_0x5b8800[_0x541132],_0x43ff3a=_0x2f8322[_0x541132];_0x4fc095[_0x541132*0x4]=_0x5b8800[_0x541132],_0x4fc095[_0x541132*0x4+0x1]=_0x2f8322[_0x541132],_0x4fc095[_0x541132*0x4+0x2]=0x0,_0x4fc095[_0x541132*0x4+0x3]=0xff;}_0x388fa4['putImageData'](_0x286b06,0x0,0x0);let _0x1cfb7a=_0x18b200[_0x25ec25(0x9b)]();return this['downloadDataURL'](_0x1cfb7a,_0x25ec25(0xdc)),_0x1cfb7a;}[_0x3b3db1(0xa6)](_0x40f1a7,_0x60e785){const _0x38e8ea=_0x3b3db1,_0xf50093=document['createElement']('a');_0xf50093[_0x38e8ea(0xa9)]=_0x40f1a7,_0xf50093[_0x38e8ea(0xa0)]=_0x60e785,document[_0x38e8ea(0xeb)][_0x38e8ea(0xba)](_0xf50093),_0xf50093[_0x38e8ea(0xf2)](),document[_0x38e8ea(0xeb)]['removeChild'](_0xf50093);}['findMinMax'](_0x591ae1){const _0xb35637=_0x3b3db1;if(_0x591ae1[_0xb35637(0xd0)]===0x0)return null;let _0x1e86c0=_0x591ae1[0x0],_0x5df0c5=_0x591ae1[0x0];for(let _0x315ddd=0x1;_0x315ddd<_0x591ae1[_0xb35637(0xd0)];_0x315ddd++){if(_0x591ae1[_0x315ddd]<_0x1e86c0)_0x1e86c0=_0x591ae1[_0x315ddd];else _0x591ae1[_0x315ddd]>_0x5df0c5&&(_0x5df0c5=_0x591ae1[_0x315ddd]);}return{'min':_0x1e86c0,'max':_0x5df0c5};}[_0x3b3db1(0xea)](_0x304bf3,_0x3f1e8e){const _0x3a9148=_0x3f1e8e[0x2]-_0x3f1e8e[0x0],_0x1b8700=_0x3f1e8e[0x3]-_0x3f1e8e[0x1];return[(_0x304bf3[0x0]-_0x3f1e8e[0x0])/_0x3a9148,(_0x304bf3[0x2]-_0x3f1e8e[0x0])/_0x3a9148,(_0x304bf3[0x1]-_0x3f1e8e[0x1])/_0x1b8700,(_0x304bf3[0x3]-_0x3f1e8e[0x1])/_0x1b8700];}[_0x3b3db1(0xc6)](){const _0x4f1c63=_0x3b3db1;this[_0x4f1c63(0xf0)]&&this[_0x4f1c63(0xf0)][_0x4f1c63(0xf6)]&&(this[_0x4f1c63(0xf0)]['draw'](),this[_0x4f1c63(0xd7)]()),this[_0x4f1c63(0xa7)]=requestAnimationFrame(this[_0x4f1c63(0xc6)]['bind'](this));}[_0x3b3db1(0xde)](_0x1ce221){const _0x376b2a=_0x3b3db1;let _0x11e690={'antialiasing':!![],'alpha':!![]};var _0xb21fcc=_0x1ce221[_0x376b2a(0xb7)](_0x376b2a(0xad),_0x11e690)||_0x1ce221[_0x376b2a(0xb7)](_0x376b2a(0xd1),_0x11e690);if(_0xb21fcc){let _0x35ab2d=_0xb21fcc['getExtension']('EXT_texture_filter_anisotropic')||_0xb21fcc[_0x376b2a(0xfa)](_0x376b2a(0x9d))||_0xb21fcc[_0x376b2a(0xfa)](_0x376b2a(0xe7));!_0x35ab2d&&console[_0x376b2a(0xb4)](_0x376b2a(0x9c));}else console[_0x376b2a(0xb4)](_0x376b2a(0xd4));return _0xb21fcc;}[_0x3b3db1(0xef)](){const _0xc45cc4=_0x3b3db1;cancelAnimationFrame(this[_0xc45cc4(0xa7)]);}}export default ImageCanvasWindSource;