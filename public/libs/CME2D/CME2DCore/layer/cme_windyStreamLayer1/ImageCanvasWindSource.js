const _0x4bcf8c=_0x1a38;(function(_0x3a05ca,_0x262549){const _0x5f2e61=_0x1a38,_0x2e1598=_0x3a05ca();while(!![]){try{const _0xd39c16=-parseInt(_0x5f2e61(0x154))/0x1*(-parseInt(_0x5f2e61(0x179))/0x2)+parseInt(_0x5f2e61(0x165))/0x3*(-parseInt(_0x5f2e61(0x171))/0x4)+parseInt(_0x5f2e61(0x162))/0x5+parseInt(_0x5f2e61(0x121))/0x6*(parseInt(_0x5f2e61(0x14a))/0x7)+parseInt(_0x5f2e61(0x149))/0x8*(parseInt(_0x5f2e61(0x174))/0x9)+-parseInt(_0x5f2e61(0x156))/0xa+-parseInt(_0x5f2e61(0x151))/0xb*(parseInt(_0x5f2e61(0x153))/0xc);if(_0xd39c16===_0x262549)break;else _0x2e1598['push'](_0x2e1598['shift']());}catch(_0x86b72a){_0x2e1598['push'](_0x2e1598['shift']());}}}(_0x1518,0x3e7fa));import _0x99d734 from'../../../ImageCanvas.js';function _0x1518(){const _0x579206=['webgl','preSize','getScaleBounds','url','getGDALNoData','_remove','getImage','renderedRevision_','image1.png','ratio_','234INVVvt','onload','bind','myaf','wind','_gl','body','then','windData','projection','this.wind.numParticles\x20','findMinMax','createImageData','get','ratio','width\x20height\x20','height','projCode','getWidth','_render','href','_renderFunction','loading','slice','resolutions','getWorkerPool','getRevision','layerExent','length','click','putImageData','getCofCanvasData','resize','floor','extent_','newData---------','setWind','log','fill','canvasElement','16NsvwzW','91049DDHJtD','appendChild','src','canvas','getResolution','bounds','findNearestResolution','75097EbSBzr','Your\x20browser\x20doesn`t\x20support\x20anisotropic\x20filtering.\x20\x20Ordinary\x20MIP\x20mapping\x20will\x20be\x20used.','300ynECVm','1636AWYlaD','experimental-webgl','5062750qubSCV','getContext','updateBounds','layerExoptions.extentent','getHeight','width','image','Your\x20browser\x20doesn`t\x20seem\x20to\x20support\x20WebGL.','canvas_','imageUrl','2024090512_021','EXT_texture_filter_anisotropic','1225085QIWwJL','numParticles','downloadDataURL','27054ObwZPs','attributions','canvasFunction','toDataURL','removeChild','stringify','factor','layerExtent','newData[0].length','getCofTifData','MOZ_EXT_texture_filter_anisotropic','getImageInternal','148KxIKhx','jsonUrl','getExtent','554922CvwowW','getExtension','options','getBoundingBox','createGL','478wnIzdu','createElement','warn','windData---------------------','draw','state','data'];_0x1518=function(){return _0x579206;};return _0x1518();}import _0x14c958 from'../../../source/Image.js';function _0x1a38(_0x4cdf77,_0xe51934){const _0x15180b=_0x1518();return _0x1a38=function(_0x1a3811,_0x2292fd){_0x1a3811=_0x1a3811-0x11c;let _0x532f16=_0x15180b[_0x1a3811];return _0x532f16;},_0x1a38(_0x4cdf77,_0xe51934);}import{containsExtent,getHeight,getWidth,scaleFromCenter}from'../../../extent.js';import _0x483dda from'axios';import _0x331b21 from'./index.js';import{fromUrl,Pool}from'geotiff';class ImageCanvasWindSource extends _0x14c958{constructor(_0x10ecbc){const _0x3e96f0=_0x1a38;_0x10ecbc=_0x10ecbc?_0x10ecbc:{},super({'attributions':_0x10ecbc[_0x3e96f0(0x166)],'interpolate':_0x10ecbc['interpolate'],'projection':_0x10ecbc[_0x3e96f0(0x12a)],'resolutions':_0x10ecbc[_0x3e96f0(0x139)],'state':_0x10ecbc[_0x3e96f0(0x17e)]}),this[_0x3e96f0(0x176)]=_0x10ecbc,this['loading']=!![],this['canvas_']=null,this[_0x3e96f0(0x11e)]=0x0,this[_0x3e96f0(0x120)]=_0x10ecbc[_0x3e96f0(0x12f)]!==undefined?_0x10ecbc[_0x3e96f0(0x12f)]:1.5,this[_0x3e96f0(0x181)]=null,this[_0x3e96f0(0x129)]=null;}[_0x4bcf8c(0x136)](_0x25e720){const _0x230f94=_0x4bcf8c;return this[_0x230f94(0x176)]=_0x25e720,this[_0x230f94(0x16e)](_0x25e720);}[_0x4bcf8c(0x170)](_0x49dfed,_0x179cac,_0x2f10c7,_0x37f33f){const _0xab488c=_0x4bcf8c;_0x179cac=this[_0xab488c(0x150)](_0x179cac);let _0x46f767=this[_0xab488c(0x15e)];if(_0x46f767&&this[_0xab488c(0x11e)]==this[_0xab488c(0x13b)]()&&_0x46f767[_0xab488c(0x14e)]()==_0x179cac&&_0x46f767['getPixelRatio']()==_0x2f10c7&&containsExtent(_0x46f767[_0xab488c(0x173)](),_0x49dfed))return _0x46f767;_0x49dfed=_0x49dfed[_0xab488c(0x138)](),scaleFromCenter(_0x49dfed,this['ratio_']);const _0x139ebf=getWidth(_0x49dfed)/_0x179cac,_0x56a5c0=getHeight(_0x49dfed)/_0x179cac,_0x49178b=[_0x139ebf*_0x2f10c7,_0x56a5c0*_0x2f10c7],_0x259182=this[_0xab488c(0x167)](_0x49dfed,_0x179cac,_0x2f10c7,_0x49178b,_0x37f33f);return _0x259182&&(_0x46f767=new _0x99d734(_0x49dfed,_0x179cac,_0x2f10c7,_0x259182)),this['canvas_']=_0x46f767,this[_0xab488c(0x11e)]=this[_0xab488c(0x13b)](),_0x46f767;}[_0x4bcf8c(0x167)](_0x220399,_0x159bbb,_0x45c050,_0x592b06,_0x3215c3){const _0x59d436=_0x4bcf8c;let _0x762534=null;!this['canvasElement']?(_0x762534=document[_0x59d436(0x17a)](_0x59d436(0x14d)),this[_0x59d436(0x148)]=_0x762534,this[_0x59d436(0x126)]=this['createGL'](_0x762534),this[_0x59d436(0x125)]=new _0x331b21(this[_0x59d436(0x126)],this[_0x59d436(0x176)]),this[_0x59d436(0x125)][_0x59d436(0x163)]=this[_0x59d436(0x176)][_0x59d436(0x163)]||0x3a98,console[_0x59d436(0x146)](_0x59d436(0x12b)+this['wind']['numParticles'])):_0x762534=this[_0x59d436(0x148)];_0x762534[_0x59d436(0x15b)]=_0x592b06[0x0],_0x762534[_0x59d436(0x131)]=_0x592b06[0x1];if(!this[_0x59d436(0x137)]){const _0x2f9030=this[_0x59d436(0x182)](_0x220399,_0x3215c3[_0x59d436(0x143)]);this[_0x59d436(0x129)]['layerExtent']=this[_0x59d436(0x182)](this[_0x59d436(0x129)][_0x59d436(0x14f)],[-0xb4,-0x5a,0xb4,0x5a]),this[_0x59d436(0x125)][_0x59d436(0x158)](_0x2f9030,this[_0x59d436(0x129)][_0x59d436(0x16c)]),(this[_0x59d436(0x181)][0x0]!=_0x592b06[0x0]||this['preSize'][0x1]!=_0x592b06[0x1])&&this[_0x59d436(0x125)]['resize'](),this[_0x59d436(0x125)][_0x59d436(0x17d)]();}return this['preSize']=_0x592b06,_0x762534;}['loadWindData'](){const _0x134141=_0x4bcf8c,_0x57771d=this[_0x134141(0x176)][_0x134141(0x172)],_0xf0bf99=this[_0x134141(0x176)][_0x134141(0x15f)];_0x483dda({'method':_0x134141(0x12e),'url':_0x57771d,'responseType':'json'})[_0x134141(0x128)](_0x165c45=>{const _0x2294e6=_0x134141;let _0x2abac7=_0x165c45[_0x2294e6(0x17f)];const _0x29f74a=new Image();_0x2abac7['image']=_0x29f74a,_0x29f74a['src']=_0xf0bf99,_0x29f74a[_0x2294e6(0x122)]=()=>{const _0x3ebcf0=_0x2294e6;this[_0x3ebcf0(0x129)]=_0x2abac7,console['log'](_0x3ebcf0(0x129)),console[_0x3ebcf0(0x146)](_0x2abac7),this['wind'][_0x3ebcf0(0x145)](_0x2abac7),this[_0x3ebcf0(0x125)][_0x3ebcf0(0x141)](),this[_0x3ebcf0(0x137)]=![];};}),this['myaf']=requestAnimationFrame(this[_0x134141(0x134)][_0x134141(0x123)](this));}['getWorkerPool'](){let _0x3aab3e;return!_0x3aab3e&&(_0x3aab3e=new Pool()),_0x3aab3e;}async[_0x4bcf8c(0x16e)](_0x22f65c){const _0x23c2fe=_0x4bcf8c;let _0x47ebfc=_0x22f65c[_0x23c2fe(0x183)];console[_0x23c2fe(0x146)](_0x23c2fe(0x183),_0x22f65c);let _0x1dde66=_0x22f65c[_0x23c2fe(0x16b)]||0xa;console[_0x23c2fe(0x146)](_0x23c2fe(0x16b),_0x1dde66);const _0x4f716e=await fromUrl(_0x47ebfc),_0x37a22d=await _0x4f716e[_0x23c2fe(0x11d)](),_0x550901=_0x37a22d[_0x23c2fe(0x133)](),_0x56a9f4=_0x37a22d[_0x23c2fe(0x15a)](),_0x5c3abb=_0x37a22d[_0x23c2fe(0x177)](),_0x44b4c9=_0x37a22d[_0x23c2fe(0x184)](),_0x5122ce=Math['floor'](_0x550901/_0x1dde66),_0x58d0de=Math[_0x23c2fe(0x142)](_0x56a9f4/_0x1dde66);let _0x3fcbad=0xf4240,_0x5f55ec=-_0x3fcbad;const _0x155f1d=await _0x37a22d['readRasters']({'pool':this[_0x23c2fe(0x13a)]()}),_0xd8bcd1=new Array(_0x5122ce*_0x58d0de)['fill'](0x0),_0x4680c8=new Array(_0x5122ce*_0x58d0de)[_0x23c2fe(0x147)](0x0);console[_0x23c2fe(0x146)](_0x23c2fe(0x130),_0x5122ce,_0x58d0de);const _0x5c2c46=document[_0x23c2fe(0x17a)](_0x23c2fe(0x14d));_0x5c2c46['width']=_0x5122ce,_0x5c2c46['height']=_0x58d0de;const _0x2a8a04=_0x5c2c46[_0x23c2fe(0x157)]('2d'),_0x41c78d=_0x2a8a04[_0x23c2fe(0x12d)](_0x5122ce,_0x58d0de);let _0x10d2a6=0x0;for(let _0x2e7b1d=0x0;_0x2e7b1d<_0x56a9f4;_0x2e7b1d+=_0x1dde66){for(let _0x205020=0x0;_0x205020<_0x550901;_0x205020+=_0x1dde66){const _0x5c0995=Math[_0x23c2fe(0x142)](_0x205020/_0x1dde66),_0x124a1f=Math[_0x23c2fe(0x142)](_0x2e7b1d/_0x1dde66),_0x5d3ebd=_0x2e7b1d*_0x550901+_0x205020,_0x23e62f=_0x124a1f*_0x5122ce+_0x5c0995;_0xd8bcd1[_0x23e62f]+=_0x155f1d[0x0][_0x5d3ebd],_0x4680c8[_0x23e62f]+=_0x155f1d[0x1][_0x5d3ebd],_0x10d2a6++;}}let _0x2615e4=[_0xd8bcd1,_0x4680c8],{min:_0x364dbf,max:_0x5c89df}=this[_0x23c2fe(0x12c)](_0x2615e4[0x0]),{min:_0x9d6b2c,max:_0x1adde8}=this['findMinMax'](_0x2615e4[0x1]);console[_0x23c2fe(0x146)](_0x23c2fe(0x144),_0x2615e4),console[_0x23c2fe(0x146)]('uMin\x20uMax',_0x364dbf,_0x5c89df),console[_0x23c2fe(0x146)]('vMin\x20vMax',_0x9d6b2c,_0x1adde8),console[_0x23c2fe(0x146)](_0x23c2fe(0x16d),_0x2615e4[0x0][_0x23c2fe(0x13d)]);for(let _0x294426=0x0;_0x294426<_0x2615e4[0x0][_0x23c2fe(0x13d)];_0x294426++){let _0x23283b=_0x2615e4[0x0][_0x294426],_0x2232c5=_0x2615e4[0x1][_0x294426];_0x41c78d[_0x23c2fe(0x17f)][_0x294426*0x4]=Math[_0x23c2fe(0x142)](0xff*(_0x23283b-_0x364dbf)/(_0x5c89df-_0x364dbf)),_0x41c78d[_0x23c2fe(0x17f)][_0x294426*0x4+0x1]=Math[_0x23c2fe(0x142)](0xff*(_0x2232c5-_0x9d6b2c)/(_0x1adde8-_0x9d6b2c)),_0x41c78d[_0x23c2fe(0x17f)][_0x294426*0x4+0x2]=0xff,_0x41c78d[_0x23c2fe(0x17f)][_0x294426*0x4+0x3]=0xff;}console[_0x23c2fe(0x146)](_0x23c2fe(0x130),_0x5c2c46[_0x23c2fe(0x15b)],_0x5c2c46['height']),_0x2a8a04[_0x23c2fe(0x13f)](_0x41c78d,0x0,0x0);const _0x20850f=_0x5c2c46[_0x23c2fe(0x168)](),_0x194ecf=_0x22f65c[_0x23c2fe(0x132)]||0x10e6;console[_0x23c2fe(0x146)]('bounds',JSON[_0x23c2fe(0x16a)](_0x5c3abb)),console[_0x23c2fe(0x146)](_0x23c2fe(0x159),JSON['stringify'](_0x22f65c['extent']));let _0x5c9f7f=this[_0x23c2fe(0x182)](_0x5c3abb,[-0xb4,-0x5a,0xb4,0x5a]);console['log'](_0x23c2fe(0x13c),JSON['stringify'](_0x5c9f7f));let _0x237857={'url':_0x22f65c[_0x23c2fe(0x183)],'image':_0x20850f,'projCode':_0x194ecf,'layerExtent':_0x5c9f7f,'bounds':_0x5c3abb,'date':_0x23c2fe(0x160),'mode':null,'width':_0x5122ce,'height':_0x58d0de,'minzoom':0x0,'maxzoom':0x0,'tiles':'wind/single/2024090512_021/0/0/0.jpg','uMax':_0x5c89df,'uMin':_0x364dbf,'vMax':_0x1adde8,'vMin':_0x9d6b2c};console[_0x23c2fe(0x146)](_0x23c2fe(0x17c),_0x237857);const _0x1b8e0b=new Image();_0x237857[_0x23c2fe(0x15c)]=_0x1b8e0b,_0x1b8e0b[_0x23c2fe(0x14c)]=_0x20850f,_0x1b8e0b['onload']=()=>{const _0x363af0=_0x23c2fe;this[_0x363af0(0x129)]=_0x237857,console[_0x363af0(0x146)](_0x363af0(0x129)),console[_0x363af0(0x146)](_0x237857),this[_0x363af0(0x125)][_0x363af0(0x145)](_0x237857),this[_0x363af0(0x125)]['resize'](),this[_0x363af0(0x137)]=![];},this[_0x23c2fe(0x124)]=requestAnimationFrame(this['_render'][_0x23c2fe(0x123)](this));}[_0x4bcf8c(0x140)](_0x3c671d,_0x461f7c,_0x231ecb,_0x35c37c,_0x1e6003,_0x1898b0,_0x499341){const _0x15d835=_0x4bcf8c,_0x1e75a5=document['createElement'](_0x15d835(0x14d));_0x1e75a5[_0x15d835(0x15b)]=_0x3c671d,_0x1e75a5[_0x15d835(0x131)]=_0x461f7c;const _0x621b13=_0x1e75a5[_0x15d835(0x157)]('2d'),_0x5ee115=_0x621b13[_0x15d835(0x12d)](_0x3c671d,_0x461f7c),_0x22eb33=_0x231ecb[0x0],_0x59412d=_0x231ecb[0x1],_0x41d0e7=_0x5ee115[_0x15d835(0x17f)];for(let _0x592ab4=0x0;_0x592ab4<_0x22eb33['length'];_0x592ab4++){let _0x49ef4e=_0x22eb33[_0x592ab4],_0x5a0374=_0x59412d[_0x592ab4];_0x41d0e7[_0x592ab4*0x4]=_0x22eb33[_0x592ab4],_0x41d0e7[_0x592ab4*0x4+0x1]=_0x59412d[_0x592ab4],_0x41d0e7[_0x592ab4*0x4+0x2]=0x0,_0x41d0e7[_0x592ab4*0x4+0x3]=0xff;}_0x621b13[_0x15d835(0x13f)](_0x5ee115,0x0,0x0);let _0x2c9205=_0x1e75a5[_0x15d835(0x168)]();return this[_0x15d835(0x164)](_0x2c9205,_0x15d835(0x11f)),_0x2c9205;}['downloadDataURL'](_0x8ae9ce,_0x3a081e){const _0x2cbb92=_0x4bcf8c,_0x44307d=document[_0x2cbb92(0x17a)]('a');_0x44307d[_0x2cbb92(0x135)]=_0x8ae9ce,_0x44307d['download']=_0x3a081e,document[_0x2cbb92(0x127)][_0x2cbb92(0x14b)](_0x44307d),_0x44307d[_0x2cbb92(0x13e)](),document[_0x2cbb92(0x127)][_0x2cbb92(0x169)](_0x44307d);}[_0x4bcf8c(0x12c)](_0x40f5fd){const _0x4f22f3=_0x4bcf8c;if(_0x40f5fd[_0x4f22f3(0x13d)]===0x0)return null;let _0x1ab7e4=_0x40f5fd[0x0],_0x3b9564=_0x40f5fd[0x0];for(let _0x35ab21=0x1;_0x35ab21<_0x40f5fd[_0x4f22f3(0x13d)];_0x35ab21++){if(_0x40f5fd[_0x35ab21]<_0x1ab7e4){if(_0x40f5fd[_0x35ab21]!==-0x270f)_0x1ab7e4=_0x40f5fd[_0x35ab21];}else _0x40f5fd[_0x35ab21]>_0x3b9564&&(_0x3b9564=_0x40f5fd[_0x35ab21]);}return{'min':_0x1ab7e4,'max':_0x3b9564};}[_0x4bcf8c(0x182)](_0x2c1b0b,_0x5d99dc){const _0x1a9bf3=_0x5d99dc[0x2]-_0x5d99dc[0x0],_0x16dfe5=_0x5d99dc[0x3]-_0x5d99dc[0x1];return[(_0x2c1b0b[0x0]-_0x5d99dc[0x0])/_0x1a9bf3,(_0x2c1b0b[0x2]-_0x5d99dc[0x0])/_0x1a9bf3,(_0x2c1b0b[0x1]-_0x5d99dc[0x1])/_0x16dfe5,(_0x2c1b0b[0x3]-_0x5d99dc[0x1])/_0x16dfe5];}['_render'](){const _0x269d8c=_0x4bcf8c;this['wind']&&this[_0x269d8c(0x125)][_0x269d8c(0x129)]&&(this[_0x269d8c(0x125)][_0x269d8c(0x17d)](),this['changed']()),this[_0x269d8c(0x124)]=requestAnimationFrame(this[_0x269d8c(0x134)][_0x269d8c(0x123)](this));}[_0x4bcf8c(0x178)](_0x12e20e){const _0x3fac49=_0x4bcf8c;let _0x1b2527={'antialiasing':!![],'alpha':!![]};var _0x5b9f3f=_0x12e20e[_0x3fac49(0x157)](_0x3fac49(0x180),_0x1b2527)||_0x12e20e[_0x3fac49(0x157)](_0x3fac49(0x155),_0x1b2527);if(_0x5b9f3f){let _0x3ffdfd=_0x5b9f3f[_0x3fac49(0x175)](_0x3fac49(0x161))||_0x5b9f3f[_0x3fac49(0x175)](_0x3fac49(0x16f))||_0x5b9f3f['getExtension']('WEBKIT_EXT_texture_filter_anisotropic');!_0x3ffdfd&&console[_0x3fac49(0x17b)](_0x3fac49(0x152));}else console[_0x3fac49(0x17b)](_0x3fac49(0x15d));return _0x5b9f3f;}[_0x4bcf8c(0x11c)](){const _0x50e8de=_0x4bcf8c;cancelAnimationFrame(this[_0x50e8de(0x124)]);}}export default ImageCanvasWindSource;