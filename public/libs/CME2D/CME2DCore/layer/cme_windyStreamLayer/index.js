const _0x47a046=_0x2042;(function(_0x1a6464,_0x4a8195){const _0x48bcab=_0x2042,_0x4ab1e5=_0x1a6464();while(!![]){try{const _0x289738=-parseInt(_0x48bcab(0x1d4))/0x1*(parseInt(_0x48bcab(0x1c1))/0x2)+-parseInt(_0x48bcab(0x1b6))/0x3*(parseInt(_0x48bcab(0x1db))/0x4)+parseInt(_0x48bcab(0x1b8))/0x5*(parseInt(_0x48bcab(0x1e9))/0x6)+-parseInt(_0x48bcab(0x208))/0x7+-parseInt(_0x48bcab(0x1ef))/0x8*(-parseInt(_0x48bcab(0x1e8))/0x9)+parseInt(_0x48bcab(0x1ed))/0xa*(parseInt(_0x48bcab(0x1ca))/0xb)+parseInt(_0x48bcab(0x1b4))/0xc;if(_0x289738===_0x4a8195)break;else _0x4ab1e5['push'](_0x4ab1e5['shift']());}catch(_0x2920f0){_0x4ab1e5['push'](_0x4ab1e5['shift']());}}}(_0x5d62,0x73143));function _0x2042(_0x13e1a5,_0x5957bb){const _0x5d62f3=_0x5d62();return _0x2042=function(_0x204289,_0x210a1a){_0x204289=_0x204289-0x1a6;let _0x4f6e40=_0x5d62f3[_0x204289];return _0x4f6e40;},_0x2042(_0x13e1a5,_0x5957bb);}function _0x5d62(){const _0x50ea05=['addColorStop','NEAREST','dropRateBump','createTexture','random','u_rand_seed','enable','4819668NhFnKE','fadeOpacity','9591lxlUpv','windTexture','5NhErwd','#66c2a5','_numParticles','bindTexture','POINTS','viewport','#fee08b','u_speed_factor','u_color_ramp','11746LrXpSJ','numParticles','u_particles','TRIANGLES','getContext','u_particles_res','updateProgram','canvas','bindFramebuffer','33LWYqyl','params','uniform1f','#abdda4','image','particleStateTexture0','ONE_MINUS_SRC_ALPHA','createLinearGradient','u_wind_min','backgroundTexture','11wubtlO','Your\x20browser\x20doesn`t\x20seem\x20to\x20support\x20WebGL.','createElement','createProgram','u_drop_rate_bump','a_index','dropRate','732PPEzqD','BLEND','colorRampTexture','bindAttribute','disable','screenProgram','add','draw','resize','Your\x20browser\x20doesn`t\x20support\x20anisotropic\x20filtering.\x20\x20Ordinary\x20MIP\x20mapping\x20will\x20be\x20used.','getImageData','WEBKIT_EXT_texture_filter_anisotropic','particleStateTexture1','25560DrfSSM','3845844jrYcbl','height','sqrt','quadBuffer','2210790QcAZhS','u_wind_max','800GSHhav','ceil','uniform1i','u_wind_res','program','length','#fdae61','#d53e4f','u_opacity','createBuffer','STENCIL_TEST','floor','experimental-webgl','setColorRamp','fillStyle','uniform2f','a_pos','#e6f598','uMax','drawArrays','drawScreen','custom-canvas','LINEAR','drawParticles','useProgram','6081831xhWiyY','getExtension','drawTexture','u_wind','particleIndexBuffer','width','speedFactor','particleStateResolution','data','screenTexture','vMax','updateParticles','classList','setWind','windData','framebuffer'];_0x5d62=function(){return _0x50ea05;};return _0x5d62();}import*as _0x57958e from'./util.js';import _0x262bf2 from'./shaders/draw.vert.glsl';import _0x3fd8b7 from'./shaders/draw.frag.glsl';import _0x547ae0 from'./shaders/quad.vert.glsl';import _0x59a5ad from'./shaders/screen.frag.glsl';import _0x33d3da from'./shaders/update.frag.glsl';const defaultRampColors={0x0:'#3288bd',0.1:_0x47a046(0x1b9),0.2:_0x47a046(0x1cd),0.3:_0x47a046(0x200),0.4:_0x47a046(0x1be),0.5:_0x47a046(0x1f5),0.6:'#f46d43',0x1:_0x47a046(0x1f6)};export default class WindGL{constructor(){const _0x45e9ec=_0x47a046;this[_0x45e9ec(0x1cb)]={'map':null,'url':'','uMax':26.8,'uMin':-21.32,'vMax':21.42,'vMin':-21.57},this[_0x45e9ec(0x1c8)]=document[_0x45e9ec(0x1d6)]('canvas'),this[_0x45e9ec(0x1c8)][_0x45e9ec(0x1a9)][_0x45e9ec(0x1e1)](_0x45e9ec(0x204)),this['gl']=createGL(this[_0x45e9ec(0x1c8)]),this[_0x45e9ec(0x1b5)]=0.996,this[_0x45e9ec(0x20e)]=0.25,this[_0x45e9ec(0x1da)]=0.003,this[_0x45e9ec(0x1af)]=0.01,this['drawProgram']=_0x57958e[_0x45e9ec(0x1d7)](this['gl'],_0x262bf2,_0x3fd8b7),this[_0x45e9ec(0x1e0)]=_0x57958e[_0x45e9ec(0x1d7)](this['gl'],_0x547ae0,_0x59a5ad),this[_0x45e9ec(0x1c7)]=_0x57958e[_0x45e9ec(0x1d7)](this['gl'],_0x547ae0,_0x33d3da),this[_0x45e9ec(0x1ec)]=_0x57958e[_0x45e9ec(0x1f8)](this['gl'],new Float32Array([0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x0,0x1,0x0,0x1,0x1])),this[_0x45e9ec(0x1ac)]=this['gl']['createFramebuffer'](),this[_0x45e9ec(0x1fc)](defaultRampColors),this['resize']();}[_0x47a046(0x1e3)](){const _0x53a8dc=_0x47a046,_0x2d389e=this['gl'],_0x28db90=new Uint8Array(_0x2d389e[_0x53a8dc(0x1c8)]['width']*_0x2d389e[_0x53a8dc(0x1c8)][_0x53a8dc(0x1ea)]*0x4);this[_0x53a8dc(0x1d3)]=_0x57958e[_0x53a8dc(0x1b0)](_0x2d389e,_0x2d389e['NEAREST'],_0x28db90,_0x2d389e['canvas']['width'],_0x2d389e[_0x53a8dc(0x1c8)][_0x53a8dc(0x1ea)]),this[_0x53a8dc(0x1a6)]=_0x57958e['createTexture'](_0x2d389e,_0x2d389e[_0x53a8dc(0x1ae)],_0x28db90,_0x2d389e['canvas'][_0x53a8dc(0x20d)],_0x2d389e['canvas']['height']);}[_0x47a046(0x1fc)](_0x5ce61f){const _0x543fcc=_0x47a046;this[_0x543fcc(0x1dd)]=_0x57958e[_0x543fcc(0x1b0)](this['gl'],this['gl'][_0x543fcc(0x205)],getColorRamp(_0x5ce61f),0x10,0x10);}set[_0x47a046(0x1c2)](_0x218b13){const _0x29d810=_0x47a046,_0x32a2f8=this['gl'],_0x303e5d=this['particleStateResolution']=Math[_0x29d810(0x1f0)](Math[_0x29d810(0x1eb)](_0x218b13));this['_numParticles']=_0x303e5d*_0x303e5d;const _0x2c98a1=new Uint8Array(this[_0x29d810(0x1ba)]*0x4);for(let _0x1b7502=0x0;_0x1b7502<_0x2c98a1[_0x29d810(0x1f4)];_0x1b7502++){_0x2c98a1[_0x1b7502]=Math[_0x29d810(0x1fa)](Math[_0x29d810(0x1b1)]()*0x100);}this['particleStateTexture0']=_0x57958e[_0x29d810(0x1b0)](_0x32a2f8,_0x32a2f8['NEAREST'],_0x2c98a1,_0x303e5d,_0x303e5d),this[_0x29d810(0x1e7)]=_0x57958e[_0x29d810(0x1b0)](_0x32a2f8,_0x32a2f8['NEAREST'],_0x2c98a1,_0x303e5d,_0x303e5d);const _0x154758=new Float32Array(this['_numParticles']);for(let _0xff1065=0x0;_0xff1065<this[_0x29d810(0x1ba)];_0xff1065++)_0x154758[_0xff1065]=_0xff1065;this[_0x29d810(0x20c)]=_0x57958e[_0x29d810(0x1f8)](_0x32a2f8,_0x154758);}get[_0x47a046(0x1c2)](){const _0x2cefc4=_0x47a046;return this[_0x2cefc4(0x1ba)];}[_0x47a046(0x1aa)](_0x41b19e){const _0x21f649=_0x47a046;this[_0x21f649(0x1ab)]=_0x41b19e,this[_0x21f649(0x1b7)]=_0x57958e[_0x21f649(0x1b0)](this['gl'],this['gl'][_0x21f649(0x205)],_0x41b19e[_0x21f649(0x1ce)]);}[_0x47a046(0x1e2)](){const _0x3eb2fc=_0x47a046,_0x36b2b7=this['gl'];_0x36b2b7[_0x3eb2fc(0x1df)](_0x36b2b7['DEPTH_TEST']),_0x36b2b7[_0x3eb2fc(0x1df)](_0x36b2b7[_0x3eb2fc(0x1f9)]),_0x57958e['bindTexture'](_0x36b2b7,this[_0x3eb2fc(0x1b7)],0x0),_0x57958e[_0x3eb2fc(0x1bb)](_0x36b2b7,this['particleStateTexture0'],0x1),this[_0x3eb2fc(0x203)](),this[_0x3eb2fc(0x1a8)]();}['drawScreen'](){const _0x1e44bf=_0x47a046,_0xd48c19=this['gl'];_0x57958e[_0x1e44bf(0x1c9)](_0xd48c19,this[_0x1e44bf(0x1ac)],this['screenTexture']),_0xd48c19[_0x1e44bf(0x1bd)](0x0,0x0,_0xd48c19[_0x1e44bf(0x1c8)]['width'],_0xd48c19['canvas'][_0x1e44bf(0x1ea)]),this['drawTexture'](this[_0x1e44bf(0x1d3)],this[_0x1e44bf(0x1b5)]),this[_0x1e44bf(0x206)](),_0x57958e[_0x1e44bf(0x1c9)](_0xd48c19,null),_0xd48c19[_0x1e44bf(0x1b3)](_0xd48c19[_0x1e44bf(0x1dc)]),_0xd48c19['blendFunc'](_0xd48c19['SRC_ALPHA'],_0xd48c19[_0x1e44bf(0x1d0)]),this[_0x1e44bf(0x20a)](this[_0x1e44bf(0x1a6)],0x1),_0xd48c19[_0x1e44bf(0x1df)](_0xd48c19[_0x1e44bf(0x1dc)]);const _0x55f4ef=this[_0x1e44bf(0x1d3)];this[_0x1e44bf(0x1d3)]=this[_0x1e44bf(0x1a6)],this['screenTexture']=_0x55f4ef;}['drawTexture'](_0x26e0e1,_0x5f39de){const _0x2616b5=_0x47a046,_0xb65808=this['gl'],_0x343ffe=this[_0x2616b5(0x1e0)];_0xb65808[_0x2616b5(0x207)](_0x343ffe[_0x2616b5(0x1f3)]),_0x57958e[_0x2616b5(0x1de)](_0xb65808,this['quadBuffer'],_0x343ffe[_0x2616b5(0x1ff)],0x2),_0x57958e[_0x2616b5(0x1bb)](_0xb65808,_0x26e0e1,0x2),_0xb65808[_0x2616b5(0x1f1)](_0x343ffe['u_screen'],0x2),_0xb65808[_0x2616b5(0x1cc)](_0x343ffe[_0x2616b5(0x1f7)],_0x5f39de),_0xb65808[_0x2616b5(0x202)](_0xb65808[_0x2616b5(0x1c4)],0x0,0x6);}[_0x47a046(0x206)](){const _0x5c45fc=_0x47a046,_0x5dea2d=this['gl'],_0x5e63e1=this['drawProgram'];_0x5dea2d['useProgram'](_0x5e63e1['program']),_0x57958e[_0x5c45fc(0x1de)](_0x5dea2d,this[_0x5c45fc(0x20c)],_0x5e63e1[_0x5c45fc(0x1d9)],0x1),_0x57958e[_0x5c45fc(0x1bb)](_0x5dea2d,this[_0x5c45fc(0x1dd)],0x2),_0x5dea2d[_0x5c45fc(0x1f1)](_0x5e63e1[_0x5c45fc(0x20b)],0x0),_0x5dea2d[_0x5c45fc(0x1f1)](_0x5e63e1[_0x5c45fc(0x1c3)],0x1),_0x5dea2d[_0x5c45fc(0x1f1)](_0x5e63e1[_0x5c45fc(0x1c0)],0x2),_0x5dea2d[_0x5c45fc(0x1cc)](_0x5e63e1[_0x5c45fc(0x1c6)],this[_0x5c45fc(0x20f)]),_0x5dea2d['uniform2f'](_0x5e63e1['u_wind_min'],this[_0x5c45fc(0x1ab)]['uMin'],this[_0x5c45fc(0x1ab)]['vMin']),_0x5dea2d['uniform2f'](_0x5e63e1[_0x5c45fc(0x1ee)],this[_0x5c45fc(0x1ab)][_0x5c45fc(0x201)],this['windData'][_0x5c45fc(0x1a7)]),_0x5dea2d[_0x5c45fc(0x202)](_0x5dea2d[_0x5c45fc(0x1bc)],0x0,this[_0x5c45fc(0x1ba)]);}['updateParticles'](){const _0x8063a3=_0x47a046,_0x44665a=this['gl'];_0x57958e[_0x8063a3(0x1c9)](_0x44665a,this[_0x8063a3(0x1ac)],this[_0x8063a3(0x1e7)]),_0x44665a['viewport'](0x0,0x0,this[_0x8063a3(0x20f)],this['particleStateResolution']);const _0xd1b288=this[_0x8063a3(0x1c7)];_0x44665a[_0x8063a3(0x207)](_0xd1b288[_0x8063a3(0x1f3)]),_0x57958e[_0x8063a3(0x1de)](_0x44665a,this['quadBuffer'],_0xd1b288[_0x8063a3(0x1ff)],0x2),_0x44665a['uniform1i'](_0xd1b288[_0x8063a3(0x20b)],0x0),_0x44665a['uniform1i'](_0xd1b288[_0x8063a3(0x1c3)],0x1),_0x44665a[_0x8063a3(0x1cc)](_0xd1b288[_0x8063a3(0x1b2)],Math[_0x8063a3(0x1b1)]()),_0x44665a[_0x8063a3(0x1fe)](_0xd1b288[_0x8063a3(0x1f2)],this['windData'][_0x8063a3(0x20d)],this[_0x8063a3(0x1ab)][_0x8063a3(0x1ea)]),_0x44665a['uniform2f'](_0xd1b288[_0x8063a3(0x1d2)],this[_0x8063a3(0x1ab)]['uMin'],this['windData']['vMin']),_0x44665a[_0x8063a3(0x1fe)](_0xd1b288[_0x8063a3(0x1ee)],this['windData'][_0x8063a3(0x201)],this['windData'][_0x8063a3(0x1a7)]),_0x44665a['uniform1f'](_0xd1b288[_0x8063a3(0x1bf)],this[_0x8063a3(0x20e)]),_0x44665a[_0x8063a3(0x1cc)](_0xd1b288['u_drop_rate'],this[_0x8063a3(0x1da)]),_0x44665a[_0x8063a3(0x1cc)](_0xd1b288[_0x8063a3(0x1d8)],this[_0x8063a3(0x1af)]),_0x44665a[_0x8063a3(0x202)](_0x44665a['TRIANGLES'],0x0,0x6);const _0x444ae6=this[_0x8063a3(0x1cf)];this[_0x8063a3(0x1cf)]=this[_0x8063a3(0x1e7)],this['particleStateTexture1']=_0x444ae6;}}function createGL(_0x5ca0d2){const _0x3b1162=_0x47a046,_0x53c49b={'antialiasing':!![],'alpha':!![]};var _0x3d229d=_0x5ca0d2[_0x3b1162(0x1c5)]('webgl',_0x53c49b)||_0x5ca0d2[_0x3b1162(0x1c5)](_0x3b1162(0x1fb),_0x53c49b);if(_0x3d229d){let _0x54d9cb=_0x3d229d[_0x3b1162(0x209)]('EXT_texture_filter_anisotropic')||_0x3d229d[_0x3b1162(0x209)]('MOZ_EXT_texture_filter_anisotropic')||_0x3d229d[_0x3b1162(0x209)](_0x3b1162(0x1e6));!_0x54d9cb&&console['warn'](_0x3b1162(0x1e4));}else console['warn'](_0x3b1162(0x1d5));return _0x3d229d;}function getColorRamp(_0x4ab48f){const _0x5d5f6e=_0x47a046,_0xa31530=document['createElement'](_0x5d5f6e(0x1c8)),_0x11fbf3=_0xa31530['getContext']('2d');_0xa31530[_0x5d5f6e(0x20d)]=0x100,_0xa31530[_0x5d5f6e(0x1ea)]=0x1;const _0x2a05b8=_0x11fbf3[_0x5d5f6e(0x1d1)](0x0,0x0,0x100,0x0);for(const _0x58a9e7 in _0x4ab48f){_0x2a05b8[_0x5d5f6e(0x1ad)](+_0x58a9e7,_0x4ab48f[_0x58a9e7]);}return _0x11fbf3[_0x5d5f6e(0x1fd)]=_0x2a05b8,_0x11fbf3['fillRect'](0x0,0x0,0x100,0x1),new Uint8Array(_0x11fbf3[_0x5d5f6e(0x1e5)](0x0,0x0,0x100,0x1)[_0x5d5f6e(0x210)]);}