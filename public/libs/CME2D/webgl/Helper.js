const _0x29b6ea=_0x43f0;function _0x43f0(_0x5724eb,_0x50e484){const _0x59adfa=_0x59ad();return _0x43f0=function(_0x43f0e6,_0x274533){_0x43f0e6=_0x43f0e6-0x69;let _0x1ccce1=_0x59adfa[_0x43f0e6];return _0x1ccce1;},_0x43f0(_0x5724eb,_0x50e484);}(function(_0x1c20c0,_0x19587f){const _0x4761fa=_0x43f0,_0x3718a4=_0x1c20c0();while(!![]){try{const _0xcdbcba=parseInt(_0x4761fa(0xfb))/0x1*(parseInt(_0x4761fa(0xae))/0x2)+-parseInt(_0x4761fa(0xc4))/0x3*(parseInt(_0x4761fa(0xf6))/0x4)+parseInt(_0x4761fa(0xe5))/0x5+-parseInt(_0x4761fa(0xa3))/0x6*(parseInt(_0x4761fa(0x7a))/0x7)+parseInt(_0x4761fa(0x100))/0x8*(-parseInt(_0x4761fa(0x74))/0x9)+-parseInt(_0x4761fa(0x89))/0xa+parseInt(_0x4761fa(0xa5))/0xb*(parseInt(_0x4761fa(0x71))/0xc);if(_0xcdbcba===_0x19587f)break;else _0x3718a4['push'](_0x3718a4['shift']());}catch(_0x32f3cb){_0x3718a4['push'](_0x3718a4['shift']());}}}(_0x59ad,0x8e14c));function _0x59ad(){const _0x85ad11=['setUniformFloatVec2','createBuffer','u_resolution','ONE','RESOLUTION','tmpMat4_','clearDepth','function','bindRenderbuffer','offsetRotateMatrix_','pixelRatio','setUniformFloatValue','complete','ONE_MINUS_SRC_ALPHA','bufferData','zoom','bindBuffer','LINEAR','shared/','3288900WIyItK','bindFrameBuffer','framebufferTexture2D','setUniforms','getGL','flushBufferData','texImage2D','disable','uniform1i','uniform3f','getProgram','absolute','uniform4f','bind','rotation','getSize','name','2226156ZWavfI','getFramebuffer','bindInitialFrameBuffer','PIXEL_RATIO','ROTATION','5743qcMSxr','needsToBeRecreated_','size','Vertex\x20shader\x20compilation\x20failed:\x20','currentProgram_','448YxQrbl','BYTES_PER_ELEMENT','blendFunc','WEBGL_lose_context','uniforms_','getExtension','CLAMP_TO_EDGE','bufferCache_','canvas','now','getType','TEXTURE_WRAP_S','getUsage','getShaderInfoLog','removeEventListener','addEventListener','viewport','COLOR_BUFFER_BIT','fragmentShader','value','u_hitDetection','enable','uniform1f','getUniformLocation','attachShader','type','u_zoom','TEXTURE_MIN_FILTER','finalizeDraw','u_screenToWorldMatrix','length','extensionCache_','TEXTURE_2D','u_viewportSizePx','prepareDrawToRenderTarget','u_pixelRatio','getShaderParameter','boundHandleWebGLContextLost_','position','uniformLocationsByProgram_','DEPTH_BUFFER_BIT','COMPILE_STATUS','getDepthbuffer','style','187596sTeogd','makeProjectionTransform','u_time','17001CzDZbF','depthFunc','clear','handleWebGLContextRestored','activeTexture','postProcessPasses_','2587277AiOWUu','createShader','bindTexture','getRenderTargetTexture','addUniforms','compileShader','needsToBeRecreated','LEQUAL','left','RESTORED','setUniformFloatVec4','preventDefault','getCanvas','init','handleWebGLContextLost','7897150zaNqPF','deleteShader','useProgram','applyUniforms','shaderCompileErrors_','uniformMatrix4fv','width','getArray','webGlBuffer','deleteBuffer','createElement','canvasCacheKey','OES_element_index_uint','prepareDraw','texture','bindAttribute','linkProgram','TEXTURE_MAG_FILTER','TIME','map','FRAMEBUFFER','setUniformMatrixValue','HIT_DETECTION','Fragment\x20shader\x20compilation\x20failed:\x20','disposeInternal','resolution','6hxPkOg','clearColor','594oKHFGX','viewState','enableVertexAttribArray','LOST','bindFramebuffer','VERTEX_SHADER','vertexAttribPointer','apply','offsetScaleMatrix_','314yHvQYi','TEXTURE_WRAP_T','getFrameBuffer','depthRange','prevValue','TRIANGLES','canvasCacheKey_','attribLocationsByProgram_','FLOAT','BLEND','uniforms','gl_','shaderSource','UNSIGNED_BYTE','getAttributeLocation','ZERO','push','u_projectionMatrix','context','loseContext','postProcesses','RGBA','3ebcygW','height','enableAttributeArray_','startTime_','users','texParameteri','isArray','applyFrameState','createTexture','DEPTH_TEST','forEach','RENDERBUFFER','boundHandleWebGLContextRestored_','COLOR_ATTACHMENT0'];_0x59ad=function(){return _0x85ad11;};return _0x59ad();}import _0x4c34e9 from'../webgl/ContextEventType.js';import _0x10bda9 from'../Disposable.js';import _0x5ebbfd from'./PostProcessingPass.js';import{FLOAT,UNSIGNED_BYTE,UNSIGNED_INT,UNSIGNED_SHORT,getContext}from'../webgl.js';import{clear}from'../obj.js';import{compose as _0x4b3de0,create as _0xca6392}from'../transform.js';import{create,fromTransform}from'../vec/mat4.js';import{getUid}from'../util.js';export const ShaderType={'FRAGMENT_SHADER':0x8b30,'VERTEX_SHADER':0x8b31};export const DefaultUniform={'PROJECTION_MATRIX':_0x29b6ea(0xbf),'SCREEN_TO_WORLD_MATRIX':_0x29b6ea(0x11d),'TIME':_0x29b6ea(0x73),'ZOOM':_0x29b6ea(0x11a),'RESOLUTION':_0x29b6ea(0xd4),'ROTATION':'u_rotation','VIEWPORT_SIZE_PX':_0x29b6ea(0x121),'PIXEL_RATIO':_0x29b6ea(0x123),'HIT_DETECTION':_0x29b6ea(0x114)};export const AttributeType={'UNSIGNED_BYTE':UNSIGNED_BYTE,'UNSIGNED_SHORT':UNSIGNED_SHORT,'UNSIGNED_INT':UNSIGNED_INT,'FLOAT':FLOAT};const canvasCache={};function getSharedCanvasCacheKey(_0x26d118){const _0x19ac89=_0x29b6ea;return _0x19ac89(0xe4)+_0x26d118;}let uniqueCanvasCacheKeyCount=0x0;function getUniqueCanvasCacheKey(){const _0x5291c5='unique/'+uniqueCanvasCacheKeyCount;return uniqueCanvasCacheKeyCount+=0x1,_0x5291c5;}function getOrCreateContext(_0xbffe24){const _0x5b06b3=_0x29b6ea;let _0x3d4b08=canvasCache[_0xbffe24];if(!_0x3d4b08){const _0x19c1a1=document[_0x5b06b3(0x93)](_0x5b06b3(0x108));_0x19c1a1['width']=0x1,_0x19c1a1[_0x5b06b3(0xc5)]=0x1,_0x19c1a1[_0x5b06b3(0x70)][_0x5b06b3(0x6b)]=_0x5b06b3(0xf0),_0x19c1a1[_0x5b06b3(0x70)][_0x5b06b3(0x82)]='0';const _0x249f18=getContext(_0x19c1a1);_0x3d4b08={'users':0x0,'context':_0x249f18},canvasCache[_0xbffe24]=_0x3d4b08;}return _0x3d4b08[_0x5b06b3(0xc8)]+=0x1,_0x3d4b08['context'];}function releaseCanvas(_0x5a0428){const _0x367f35=_0x29b6ea,_0x5bca9d=canvasCache[_0x5a0428];if(!_0x5bca9d)return;_0x5bca9d['users']-=0x1;if(_0x5bca9d[_0x367f35(0xc8)]>0x0)return;const _0x29e68d=_0x5bca9d[_0x367f35(0xc0)],_0x2a9e69=_0x29e68d[_0x367f35(0x105)](_0x367f35(0x103));_0x2a9e69&&_0x2a9e69[_0x367f35(0xc1)]();const _0x28c7fb=_0x29e68d[_0x367f35(0x108)];_0x28c7fb[_0x367f35(0x8f)]=0x1,_0x28c7fb[_0x367f35(0xc5)]=0x1,delete canvasCache[_0x5a0428];}class WebGLHelper extends _0x10bda9{constructor(_0x3459a8){const _0xe30231=_0x29b6ea;super(),_0x3459a8=_0x3459a8||{},this[_0xe30231(0x6a)]=this[_0xe30231(0x88)][_0xe30231(0xf2)](this),this[_0xe30231(0xd0)]=this[_0xe30231(0x77)][_0xe30231(0xf2)](this),this[_0xe30231(0xb4)]=_0x3459a8[_0xe30231(0x94)]?getSharedCanvasCacheKey(_0x3459a8[_0xe30231(0x94)]):getUniqueCanvasCacheKey(),this['gl_']=getOrCreateContext(this['canvasCacheKey_']),this[_0xe30231(0x107)]={},this[_0xe30231(0x11f)]={},this['currentProgram_']=null,this[_0xe30231(0xfc)]=![];const _0xf77a16=this[_0xe30231(0xb9)][_0xe30231(0x108)];_0xf77a16[_0xe30231(0x10f)](_0x4c34e9['LOST'],this['boundHandleWebGLContextLost_']),_0xf77a16[_0xe30231(0x10f)](_0x4c34e9['RESTORED'],this['boundHandleWebGLContextRestored_']),this[_0xe30231(0xdb)]=_0xca6392(),this[_0xe30231(0xad)]=_0xca6392(),this[_0xe30231(0xd7)]=create(),this[_0xe30231(0x6c)]={},this['attribLocationsByProgram_']={},this[_0xe30231(0x104)]=[],_0x3459a8[_0xe30231(0xb8)]&&this[_0xe30231(0xe8)](_0x3459a8[_0xe30231(0xb8)]),this[_0xe30231(0x79)]=_0x3459a8[_0xe30231(0xc2)]?_0x3459a8[_0xe30231(0xc2)][_0xe30231(0x9c)](_0x265f76=>new _0x5ebbfd({'webGlContext':this['gl_'],'scaleRatio':_0x265f76['scaleRatio'],'vertexShader':_0x265f76['vertexShader'],'fragmentShader':_0x265f76[_0xe30231(0x112)],'uniforms':_0x265f76[_0xe30231(0xb8)]})):[new _0x5ebbfd({'webGlContext':this['gl_']})],this[_0xe30231(0x8d)]=null,this[_0xe30231(0xc7)]=Date[_0xe30231(0x109)]();}[_0x29b6ea(0xe8)](_0x44b1e4){const _0x36be56=_0x29b6ea;this['uniforms_']=[],this[_0x36be56(0x7e)](_0x44b1e4);}[_0x29b6ea(0x7e)](_0x586031){const _0x161326=_0x29b6ea;for(const _0x2ab2ca in _0x586031){this[_0x161326(0x104)][_0x161326(0xbe)]({'name':_0x2ab2ca,'value':_0x586031[_0x2ab2ca]});}}['canvasCacheKeyMatches'](_0x3b8a57){const _0x364078=_0x29b6ea;return this[_0x364078(0xb4)]===getSharedCanvasCacheKey(_0x3b8a57);}['getExtension'](_0xaef701){const _0x2ebdc2=_0x29b6ea;if(_0xaef701 in this['extensionCache_'])return this['extensionCache_'][_0xaef701];const _0x2d8343=this[_0x2ebdc2(0xb9)]['getExtension'](_0xaef701);return this[_0x2ebdc2(0x11f)][_0xaef701]=_0x2d8343,_0x2d8343;}['bindBuffer'](_0x57bf90){const _0x5eb776=_0x29b6ea,_0x18e55e=this[_0x5eb776(0xb9)],_0x226688=getUid(_0x57bf90);let _0x223da9=this['bufferCache_'][_0x226688];if(!_0x223da9){const _0xd141f3=_0x18e55e[_0x5eb776(0xd3)]();_0x223da9={'buffer':_0x57bf90,'webGlBuffer':_0xd141f3},this['bufferCache_'][_0x226688]=_0x223da9;}_0x18e55e[_0x5eb776(0xe2)](_0x57bf90[_0x5eb776(0x10a)](),_0x223da9[_0x5eb776(0x91)]);}[_0x29b6ea(0xea)](_0x37928b){const _0xadab86=_0x29b6ea,_0x27053e=this[_0xadab86(0xb9)];this[_0xadab86(0xe2)](_0x37928b),_0x27053e[_0xadab86(0xe0)](_0x37928b[_0xadab86(0x10a)](),_0x37928b[_0xadab86(0x90)](),_0x37928b[_0xadab86(0x10c)]());}[_0x29b6ea(0x92)](_0x5e2eb8){const _0xbaeecc=getUid(_0x5e2eb8);delete this['bufferCache_'][_0xbaeecc];}[_0x29b6ea(0xa1)](){const _0x64060f=_0x29b6ea,_0x1187b3=this[_0x64060f(0xb9)][_0x64060f(0x108)];_0x1187b3[_0x64060f(0x10e)](_0x4c34e9[_0x64060f(0xa8)],this[_0x64060f(0x6a)]),_0x1187b3[_0x64060f(0x10e)](_0x4c34e9[_0x64060f(0x83)],this[_0x64060f(0xd0)]),releaseCanvas(this[_0x64060f(0xb4)]),delete this['gl_'];}[_0x29b6ea(0x96)](_0x1c440a,_0x33271a,_0x367318){const _0x4000e4=_0x29b6ea,_0x1d7ed7=this[_0x4000e4(0xb9)],_0x260e37=this['getCanvas'](),_0x4357c2=_0x1c440a[_0x4000e4(0xfd)],_0x46db88=_0x1c440a[_0x4000e4(0xdc)];(_0x260e37['width']!==_0x4357c2[0x0]*_0x46db88||_0x260e37[_0x4000e4(0xc5)]!==_0x4357c2[0x1]*_0x46db88)&&(_0x260e37[_0x4000e4(0x8f)]=_0x4357c2[0x0]*_0x46db88,_0x260e37['height']=_0x4357c2[0x1]*_0x46db88,_0x260e37[_0x4000e4(0x70)][_0x4000e4(0x8f)]=_0x4357c2[0x0]+'px',_0x260e37[_0x4000e4(0x70)][_0x4000e4(0xc5)]=_0x4357c2[0x1]+'px');for(let _0x31f854=this[_0x4000e4(0x79)]['length']-0x1;_0x31f854>=0x0;_0x31f854--){this[_0x4000e4(0x79)][_0x31f854][_0x4000e4(0x87)](_0x1c440a);}_0x1d7ed7[_0x4000e4(0x7c)](_0x1d7ed7['TEXTURE_2D'],null),_0x1d7ed7[_0x4000e4(0xa4)](0x0,0x0,0x0,0x0),_0x1d7ed7[_0x4000e4(0xb1)](0x0,0x1),_0x1d7ed7['clearDepth'](0x1),_0x1d7ed7[_0x4000e4(0x76)](_0x1d7ed7[_0x4000e4(0x111)]|_0x1d7ed7['DEPTH_BUFFER_BIT']),_0x1d7ed7[_0x4000e4(0x115)](_0x1d7ed7[_0x4000e4(0xb7)]),_0x1d7ed7[_0x4000e4(0x102)](_0x1d7ed7['ONE'],_0x33271a?_0x1d7ed7['ZERO']:_0x1d7ed7['ONE_MINUS_SRC_ALPHA']),_0x367318?(_0x1d7ed7[_0x4000e4(0x115)](_0x1d7ed7[_0x4000e4(0xcd)]),_0x1d7ed7['depthFunc'](_0x1d7ed7[_0x4000e4(0x81)])):_0x1d7ed7[_0x4000e4(0xec)](_0x1d7ed7['DEPTH_TEST']);}[_0x29b6ea(0xe6)](_0x269267,_0x25eb28){const _0x5cf2ba=_0x29b6ea,_0x378b2e=this[_0x5cf2ba(0xe9)]();_0x378b2e[_0x5cf2ba(0xa9)](_0x378b2e[_0x5cf2ba(0x9d)],_0x269267),_0x25eb28&&_0x378b2e[_0x5cf2ba(0xe7)](_0x378b2e[_0x5cf2ba(0x9d)],_0x378b2e['COLOR_ATTACHMENT0'],_0x378b2e['TEXTURE_2D'],_0x25eb28,0x0);}[_0x29b6ea(0xf8)](){const _0x16b142=_0x29b6ea,_0x12d4df=this[_0x16b142(0xe9)](),_0x796a17=this[_0x16b142(0x79)][0x0][_0x16b142(0xb0)]();_0x12d4df[_0x16b142(0xa9)](_0x12d4df[_0x16b142(0x9d)],_0x796a17);const _0x15e5fa=this['postProcessPasses_'][0x0][_0x16b142(0x7d)]();_0x12d4df[_0x16b142(0xe7)](_0x12d4df['FRAMEBUFFER'],_0x12d4df[_0x16b142(0xd1)],_0x12d4df[_0x16b142(0x120)],_0x15e5fa,0x0);}[_0x29b6ea(0x7c)](_0x3cfc3e,_0x5a0530,_0x4cb76f){const _0x36971d=_0x29b6ea,_0x1c687a=this[_0x36971d(0xb9)];_0x1c687a[_0x36971d(0x78)](_0x1c687a['TEXTURE0']+_0x5a0530),_0x1c687a[_0x36971d(0x7c)](_0x1c687a[_0x36971d(0x120)],_0x3cfc3e),_0x1c687a[_0x36971d(0xed)](this[_0x36971d(0x117)](_0x4cb76f),_0x5a0530);}[_0x29b6ea(0x98)](_0xfc64e9,_0x45419d,_0x3e51d3){const _0x596c69=_0x29b6ea,_0x362c15=this[_0x596c69(0xe9)]();this['bindBuffer'](_0xfc64e9);const _0x13015e=this[_0x596c69(0xbc)](_0x45419d);_0x362c15[_0x596c69(0xa7)](_0x13015e),_0x362c15[_0x596c69(0xab)](_0x13015e,_0x3e51d3,_0x362c15[_0x596c69(0xb6)],![],0x0,0x0);}[_0x29b6ea(0x122)](_0x1bffb5,_0x512de6,_0x454a9a,_0x52268c){const _0x535f9b=_0x29b6ea,_0x3d36b9=this[_0x535f9b(0xb9)],_0xb78b66=_0x512de6[_0x535f9b(0xf4)]();_0x3d36b9['bindFramebuffer'](_0x3d36b9[_0x535f9b(0x9d)],_0x512de6[_0x535f9b(0xf7)]()),_0x3d36b9[_0x535f9b(0xda)](_0x3d36b9[_0x535f9b(0xcf)],_0x512de6[_0x535f9b(0x6f)]()),_0x3d36b9[_0x535f9b(0x110)](0x0,0x0,_0xb78b66[0x0],_0xb78b66[0x1]),_0x3d36b9[_0x535f9b(0x7c)](_0x3d36b9[_0x535f9b(0x120)],_0x512de6['getTexture']()),_0x3d36b9['clearColor'](0x0,0x0,0x0,0x0),_0x3d36b9[_0x535f9b(0xb1)](0x0,0x1),_0x3d36b9[_0x535f9b(0xd8)](0x1),_0x3d36b9['clear'](_0x3d36b9[_0x535f9b(0x111)]|_0x3d36b9[_0x535f9b(0x6d)]),_0x3d36b9[_0x535f9b(0x115)](_0x3d36b9[_0x535f9b(0xb7)]),_0x3d36b9[_0x535f9b(0x102)](_0x3d36b9[_0x535f9b(0xd5)],_0x454a9a?_0x3d36b9[_0x535f9b(0xbd)]:_0x3d36b9[_0x535f9b(0xdf)]),_0x52268c?(_0x3d36b9[_0x535f9b(0x115)](_0x3d36b9[_0x535f9b(0xcd)]),_0x3d36b9[_0x535f9b(0x75)](_0x3d36b9['LEQUAL'])):_0x3d36b9[_0x535f9b(0xec)](_0x3d36b9[_0x535f9b(0xcd)]);}['drawElements'](_0x2627f8,_0xa70a6c){const _0x5d9b16=_0x29b6ea,_0x58bb1f=this[_0x5d9b16(0xb9)];this[_0x5d9b16(0x105)](_0x5d9b16(0x95));const _0x55a457=_0x58bb1f['UNSIGNED_INT'],_0x32e0d6=0x4,_0x1a4aa6=_0xa70a6c-_0x2627f8,_0x322e8a=_0x2627f8*_0x32e0d6;_0x58bb1f['drawElements'](_0x58bb1f[_0x5d9b16(0xb3)],_0x1a4aa6,_0x55a457,_0x322e8a);}[_0x29b6ea(0x11c)](_0x2af41c,_0x42720f,_0x5de38d){const _0x5023be=_0x29b6ea;for(let _0x47cded=0x0,_0x423a7a=this[_0x5023be(0x79)][_0x5023be(0x11e)];_0x47cded<_0x423a7a;_0x47cded++){_0x47cded===_0x423a7a-0x1?this[_0x5023be(0x79)][_0x47cded][_0x5023be(0xac)](_0x2af41c,null,_0x42720f,_0x5de38d):this[_0x5023be(0x79)][_0x47cded]['apply'](_0x2af41c,this[_0x5023be(0x79)][_0x47cded+0x1]);}}[_0x29b6ea(0x86)](){const _0x397fa1=_0x29b6ea;return this['gl_'][_0x397fa1(0x108)];}['getGL'](){const _0x1fb8aa=_0x29b6ea;return this[_0x1fb8aa(0xb9)];}['applyFrameState'](_0x30822d){const _0x2b2d8b=_0x29b6ea,_0x43bb7c=_0x30822d[_0x2b2d8b(0xfd)],_0x32b833=_0x30822d['viewState'][_0x2b2d8b(0xf3)],_0x4bee64=_0x30822d[_0x2b2d8b(0xdc)];this[_0x2b2d8b(0xdd)](DefaultUniform[_0x2b2d8b(0x9b)],(Date[_0x2b2d8b(0x109)]()-this[_0x2b2d8b(0xc7)])*0.001),this['setUniformFloatValue'](DefaultUniform['ZOOM'],_0x30822d[_0x2b2d8b(0xa6)][_0x2b2d8b(0xe1)]),this[_0x2b2d8b(0xdd)](DefaultUniform[_0x2b2d8b(0xd6)],_0x30822d[_0x2b2d8b(0xa6)][_0x2b2d8b(0xa2)]),this[_0x2b2d8b(0xdd)](DefaultUniform[_0x2b2d8b(0xf9)],_0x4bee64),this[_0x2b2d8b(0xd2)](DefaultUniform['VIEWPORT_SIZE_PX'],[_0x43bb7c[0x0],_0x43bb7c[0x1]]),this['setUniformFloatValue'](DefaultUniform[_0x2b2d8b(0xfa)],_0x32b833);}['applyHitDetectionUniform'](_0x2e6778){const _0xa9799f=_0x29b6ea,_0x438051=this[_0xa9799f(0x117)](DefaultUniform[_0xa9799f(0x9f)]);this[_0xa9799f(0xe9)]()[_0xa9799f(0xed)](_0x438051,_0x2e6778?0x1:0x0),_0x2e6778&&this[_0xa9799f(0xdd)](DefaultUniform[_0xa9799f(0xf9)],0.5);}[_0x29b6ea(0x8c)](_0x4e081b){const _0x3f636f=_0x29b6ea,_0x33bd1d=this[_0x3f636f(0xb9)];let _0x23df3e,_0x31ebfd=0x0;this[_0x3f636f(0x104)][_0x3f636f(0xce)](_0x4f1661=>{const _0x556b6b=_0x3f636f;_0x23df3e=typeof _0x4f1661[_0x556b6b(0x113)]===_0x556b6b(0xd9)?_0x4f1661['value'](_0x4e081b):_0x4f1661[_0x556b6b(0x113)];if(_0x23df3e instanceof HTMLCanvasElement||_0x23df3e instanceof HTMLImageElement||_0x23df3e instanceof ImageData||_0x23df3e instanceof WebGLTexture){if(_0x23df3e instanceof WebGLTexture&&!_0x4f1661[_0x556b6b(0x97)])_0x4f1661['prevValue']=undefined,_0x4f1661['texture']=_0x23df3e;else!_0x4f1661[_0x556b6b(0x97)]&&(_0x4f1661[_0x556b6b(0xb2)]=undefined,_0x4f1661[_0x556b6b(0x97)]=_0x33bd1d[_0x556b6b(0xcc)]());this[_0x556b6b(0x7c)](_0x4f1661[_0x556b6b(0x97)],_0x31ebfd,_0x4f1661['name']),_0x33bd1d['texParameteri'](_0x33bd1d[_0x556b6b(0x120)],_0x33bd1d[_0x556b6b(0x11b)],_0x33bd1d[_0x556b6b(0xe3)]),_0x33bd1d['texParameteri'](_0x33bd1d[_0x556b6b(0x120)],_0x33bd1d[_0x556b6b(0x10b)],_0x33bd1d[_0x556b6b(0x106)]),_0x33bd1d['texParameteri'](_0x33bd1d[_0x556b6b(0x120)],_0x33bd1d[_0x556b6b(0xaf)],_0x33bd1d[_0x556b6b(0x106)]);const _0x4a6ee1=!(_0x23df3e instanceof HTMLImageElement)||_0x23df3e[_0x556b6b(0xde)];!(_0x23df3e instanceof WebGLTexture)&&_0x4a6ee1&&_0x4f1661[_0x556b6b(0xb2)]!==_0x23df3e&&(_0x4f1661[_0x556b6b(0xb2)]=_0x23df3e,_0x33bd1d['texImage2D'](_0x33bd1d[_0x556b6b(0x120)],0x0,_0x33bd1d[_0x556b6b(0xc3)],_0x33bd1d['RGBA'],_0x33bd1d[_0x556b6b(0xbb)],_0x23df3e)),_0x31ebfd++;}else{if(Array[_0x556b6b(0xca)](_0x23df3e)&&_0x23df3e['length']===0x6)this[_0x556b6b(0x9e)](_0x4f1661[_0x556b6b(0xf5)],fromTransform(this['tmpMat4_'],_0x23df3e));else{if(Array[_0x556b6b(0xca)](_0x23df3e)&&_0x23df3e[_0x556b6b(0x11e)]<=0x4)switch(_0x23df3e[_0x556b6b(0x11e)]){case 0x2:_0x33bd1d['uniform2f'](this[_0x556b6b(0x117)](_0x4f1661[_0x556b6b(0xf5)]),_0x23df3e[0x0],_0x23df3e[0x1]);return;case 0x3:_0x33bd1d[_0x556b6b(0xee)](this[_0x556b6b(0x117)](_0x4f1661[_0x556b6b(0xf5)]),_0x23df3e[0x0],_0x23df3e[0x1],_0x23df3e[0x2]);return;case 0x4:_0x33bd1d[_0x556b6b(0xf1)](this['getUniformLocation'](_0x4f1661[_0x556b6b(0xf5)]),_0x23df3e[0x0],_0x23df3e[0x1],_0x23df3e[0x2],_0x23df3e[0x3]);return;default:return;}else typeof _0x23df3e==='number'&&_0x33bd1d[_0x556b6b(0x116)](this[_0x556b6b(0x117)](_0x4f1661[_0x556b6b(0xf5)]),_0x23df3e);}}});}[_0x29b6ea(0x8b)](_0x3b49c7,_0x8918cb){const _0x28f07f=_0x29b6ea,_0x56ec78=this[_0x28f07f(0xb9)];_0x56ec78[_0x28f07f(0x8b)](_0x3b49c7),this['currentProgram_']=_0x3b49c7,_0x8918cb&&(this[_0x28f07f(0xcb)](_0x8918cb),this[_0x28f07f(0x8c)](_0x8918cb));}[_0x29b6ea(0x7f)](_0xac102c,_0x328705){const _0xc030dd=_0x29b6ea,_0x205ed2=this[_0xc030dd(0xb9)],_0x49c6f4=_0x205ed2[_0xc030dd(0x7b)](_0x328705);return _0x205ed2[_0xc030dd(0xba)](_0x49c6f4,_0xac102c),_0x205ed2[_0xc030dd(0x7f)](_0x49c6f4),_0x49c6f4;}[_0x29b6ea(0xef)](_0x5a2108,_0x2444c3){const _0xf5d11a=_0x29b6ea,_0x3977fc=this[_0xf5d11a(0xb9)],_0x49e212=this[_0xf5d11a(0x7f)](_0x5a2108,_0x3977fc['FRAGMENT_SHADER']),_0x59fc49=this[_0xf5d11a(0x7f)](_0x2444c3,_0x3977fc[_0xf5d11a(0xaa)]),_0x2b06ec=_0x3977fc['createProgram']();_0x3977fc[_0xf5d11a(0x118)](_0x2b06ec,_0x49e212),_0x3977fc[_0xf5d11a(0x118)](_0x2b06ec,_0x59fc49),_0x3977fc[_0xf5d11a(0x99)](_0x2b06ec);if(!_0x3977fc[_0xf5d11a(0x69)](_0x49e212,_0x3977fc[_0xf5d11a(0x6e)])){const _0x33e2f0=_0xf5d11a(0xa0)+_0x3977fc[_0xf5d11a(0x10d)](_0x49e212);throw new Error(_0x33e2f0);}_0x3977fc[_0xf5d11a(0x8a)](_0x49e212);if(!_0x3977fc[_0xf5d11a(0x69)](_0x59fc49,_0x3977fc['COMPILE_STATUS'])){const _0x3d9bff=_0xf5d11a(0xfe)+_0x3977fc['getShaderInfoLog'](_0x59fc49);throw new Error(_0x3d9bff);}_0x3977fc[_0xf5d11a(0x8a)](_0x59fc49);if(!_0x3977fc['getProgramParameter'](_0x2b06ec,_0x3977fc['LINK_STATUS'])){const _0xb67312='GL\x20program\x20linking\x20failed:\x20'+_0x3977fc['getProgramInfoLog'](_0x2b06ec);throw new Error(_0xb67312);}return _0x2b06ec;}[_0x29b6ea(0x117)](_0x5272ff){const _0x7b8d94=_0x29b6ea,_0x1328a7=getUid(this[_0x7b8d94(0xff)]);return this[_0x7b8d94(0x6c)][_0x1328a7]===undefined&&(this[_0x7b8d94(0x6c)][_0x1328a7]={}),this[_0x7b8d94(0x6c)][_0x1328a7][_0x5272ff]===undefined&&(this[_0x7b8d94(0x6c)][_0x1328a7][_0x5272ff]=this[_0x7b8d94(0xb9)][_0x7b8d94(0x117)](this[_0x7b8d94(0xff)],_0x5272ff)),this['uniformLocationsByProgram_'][_0x1328a7][_0x5272ff];}[_0x29b6ea(0xbc)](_0x3e81c9){const _0x5acc87=_0x29b6ea,_0x21fd5a=getUid(this[_0x5acc87(0xff)]);return this[_0x5acc87(0xb5)][_0x21fd5a]===undefined&&(this[_0x5acc87(0xb5)][_0x21fd5a]={}),this[_0x5acc87(0xb5)][_0x21fd5a][_0x3e81c9]===undefined&&(this['attribLocationsByProgram_'][_0x21fd5a][_0x3e81c9]=this[_0x5acc87(0xb9)]['getAttribLocation'](this['currentProgram_'],_0x3e81c9)),this['attribLocationsByProgram_'][_0x21fd5a][_0x3e81c9];}[_0x29b6ea(0x72)](_0x3f99c0,_0x28e437){const _0x13afc1=_0x29b6ea,_0x1f551f=_0x3f99c0['size'],_0x2a7971=_0x3f99c0[_0x13afc1(0xa6)]['rotation'],_0x375e52=_0x3f99c0[_0x13afc1(0xa6)]['resolution'],_0x28daa3=_0x3f99c0[_0x13afc1(0xa6)]['center'];return _0x4b3de0(_0x28e437,0x0,0x0,0x2/(_0x375e52*_0x1f551f[0x0]),0x2/(_0x375e52*_0x1f551f[0x1]),-_0x2a7971,-_0x28daa3[0x0],-_0x28daa3[0x1]),_0x28e437;}[_0x29b6ea(0xdd)](_0x5c3208,_0x395661){const _0x3e5a8f=_0x29b6ea;this[_0x3e5a8f(0xb9)][_0x3e5a8f(0x116)](this[_0x3e5a8f(0x117)](_0x5c3208),_0x395661);}[_0x29b6ea(0xd2)](_0x27ee2a,_0x5a6527){const _0x1d9969=_0x29b6ea;this['gl_']['uniform2fv'](this[_0x1d9969(0x117)](_0x27ee2a),_0x5a6527);}[_0x29b6ea(0x84)](_0x1a704f,_0x16d5b4){const _0x4612a2=_0x29b6ea;this['gl_']['uniform4fv'](this[_0x4612a2(0x117)](_0x1a704f),_0x16d5b4);}[_0x29b6ea(0x9e)](_0x3faf7a,_0x3202a2){const _0x34ea39=_0x29b6ea;this[_0x34ea39(0xb9)][_0x34ea39(0x8e)](this[_0x34ea39(0x117)](_0x3faf7a),![],_0x3202a2);}[_0x29b6ea(0xc6)](_0x1a5ef7,_0x191f30,_0x50d9b2,_0x527da2,_0x7a487a){const _0x34c39c=_0x29b6ea,_0x5122ed=this['getAttributeLocation'](_0x1a5ef7);if(_0x5122ed<0x0)return;this[_0x34c39c(0xb9)]['enableVertexAttribArray'](_0x5122ed),this[_0x34c39c(0xb9)]['vertexAttribPointer'](_0x5122ed,_0x191f30,_0x50d9b2,![],_0x527da2,_0x7a487a);}['enableAttributes'](_0x3ce077){const _0x56cf8b=_0x29b6ea,_0x5725ec=computeAttributesStride(_0x3ce077);let _0x3c7e49=0x0;for(let _0x57061c=0x0;_0x57061c<_0x3ce077[_0x56cf8b(0x11e)];_0x57061c++){const _0x102eed=_0x3ce077[_0x57061c];this[_0x56cf8b(0xc6)](_0x102eed['name'],_0x102eed[_0x56cf8b(0xfd)],_0x102eed[_0x56cf8b(0x119)]||FLOAT,_0x5725ec,_0x3c7e49),_0x3c7e49+=_0x102eed[_0x56cf8b(0xfd)]*getByteSizeFromType(_0x102eed[_0x56cf8b(0x119)]);}}[_0x29b6ea(0x88)](_0x10ffa0){const _0x3592d9=_0x29b6ea;clear(this[_0x3592d9(0x107)]),this['currentProgram_']=null,_0x10ffa0[_0x3592d9(0x85)]();}[_0x29b6ea(0x77)](){this['needsToBeRecreated_']=!![];}[_0x29b6ea(0x80)](){return this['needsToBeRecreated_'];}[_0x29b6ea(0xcc)](_0x98210e,_0x24f38a,_0xd75dc0,_0x506bcc){const _0x57f286=_0x29b6ea,_0x107aa5=this['gl_'];_0xd75dc0=_0xd75dc0||_0x107aa5['createTexture']();const _0x5c8855=_0x506bcc?_0x107aa5['NEAREST']:_0x107aa5['LINEAR'];_0x107aa5['bindTexture'](_0x107aa5[_0x57f286(0x120)],_0xd75dc0),_0x107aa5[_0x57f286(0xc9)](_0x107aa5[_0x57f286(0x120)],_0x107aa5[_0x57f286(0x11b)],_0x5c8855),_0x107aa5[_0x57f286(0xc9)](_0x107aa5[_0x57f286(0x120)],_0x107aa5[_0x57f286(0x9a)],_0x5c8855),_0x107aa5[_0x57f286(0xc9)](_0x107aa5[_0x57f286(0x120)],_0x107aa5[_0x57f286(0x10b)],_0x107aa5[_0x57f286(0x106)]),_0x107aa5['texParameteri'](_0x107aa5[_0x57f286(0x120)],_0x107aa5[_0x57f286(0xaf)],_0x107aa5[_0x57f286(0x106)]);const _0x5cc8a2=0x0,_0x246f50=_0x107aa5[_0x57f286(0xc3)],_0x16c55d=0x0,_0x41513f=_0x107aa5[_0x57f286(0xc3)],_0x175d5c=_0x107aa5[_0x57f286(0xbb)];if(_0x24f38a instanceof Uint8Array)_0x107aa5['texImage2D'](_0x107aa5[_0x57f286(0x120)],_0x5cc8a2,_0x246f50,_0x98210e[0x0],_0x98210e[0x1],_0x16c55d,_0x41513f,_0x175d5c,_0x24f38a);else _0x24f38a?_0x107aa5[_0x57f286(0xeb)](_0x107aa5['TEXTURE_2D'],_0x5cc8a2,_0x246f50,_0x41513f,_0x175d5c,_0x24f38a):_0x107aa5[_0x57f286(0xeb)](_0x107aa5[_0x57f286(0x120)],_0x5cc8a2,_0x246f50,_0x98210e[0x0],_0x98210e[0x1],_0x16c55d,_0x41513f,_0x175d5c,null);return _0xd75dc0;}}export function computeAttributesStride(_0x397ab2){const _0x5c6ed8=_0x29b6ea;let _0x3c97d0=0x0;for(let _0x1e7d93=0x0;_0x1e7d93<_0x397ab2['length'];_0x1e7d93++){const _0x51ec6b=_0x397ab2[_0x1e7d93];_0x3c97d0+=_0x51ec6b[_0x5c6ed8(0xfd)]*getByteSizeFromType(_0x51ec6b[_0x5c6ed8(0x119)]);}return _0x3c97d0;}function getByteSizeFromType(_0x11f0fa){const _0x3b48ae=_0x29b6ea;switch(_0x11f0fa){case AttributeType[_0x3b48ae(0xbb)]:return Uint8Array['BYTES_PER_ELEMENT'];case AttributeType['UNSIGNED_SHORT']:return Uint16Array['BYTES_PER_ELEMENT'];case AttributeType['UNSIGNED_INT']:return Uint32Array[_0x3b48ae(0x101)];case AttributeType[_0x3b48ae(0xb6)]:default:return Float32Array['BYTES_PER_ELEMENT'];}}export default WebGLHelper;