const _0x4cacd2=_0x293a;(function(_0x3739c0,_0x5d8100){const _0x3a75a3=_0x293a,_0x4f5a64=_0x3739c0();while(!![]){try{const _0xedea3e=parseInt(_0x3a75a3(0x11d))/0x1+parseInt(_0x3a75a3(0xef))/0x2*(parseInt(_0x3a75a3(0x103))/0x3)+-parseInt(_0x3a75a3(0x10a))/0x4*(parseInt(_0x3a75a3(0xe7))/0x5)+parseInt(_0x3a75a3(0x124))/0x6+-parseInt(_0x3a75a3(0x11b))/0x7*(-parseInt(_0x3a75a3(0x11a))/0x8)+-parseInt(_0x3a75a3(0xf8))/0x9*(parseInt(_0x3a75a3(0xf9))/0xa)+-parseInt(_0x3a75a3(0x101))/0xb*(parseInt(_0x3a75a3(0x110))/0xc);if(_0xedea3e===_0x5d8100)break;else _0x4f5a64['push'](_0x4f5a64['shift']());}catch(_0x3e9514){_0x4f5a64['push'](_0x4f5a64['shift']());}}}(_0xac9e,0xe3238));function _0x293a(_0x5b05d3,_0x56a0d1){const _0xac9eb3=_0xac9e();return _0x293a=function(_0x293aa1,_0x114e28){_0x293aa1=_0x293aa1-0xe4;let _0x3c13c5=_0xac9eb3[_0x293aa1];return _0x3c13c5;},_0x293a(_0x5b05d3,_0x56a0d1);}import _0x1c623a from'./BaseTileRepresentation.js';import _0x25b01a,{asArrayLike,asImageLike}from'../DataTile.js';import _0x4915c9 from'../ImageTile.js';import _0x47ea6c from'../reproj/Tile.js';import _0x51224c from'./Buffer.js';import{ARRAY_BUFFER,STATIC_DRAW}from'../webgl.js';import{createCanvasContext2D}from'../dom.js';import{toSize}from'../size.js';function bindAndConfigure(_0xabb62d,_0x2c7865,_0x37fe00){const _0x1a7c86=_0x293a,_0x270327=_0x37fe00?_0xabb62d[_0x1a7c86(0xf2)]:_0xabb62d[_0x1a7c86(0xf4)];_0xabb62d[_0x1a7c86(0xfe)](_0xabb62d[_0x1a7c86(0xe9)],_0x2c7865),_0xabb62d[_0x1a7c86(0xf0)](_0xabb62d['TEXTURE_2D'],_0xabb62d[_0x1a7c86(0x106)],_0xabb62d[_0x1a7c86(0xfb)]),_0xabb62d['texParameteri'](_0xabb62d[_0x1a7c86(0xe9)],_0xabb62d[_0x1a7c86(0x119)],_0xabb62d[_0x1a7c86(0xfb)]),_0xabb62d[_0x1a7c86(0xf0)](_0xabb62d['TEXTURE_2D'],_0xabb62d['TEXTURE_MIN_FILTER'],_0x270327),_0xabb62d['texParameteri'](_0xabb62d[_0x1a7c86(0xe9)],_0xabb62d['TEXTURE_MAG_FILTER'],_0x270327);}function _0xac9e(){const _0x31b5bb=['294XAvRaq','texParameteri','data','LINEAR','deleteBuffer','NEAREST','texImage2D','grid','pixelStorei','9vXHshL','6741850urXREg','drawImage','CLAMP_TO_EDGE','deleteTexture','UNSIGNED_BYTE','bindTexture','getImagePixelData_','createTexture','11DMpJCP','getGL','29862sLSprE','renderSize_','gutter','TEXTURE_WRAP_S','fromArray','tileCoord','getExtension','2180lvJcSq','buffer','Unsupported\x20number\x20of\x20bands:\x20','RGBA','length','interpolate','17243484BiJgmW','getArrayPixelData_','getSize','byteLength','floor','getTileSize','OES_texture_float_linear','getData','uploadTile','TEXTURE_WRAP_T','8uRyQGM','3640742CWVRAd','ceil','550294UiPfgK','push','slice','UNPACK_ALIGNMENT','LUMINANCE','FLOAT','getImage','7451874hAWedo','helper','coords','RGB','loaded','setReady','flushBufferData','6735ObWWoD','setHelper','TEXTURE_2D','getImageData','textures','tile','bandCount','setTile'];_0xac9e=function(){return _0x31b5bb;};return _0xac9e();}function uploadImageTexture(_0x2ab97f,_0xf1b6ba,_0x23bd63,_0x472cbc){const _0x5f48c9=_0x293a;bindAndConfigure(_0x2ab97f,_0xf1b6ba,_0x472cbc),_0x2ab97f[_0x5f48c9(0xf5)](_0x2ab97f['TEXTURE_2D'],0x0,_0x2ab97f[_0x5f48c9(0x10d)],_0x2ab97f['RGBA'],_0x2ab97f['UNSIGNED_BYTE'],_0x23bd63);}function uploadDataTexture(_0x5f0415,_0x5edb45,_0x205810,_0x2bf975,_0x2a5056,_0x1bbc35){const _0x45062e=_0x293a,_0xade053=_0x5f0415[_0x45062e(0x102)]();let _0x46f57d,_0x1a94dd;if(_0x205810 instanceof Float32Array){_0x46f57d=_0xade053[_0x45062e(0x122)],_0x5f0415[_0x45062e(0x109)]('OES_texture_float');const _0x3bb6d3=_0x5f0415[_0x45062e(0x109)](_0x45062e(0x116));_0x1a94dd=_0x3bb6d3!==null;}else _0x46f57d=_0xade053[_0x45062e(0xfd)],_0x1a94dd=!![];bindAndConfigure(_0xade053,_0x5edb45,_0x1bbc35&&_0x1a94dd);const _0x3d3401=_0x205810['byteLength']/_0x2bf975[0x1];let _0x2e3237=0x1;if(_0x3d3401%0x8===0x0)_0x2e3237=0x8;else{if(_0x3d3401%0x4===0x0)_0x2e3237=0x4;else _0x3d3401%0x2===0x0&&(_0x2e3237=0x2);}let _0x28c064;switch(_0x2a5056){case 0x1:{_0x28c064=_0xade053[_0x45062e(0x121)];break;}case 0x2:{_0x28c064=_0xade053['LUMINANCE_ALPHA'];break;}case 0x3:{_0x28c064=_0xade053[_0x45062e(0x127)];break;}case 0x4:{_0x28c064=_0xade053['RGBA'];break;}default:{throw new Error(_0x45062e(0x10c)+_0x2a5056);}}const _0x41ced6=_0xade053['getParameter'](_0xade053[_0x45062e(0x120)]);_0xade053['pixelStorei'](_0xade053[_0x45062e(0x120)],_0x2e3237),_0xade053[_0x45062e(0xf5)](_0xade053[_0x45062e(0xe9)],0x0,_0x28c064,_0x2bf975[0x0],_0x2bf975[0x1],0x0,_0x28c064,_0x46f57d,_0x205810),_0xade053[_0x45062e(0xf7)](_0xade053[_0x45062e(0x120)],_0x41ced6);}let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(0x1,0x1,undefined,{'willReadFrequently':!![]});}class TileTexture extends _0x1c623a{constructor(_0xc19fa0){const _0x1b3d4b=_0x293a;super(_0xc19fa0),this[_0x1b3d4b(0xeb)]=[],this[_0x1b3d4b(0x104)]=toSize(_0xc19fa0[_0x1b3d4b(0xf6)][_0x1b3d4b(0x115)](_0xc19fa0['tile'][_0x1b3d4b(0x108)][0x0])),this[_0x1b3d4b(0xed)]=NaN;const _0x18c397=new _0x51224c(ARRAY_BUFFER,STATIC_DRAW);_0x18c397[_0x1b3d4b(0x107)]([0x0,0x1,0x1,0x1,0x1,0x0,0x0,0x0]),this['helper'][_0x1b3d4b(0xe6)](_0x18c397),this[_0x1b3d4b(0x126)]=_0x18c397,this[_0x1b3d4b(0xee)](_0xc19fa0[_0x1b3d4b(0xec)]);}[_0x4cacd2(0xe8)](_0x259802){const _0x4970b3=_0x4cacd2,_0x52710b=this[_0x4970b3(0x125)]?.[_0x4970b3(0x102)]();if(_0x52710b){this['helper'][_0x4970b3(0xf3)](this['coords']);for(let _0x4bab62=0x0;_0x4bab62<this[_0x4970b3(0xeb)][_0x4970b3(0x10e)];++_0x4bab62){_0x52710b[_0x4970b3(0xfc)](this[_0x4970b3(0xeb)][_0x4bab62]);}}super['setHelper'](_0x259802),_0x259802&&_0x259802[_0x4970b3(0xe6)](this[_0x4970b3(0x126)]);}[_0x4cacd2(0x118)](){const _0x189070=_0x4cacd2,_0xe6760b=this[_0x189070(0x125)],_0x59939d=_0xe6760b[_0x189070(0x102)](),_0x363c5a=this[_0x189070(0xec)];this[_0x189070(0xeb)][_0x189070(0x10e)]=0x0;let _0x359405;_0x363c5a instanceof _0x4915c9||_0x363c5a instanceof _0x47ea6c?_0x359405=_0x363c5a[_0x189070(0x123)]():_0x359405=_0x363c5a[_0x189070(0x117)]();const _0x20996e=asImageLike(_0x359405);if(_0x20996e){const _0x7ea884=_0x59939d[_0x189070(0x100)]();this[_0x189070(0xeb)]['push'](_0x7ea884),this[_0x189070(0xed)]=0x4,uploadImageTexture(_0x59939d,_0x7ea884,_0x20996e,_0x363c5a[_0x189070(0x10f)]),this[_0x189070(0xe5)]();return;}_0x359405=asArrayLike(_0x359405);const _0x1c16ec=_0x363c5a[_0x189070(0x112)](),_0x1e6182=[_0x1c16ec[0x0]+0x2*this[_0x189070(0x105)],_0x1c16ec[0x1]+0x2*this[_0x189070(0x105)]],_0x1f1a48=_0x359405 instanceof Float32Array,_0x1e1e30=_0x1e6182[0x0]*_0x1e6182[0x1],_0x4998b1=_0x1f1a48?Float32Array:Uint8Array,_0x45a463=_0x4998b1['BYTES_PER_ELEMENT'],_0x3d9ec3=_0x359405[_0x189070(0x113)]/_0x1e6182[0x1];this[_0x189070(0xed)]=Math[_0x189070(0x114)](_0x3d9ec3/_0x45a463/_0x1e6182[0x0]);const _0x2a1b03=Math[_0x189070(0x11c)](this[_0x189070(0xed)]/0x4);if(_0x2a1b03===0x1){const _0x1b7db4=_0x59939d[_0x189070(0x100)]();this[_0x189070(0xeb)][_0x189070(0x11e)](_0x1b7db4),uploadDataTexture(_0xe6760b,_0x1b7db4,_0x359405,_0x1e6182,this[_0x189070(0xed)],_0x363c5a[_0x189070(0x10f)]),this['setReady']();return;}const _0x1479a1=new Array(_0x2a1b03);for(let _0x2dccb0=0x0;_0x2dccb0<_0x2a1b03;++_0x2dccb0){const _0x4d1d60=_0x59939d[_0x189070(0x100)]();this[_0x189070(0xeb)]['push'](_0x4d1d60);const _0x547235=_0x2dccb0<_0x2a1b03-0x1?0x4:(this[_0x189070(0xed)]-0x1)%0x4+0x1;_0x1479a1[_0x2dccb0]=new _0x4998b1(_0x1e1e30*_0x547235);}let _0x46f8ac=0x0,_0x569b19=0x0;const _0x142305=_0x1e6182[0x0]*this['bandCount'];for(let _0x1f6600=0x0;_0x1f6600<_0x1e6182[0x1];++_0x1f6600){for(let _0x5f536f=0x0;_0x5f536f<_0x142305;++_0x5f536f){const _0x30248e=_0x359405[_0x569b19+_0x5f536f],_0x1f2169=Math['floor'](_0x46f8ac/this[_0x189070(0xed)]),_0x5ac4f7=_0x5f536f%this['bandCount'],_0x493fdf=Math[_0x189070(0x114)](_0x5ac4f7/0x4),_0x781b9d=_0x1479a1[_0x493fdf],_0xb15269=_0x781b9d[_0x189070(0x10e)]/_0x1e1e30,_0x19c582=_0x5ac4f7%0x4;_0x781b9d[_0x1f2169*_0xb15269+_0x19c582]=_0x30248e,++_0x46f8ac;}_0x569b19+=_0x3d9ec3/_0x45a463;}for(let _0x359475=0x0;_0x359475<_0x2a1b03;++_0x359475){const _0x2958e4=this[_0x189070(0xeb)][_0x359475],_0x3441d0=_0x1479a1[_0x359475],_0x2dcd19=_0x3441d0[_0x189070(0x10e)]/_0x1e1e30;uploadDataTexture(_0xe6760b,_0x2958e4,_0x3441d0,_0x1e6182,_0x2dcd19,_0x363c5a[_0x189070(0x10f)]);}this[_0x189070(0xe5)]();}['getImagePixelData_'](_0x1ed68e,_0x509406,_0x489c29){const _0x1bf2c7=_0x4cacd2,_0x2e1a0a=this[_0x1bf2c7(0x105)],_0x416d36=this[_0x1bf2c7(0x104)][0x0],_0x455449=this[_0x1bf2c7(0x104)][0x1];!pixelContext&&createPixelContext();pixelContext['clearRect'](0x0,0x0,0x1,0x1);const _0x5e34b6=_0x1ed68e['width'],_0x403aab=_0x1ed68e['height'],_0x31cde5=_0x5e34b6-0x2*_0x2e1a0a,_0x594e52=_0x403aab-0x2*_0x2e1a0a,_0x2b1fad=_0x2e1a0a+Math[_0x1bf2c7(0x114)](_0x31cde5*(_0x509406/_0x416d36)),_0x1765bf=_0x2e1a0a+Math['floor'](_0x594e52*(_0x489c29/_0x455449));let _0xcf03f7;try{pixelContext[_0x1bf2c7(0xfa)](_0x1ed68e,_0x2b1fad,_0x1765bf,0x1,0x1,0x0,0x0,0x1,0x1),_0xcf03f7=pixelContext[_0x1bf2c7(0xea)](0x0,0x0,0x1,0x1)[_0x1bf2c7(0xf1)];}catch(_0x42b783){return pixelContext=null,null;}return _0xcf03f7;}[_0x4cacd2(0x111)](_0x2ab0f8,_0x7d5afa,_0xa1603d,_0x31d797){const _0x1ce001=_0x4cacd2,_0x5e9229=this['gutter'],_0x2da9cb=this['renderSize_'][0x0],_0x13443f=this[_0x1ce001(0x104)][0x1],_0x3fa6a1=_0x7d5afa[0x0],_0x363b44=_0x7d5afa[0x1],_0x23d9d1=_0x3fa6a1+0x2*_0x5e9229,_0x15f6ca=_0x363b44+0x2*_0x5e9229,_0x564c27=_0x5e9229+Math[_0x1ce001(0x114)](_0x3fa6a1*(_0xa1603d/_0x2da9cb)),_0x4cfa20=_0x5e9229+Math[_0x1ce001(0x114)](_0x363b44*(_0x31d797/_0x13443f));if(_0x2ab0f8 instanceof DataView){const _0x30b29f=_0x2ab0f8[_0x1ce001(0x113)]/(_0x23d9d1*_0x15f6ca),_0x1fdd8e=_0x30b29f*(_0x4cfa20*_0x23d9d1+_0x564c27),_0x2cda41=_0x2ab0f8[_0x1ce001(0x10b)][_0x1ce001(0x11f)](_0x1fdd8e,_0x1fdd8e+_0x30b29f);return new DataView(_0x2cda41);}const _0x54c49c=this[_0x1ce001(0xed)]*(_0x4cfa20*_0x23d9d1+_0x564c27);return _0x2ab0f8[_0x1ce001(0x11f)](_0x54c49c,_0x54c49c+this[_0x1ce001(0xed)]);}['getPixelData'](_0x119858,_0xab6369){const _0x5f4d7b=_0x4cacd2;if(!this[_0x5f4d7b(0xe4)])return null;if(this[_0x5f4d7b(0xec)]instanceof _0x25b01a){const _0x4d84d5=this['tile'][_0x5f4d7b(0x117)](),_0x39a819=asArrayLike(_0x4d84d5);if(_0x39a819){const _0x11804a=this[_0x5f4d7b(0xec)][_0x5f4d7b(0x112)]();return this[_0x5f4d7b(0x111)](_0x39a819,_0x11804a,_0x119858,_0xab6369);}return this[_0x5f4d7b(0xff)](asImageLike(_0x4d84d5),_0x119858,_0xab6369);}return this[_0x5f4d7b(0xff)](this[_0x5f4d7b(0xec)][_0x5f4d7b(0x123)](),_0x119858,_0xab6369);}}export default TileTexture;