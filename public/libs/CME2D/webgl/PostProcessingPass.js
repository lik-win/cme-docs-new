const _0x132e80=_0x5c40;(function(_0x410c8e,_0x7d297c){const _0x3edddd=_0x5c40,_0x547987=_0x410c8e();while(!![]){try{const _0x596029=-parseInt(_0x3edddd(0x1ad))/0x1+-parseInt(_0x3edddd(0x1a5))/0x2+parseInt(_0x3edddd(0x183))/0x3*(-parseInt(_0x3edddd(0x198))/0x4)+-parseInt(_0x3edddd(0x18f))/0x5+parseInt(_0x3edddd(0x1aa))/0x6*(parseInt(_0x3edddd(0x1b1))/0x7)+parseInt(_0x3edddd(0x199))/0x8+parseInt(_0x3edddd(0x17b))/0x9;if(_0x596029===_0x7d297c)break;else _0x547987['push'](_0x547987['shift']());}catch(_0x53cc6f){_0x547987['push'](_0x547987['shift']());}}}(_0x1727,0x34d0c));import{getUid}from'../util.js';const DEFAULT_VERTEX_SHADER=_0x132e80(0x190),DEFAULT_FRAGMENT_SHADER=_0x132e80(0x18a);function _0x5c40(_0x292edf,_0xbeb4ba){const _0x172773=_0x1727();return _0x5c40=function(_0x5c4045,_0x5abc0e){_0x5c4045=_0x5c4045-0x159;let _0x5b36eb=_0x172773[_0x5c4045];return _0x5b36eb;},_0x5c40(_0x292edf,_0xbeb4ba);}class WebGLPostProcessingPass{constructor(_0x1d6c97){const _0x319c90=_0x132e80;this[_0x319c90(0x19c)]=_0x1d6c97['webGlContext'];const _0x41b1c6=this[_0x319c90(0x19c)];this[_0x319c90(0x1bf)]=_0x1d6c97[_0x319c90(0x1b8)]||0x1,this[_0x319c90(0x17f)]=_0x41b1c6['createTexture'](),this[_0x319c90(0x184)]=null,this['frameBuffer_']=_0x41b1c6[_0x319c90(0x1ba)](),this['depthBuffer_']=_0x41b1c6[_0x319c90(0x1c7)]();const _0x22e68f=_0x41b1c6[_0x319c90(0x1c5)](_0x41b1c6[_0x319c90(0x15a)]);_0x41b1c6[_0x319c90(0x195)](_0x22e68f,_0x1d6c97['vertexShader']||DEFAULT_VERTEX_SHADER),_0x41b1c6[_0x319c90(0x1ab)](_0x22e68f);const _0x8fda43=_0x41b1c6[_0x319c90(0x1c5)](_0x41b1c6[_0x319c90(0x176)]);_0x41b1c6['shaderSource'](_0x8fda43,_0x1d6c97[_0x319c90(0x15f)]||DEFAULT_FRAGMENT_SHADER),_0x41b1c6[_0x319c90(0x1ab)](_0x8fda43),this[_0x319c90(0x192)]=_0x41b1c6[_0x319c90(0x1a6)](),_0x41b1c6[_0x319c90(0x1c3)](this['renderTargetProgram_'],_0x22e68f),_0x41b1c6[_0x319c90(0x1c3)](this[_0x319c90(0x192)],_0x8fda43),_0x41b1c6[_0x319c90(0x187)](this['renderTargetProgram_']),this[_0x319c90(0x174)]=_0x41b1c6[_0x319c90(0x1a7)]();const _0x2bc2cd=[-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,-0x1,0x1,0x1,-0x1,0x1];_0x41b1c6[_0x319c90(0x1be)](_0x41b1c6[_0x319c90(0x16c)],this[_0x319c90(0x174)]),_0x41b1c6[_0x319c90(0x19d)](_0x41b1c6[_0x319c90(0x16c)],new Float32Array(_0x2bc2cd),_0x41b1c6[_0x319c90(0x177)]),this[_0x319c90(0x186)]=_0x41b1c6[_0x319c90(0x173)](this[_0x319c90(0x192)],_0x319c90(0x16f)),this['renderTargetUniformLocation_']=_0x41b1c6[_0x319c90(0x161)](this[_0x319c90(0x192)],_0x319c90(0x1bc)),this[_0x319c90(0x1a8)]=_0x41b1c6[_0x319c90(0x161)](this[_0x319c90(0x192)],_0x319c90(0x1b4)),this[_0x319c90(0x19a)]=_0x41b1c6[_0x319c90(0x161)](this['renderTargetProgram_'],_0x319c90(0x185)),this[_0x319c90(0x1b7)]=[],_0x1d6c97[_0x319c90(0x1c0)]&&Object[_0x319c90(0x180)](_0x1d6c97[_0x319c90(0x1c0)])[_0x319c90(0x17e)](_0x2b5dee=>{const _0x5bd1bd=_0x319c90;this[_0x5bd1bd(0x1b7)]['push']({'value':_0x1d6c97[_0x5bd1bd(0x1c0)][_0x2b5dee],'location':_0x41b1c6['getUniformLocation'](this[_0x5bd1bd(0x192)],_0x2b5dee)});});}['getRenderTargetTexture'](){const _0x1f3eb8=_0x132e80;return this[_0x1f3eb8(0x17f)];}[_0x132e80(0x175)](){const _0x5d3107=_0x132e80;return this[_0x5d3107(0x19c)];}[_0x132e80(0x191)](_0x817d1){const _0x46ebab=_0x132e80,_0x1836ad=this[_0x46ebab(0x175)](),_0x29a959=[_0x1836ad[_0x46ebab(0x1bd)]*this[_0x46ebab(0x1bf)],_0x1836ad['drawingBufferHeight']*this['scaleRatio_']];_0x1836ad[_0x46ebab(0x15b)](_0x1836ad[_0x46ebab(0x162)],this['getFrameBuffer']()),_0x1836ad[_0x46ebab(0x1a3)](_0x1836ad[_0x46ebab(0x18d)],this['getDepthBuffer']()),_0x1836ad[_0x46ebab(0x15d)](0x0,0x0,_0x29a959[0x0],_0x29a959[0x1]);if(!this[_0x46ebab(0x184)]||this[_0x46ebab(0x184)][0x0]!==_0x29a959[0x0]||this[_0x46ebab(0x184)][0x1]!==_0x29a959[0x1]){this[_0x46ebab(0x184)]=_0x29a959;const _0x4ebc40=0x0,_0x9bdd02=_0x1836ad['RGBA'],_0x3359f6=0x0,_0x128c01=_0x1836ad['RGBA'],_0x51e339=_0x1836ad[_0x46ebab(0x179)],_0x28e76f=null;_0x1836ad[_0x46ebab(0x1a2)](_0x1836ad[_0x46ebab(0x171)],this[_0x46ebab(0x17f)]),_0x1836ad[_0x46ebab(0x168)](_0x1836ad[_0x46ebab(0x171)],_0x4ebc40,_0x9bdd02,_0x29a959[0x0],_0x29a959[0x1],_0x3359f6,_0x128c01,_0x51e339,_0x28e76f),_0x1836ad[_0x46ebab(0x182)](_0x1836ad[_0x46ebab(0x171)],_0x1836ad[_0x46ebab(0x17d)],_0x1836ad[_0x46ebab(0x1b2)]),_0x1836ad[_0x46ebab(0x182)](_0x1836ad[_0x46ebab(0x171)],_0x1836ad[_0x46ebab(0x16d)],_0x1836ad[_0x46ebab(0x1c8)]),_0x1836ad[_0x46ebab(0x182)](_0x1836ad['TEXTURE_2D'],_0x1836ad[_0x46ebab(0x1ae)],_0x1836ad[_0x46ebab(0x1c8)]),_0x1836ad[_0x46ebab(0x16a)](_0x1836ad[_0x46ebab(0x162)],_0x1836ad[_0x46ebab(0x188)],_0x1836ad[_0x46ebab(0x171)],this[_0x46ebab(0x17f)],0x0),_0x1836ad[_0x46ebab(0x167)](_0x1836ad[_0x46ebab(0x18d)],_0x1836ad[_0x46ebab(0x164)],_0x29a959[0x0],_0x29a959[0x1]),_0x1836ad[_0x46ebab(0x19e)](_0x1836ad[_0x46ebab(0x162)],_0x1836ad[_0x46ebab(0x18e)],_0x1836ad[_0x46ebab(0x18d)],this['depthBuffer_']);}}[_0x132e80(0x17c)](_0x257970,_0x4f1d82,_0x765efb,_0x340c7b){const _0x53c9b9=_0x132e80,_0x2da28f=this[_0x53c9b9(0x175)](),_0xaf6d5c=_0x257970[_0x53c9b9(0x19f)];_0x2da28f[_0x53c9b9(0x15b)](_0x2da28f['FRAMEBUFFER'],_0x4f1d82?_0x4f1d82[_0x53c9b9(0x196)]():null),_0x2da28f[_0x53c9b9(0x1c2)](_0x2da28f[_0x53c9b9(0x1a4)]),_0x2da28f[_0x53c9b9(0x1a2)](_0x2da28f[_0x53c9b9(0x171)],this[_0x53c9b9(0x17f)]);if(!_0x4f1d82){const _0x4c533a=getUid(_0x2da28f[_0x53c9b9(0x1c1)]);if(!_0x257970[_0x53c9b9(0x1a9)][_0x4c533a]){const _0x5f0090=_0x2da28f[_0x53c9b9(0x189)]();_0x5f0090&&_0x5f0090['preserveDrawingBuffer']&&(_0x2da28f[_0x53c9b9(0x1af)](0x0,0x0,0x0,0x0),_0x2da28f[_0x53c9b9(0x1a0)](0x1),_0x2da28f[_0x53c9b9(0x1bb)](_0x2da28f['COLOR_BUFFER_BIT']|_0x2da28f[_0x53c9b9(0x181)])),_0x257970[_0x53c9b9(0x1a9)][_0x4c533a]=!![];}}_0x2da28f['disable'](_0x2da28f[_0x53c9b9(0x1c4)]),_0x2da28f['enable'](_0x2da28f['BLEND']),_0x2da28f[_0x53c9b9(0x194)](_0x2da28f[_0x53c9b9(0x18b)],_0x2da28f[_0x53c9b9(0x1b6)]),_0x2da28f['viewport'](0x0,0x0,_0x2da28f[_0x53c9b9(0x1bd)],_0x2da28f[_0x53c9b9(0x1c9)]),_0x2da28f[_0x53c9b9(0x1be)](_0x2da28f['ARRAY_BUFFER'],this[_0x53c9b9(0x174)]),_0x2da28f[_0x53c9b9(0x178)](this['renderTargetProgram_']),_0x2da28f[_0x53c9b9(0x159)](this['renderTargetAttribLocation_']),_0x2da28f[_0x53c9b9(0x1b0)](this[_0x53c9b9(0x186)],0x2,_0x2da28f['FLOAT'],![],0x0,0x0),_0x2da28f[_0x53c9b9(0x197)](this['renderTargetUniformLocation_'],_0xaf6d5c[0x0],_0xaf6d5c[0x1]),_0x2da28f[_0x53c9b9(0x172)](this['renderTargetTextureLocation_'],0x0);const _0x4c928b=_0x257970[_0x53c9b9(0x15c)][_0x257970[_0x53c9b9(0x1b5)]][_0x53c9b9(0x160)];_0x2da28f[_0x53c9b9(0x19b)](this['renderTargetOpacityLocation_'],_0x4c928b),this[_0x53c9b9(0x1ca)](_0x257970),_0x765efb&&_0x765efb(_0x2da28f,_0x257970),_0x2da28f['drawArrays'](_0x2da28f[_0x53c9b9(0x1b9)],0x0,0x6),_0x340c7b&&_0x340c7b(_0x2da28f,_0x257970);}[_0x132e80(0x196)](){return this['frameBuffer_'];}[_0x132e80(0x163)](){const _0x2f5117=_0x132e80;return this[_0x2f5117(0x170)];}[_0x132e80(0x1ca)](_0x2792a7){const _0x160e14=_0x132e80,_0x3e57c5=this[_0x160e14(0x175)]();let _0x10f37a,_0x1dec86=0x1;this[_0x160e14(0x1b7)][_0x160e14(0x17e)](function(_0x425a3f){const _0x3b6d6f=_0x160e14;_0x10f37a=typeof _0x425a3f[_0x3b6d6f(0x17a)]==='function'?_0x425a3f[_0x3b6d6f(0x17a)](_0x2792a7):_0x425a3f['value'];if(_0x10f37a instanceof HTMLCanvasElement||_0x10f37a instanceof ImageData)!_0x425a3f['texture']&&(_0x425a3f[_0x3b6d6f(0x1a1)]=_0x3e57c5[_0x3b6d6f(0x16e)]()),_0x3e57c5['activeTexture'](_0x3e57c5['TEXTURE'+_0x1dec86]),_0x3e57c5[_0x3b6d6f(0x1a2)](_0x3e57c5[_0x3b6d6f(0x171)],_0x425a3f['texture']),_0x3e57c5[_0x3b6d6f(0x182)](_0x3e57c5[_0x3b6d6f(0x171)],_0x3e57c5[_0x3b6d6f(0x17d)],_0x3e57c5[_0x3b6d6f(0x1b2)]),_0x3e57c5[_0x3b6d6f(0x182)](_0x3e57c5[_0x3b6d6f(0x171)],_0x3e57c5[_0x3b6d6f(0x16d)],_0x3e57c5[_0x3b6d6f(0x1c8)]),_0x3e57c5[_0x3b6d6f(0x182)](_0x3e57c5['TEXTURE_2D'],_0x3e57c5['TEXTURE_WRAP_T'],_0x3e57c5[_0x3b6d6f(0x1c8)]),_0x10f37a instanceof ImageData?_0x3e57c5['texImage2D'](_0x3e57c5[_0x3b6d6f(0x171)],0x0,_0x3e57c5[_0x3b6d6f(0x169)],_0x3e57c5[_0x3b6d6f(0x169)],_0x10f37a[_0x3b6d6f(0x16b)],_0x10f37a[_0x3b6d6f(0x166)],0x0,_0x3e57c5[_0x3b6d6f(0x179)],new Uint8Array(_0x10f37a[_0x3b6d6f(0x165)])):_0x3e57c5[_0x3b6d6f(0x168)](_0x3e57c5['TEXTURE_2D'],0x0,_0x3e57c5[_0x3b6d6f(0x169)],_0x3e57c5[_0x3b6d6f(0x169)],_0x3e57c5[_0x3b6d6f(0x179)],_0x10f37a),_0x3e57c5[_0x3b6d6f(0x172)](_0x425a3f['location'],_0x1dec86++);else{if(Array[_0x3b6d6f(0x15e)](_0x10f37a))switch(_0x10f37a[_0x3b6d6f(0x1ac)]){case 0x2:_0x3e57c5[_0x3b6d6f(0x197)](_0x425a3f[_0x3b6d6f(0x1b3)],_0x10f37a[0x0],_0x10f37a[0x1]);return;case 0x3:_0x3e57c5[_0x3b6d6f(0x1c6)](_0x425a3f['location'],_0x10f37a[0x0],_0x10f37a[0x1],_0x10f37a[0x2]);return;case 0x4:_0x3e57c5[_0x3b6d6f(0x18c)](_0x425a3f['location'],_0x10f37a[0x0],_0x10f37a[0x1],_0x10f37a[0x2],_0x10f37a[0x3]);return;default:return;}else typeof _0x10f37a===_0x3b6d6f(0x193)&&_0x3e57c5[_0x3b6d6f(0x19b)](_0x425a3f[_0x3b6d6f(0x1b3)],_0x10f37a);}});}}export default WebGLPostProcessingPass;function _0x1727(){const _0x3a8cae=['getFrameBuffer','uniform2f','1053168qSVGXM','1672624ZqfXeG','renderTargetTextureLocation_','uniform1f','gl_','bufferData','framebufferRenderbuffer','size','clearDepth','texture','bindTexture','bindRenderbuffer','TEXTURE0','230718ftTwuy','createProgram','createBuffer','renderTargetOpacityLocation_','renderTargets','1012296SADSyK','compileShader','length','358529PjImGI','TEXTURE_WRAP_T','clearColor','vertexAttribPointer','14iOgZXU','LINEAR','location','u_opacity','layerIndex','ONE_MINUS_SRC_ALPHA','uniforms_','scaleRatio','TRIANGLES','createFramebuffer','clear','u_screenSize','drawingBufferWidth','bindBuffer','scaleRatio_','uniforms','canvas','activeTexture','attachShader','DEPTH_TEST','createShader','uniform3f','createRenderbuffer','CLAMP_TO_EDGE','drawingBufferHeight','applyUniforms','enableVertexAttribArray','VERTEX_SHADER','bindFramebuffer','layerStatesArray','viewport','isArray','fragmentShader','opacity','getUniformLocation','FRAMEBUFFER','getDepthBuffer','DEPTH_COMPONENT16','data','height','renderbufferStorage','texImage2D','RGBA','framebufferTexture2D','width','ARRAY_BUFFER','TEXTURE_WRAP_S','createTexture','a_position','depthBuffer_','TEXTURE_2D','uniform1i','getAttribLocation','renderTargetVerticesBuffer_','getGL','FRAGMENT_SHADER','STATIC_DRAW','useProgram','UNSIGNED_BYTE','value','4513284yDUnYM','apply','TEXTURE_MIN_FILTER','forEach','renderTargetTexture_','keys','DEPTH_BUFFER_BIT','texParameteri','3GVECMr','renderTargetTextureSize_','u_image','renderTargetAttribLocation_','linkProgram','COLOR_ATTACHMENT0','getContextAttributes','\x0a\x20\x20precision\x20mediump\x20float;\x0a\x0a\x20\x20uniform\x20sampler2D\x20u_image;\x0a\x20\x20uniform\x20float\x20u_opacity;\x0a\x0a\x20\x20varying\x20vec2\x20v_texCoord;\x0a\x0a\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(u_image,\x20v_texCoord)\x20*\x20u_opacity;\x0a\x20\x20}\x0a','ONE','uniform4f','RENDERBUFFER','DEPTH_ATTACHMENT','472370AvYONw','\x0a\x20\x20precision\x20mediump\x20float;\x0a\x0a\x20\x20attribute\x20vec2\x20a_position;\x0a\x20\x20varying\x20vec2\x20v_texCoord;\x0a\x20\x20varying\x20vec2\x20v_screenCoord;\x0a\x0a\x20\x20uniform\x20vec2\x20u_screenSize;\x0a\x0a\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20v_texCoord\x20=\x20a_position\x20*\x200.5\x20+\x200.5;\x0a\x20\x20\x20\x20v_screenCoord\x20=\x20v_texCoord\x20*\x20u_screenSize;\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(a_position,\x200.0,\x201.0);\x0a\x20\x20}\x0a','init','renderTargetProgram_','number','blendFunc','shaderSource'];_0x1727=function(){return _0x3a8cae;};return _0x1727();}