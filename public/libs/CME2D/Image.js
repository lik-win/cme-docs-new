const _0x34ee5a=_0x4613;(function(_0xd3d1e8,_0x300a43){const _0x5df58d=_0x4613,_0x53b1bb=_0xd3d1e8();while(!![]){try{const _0x3c8f5b=-parseInt(_0x5df58d(0x89))/0x1+-parseInt(_0x5df58d(0x94))/0x2+-parseInt(_0x5df58d(0x87))/0x3+-parseInt(_0x5df58d(0x9c))/0x4*(-parseInt(_0x5df58d(0xa0))/0x5)+parseInt(_0x5df58d(0xa2))/0x6*(parseInt(_0x5df58d(0x8a))/0x7)+-parseInt(_0x5df58d(0x8b))/0x8*(-parseInt(_0x5df58d(0x9d))/0x9)+parseInt(_0x5df58d(0x86))/0xa;if(_0x3c8f5b===_0x300a43)break;else _0x53b1bb['push'](_0x53b1bb['shift']());}catch(_0x4885ab){_0x53b1bb['push'](_0x53b1bb['shift']());}}}(_0x5cbc,0x508d8));import _0x3f3597 from'./events/Target.js';import _0x5b9d03 from'./events/EventType.js';import _0xf41017 from'./ImageState.js';import{CREATE_IMAGE_BITMAP,IMAGE_DECODE}from'./has.js';import{listenOnce,unlistenByKey}from'./events.js';import{toPromise}from'./functions.js';class ImageWrapper extends _0x3f3597{constructor(_0x57d2df,_0x35b8b7,_0x1597f4,_0x262a9d){const _0x5432e2=_0x4613;super(),this['extent']=_0x57d2df,this[_0x5432e2(0xaa)]=_0x1597f4,this[_0x5432e2(0x92)]=_0x35b8b7,this[_0x5432e2(0xa1)]=typeof _0x262a9d===_0x5432e2(0x8d)?_0xf41017[_0x5432e2(0xad)]:_0x262a9d,this[_0x5432e2(0x84)]=null,this[_0x5432e2(0x83)]=typeof _0x262a9d===_0x5432e2(0x8d)?_0x262a9d:null;}[_0x34ee5a(0xa9)](){const _0x269e0a=_0x34ee5a;this[_0x269e0a(0x99)](_0x5b9d03[_0x269e0a(0x85)]);}[_0x34ee5a(0x95)](){const _0x1af67d=_0x34ee5a;return this[_0x1af67d(0xa5)];}['getImage'](){const _0x152218=_0x34ee5a;return this[_0x152218(0x84)];}[_0x34ee5a(0xa6)](){return this['pixelRatio_'];}[_0x34ee5a(0xa3)](){return this['resolution'];}[_0x34ee5a(0x8e)](){const _0x5a717d=_0x34ee5a;return this[_0x5a717d(0xa1)];}[_0x34ee5a(0x9e)](){const _0xb8bc4a=_0x34ee5a;if(this['state']==_0xf41017[_0xb8bc4a(0xad)]){if(this[_0xb8bc4a(0x83)]){this[_0xb8bc4a(0xa1)]=_0xf41017['LOADING'],this[_0xb8bc4a(0xa9)]();const _0x40fab4=this['getResolution'](),_0x2a3468=Array[_0xb8bc4a(0x8f)](_0x40fab4)?_0x40fab4[0x0]:_0x40fab4;toPromise(()=>this[_0xb8bc4a(0x83)](this['getExtent'](),_0x2a3468,this[_0xb8bc4a(0xa6)]()))['then'](_0x1d2813=>{const _0x3ad8f8=_0xb8bc4a;_0x3ad8f8(0x93)in _0x1d2813&&(this[_0x3ad8f8(0x84)]=_0x1d2813[_0x3ad8f8(0x93)]),_0x3ad8f8(0xa5)in _0x1d2813&&(this[_0x3ad8f8(0xa5)]=_0x1d2813['extent']),_0x3ad8f8(0x92)in _0x1d2813&&(this[_0x3ad8f8(0x92)]=_0x1d2813[_0x3ad8f8(0x92)]),_0x3ad8f8(0xa8)in _0x1d2813&&(this[_0x3ad8f8(0xaa)]=_0x1d2813[_0x3ad8f8(0xa8)]),(_0x1d2813 instanceof HTMLImageElement||_0x1d2813 instanceof ImageBitmap||_0x1d2813 instanceof HTMLCanvasElement||_0x1d2813 instanceof HTMLVideoElement)&&(this[_0x3ad8f8(0x84)]=_0x1d2813),this[_0x3ad8f8(0xa1)]=_0xf41017[_0x3ad8f8(0x9a)];})[_0xb8bc4a(0xab)](_0xe72d4b=>{const _0x5da70e=_0xb8bc4a;this[_0x5da70e(0xa1)]=_0xf41017[_0x5da70e(0x9b)],console[_0x5da70e(0x8c)](_0xe72d4b);})[_0xb8bc4a(0x9f)](()=>this[_0xb8bc4a(0xa9)]());}}}['setImage'](_0x3900f6){const _0x23510f=_0x34ee5a;this[_0x23510f(0x84)]=_0x3900f6;}[_0x34ee5a(0x97)](_0x4924a3){const _0x7b6697=_0x34ee5a;this[_0x7b6697(0x92)]=_0x4924a3;}}export function listenImage(_0x42f2ac,_0x3d5ca9,_0x4715a9){const _0x3b3bf3=_0x34ee5a,_0xd28bc6=_0x42f2ac;let _0x179dff=!![],_0x1a0a0d=![],_0x21d9b7=![];const _0x41a53c=[listenOnce(_0xd28bc6,_0x5b9d03[_0x3b3bf3(0xa4)],function(){_0x21d9b7=!![],!_0x1a0a0d&&_0x3d5ca9();})];return _0xd28bc6[_0x3b3bf3(0xac)]&&IMAGE_DECODE?(_0x1a0a0d=!![],_0xd28bc6[_0x3b3bf3(0x90)]()[_0x3b3bf3(0xa7)](function(){_0x179dff&&_0x3d5ca9();})['catch'](function(_0x375f02){_0x179dff&&(_0x21d9b7?_0x3d5ca9():_0x4715a9());})):_0x41a53c[_0x3b3bf3(0x91)](listenOnce(_0xd28bc6,_0x5b9d03[_0x3b3bf3(0x9b)],_0x4715a9)),function _0x4edfab(){_0x179dff=![],_0x41a53c['forEach'](unlistenByKey);};}function _0x4613(_0x2fb2b4,_0x4ec990){const _0x5cbc7e=_0x5cbc();return _0x4613=function(_0x461332,_0x4c4e3e){_0x461332=_0x461332-0x82;let _0x5248dc=_0x5cbc7e[_0x461332];return _0x5248dc;},_0x4613(_0x2fb2b4,_0x4ec990);}export function load(_0xbaf541,_0x14c4e0){return new Promise((_0x3c83f6,_0x8bee87)=>{const _0x4b2b3c=_0x4613;function _0xd1368b(){_0x1acd32(),_0x3c83f6(_0xbaf541);}function _0x131df0(){const _0x346c6a=_0x4613;_0x1acd32(),_0x8bee87(new Error(_0x346c6a(0x96)));}function _0x1acd32(){const _0x2eb467=_0x4613;_0xbaf541[_0x2eb467(0x98)](_0x2eb467(0x9e),_0xd1368b),_0xbaf541[_0x2eb467(0x98)](_0x2eb467(0x8c),_0x131df0);}_0xbaf541[_0x4b2b3c(0x88)](_0x4b2b3c(0x9e),_0xd1368b),_0xbaf541[_0x4b2b3c(0x88)]('error',_0x131df0),_0x14c4e0&&(_0xbaf541[_0x4b2b3c(0xac)]=_0x14c4e0);});}export function decodeFallback(_0x1f8b1a,_0xafa5ce){const _0xcccb59=_0x34ee5a;return _0xafa5ce&&(_0x1f8b1a[_0xcccb59(0xac)]=_0xafa5ce),_0x1f8b1a['src']&&IMAGE_DECODE?new Promise((_0x34944c,_0x101876)=>_0x1f8b1a[_0xcccb59(0x90)]()[_0xcccb59(0xa7)](()=>_0x34944c(_0x1f8b1a))[_0xcccb59(0xab)](_0x51944a=>_0x1f8b1a[_0xcccb59(0x82)]&&_0x1f8b1a['width']?_0x34944c(_0x1f8b1a):_0x101876(_0x51944a))):load(_0x1f8b1a);}export function decode(_0x5a57c1,_0x18ab60){const _0x349087=_0x34ee5a;return _0x18ab60&&(_0x5a57c1[_0x349087(0xac)]=_0x18ab60),_0x5a57c1['src']&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?_0x5a57c1[_0x349087(0x90)]()[_0x349087(0xa7)](()=>createImageBitmap(_0x5a57c1))['catch'](_0x1a56aa=>{const _0x3e391b=_0x349087;if(_0x5a57c1[_0x3e391b(0x82)]&&_0x5a57c1['width'])return _0x5a57c1;throw _0x1a56aa;}):decodeFallback(_0x5a57c1);}function _0x5cbc(){const _0x5d28ce=['resolution','image','1305080IxwUtq','getExtent','Image\x20load\x20error','setResolution','removeEventListener','dispatchEvent','LOADED','ERROR','4opJAeB','99693LBsZxr','load','finally','2610785rrCQZt','state','798570rpfXCz','getResolution','LOAD','extent','getPixelRatio','then','pixelRatio','changed','pixelRatio_','catch','src','IDLE','complete','loader','image_','CHANGE','2034180GfUAlq','1677165OeCWqo','addEventListener','59632kMfoFU','21gBBKCi','344rdBWDY','error','function','getState','isArray','decode','push'];_0x5cbc=function(){return _0x5d28ce;};return _0x5cbc();}export default ImageWrapper;