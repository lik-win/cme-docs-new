const _0x42cb9c=_0x4fee;(function(_0x46a03c,_0x43d6ca){const _0x2bcc86=_0x4fee,_0x477a59=_0x46a03c();while(!![]){try{const _0x1453ad=-parseInt(_0x2bcc86(0x10a))/0x1*(-parseInt(_0x2bcc86(0xfc))/0x2)+-parseInt(_0x2bcc86(0xeb))/0x3+parseInt(_0x2bcc86(0xfb))/0x4*(-parseInt(_0x2bcc86(0x10e))/0x5)+parseInt(_0x2bcc86(0xff))/0x6+parseInt(_0x2bcc86(0xf9))/0x7+parseInt(_0x2bcc86(0x109))/0x8*(-parseInt(_0x2bcc86(0xf8))/0x9)+parseInt(_0x2bcc86(0x104))/0xa;if(_0x1453ad===_0x43d6ca)break;else _0x477a59['push'](_0x477a59['shift']());}catch(_0x279f02){_0x477a59['push'](_0x477a59['shift']());}}}(_0x2333,0x2a64a));import _0x46e847 from'../events/Event.js';import _0x27fa1f from'../events/EventType.js';import _0x46ffe from'../ImageState.js';import _0x162983 from'../Image.js';import _0x4f8982 from'../reproj/Image.js';function _0x4fee(_0x76cced,_0x298d0b){const _0x233351=_0x2333();return _0x4fee=function(_0x4fee27,_0x11e364){_0x4fee27=_0x4fee27-0xe0;let _0x240934=_0x233351[_0x4fee27];return _0x240934;},_0x4fee(_0x76cced,_0x298d0b);}import _0xb1fa4d from'./Source.js';function _0x2333(){const _0x2bf705=['handleImageChange','getResolutions','wantedResolution_','getState','getExtent','imageloadend','getResolution','src','target','findNearestResolution','reprojectedRevision_','980124NmCqqL','getProjection','once','interpolate','loader','CHANGE','resolutions','reprojectedImage_','getImageInternal','bind','addEventListener','LOADING','IMAGELOADSTART','747EAjgcn','1816899rykSEJ','setResolutions','67736IxgcCy','2YTpOja','length','projection','2044404kndqvv','static_','dispose','resolutions_','LOADED','4439070IQAnZP','getImage','IMAGELOADERROR','image','getRevision','29800RbGVrs','70139cBgzXb','loading','imageloadstart','wantedProjection_','90RGThmh','wantedExtent_','ERROR'];_0x2333=function(){return _0x2bf705;};return _0x2333();}import{DECIMALS}from'./common.js';import{ceil}from'../math.js';import{containsExtent,equals,getCenter,getForViewAndSize,getHeight,getWidth}from'../extent.js';import{equivalent}from'../proj.js';import{fromResolutionLike}from'../resolution.js';import{linearFindNearest}from'../array.js';export const ImageSourceEventType={'IMAGELOADSTART':_0x42cb9c(0x10c),'IMAGELOADEND':_0x42cb9c(0xe5),'IMAGELOADERROR':'imageloaderror'};export class ImageSourceEvent extends _0x46e847{constructor(_0x5955bc,_0x4e9bd0){super(_0x5955bc),this['image']=_0x4e9bd0;}}class ImageSource extends _0xb1fa4d{constructor(_0x287241){const _0x21d3af=_0x42cb9c;super({'attributions':_0x287241['attributions'],'projection':_0x287241[_0x21d3af(0xfe)],'state':_0x287241['state'],'interpolate':_0x287241[_0x21d3af(0xee)]!==undefined?_0x287241[_0x21d3af(0xee)]:!![]}),this['on'],this[_0x21d3af(0xed)],this['un'],this[_0x21d3af(0xef)]=_0x287241[_0x21d3af(0xef)]||null,this[_0x21d3af(0x102)]=_0x287241[_0x21d3af(0xf1)]!==undefined?_0x287241['resolutions']:null,this[_0x21d3af(0xf2)]=null,this[_0x21d3af(0xea)]=0x0,this[_0x21d3af(0x107)]=null,this[_0x21d3af(0x10f)],this[_0x21d3af(0xe2)],this[_0x21d3af(0x100)]=_0x287241[_0x21d3af(0xef)]?_0x287241['loader'][_0x21d3af(0xfd)]===0x0:![],this[_0x21d3af(0x10d)]=null;}['getResolutions'](){const _0x2809df=_0x42cb9c;return this[_0x2809df(0x102)];}[_0x42cb9c(0xfa)](_0x275d9b){const _0x3a7483=_0x42cb9c;this[_0x3a7483(0x102)]=_0x275d9b;}['findNearestResolution'](_0x5a4f98){const _0x4064f9=_0x42cb9c,_0x3f6b22=this[_0x4064f9(0xe1)]();if(_0x3f6b22){const _0xb82088=linearFindNearest(_0x3f6b22,_0x5a4f98,0x0);_0x5a4f98=_0x3f6b22[_0xb82088];}return _0x5a4f98;}['getImage'](_0xbb61c1,_0x366ec1,_0x2926dd,_0xd1ba7e){const _0x16c208=_0x42cb9c,_0x1afa50=this[_0x16c208(0xec)]();if(!_0x1afa50||!_0xd1ba7e||equivalent(_0x1afa50,_0xd1ba7e))return _0x1afa50&&(_0xd1ba7e=_0x1afa50),this['getImageInternal'](_0xbb61c1,_0x366ec1,_0x2926dd,_0xd1ba7e);if(this['reprojectedImage_']){if(this[_0x16c208(0xea)]==this[_0x16c208(0x108)]()&&equivalent(this[_0x16c208(0xf2)][_0x16c208(0xec)](),_0xd1ba7e)&&this['reprojectedImage_'][_0x16c208(0xe6)]()==_0x366ec1&&equals(this['reprojectedImage_'][_0x16c208(0xe4)](),_0xbb61c1))return this[_0x16c208(0xf2)];this[_0x16c208(0xf2)][_0x16c208(0x101)](),this[_0x16c208(0xf2)]=null;}return this[_0x16c208(0xf2)]=new _0x4f8982(_0x1afa50,_0xd1ba7e,_0xbb61c1,_0x366ec1,_0x2926dd,(_0x230e6c,_0x26610e,_0x3509f3)=>this[_0x16c208(0xf3)](_0x230e6c,_0x26610e,_0x3509f3,_0x1afa50),this['getInterpolate']()),this['reprojectedRevision_']=this[_0x16c208(0x108)](),this[_0x16c208(0xf2)];}[_0x42cb9c(0xf3)](_0x3250a4,_0x32b405,_0xbab418,_0x3e02af){const _0x5849ab=_0x42cb9c;if(this[_0x5849ab(0xef)]){const _0xcb58ee=getRequestExtent(_0x3250a4,_0x32b405,_0xbab418,0x1),_0x166f88=this[_0x5849ab(0xe9)](_0x32b405);if(this[_0x5849ab(0x107)]&&(this[_0x5849ab(0x100)]||this[_0x5849ab(0x10d)]===_0x3e02af&&(this[_0x5849ab(0x10f)]&&containsExtent(this[_0x5849ab(0x10f)],_0xcb58ee)||containsExtent(this[_0x5849ab(0x107)]['getExtent'](),_0xcb58ee))&&(this[_0x5849ab(0xe2)]&&fromResolutionLike(this[_0x5849ab(0xe2)])===_0x166f88||fromResolutionLike(this['image'][_0x5849ab(0xe6)]())===_0x166f88)))return this[_0x5849ab(0x107)];this['wantedProjection_']=_0x3e02af,this[_0x5849ab(0x10f)]=_0xcb58ee,this[_0x5849ab(0xe2)]=_0x166f88,this['image']=new _0x162983(_0xcb58ee,_0x166f88,_0xbab418,this[_0x5849ab(0xef)]),this[_0x5849ab(0x107)][_0x5849ab(0xf5)](_0x27fa1f[_0x5849ab(0xf0)],this[_0x5849ab(0xe0)][_0x5849ab(0xf4)](this));}return this[_0x5849ab(0x107)];}[_0x42cb9c(0xe0)](_0x37eec1){const _0xea0521=_0x42cb9c,_0x2622f5=_0x37eec1[_0xea0521(0xe8)];let _0xb52401;switch(_0x2622f5[_0xea0521(0xe3)]()){case _0x46ffe[_0xea0521(0xf6)]:this['loading']=!![],_0xb52401=ImageSourceEventType[_0xea0521(0xf7)];break;case _0x46ffe[_0xea0521(0x103)]:this[_0xea0521(0x10b)]=![],_0xb52401=ImageSourceEventType['IMAGELOADEND'];break;case _0x46ffe[_0xea0521(0x110)]:this['loading']=![],_0xb52401=ImageSourceEventType[_0xea0521(0x106)];break;default:return;}this['hasListener'](_0xb52401)&&this['dispatchEvent'](new ImageSourceEvent(_0xb52401,_0x2622f5));}}export function defaultImageLoadFunction(_0x3a738b,_0x15e113){const _0x59a1b2=_0x42cb9c;_0x3a738b[_0x59a1b2(0x105)]()[_0x59a1b2(0xe7)]=_0x15e113;}export function getRequestExtent(_0x5b43c0,_0x482f08,_0x2c05ec,_0xb2e2b5){const _0x583f3d=_0x482f08/_0x2c05ec,_0x1bebb7=getCenter(_0x5b43c0),_0x6e8c25=ceil(getWidth(_0x5b43c0)/_0x583f3d,DECIMALS),_0x2323e4=ceil(getHeight(_0x5b43c0)/_0x583f3d,DECIMALS),_0x582ca2=ceil((_0xb2e2b5-0x1)*_0x6e8c25/0x2,DECIMALS),_0x1db4df=_0x6e8c25+0x2*_0x582ca2,_0xbce7ff=ceil((_0xb2e2b5-0x1)*_0x2323e4/0x2,DECIMALS),_0x369a11=_0x2323e4+0x2*_0xbce7ff;return getForViewAndSize(_0x1bebb7,_0x583f3d,0x0,[_0x1db4df,_0x369a11]);}export default ImageSource;