(function(_0x553804,_0x404621){const _0xe4f967=_0x3ca6,_0x44de06=_0x553804();while(!![]){try{const _0x50ffa4=-parseInt(_0xe4f967(0x168))/0x1*(-parseInt(_0xe4f967(0x163))/0x2)+-parseInt(_0xe4f967(0x180))/0x3+-parseInt(_0xe4f967(0x173))/0x4*(parseInt(_0xe4f967(0x164))/0x5)+-parseInt(_0xe4f967(0x17a))/0x6+parseInt(_0xe4f967(0x167))/0x7+-parseInt(_0xe4f967(0x17d))/0x8*(parseInt(_0xe4f967(0x172))/0x9)+parseInt(_0xe4f967(0x162))/0xa*(parseInt(_0xe4f967(0x16b))/0xb);if(_0x50ffa4===_0x404621)break;else _0x44de06['push'](_0x44de06['shift']());}catch(_0x50c7b7){_0x44de06['push'](_0x44de06['shift']());}}}(_0x5c53,0x94582));import{DECIMALS}from'./common.js';import{appendParams}from'../uri.js';import{decode}from'../Image.js';function _0x5c53(){const _0x457657=['MapServer/export','width','2873694eNVFKW','DPI','13202470hEXPGg','477544CWCbFs','5chilkU','getCode','assign','1612142BYtoMH','1cqSxDX','IMAGESR','BBOX','22dXfOjm','split','load','BBOXSR','pop','crossOrigin','hidpi','1589319rzJiHB','4122052IfrDMf','params','ratio','replace','round','url','PNG32','2021712tQCRUF','EPSG:3857','then','8GcvNua'];_0x5c53=function(){return _0x457657;};return _0x5c53();}import{getHeight,getWidth}from'../extent.js';import{get as _0x2f73cf}from'../proj.js';import{getRequestExtent}from'./Image.js';import{round}from'../math.js';function _0x3ca6(_0x5a1b00,_0x2c0de0){const _0x5c534b=_0x5c53();return _0x3ca6=function(_0x3ca67c,_0x37cd5c){_0x3ca67c=_0x3ca67c-0x162;let _0x550b58=_0x5c534b[_0x3ca67c];return _0x550b58;},_0x3ca6(_0x5a1b00,_0x2c0de0);}export function getRequestUrl(_0x47bf04,_0x360a1a,_0x384294,_0x425819,_0x26541d,_0x18629f){const _0x75e307=_0x3ca6,_0x23690b=_0x26541d[_0x75e307(0x165)]()[_0x75e307(0x16c)](/:(?=\d+$)/)[_0x75e307(0x16f)](),_0x168bf9=_0x384294/_0x425819,_0x232f0f=[round(getWidth(_0x360a1a)/_0x168bf9,DECIMALS),round(getHeight(_0x360a1a)/_0x168bf9,DECIMALS)];_0x18629f['SIZE']=_0x232f0f[0x0]+','+_0x232f0f[0x1],_0x18629f[_0x75e307(0x16a)]=_0x360a1a['join'](','),_0x18629f[_0x75e307(0x16e)]=_0x23690b,_0x18629f[_0x75e307(0x169)]=_0x23690b,_0x18629f[_0x75e307(0x181)]=Math[_0x75e307(0x177)](_0x18629f[_0x75e307(0x181)]?_0x18629f['DPI']*_0x425819:0x5a*_0x425819);const _0x10da5b=_0x47bf04[_0x75e307(0x176)](/MapServer\/?$/,_0x75e307(0x17e))[_0x75e307(0x176)](/ImageServer\/?$/,'ImageServer/exportImage');return appendParams(_0x10da5b,_0x18629f);}export function createLoader(_0x1cc38e){const _0x286e50=_0x3ca6,_0x275273=_0x1cc38e[_0x286e50(0x16d)]?_0x1cc38e['load']:decode,_0x29d0f0=_0x2f73cf(_0x1cc38e['projection']||_0x286e50(0x17b)),_0x4b3b96=_0x1cc38e[_0x286e50(0x175)]??1.5,_0x8882cf=_0x1cc38e[_0x286e50(0x170)]??null;return function(_0x5a1e87,_0x4bd789,_0x56a399){const _0x271ccb=_0x286e50;_0x56a399=_0x1cc38e[_0x271ccb(0x171)]?_0x56a399:0x1;const _0x5a2612={'F':'image','FORMAT':_0x271ccb(0x179),'TRANSPARENT':!![]};Object[_0x271ccb(0x166)](_0x5a2612,_0x1cc38e[_0x271ccb(0x174)]),_0x5a1e87=getRequestExtent(_0x5a1e87,_0x4bd789,_0x56a399,_0x4b3b96);const _0x4279a3=getRequestUrl(_0x1cc38e[_0x271ccb(0x178)],_0x5a1e87,_0x4bd789,_0x56a399,_0x29d0f0,_0x5a2612),_0x5bec1a=new Image();return _0x5bec1a[_0x271ccb(0x170)]=_0x8882cf,_0x275273(_0x5bec1a,_0x4279a3)[_0x271ccb(0x17c)](_0x3f366a=>{const _0x561595=_0x271ccb,_0x2f2005=getWidth(_0x5a1e87)/_0x3f366a[_0x561595(0x17f)]*_0x56a399;return{'image':_0x3f366a,'extent':_0x5a1e87,'resolution':_0x2f2005,'pixelRatio':_0x56a399};});};}