const _0x559ea8=_0x23d8;(function(_0x1ec894,_0x477fcb){const _0x582c49=_0x23d8,_0x2bec9c=_0x1ec894();while(!![]){try{const _0x1e66a4=parseInt(_0x582c49(0x143))/0x1*(parseInt(_0x582c49(0x15f))/0x2)+parseInt(_0x582c49(0x146))/0x3*(-parseInt(_0x582c49(0x140))/0x4)+-parseInt(_0x582c49(0x16a))/0x5*(parseInt(_0x582c49(0x139))/0x6)+parseInt(_0x582c49(0x150))/0x7*(-parseInt(_0x582c49(0x13a))/0x8)+-parseInt(_0x582c49(0x12d))/0x9*(parseInt(_0x582c49(0x12e))/0xa)+parseInt(_0x582c49(0x13c))/0xb+parseInt(_0x582c49(0x130))/0xc*(parseInt(_0x582c49(0x13b))/0xd);if(_0x1e66a4===_0x477fcb)break;else _0x2bec9c['push'](_0x2bec9c['shift']());}catch(_0x78a64e){_0x2bec9c['push'](_0x2bec9c['shift']());}}}(_0x587d,0x68e18));function _0x587d(){const _0x17eb5c=['transition','wrapX','1083234hjgaSk','2168NJjLXA','10751crBEIc','8029472IZeJRU','interpolate','culture_','map','15536CvKxDy','https://dev.virtualearth.net/REST/v1/Imagery/Metadata/','ready','1ccvMTv','zDirection','imagerySet_','12UpcCrr','tileUrlFunction','setAttributions','anonymous','coverageAreas','getTileCoordForCoordAndZ','delete','resourceSets','ValidCredentials','imagerySet','11410qXfdtz','EPSG:3857','hidpi_','getZForResolution','statusDescription','hidpi','apiKey_','maxZoom_','error','cacheSize','getProjection','setState','tileLoadFunction','<a\x20class=\x22ol-attribution-bing-tos\x22\x20','{culture}','321622xGidnZ','maxZoom','&c=','loading','push','then','set','authenticationResultCode','dpi','replace','center','15aHTvJI','reprojectionErrorThreshold','culture','placeholderTiles','extent','bbox','zoomMin','searchParams','{subdomain}','getApiKey','imageHeight','json','join','resolution','resources','zoomMax','{quadkey}','length','4456899hgNWvr','10IZfkWm','imageWidth','14988huwcnI','placeholderTiles_','fromCharCode','en-us','EPSG:4326','imageryProviders','handleImageryMetadataResponse'];_0x587d=function(){return _0x17eb5c;};return _0x587d();}import _0x31f63d from'./TileImage.js';import{applyTransform,intersects}from'../extent.js';function _0x23d8(_0x52bd2d,_0x5a183c){const _0x587d73=_0x587d();return _0x23d8=function(_0x23d867,_0x212bfd){_0x23d867=_0x23d867-0x121;let _0xb17d4e=_0x587d73[_0x23d867];return _0xb17d4e;},_0x23d8(_0x52bd2d,_0x5a183c);}import{createFromTileUrlFunctions}from'../tileurlfunction.js';import{createOrUpdate}from'../tilecoord.js';import{createXYZ,extentFromProjection}from'../tilegrid.js';import{get as _0x49f32f,getTransformFromProjections}from'../proj.js';export function quadKey(_0x15f403){const _0x328e19=_0x23d8,_0x42b3c5=_0x15f403[0x0],_0x532952=new Array(_0x42b3c5);let _0x51d9f8=0x1<<_0x42b3c5-0x1,_0x2c1aa1,_0x3cc362;for(_0x2c1aa1=0x0;_0x2c1aa1<_0x42b3c5;++_0x2c1aa1){_0x3cc362=0x30,_0x15f403[0x1]&_0x51d9f8&&(_0x3cc362+=0x1),_0x15f403[0x2]&_0x51d9f8&&(_0x3cc362+=0x2),_0x532952[_0x2c1aa1]=String[_0x328e19(0x132)](_0x3cc362),_0x51d9f8>>=0x1;}return _0x532952[_0x328e19(0x127)]('');}const TOS_ATTRIBUTION=_0x559ea8(0x15d)+'href=\x22https://www.microsoft.com/maps/product/terms.html\x22\x20target=\x22_blank\x22>'+'Terms\x20of\x20Use</a>';class BingMaps extends _0x31f63d{constructor(_0x363f5f){const _0x2686d1=_0x559ea8,_0x5e52b6=_0x363f5f[_0x2686d1(0x155)]!==undefined?_0x363f5f[_0x2686d1(0x155)]:![];super({'cacheSize':_0x363f5f[_0x2686d1(0x159)],'crossOrigin':_0x2686d1(0x149),'interpolate':_0x363f5f[_0x2686d1(0x13d)],'projection':_0x49f32f(_0x2686d1(0x151)),'reprojectionErrorThreshold':_0x363f5f[_0x2686d1(0x16b)],'state':_0x2686d1(0x162),'tileLoadFunction':_0x363f5f[_0x2686d1(0x15c)],'tilePixelRatio':_0x5e52b6?0x2:0x1,'wrapX':_0x363f5f[_0x2686d1(0x138)]!==undefined?_0x363f5f[_0x2686d1(0x138)]:!![],'transition':_0x363f5f[_0x2686d1(0x137)],'zDirection':_0x363f5f['zDirection']}),this['hidpi_']=_0x5e52b6,this['culture_']=_0x363f5f[_0x2686d1(0x16c)]!==undefined?_0x363f5f['culture']:_0x2686d1(0x133),this[_0x2686d1(0x157)]=_0x363f5f[_0x2686d1(0x160)]!==undefined?_0x363f5f[_0x2686d1(0x160)]:-0x1,this[_0x2686d1(0x156)]=_0x363f5f['key'],this[_0x2686d1(0x145)]=_0x363f5f[_0x2686d1(0x14f)],this[_0x2686d1(0x131)]=_0x363f5f[_0x2686d1(0x16d)];const _0x370993=_0x2686d1(0x141)+this[_0x2686d1(0x145)]+'?uriScheme=https&include=ImageryProviders&key='+this[_0x2686d1(0x156)]+_0x2686d1(0x161)+this[_0x2686d1(0x13e)];fetch(_0x370993)[_0x2686d1(0x164)](_0x291fa9=>_0x291fa9[_0x2686d1(0x126)]())[_0x2686d1(0x164)](_0x118cc9=>this[_0x2686d1(0x136)](_0x118cc9));}[_0x559ea8(0x124)](){const _0x7d8beb=_0x559ea8;return this[_0x7d8beb(0x156)];}['getImagerySet'](){const _0x52ae8d=_0x559ea8;return this[_0x52ae8d(0x145)];}[_0x559ea8(0x136)](_0x1de3ba){const _0x440c61=_0x559ea8;if(_0x1de3ba['statusCode']!=0xc8||_0x1de3ba[_0x440c61(0x154)]!='OK'||_0x1de3ba[_0x440c61(0x166)]!=_0x440c61(0x14e)||_0x1de3ba[_0x440c61(0x14d)]['length']!=0x1||_0x1de3ba[_0x440c61(0x14d)][0x0][_0x440c61(0x129)][_0x440c61(0x12c)]!=0x1){this['setState'](_0x440c61(0x158));return;}const _0x42dd86=_0x1de3ba[_0x440c61(0x14d)][0x0]['resources'][0x0],_0x32039a=this[_0x440c61(0x157)]==-0x1?_0x42dd86[_0x440c61(0x12a)]:this[_0x440c61(0x157)],_0x3f3c8b=this['getProjection'](),_0x5678df=extentFromProjection(_0x3f3c8b),_0xb730f5=this[_0x440c61(0x152)]?0x2:0x1,_0x411bf1=_0x42dd86[_0x440c61(0x12f)]==_0x42dd86[_0x440c61(0x125)]?_0x42dd86[_0x440c61(0x12f)]/_0xb730f5:[_0x42dd86[_0x440c61(0x12f)]/_0xb730f5,_0x42dd86[_0x440c61(0x125)]/_0xb730f5],_0x81e96b=createXYZ({'extent':_0x5678df,'minZoom':_0x42dd86[_0x440c61(0x121)],'maxZoom':_0x32039a,'tileSize':_0x411bf1});this['tileGrid']=_0x81e96b;const _0x1aeefb=this[_0x440c61(0x13e)],_0x2cdf3e=this[_0x440c61(0x152)],_0x21bdb6=this[_0x440c61(0x131)];this[_0x440c61(0x147)]=createFromTileUrlFunctions(_0x42dd86['imageUrlSubdomains'][_0x440c61(0x13f)](function(_0x24e699){const _0x6a005=_0x440c61,_0x120afe=[0x0,0x0,0x0],_0x5f5751=_0x42dd86['imageUrl'][_0x6a005(0x168)](_0x6a005(0x123),_0x24e699)[_0x6a005(0x168)](_0x6a005(0x15e),_0x1aeefb);return function(_0x3cdd9b,_0x30b66c,_0x18feb9){const _0x360fe5=_0x6a005;if(!_0x3cdd9b)return undefined;createOrUpdate(_0x3cdd9b[0x0],_0x3cdd9b[0x1],_0x3cdd9b[0x2],_0x120afe);const _0x1e6655=new URL(_0x5f5751['replace'](_0x360fe5(0x12b),quadKey(_0x120afe))),_0x3b3fa3=_0x1e6655[_0x360fe5(0x122)];_0x2cdf3e&&(_0x3b3fa3[_0x360fe5(0x165)](_0x360fe5(0x167),'d1'),_0x3b3fa3[_0x360fe5(0x165)]('device','mobile'));if(_0x21bdb6===!![])_0x3b3fa3[_0x360fe5(0x14c)]('n');else _0x21bdb6===![]&&_0x3b3fa3['set']('n','z');return _0x1e6655['toString']();};}));if(_0x42dd86['imageryProviders']){const _0x254936=getTransformFromProjections(_0x49f32f(_0x440c61(0x134)),this[_0x440c61(0x15a)]());this[_0x440c61(0x148)](_0xab6f2=>{const _0x548237=_0x440c61,_0x1db9e0=[],_0x54793b=_0xab6f2['viewState'],_0x473c7f=this['getTileGrid'](),_0x381923=_0x473c7f[_0x548237(0x153)](_0x54793b[_0x548237(0x128)],this[_0x548237(0x144)]),_0x1f65a8=_0x473c7f[_0x548237(0x14b)](_0x54793b[_0x548237(0x169)],_0x381923),_0x2eea9a=_0x1f65a8[0x0];return _0x42dd86[_0x548237(0x135)][_0x548237(0x13f)](function(_0x5d53fd){const _0xa08529=_0x548237;let _0x78428c=![];const _0x45e6bd=_0x5d53fd[_0xa08529(0x14a)];for(let _0x473b5f=0x0,_0x187737=_0x45e6bd[_0xa08529(0x12c)];_0x473b5f<_0x187737;++_0x473b5f){const _0x26b14c=_0x45e6bd[_0x473b5f];if(_0x2eea9a>=_0x26b14c['zoomMin']&&_0x2eea9a<=_0x26b14c['zoomMax']){const _0x19098f=_0x26b14c[_0xa08529(0x16f)],_0x67e798=[_0x19098f[0x1],_0x19098f[0x0],_0x19098f[0x3],_0x19098f[0x2]],_0x192edc=applyTransform(_0x67e798,_0x254936);if(intersects(_0x192edc,_0xab6f2[_0xa08529(0x16e)])){_0x78428c=!![];break;}}}_0x78428c&&_0x1db9e0['push'](_0x5d53fd['attribution']);}),_0x1db9e0[_0x548237(0x163)](TOS_ATTRIBUTION),_0x1db9e0;});}this[_0x440c61(0x15b)](_0x440c61(0x142));}}export default BingMaps;