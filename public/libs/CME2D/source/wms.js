(function(_0x163fde,_0x4ccba9){const _0x2e8f38=_0x51d4,_0x3c6009=_0x163fde();while(!![]){try{const _0x274adb=parseInt(_0x2e8f38(0x148))/0x1*(-parseInt(_0x2e8f38(0x145))/0x2)+-parseInt(_0x2e8f38(0x144))/0x3+parseInt(_0x2e8f38(0x15c))/0x4*(-parseInt(_0x2e8f38(0x171))/0x5)+-parseInt(_0x2e8f38(0x15d))/0x6*(parseInt(_0x2e8f38(0x166))/0x7)+parseInt(_0x2e8f38(0x16f))/0x8+-parseInt(_0x2e8f38(0x16b))/0x9*(-parseInt(_0x2e8f38(0x14e))/0xa)+parseInt(_0x2e8f38(0x153))/0xb*(parseInt(_0x2e8f38(0x14d))/0xc);if(_0x274adb===_0x4ccba9)break;else _0x3c6009['push'](_0x3c6009['shift']());}catch(_0x4ed833){_0x3c6009['push'](_0x3c6009['shift']());}}}(_0x4d60,0xcdbe0));import{DECIMALS}from'./common.js';import{appendParams}from'../uri.js';import{compareVersions}from'../string.js';import{decode}from'../Image.js';import{floor,round}from'../math.js';import{getForViewAndSize,getHeight,getWidth}from'../extent.js';import{get as _0x4f0d6c}from'../proj.js';import{getRequestExtent}from'./Image.js';export const DEFAULT_VERSION='1.3.0';const GETFEATUREINFO_IMAGE_SIZE=[0x65,0x65];export function getRequestUrl(_0x28dd61,_0x5b61b4,_0x53d15c,_0x468dee,_0x5eedc1){const _0x3b80f5=_0x51d4;_0x5eedc1[_0x3b80f5(0x16e)]=_0x53d15c[0x0],_0x5eedc1[_0x3b80f5(0x174)]=_0x53d15c[0x1];const _0x43a783=_0x468dee[_0x3b80f5(0x161)](),_0x2d0eed=compareVersions(_0x5eedc1[_0x3b80f5(0x16c)],_0x3b80f5(0x14c))>=0x0;_0x5eedc1[_0x2d0eed?_0x3b80f5(0x165):_0x3b80f5(0x162)]=_0x468dee[_0x3b80f5(0x15b)]();const _0x428420=_0x2d0eed&&_0x43a783[_0x3b80f5(0x160)]('ne')?[_0x5b61b4[0x1],_0x5b61b4[0x0],_0x5b61b4[0x3],_0x5b61b4[0x2]]:_0x5b61b4;return _0x5eedc1[_0x3b80f5(0x15e)]=_0x428420[_0x3b80f5(0x157)](','),appendParams(_0x28dd61,_0x5eedc1);}export function getImageSrc(_0x341a35,_0x1d612f,_0x2370e6,_0x5ece55,_0x55be5f,_0x223175,_0x1591f1){const _0x235b03=_0x51d4;_0x223175=Object[_0x235b03(0x163)]({'REQUEST':_0x235b03(0x159)},_0x223175);const _0x51edb4=_0x1d612f/_0x2370e6,_0x539fc9=[round(getWidth(_0x341a35)/_0x51edb4,DECIMALS),round(getHeight(_0x341a35)/_0x51edb4,DECIMALS)];if(_0x2370e6!=0x1)switch(_0x1591f1){case _0x235b03(0x176):const _0x10a2e8=0x5a*_0x2370e6+0.5|0x0;_0x235b03(0x149)in _0x223175?_0x223175['FORMAT_OPTIONS']+=_0x235b03(0x14f)+_0x10a2e8:_0x223175[_0x235b03(0x149)]=_0x235b03(0x15f)+_0x10a2e8;break;case _0x235b03(0x150):_0x223175[_0x235b03(0x167)]=0x5a*_0x2370e6;break;case _0x235b03(0x158):case _0x235b03(0x177):_0x223175[_0x235b03(0x173)]=0x5a*_0x2370e6;break;default:throw new Error(_0x235b03(0x146));}const _0x4e08eb=getRequestUrl(_0x55be5f,_0x341a35,_0x539fc9,_0x5ece55,_0x223175);return _0x4e08eb;}function _0x4d60(){const _0xb2e4dd=['hidpi','CRS','1379MgkQUw','MAP_RESOLUTION','LAYERS','url','SCALE','1007145CqpRWf','VERSION','LAYER','WIDTH','9387560gedZSr','crossOrigin','95vKNwEV','ratio','DPI','HEIGHT','params','geoserver','qgis','GetLegendGraphic','4385478UPLlun','4cskkoY','Unknown\x20`serverType`\x20configured','EPSG:3857','3688tjWBqM','FORMAT_OPTIONS','projection','GetFeatureInfo','1.3','12MgABuZ','40VslRHE',';dpi:','mapserver','isArray','application/json','32275595chLuaT','getMetersPerUnit','load','image/png','join','carmentaserver','GetMap','then','getCode','262124utODbd','30402XzLQHt','BBOX','dpi:','startsWith','getAxisOrientation','SRS','assign'];_0x4d60=function(){return _0xb2e4dd;};return _0x4d60();}export function getRequestParams(_0xc24d74,_0x16d61f){const _0x381bf4=_0x51d4;return Object[_0x381bf4(0x163)]({'REQUEST':_0x16d61f,'SERVICE':'WMS','VERSION':DEFAULT_VERSION,'FORMAT':_0x381bf4(0x156),'STYLES':'','TRANSPARENT':!![]},_0xc24d74);}function _0x51d4(_0x22ea7e,_0x287462){const _0x4d6003=_0x4d60();return _0x51d4=function(_0x51d4d,_0x30419c){_0x51d4d=_0x51d4d-0x143;let _0x5ee024=_0x4d6003[_0x51d4d];return _0x5ee024;},_0x51d4(_0x22ea7e,_0x287462);}export function createLoader(_0x2f1523){const _0x5009c4=_0x51d4,_0x34e9a1=_0x2f1523[_0x5009c4(0x164)]===undefined?!![]:_0x2f1523[_0x5009c4(0x164)],_0x46acfc=_0x4f0d6c(_0x2f1523['projection']||_0x5009c4(0x147)),_0x4f0d46=_0x2f1523[_0x5009c4(0x172)]||1.5,_0x2575ed=_0x2f1523[_0x5009c4(0x155)]||decode,_0x51a986=_0x2f1523[_0x5009c4(0x170)]??null;return(_0x25e1ce,_0x468d3b,_0x9bb65a)=>{const _0x37c8cb=_0x5009c4;_0x25e1ce=getRequestExtent(_0x25e1ce,_0x468d3b,_0x9bb65a,_0x4f0d46);_0x9bb65a!=0x1&&(!_0x34e9a1||_0x2f1523['serverType']===undefined)&&(_0x9bb65a=0x1);const _0x5cd121=getImageSrc(_0x25e1ce,_0x468d3b,_0x9bb65a,_0x46acfc,_0x2f1523['url'],getRequestParams(_0x2f1523[_0x37c8cb(0x175)],_0x37c8cb(0x159)),_0x2f1523['serverType']),_0xb17a4d=new Image();return _0xb17a4d['crossOrigin']=_0x51a986,_0x2575ed(_0xb17a4d,_0x5cd121)[_0x37c8cb(0x15a)](_0xf72514=>({'image':_0xf72514,'extent':_0x25e1ce,'pixelRatio':_0x9bb65a}));};}export function getFeatureInfoUrl(_0x3fdabc,_0x558937,_0x153649){const _0x2507a4=_0x51d4;if(_0x3fdabc[_0x2507a4(0x169)]===undefined)return undefined;const _0x4b9d15=_0x4f0d6c(_0x3fdabc[_0x2507a4(0x14a)]||'EPSG:3857'),_0x6539af=getForViewAndSize(_0x558937,_0x153649,0x0,GETFEATUREINFO_IMAGE_SIZE),_0xb11501={'QUERY_LAYERS':_0x3fdabc[_0x2507a4(0x175)][_0x2507a4(0x168)],'INFO_FORMAT':_0x2507a4(0x152)};Object[_0x2507a4(0x163)](_0xb11501,getRequestParams(_0x3fdabc['params'],_0x2507a4(0x14b)),_0x3fdabc[_0x2507a4(0x175)]);const _0x155ac3=floor((_0x558937[0x0]-_0x6539af[0x0])/_0x153649,DECIMALS),_0x1d490a=floor((_0x6539af[0x3]-_0x558937[0x1])/_0x153649,DECIMALS),_0x3c7568=compareVersions(_0xb11501['VERSION'],'1.3')>=0x0;return _0xb11501[_0x3c7568?'I':'X']=_0x155ac3,_0xb11501[_0x3c7568?'J':'Y']=_0x1d490a,getRequestUrl(_0x3fdabc[_0x2507a4(0x169)],_0x6539af,GETFEATUREINFO_IMAGE_SIZE,_0x4b9d15,_0xb11501);}export function getLegendUrl(_0x168afb,_0x84455){const _0x2b010f=_0x51d4;if(_0x168afb[_0x2b010f(0x169)]===undefined)return undefined;const _0x2152ea={'SERVICE':'WMS','VERSION':DEFAULT_VERSION,'REQUEST':_0x2b010f(0x143),'FORMAT':'image/png'};if(_0x84455!==undefined){const _0x318f93=_0x4f0d6c(_0x168afb[_0x2b010f(0x14a)]||'EPSG:3857')[_0x2b010f(0x154)]()||0x1,_0x447672=0.00028;_0x2152ea[_0x2b010f(0x16a)]=_0x84455*_0x318f93/_0x447672;}Object[_0x2b010f(0x163)](_0x2152ea,_0x168afb[_0x2b010f(0x175)]);if(_0x168afb[_0x2b010f(0x175)]!==undefined&&_0x2152ea[_0x2b010f(0x16d)]===undefined){const _0x41f628=_0x2152ea[_0x2b010f(0x168)],_0x34bb1b=!Array[_0x2b010f(0x151)](_0x41f628)||_0x41f628['length']!==0x1;if(!_0x34bb1b)return undefined;_0x2152ea['LAYER']=_0x41f628;}return appendParams(_0x168afb[_0x2b010f(0x169)],_0x2152ea);}