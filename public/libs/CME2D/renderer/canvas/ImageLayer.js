const _0x446dad=_0x3857;(function(_0x271773,_0x1f910c){const _0x72a1f1=_0x3857,_0x342442=_0x271773();while(!![]){try{const _0x5e8c8b=-parseInt(_0x72a1f1(0x106))/0x1*(-parseInt(_0x72a1f1(0xde))/0x2)+-parseInt(_0x72a1f1(0xed))/0x3+-parseInt(_0x72a1f1(0xdc))/0x4*(parseInt(_0x72a1f1(0xf2))/0x5)+-parseInt(_0x72a1f1(0xda))/0x6+-parseInt(_0x72a1f1(0xe5))/0x7+parseInt(_0x72a1f1(0xf5))/0x8*(parseInt(_0x72a1f1(0x104))/0x9)+parseInt(_0x72a1f1(0xe2))/0xa*(parseInt(_0x72a1f1(0xfa))/0xb);if(_0x5e8c8b===_0x1f910c)break;else _0x342442['push'](_0x342442['shift']());}catch(_0x2b2c6a){_0x342442['push'](_0x342442['shift']());}}}(_0x8444,0xbc10d));import _0x477b1c from'./Layer.js';import _0x665153 from'../../ImageState.js';import _0x204749 from'../../ViewHint.js';import{apply as _0x3b1d90,compose as _0x3ae6b0}from'../../transform.js';function _0x8444(){const _0x3e87d4=['getSource','isArray','tempTransform','container','getImageData','layerStatesArray','loadImage','6695028QzdDpq','INTERACTING','3184jOxaHI','image','206fklVHc','resolution','getLayer','frameState','30Smmdua','getData','viewState','9237347zGNVcy','width','opacity','canvas','getRenderContext','getPixelRatio','getInterpolate','renderFrame','3815427IKdNxF','slice','globalAlpha','projection','extent','8105ZKQRZq','restore','getImage','32lkZadF','context','postRender','floor','preRender','13873827SuFDTP','center','getExtent','save','getState','drawImage','clipUnrotated','pixelToCoordinateTransform','pixelRatio','renderedResolution','1135899tVBaBd','layerIndex','14362nrDwbN','height'];_0x8444=function(){return _0x3e87d4;};return _0x8444();}import{containsCoordinate,containsExtent,getHeight,getIntersection,getWidth,intersects as _0x1516a0,isEmpty}from'../../extent.js';function _0x3857(_0x133f62,_0x210ca0){const _0x844446=_0x8444();return _0x3857=function(_0x385746,_0x2b3a78){_0x385746=_0x385746-0xda;let _0x51da5a=_0x844446[_0x385746];return _0x51da5a;},_0x3857(_0x133f62,_0x210ca0);}import{fromUserExtent}from'../../proj.js';class CanvasImageLayerRenderer extends _0x477b1c{constructor(_0x26318b){const _0x2a25f5=_0x3857;super(_0x26318b),this[_0x2a25f5(0xdd)]=null;}[_0x446dad(0xf4)](){const _0x1e2379=_0x446dad;return!this[_0x1e2379(0xdd)]?null:this[_0x1e2379(0xdd)][_0x1e2379(0xf4)]();}['prepareFrame'](_0x3862d4){const _0x300218=_0x446dad,_0x414984=_0x3862d4[_0x300218(0x10d)][_0x3862d4['layerIndex']],_0x14bf2a=_0x3862d4['pixelRatio'],_0x3ae170=_0x3862d4[_0x300218(0xe4)],_0x488e36=_0x3ae170[_0x300218(0xdf)],_0x52e19b=this[_0x300218(0xe0)]()[_0x300218(0x108)](),_0xb643af=_0x3862d4['viewHints'];let _0x31424b=_0x3862d4[_0x300218(0xf1)];_0x414984[_0x300218(0xf1)]!==undefined&&(_0x31424b=getIntersection(_0x31424b,fromUserExtent(_0x414984['extent'],_0x3ae170[_0x300218(0xf0)])));if(!_0xb643af[_0x204749['ANIMATING']]&&!_0xb643af[_0x204749[_0x300218(0xdb)]]&&!isEmpty(_0x31424b)){if(_0x52e19b){const _0x1a6dea=_0x3ae170[_0x300218(0xf0)],_0x278dfb=_0x52e19b[_0x300218(0xf4)](_0x31424b,_0x488e36,_0x14bf2a,_0x1a6dea);if(_0x278dfb){if(this[_0x300218(0x10e)](_0x278dfb))this['image']=_0x278dfb;else _0x278dfb[_0x300218(0xfe)]()===_0x665153['EMPTY']&&(this[_0x300218(0xdd)]=null);}}else this[_0x300218(0xdd)]=null;}return!!this[_0x300218(0xdd)];}[_0x446dad(0xe3)](_0x341f8f){const _0x5db5b2=_0x446dad,_0x5a4174=this[_0x5db5b2(0xe1)];if(!_0x5a4174)return null;const _0x3367c0=this[_0x5db5b2(0xe0)](),_0x4dd7c6=_0x3b1d90(_0x5a4174[_0x5db5b2(0x101)],_0x341f8f[_0x5db5b2(0xee)]()),_0x1273a0=_0x3367c0[_0x5db5b2(0xfc)]();if(_0x1273a0){if(!containsCoordinate(_0x1273a0,_0x4dd7c6))return null;}const _0x2f09ed=this[_0x5db5b2(0xdd)]['getExtent'](),_0x4b877e=this['image'][_0x5db5b2(0xf4)](),_0x131a09=getWidth(_0x2f09ed),_0x5b2c6a=Math[_0x5db5b2(0xf8)](_0x4b877e[_0x5db5b2(0xe6)]*((_0x4dd7c6[0x0]-_0x2f09ed[0x0])/_0x131a09));if(_0x5b2c6a<0x0||_0x5b2c6a>=_0x4b877e[_0x5db5b2(0xe6)])return null;const _0x59bc26=getHeight(_0x2f09ed),_0xfa53f=Math[_0x5db5b2(0xf8)](_0x4b877e[_0x5db5b2(0x107)]*((_0x2f09ed[0x3]-_0x4dd7c6[0x1])/_0x59bc26));if(_0xfa53f<0x0||_0xfa53f>=_0x4b877e[_0x5db5b2(0x107)])return null;return this[_0x5db5b2(0x10c)](_0x4b877e,_0x5b2c6a,_0xfa53f);}[_0x446dad(0xec)](_0x3a96d0,_0x139f5a){const _0xcfadbc=_0x446dad,_0x50c33c=this[_0xcfadbc(0xdd)],_0x1ff6e0=_0x50c33c[_0xcfadbc(0xfc)](),_0x307087=_0x50c33c['getResolution'](),[_0x2bddbe,_0x386ac8]=Array[_0xcfadbc(0x109)](_0x307087)?_0x307087:[_0x307087,_0x307087],_0x72d36=_0x50c33c[_0xcfadbc(0xea)](),_0x1b152e=_0x3a96d0['layerStatesArray'][_0x3a96d0[_0xcfadbc(0x105)]],_0x2641e0=_0x3a96d0[_0xcfadbc(0x102)],_0x51647d=_0x3a96d0[_0xcfadbc(0xe4)],_0x147dcf=_0x51647d[_0xcfadbc(0xfb)],_0x4ea807=_0x51647d[_0xcfadbc(0xdf)],_0x3ca4c5=_0x2641e0*_0x2bddbe/(_0x4ea807*_0x72d36),_0x2981c4=_0x2641e0*_0x386ac8/(_0x4ea807*_0x72d36);this['prepareContainer'](_0x3a96d0,_0x139f5a);const _0x46c191=this[_0xcfadbc(0xf6)]['canvas'][_0xcfadbc(0xe6)],_0x11e46c=this[_0xcfadbc(0xf6)][_0xcfadbc(0xe8)][_0xcfadbc(0x107)],_0x2356c9=this[_0xcfadbc(0xe9)](_0x3a96d0);let _0x4a76fb=![],_0x52a8bd=!![];if(_0x1b152e[_0xcfadbc(0xf1)]){const _0x1f9500=fromUserExtent(_0x1b152e['extent'],_0x51647d['projection']);_0x52a8bd=_0x1516a0(_0x1f9500,_0x3a96d0[_0xcfadbc(0xf1)]),_0x4a76fb=_0x52a8bd&&!containsExtent(_0x1f9500,_0x3a96d0[_0xcfadbc(0xf1)]),_0x4a76fb&&this[_0xcfadbc(0x100)](_0x2356c9,_0x3a96d0,_0x1f9500);}const _0x195c42=_0x50c33c[_0xcfadbc(0xf4)](),_0x9dbb69=_0x3ae6b0(this[_0xcfadbc(0x10a)],_0x46c191/0x2,_0x11e46c/0x2,_0x3ca4c5,_0x2981c4,0x0,_0x72d36*(_0x1ff6e0[0x0]-_0x147dcf[0x0])/_0x2bddbe,_0x72d36*(_0x147dcf[0x1]-_0x1ff6e0[0x3])/_0x386ac8);this[_0xcfadbc(0x103)]=_0x386ac8*_0x2641e0/_0x72d36;const _0x3264ae=_0x195c42['width']*_0x9dbb69[0x0],_0xf07dcc=_0x195c42[_0xcfadbc(0x107)]*_0x9dbb69[0x3];!this[_0xcfadbc(0xe0)]()[_0xcfadbc(0x108)]()[_0xcfadbc(0xeb)]()&&(_0x2356c9['imageSmoothingEnabled']=![]);this[_0xcfadbc(0xf9)](_0x2356c9,_0x3a96d0);if(_0x52a8bd&&_0x3264ae>=0.5&&_0xf07dcc>=0.5){const _0x5f1f0f=_0x9dbb69[0x4],_0x59df99=_0x9dbb69[0x5],_0x54a24e=_0x1b152e[_0xcfadbc(0xe7)];_0x54a24e!==0x1&&(_0x2356c9[_0xcfadbc(0xfd)](),_0x2356c9[_0xcfadbc(0xef)]=_0x54a24e),_0x2356c9[_0xcfadbc(0xff)](_0x195c42,0x0,0x0,+_0x195c42[_0xcfadbc(0xe6)],+_0x195c42[_0xcfadbc(0x107)],_0x5f1f0f,_0x59df99,_0x3264ae,_0xf07dcc),_0x54a24e!==0x1&&_0x2356c9[_0xcfadbc(0xf3)]();}return this[_0xcfadbc(0xf7)](this[_0xcfadbc(0xf6)],_0x3a96d0),_0x4a76fb&&_0x2356c9['restore'](),_0x2356c9['imageSmoothingEnabled']=!![],this[_0xcfadbc(0x10b)];}}export default CanvasImageLayerRenderer;