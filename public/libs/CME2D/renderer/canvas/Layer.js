const _0x1e8d53=_0x20fb;(function(_0x2c3144,_0xbbde5a){const _0xee380e=_0x20fb,_0x185692=_0x2c3144();while(!![]){try{const _0x304fc8=-parseInt(_0xee380e(0xa8))/0x1+-parseInt(_0xee380e(0xa5))/0x2+parseInt(_0xee380e(0x7a))/0x3*(parseInt(_0xee380e(0xa4))/0x4)+-parseInt(_0xee380e(0x91))/0x5*(parseInt(_0xee380e(0x7b))/0x6)+-parseInt(_0xee380e(0x76))/0x7*(-parseInt(_0xee380e(0x90))/0x8)+parseInt(_0xee380e(0x9f))/0x9*(parseInt(_0xee380e(0x98))/0xa)+-parseInt(_0xee380e(0x86))/0xb*(-parseInt(_0xee380e(0x7e))/0xc);if(_0x304fc8===_0xbbde5a)break;else _0x185692['push'](_0x185692['shift']());}catch(_0x23a6e9){_0x185692['push'](_0x185692['shift']());}}}(_0x1dd4,0xc24be));import _0x186aa8 from'../Layer.js';import _0xd94d1a from'../../render/Event.js';import _0x19b5db from'../../render/EventType.js';import _0x4ba9d0 from'../../render/canvas/ZIndexContext.js';import{apply as _0x3fed6c,compose as _0x42ab09,create as _0x154b51,makeInverse,toString as _0x3801d9}from'../../transform.js';import{asArray}from'../../color.js';import{createCanvasContext2D}from'../../dom.js';import{equals}from'../../array.js';import{getBottomLeft,getBottomRight,getHeight,getTopLeft,getTopRight,getWidth}from'../../extent.js';export const canvasPool=[];function _0x20fb(_0x8ce87c,_0xb84ef4){const _0x1dd460=_0x1dd4();return _0x20fb=function(_0x20fbee,_0x32f647){_0x20fbee=_0x20fbee-0x6a;let _0x5e1566=_0x1dd460[_0x20fbee];return _0x5e1566;},_0x20fb(_0x8ce87c,_0xb84ef4);}let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(0x1,0x1,undefined,{'willReadFrequently':!![]});}class CanvasLayerRenderer extends _0x186aa8{constructor(_0x5f0e4d){const _0x438605=_0x20fb;super(_0x5f0e4d),this['container']=null,this[_0x438605(0xaa)],this[_0x438605(0x74)]=_0x154b51(),this[_0x438605(0x6e)]=_0x154b51(),this[_0x438605(0x95)]=_0x154b51(),this['context']=null,this[_0x438605(0x9b)]=null,this['containerReused']=![],this[_0x438605(0x6d)]=null;}[_0x1e8d53(0xa3)](_0x3f79d0,_0x5ab682,_0x3c4396){const _0x323291=_0x1e8d53;!pixelContext&&createPixelContext();pixelContext['clearRect'](0x0,0x0,0x1,0x1);let _0x3c13dd;try{pixelContext[_0x323291(0x8c)](_0x3f79d0,_0x5ab682,_0x3c4396,0x1,0x1,0x0,0x0,0x1,0x1),_0x3c13dd=pixelContext['getImageData'](0x0,0x0,0x1,0x1)[_0x323291(0x8f)];}catch(_0xc5ead3){return pixelContext=null,null;}return _0x3c13dd;}[_0x1e8d53(0x97)](_0x341a0c){const _0x2ff2cd=_0x1e8d53,_0x2dad81=this[_0x2ff2cd(0x8b)]();let _0x516769=_0x2dad81[_0x2ff2cd(0x97)]();return typeof _0x516769==='function'&&(_0x516769=_0x516769(_0x341a0c[_0x2ff2cd(0x6a)][_0x2ff2cd(0x6b)])),_0x516769||undefined;}['useContainer'](_0x2eb325,_0x1cbfd8,_0x556f48){const _0x509a6f=_0x1e8d53,_0x503f38=this[_0x509a6f(0x8b)]()[_0x509a6f(0x96)]();let _0x1cc154,_0x434c24;if(_0x2eb325&&_0x2eb325['className']===_0x503f38&&(!_0x556f48||_0x2eb325&&_0x2eb325[_0x509a6f(0x7f)]['backgroundColor']&&equals(asArray(_0x2eb325['style'][_0x509a6f(0x9a)]),asArray(_0x556f48)))){const _0x225789=_0x2eb325[_0x509a6f(0xa7)];_0x225789 instanceof HTMLCanvasElement&&(_0x434c24=_0x225789[_0x509a6f(0x9d)]('2d'));}if(_0x434c24&&_0x434c24[_0x509a6f(0xa9)][_0x509a6f(0x7f)][_0x509a6f(0x75)]===_0x1cbfd8)this[_0x509a6f(0x8e)]=_0x2eb325,this[_0x509a6f(0x8a)]=_0x434c24,this['containerReused']=!![];else{if(this['containerReused'])this[_0x509a6f(0x8e)]=null,this[_0x509a6f(0x8a)]=null,this['containerReused']=![];else this[_0x509a6f(0x8e)]&&(this[_0x509a6f(0x8e)]['style'][_0x509a6f(0x9a)]=null);}if(!this[_0x509a6f(0x8e)]){_0x1cc154=document['createElement'](_0x509a6f(0x7d)),_0x1cc154[_0x509a6f(0x9e)]=_0x503f38;let _0x5f40b6=_0x1cc154['style'];_0x5f40b6['position']=_0x509a6f(0x93),_0x5f40b6[_0x509a6f(0x80)]='100%',_0x5f40b6['height']='100%',_0x434c24=createCanvasContext2D();const _0x3a4539=_0x434c24['canvas'];_0x1cc154['appendChild'](_0x3a4539),_0x5f40b6=_0x3a4539[_0x509a6f(0x7f)],_0x5f40b6['position']='absolute',_0x5f40b6[_0x509a6f(0x81)]='0',_0x5f40b6[_0x509a6f(0x92)]='top\x20left',this[_0x509a6f(0x8e)]=_0x1cc154,this[_0x509a6f(0x8a)]=_0x434c24;}!this[_0x509a6f(0x7c)]&&_0x556f48&&!this[_0x509a6f(0x8e)][_0x509a6f(0x7f)]['backgroundColor']&&(this[_0x509a6f(0x8e)][_0x509a6f(0x7f)][_0x509a6f(0x9a)]=_0x556f48);}['clipUnrotated'](_0x4e3913,_0x38feb5,_0x4bfb63){const _0xee412e=_0x1e8d53,_0x453364=getTopLeft(_0x4bfb63),_0x55252a=getTopRight(_0x4bfb63),_0x4e8ef1=getBottomRight(_0x4bfb63),_0x133cca=getBottomLeft(_0x4bfb63);_0x3fed6c(_0x38feb5[_0xee412e(0x9c)],_0x453364),_0x3fed6c(_0x38feb5['coordinateToPixelTransform'],_0x55252a),_0x3fed6c(_0x38feb5[_0xee412e(0x9c)],_0x4e8ef1),_0x3fed6c(_0x38feb5[_0xee412e(0x9c)],_0x133cca);const _0x125028=this[_0xee412e(0x95)];_0x3fed6c(_0x125028,_0x453364),_0x3fed6c(_0x125028,_0x55252a),_0x3fed6c(_0x125028,_0x4e8ef1),_0x3fed6c(_0x125028,_0x133cca),_0x4e3913[_0xee412e(0x72)](),_0x4e3913[_0xee412e(0x84)](),_0x4e3913['moveTo'](Math[_0xee412e(0xa0)](_0x453364[0x0]),Math[_0xee412e(0xa0)](_0x453364[0x1])),_0x4e3913['lineTo'](Math[_0xee412e(0xa0)](_0x55252a[0x0]),Math[_0xee412e(0xa0)](_0x55252a[0x1])),_0x4e3913[_0xee412e(0xa6)](Math[_0xee412e(0xa0)](_0x4e8ef1[0x0]),Math['round'](_0x4e8ef1[0x1])),_0x4e3913[_0xee412e(0xa6)](Math[_0xee412e(0xa0)](_0x133cca[0x0]),Math[_0xee412e(0xa0)](_0x133cca[0x1])),_0x4e3913[_0xee412e(0x83)]();}[_0x1e8d53(0x8d)](_0x4e1ec0,_0xbfbe5a){const _0x12838f=_0x1e8d53,_0x24f81b=_0x4e1ec0[_0x12838f(0x94)],_0x1f6be1=_0x4e1ec0['viewState'][_0x12838f(0x6b)],_0x4b27fa=_0x4e1ec0[_0x12838f(0x6a)][_0x12838f(0xa2)],_0x49eca0=_0x4e1ec0['pixelRatio'],_0x11fa34=Math['round'](getWidth(_0x24f81b)/_0x1f6be1*_0x49eca0),_0x46b0b4=Math['round'](getHeight(_0x24f81b)/_0x1f6be1*_0x49eca0);_0x42ab09(this[_0x12838f(0x6e)],_0x4e1ec0[_0x12838f(0xa1)][0x0]/0x2,_0x4e1ec0['size'][0x1]/0x2,0x1/_0x49eca0,0x1/_0x49eca0,_0x4b27fa,-_0x11fa34/0x2,-_0x46b0b4/0x2),makeInverse(this['inversePixelTransform'],this[_0x12838f(0x6e)]);const _0x5f0ef0=_0x3801d9(this[_0x12838f(0x6e)]);this[_0x12838f(0x87)](_0xbfbe5a,_0x5f0ef0,this[_0x12838f(0x97)](_0x4e1ec0));if(!this[_0x12838f(0x7c)]){const _0x4ad494=this[_0x12838f(0x8a)][_0x12838f(0xa9)];_0x4ad494[_0x12838f(0x80)]!=_0x11fa34||_0x4ad494[_0x12838f(0x73)]!=_0x46b0b4?(_0x4ad494[_0x12838f(0x80)]=_0x11fa34,_0x4ad494[_0x12838f(0x73)]=_0x46b0b4):this['context'][_0x12838f(0x6c)](0x0,0x0,_0x11fa34,_0x46b0b4),_0x5f0ef0!==_0x4ad494[_0x12838f(0x7f)][_0x12838f(0x75)]&&(_0x4ad494['style'][_0x12838f(0x75)]=_0x5f0ef0);}}[_0x1e8d53(0x82)](_0x1729f6,_0x56ec2a,_0x33562c){const _0x2f515d=_0x1e8d53,_0x25cc0b=this['getLayer']();if(_0x25cc0b['hasListener'](_0x1729f6)){const _0x5aa62e=new _0xd94d1a(_0x1729f6,this[_0x2f515d(0x95)],_0x33562c,_0x56ec2a);_0x25cc0b[_0x2f515d(0x79)](_0x5aa62e);}}[_0x1e8d53(0x78)](_0x48d4f2,_0x5127d6){const _0x33907c=_0x1e8d53;this[_0x33907c(0x6d)]=_0x5127d6;if(_0x5127d6[_0x33907c(0x85)])return;this[_0x33907c(0x82)](_0x19b5db[_0x33907c(0x6f)],_0x48d4f2,_0x5127d6);}[_0x1e8d53(0x71)](_0x4bc34c,_0x3274ba){const _0x4a6b7c=_0x1e8d53;if(_0x3274ba[_0x4a6b7c(0x85)])return;this['dispatchRenderEvent_'](_0x19b5db[_0x4a6b7c(0x77)],_0x4bc34c,_0x3274ba);}[_0x1e8d53(0x89)](_0xa9ddda){}[_0x1e8d53(0x70)](_0x23d44b){const _0x4bef3d=_0x1e8d53;return _0x23d44b[_0x4bef3d(0x85)]&&!this[_0x4bef3d(0x9b)]&&(this[_0x4bef3d(0x9b)]=new _0x4ba9d0()),_0x23d44b[_0x4bef3d(0x85)]?this[_0x4bef3d(0x9b)][_0x4bef3d(0x9d)]():this[_0x4bef3d(0x8a)];}['renderDeferred'](_0x491c6f){const _0x19ba29=_0x1e8d53;if(!_0x491c6f[_0x19ba29(0x85)])return;this[_0x19ba29(0x82)](_0x19b5db[_0x19ba29(0x6f)],this[_0x19ba29(0x8a)],_0x491c6f),_0x491c6f[_0x19ba29(0x85)]&&this[_0x19ba29(0x9b)]&&(this[_0x19ba29(0x9b)][_0x19ba29(0x99)](this[_0x19ba29(0x8a)]),this[_0x19ba29(0x9b)]['clear']()),this[_0x19ba29(0x89)](_0x491c6f),this[_0x19ba29(0x82)](_0x19b5db[_0x19ba29(0x77)],this[_0x19ba29(0x8a)],_0x491c6f);}['getRenderTransform'](_0x26a757,_0x2cc7ae,_0x3643fc,_0x181812,_0x3c124f,_0x539643,_0xcbea05){const _0x133cd5=_0x1e8d53,_0x35e39=_0x3c124f/0x2,_0x10c2ed=_0x539643/0x2,_0x5075c0=_0x181812/_0x2cc7ae,_0x4f97e7=-_0x5075c0,_0x46fc12=-_0x26a757[0x0]+_0xcbea05,_0x36e091=-_0x26a757[0x1];return _0x42ab09(this[_0x133cd5(0x74)],_0x35e39,_0x10c2ed,_0x5075c0,_0x4f97e7,-_0x3643fc,_0x46fc12,_0x36e091);}['disposeInternal'](){const _0x206cad=_0x1e8d53;delete this['frameState'],super[_0x206cad(0x88)]();}}function _0x1dd4(){const _0x220428=['POSTRENDER','preRender','dispatchEvent','6oOPDpW','6546WDBdSj','containerReused','div','1870968ioqhCh','style','width','left','dispatchRenderEvent_','clip','beginPath','declutter','33zxOJaB','useContainer','disposeInternal','renderDeferredInternal','context','getLayer','drawImage','prepareContainer','container','data','32408RSmaLy','5150dspvhN','transformOrigin','absolute','extent','inversePixelTransform','getClassName','getBackground','49630WzrAig','draw','backgroundColor','deferredContext_','coordinateToPixelTransform','getContext','className','171jcMUDr','round','size','rotation','getImageData','957724CaVnQH','580756KbFwuZ','lineTo','firstElementChild','155632vSTJHI','canvas','renderedResolution','viewState','resolution','clearRect','frameState','pixelTransform','PRERENDER','getRenderContext','postRender','save','height','tempTransform','transform','2289QATefI'];_0x1dd4=function(){return _0x220428;};return _0x1dd4();}export default CanvasLayerRenderer;