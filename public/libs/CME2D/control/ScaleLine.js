const _0x42b168=_0x3068;function _0x1ebf(){const _0x51fe4b=['target','viewState_','units','bar','minWidth','renderedHTML_','toFixed','display','createScaleBar','steps','updateElement_','absolute','className','1048iwTaEH','getUnits','196YSkImc','createMarker','scaleBarText_','pointerEvents','innerHTML','pow','round','10108730KwateO','min-width:\x20','join','px;','renderedWidth_','renderedVisible_','center','imperial','degrees','\x20:\x201','ol-scale-singlebar-odd','scaleBarSteps_','margin-left:\x20','innerElement_','width','103758lqKBSX','setDpi','class=\x22ol-scale-singlebar\x20','style','scaleBar_','dpi_','897135tGwamE','3195028XnXQZH','push','style=\x22','minWidth_','205POjFue','handleUnitsChanged_','class=\x22ol-scale-step-text\x22\x20','15185GejpOx','</div>','Invalid\x20units','-inner','floor','class=\x22ol-scale-step-marker\x22\x20','projection','left:\x20','addChangeListener','set','setUnits','1\x20:\x20','div','px;\x22','<div\x20','appendChild','none','log','text-align:\x20','element','style=\x22position:\x20','metric','createStepText','viewState','maxWidth_','createElement','text','px;\x22>','41949EbZpog','left','242634LRfWik','toLocaleString','getScaleForResolution','style=\x22width:\x20','frameState'];_0x1ebf=function(){return _0x51fe4b;};return _0x1ebf();}(function(_0x1d587b,_0x3f6d22){const _0x313018=_0x3068,_0x5a5f4a=_0x1d587b();while(!![]){try{const _0x65644d=parseInt(_0x313018(0xec))/0x1*(-parseInt(_0x313018(0x11e))/0x2)+parseInt(_0x313018(0xe4))/0x3+parseInt(_0x313018(0xe5))/0x4+parseInt(_0x313018(0xe9))/0x5*(parseInt(_0x313018(0xde))/0x6)+parseInt(_0x313018(0x10a))/0x7+-parseInt(_0x313018(0x11c))/0x8*(parseInt(_0x313018(0x108))/0x9)+parseInt(_0x313018(0x125))/0xa;if(_0x65644d===_0x3f6d22)break;else _0x5a5f4a['push'](_0x5a5f4a['shift']());}catch(_0x476d0d){_0x5a5f4a['push'](_0x5a5f4a['shift']());}}}(_0x1ebf,0xb7fdd));import _0x1d8b9a from'./Control.js';function _0x3068(_0x44094f,_0x13cd57){const _0x1ebf22=_0x1ebf();return _0x3068=function(_0x3068d0,_0x3b7c22){_0x3068d0=_0x3068d0-0xde;let _0x473da1=_0x1ebf22[_0x3068d0];return _0x473da1;},_0x3068(_0x44094f,_0x13cd57);}import{CLASS_UNSELECTABLE}from'../css.js';import{METERS_PER_UNIT,getPointResolution}from'../proj.js';const UNITS_PROP=_0x42b168(0x111),LEADING_DIGITS=[0x1,0x2,0x5],DEFAULT_DPI=25.4/0.28;class ScaleLine extends _0x1d8b9a{constructor(_0x592649){const _0x5e00d8=_0x42b168;_0x592649=_0x592649?_0x592649:{};const _0x13f355=document[_0x5e00d8(0x105)]('div');_0x13f355['style'][_0x5e00d8(0x121)]=_0x5e00d8(0xfc),super({'element':_0x13f355,'render':_0x592649['render'],'target':_0x592649[_0x5e00d8(0x10f)]}),this['on'],this['once'],this['un'];const _0xab48e=_0x592649[_0x5e00d8(0x11b)]!==undefined?_0x592649[_0x5e00d8(0x11b)]:_0x592649[_0x5e00d8(0x112)]?'ol-scale-bar':'ol-scale-line';this['innerElement_']=document[_0x5e00d8(0x105)](_0x5e00d8(0xf8)),this[_0x5e00d8(0x132)][_0x5e00d8(0x11b)]=_0xab48e+_0x5e00d8(0xef),this[_0x5e00d8(0xff)][_0x5e00d8(0x11b)]=_0xab48e+'\x20'+CLASS_UNSELECTABLE,this[_0x5e00d8(0xff)][_0x5e00d8(0xfb)](this['innerElement_']),this[_0x5e00d8(0x110)]=null,this[_0x5e00d8(0xe8)]=_0x592649['minWidth']!==undefined?_0x592649[_0x5e00d8(0x113)]:0x40,this[_0x5e00d8(0x104)]=_0x592649['maxWidth'],this['renderedVisible_']=![],this['renderedWidth_']=undefined,this[_0x5e00d8(0x114)]='',this[_0x5e00d8(0xf4)](UNITS_PROP,this[_0x5e00d8(0xea)]),this[_0x5e00d8(0xf6)](_0x592649[_0x5e00d8(0x111)]||_0x5e00d8(0x101)),this[_0x5e00d8(0xe2)]=_0x592649[_0x5e00d8(0x112)]||![],this[_0x5e00d8(0x130)]=_0x592649[_0x5e00d8(0x118)]||0x4,this[_0x5e00d8(0x120)]=_0x592649[_0x5e00d8(0x106)]||![],this[_0x5e00d8(0xe3)]=_0x592649['dpi']||undefined;}[_0x42b168(0x11d)](){return this['get'](UNITS_PROP);}['handleUnitsChanged_'](){const _0x11bc4c=_0x42b168;this[_0x11bc4c(0x119)]();}[_0x42b168(0xf6)](_0x1c5f14){const _0x499580=_0x42b168;this[_0x499580(0xf5)](UNITS_PROP,_0x1c5f14);}[_0x42b168(0xdf)](_0x563aa4){const _0x431d3a=_0x42b168;this[_0x431d3a(0xe3)]=_0x563aa4;}[_0x42b168(0x119)](){const _0x24e4d1=_0x42b168,_0x30cd20=this[_0x24e4d1(0x110)];if(!_0x30cd20){this['renderedVisible_']&&(this[_0x24e4d1(0xff)][_0x24e4d1(0xe1)][_0x24e4d1(0x116)]='none',this['renderedVisible_']=![]);return;}const _0xcb63e4=_0x30cd20[_0x24e4d1(0x12b)],_0x7d16cd=_0x30cd20[_0x24e4d1(0xf2)],_0xabd900=this[_0x24e4d1(0x11d)](),_0x3ff0b8=_0xabd900==_0x24e4d1(0x12d)?'degrees':'m';let _0x44d953=getPointResolution(_0x7d16cd,_0x30cd20['resolution'],_0xcb63e4,_0x3ff0b8);const _0x549b88=this[_0x24e4d1(0xe8)]*(this['dpi_']||DEFAULT_DPI)/DEFAULT_DPI,_0x48a5ea=this['maxWidth_']!==undefined?this[_0x24e4d1(0x104)]*(this[_0x24e4d1(0xe3)]||DEFAULT_DPI)/DEFAULT_DPI:undefined;let _0x263fa9=_0x549b88*_0x44d953,_0x51d1e0='';if(_0xabd900==_0x24e4d1(0x12d)){const _0x136ebe=METERS_PER_UNIT['degrees'];_0x263fa9*=_0x136ebe;if(_0x263fa9<_0x136ebe/0x3c)_0x51d1e0='″',_0x44d953*=0xe10;else _0x263fa9<_0x136ebe?(_0x51d1e0='′',_0x44d953*=0x3c):_0x51d1e0='°';}else{if(_0xabd900==_0x24e4d1(0x12c)){if(_0x263fa9<0.9144)_0x51d1e0='in',_0x44d953/=0.0254;else _0x263fa9<1609.344?(_0x51d1e0='ft',_0x44d953/=0.3048):(_0x51d1e0='mi',_0x44d953/=1609.344);}else{if(_0xabd900=='nautical')_0x44d953/=0x73c,_0x51d1e0='NM';else{if(_0xabd900==_0x24e4d1(0x101)){if(_0x263fa9<0.000001)_0x51d1e0='nm',_0x44d953*=0x3b9aca00;else{if(_0x263fa9<0.001)_0x51d1e0='μm',_0x44d953*=0xf4240;else{if(_0x263fa9<0x1)_0x51d1e0='mm',_0x44d953*=0x3e8;else _0x263fa9<0x3e8?_0x51d1e0='m':(_0x51d1e0='km',_0x44d953/=0x3e8);}}}else{if(_0xabd900=='us'){if(_0x263fa9<0.9144)_0x51d1e0='in',_0x44d953*=39.37;else _0x263fa9<1609.344?(_0x51d1e0='ft',_0x44d953/=0.30480061):(_0x51d1e0='mi',_0x44d953/=1609.3472);}else throw new Error(_0x24e4d1(0xee));}}}}let _0x2954e5=0x3*Math[_0x24e4d1(0xf0)](Math[_0x24e4d1(0xfd)](_0x549b88*_0x44d953)/Math['log'](0xa)),_0x9e6f86,_0x5a965e,_0x6ffbb3,_0xc61228,_0xb854aa,_0x11dd2c;while(!![]){_0x6ffbb3=Math[_0x24e4d1(0xf0)](_0x2954e5/0x3);const _0x1a559f=Math[_0x24e4d1(0x123)](0xa,_0x6ffbb3);_0x9e6f86=LEADING_DIGITS[(_0x2954e5%0x3+0x3)%0x3]*_0x1a559f,_0x5a965e=Math[_0x24e4d1(0x124)](_0x9e6f86/_0x44d953);if(isNaN(_0x5a965e)){this['element'][_0x24e4d1(0xe1)]['display']='none',this['renderedVisible_']=![];return;}if(_0x48a5ea!==undefined&&_0x5a965e>=_0x48a5ea){_0x9e6f86=_0xc61228,_0x5a965e=_0xb854aa,_0x6ffbb3=_0x11dd2c;break;}else{if(_0x5a965e>=_0x549b88)break;}_0xc61228=_0x9e6f86,_0xb854aa=_0x5a965e,_0x11dd2c=_0x6ffbb3,++_0x2954e5;}const _0x586384=this['scaleBar_']?this[_0x24e4d1(0x117)](_0x5a965e,_0x9e6f86,_0x51d1e0):_0x9e6f86[_0x24e4d1(0x115)](_0x6ffbb3<0x0?-_0x6ffbb3:0x0)+'\x20'+_0x51d1e0;this[_0x24e4d1(0x114)]!=_0x586384&&(this[_0x24e4d1(0x132)][_0x24e4d1(0x122)]=_0x586384,this[_0x24e4d1(0x114)]=_0x586384),this[_0x24e4d1(0x129)]!=_0x5a965e&&(this[_0x24e4d1(0x132)][_0x24e4d1(0xe1)][_0x24e4d1(0x133)]=_0x5a965e+'px',this['renderedWidth_']=_0x5a965e),!this['renderedVisible_']&&(this[_0x24e4d1(0xff)][_0x24e4d1(0xe1)][_0x24e4d1(0x116)]='',this[_0x24e4d1(0x12a)]=!![]);}[_0x42b168(0x117)](_0x506bf1,_0x3aa444,_0x8a011b){const _0x3355dd=_0x42b168,_0x48da4e=this[_0x3355dd(0x10c)](),_0x907c2b=_0x48da4e<0x1?Math[_0x3355dd(0x124)](0x1/_0x48da4e)[_0x3355dd(0x10b)]()+_0x3355dd(0x12e):_0x3355dd(0xf7)+Math[_0x3355dd(0x124)](_0x48da4e)[_0x3355dd(0x10b)](),_0xd0fa1=this[_0x3355dd(0x130)],_0x80566c=_0x506bf1/_0xd0fa1,_0x309011=[this['createMarker'](_0x3355dd(0x11a))];for(let _0x4df14a=0x0;_0x4df14a<_0xd0fa1;++_0x4df14a){const _0x488dc3=_0x4df14a%0x2===0x0?_0x3355dd(0x12f):'ol-scale-singlebar-even';_0x309011[_0x3355dd(0xe6)]('<div>'+_0x3355dd(0xfa)+(_0x3355dd(0xe0)+_0x488dc3+'\x22\x20')+(_0x3355dd(0x10d)+_0x80566c+_0x3355dd(0xf9))+'>'+_0x3355dd(0xed)+this[_0x3355dd(0x11f)]('relative')+(_0x4df14a%0x2===0x0||_0xd0fa1===0x2?this[_0x3355dd(0x102)](_0x4df14a,_0x506bf1,![],_0x3aa444,_0x8a011b):'')+_0x3355dd(0xed));}_0x309011['push'](this[_0x3355dd(0x102)](_0xd0fa1,_0x506bf1,!![],_0x3aa444,_0x8a011b));const _0x246b25=this[_0x3355dd(0x120)]?'<div\x20class=\x22ol-scale-text\x22\x20style=\x22width:\x20'+_0x506bf1+_0x3355dd(0x107)+_0x907c2b+'</div>':'';return _0x246b25+_0x309011[_0x3355dd(0x127)]('');}[_0x42b168(0x11f)](_0x583f06){const _0x52203b=_0x42b168,_0x4fe0ef=_0x583f06===_0x52203b(0x11a)?0x3:-0xa;return _0x52203b(0xfa)+_0x52203b(0xf1)+(_0x52203b(0x100)+_0x583f06+';\x20top:\x20'+_0x4fe0ef+'px;\x22')+'></div>';}[_0x42b168(0x102)](_0x2799a0,_0x326a3f,_0x1d8e51,_0x350b77,_0x3b5a22){const _0x65fd55=_0x42b168,_0x3a2b11=_0x2799a0===0x0?0x0:Math[_0x65fd55(0x124)](_0x350b77/this[_0x65fd55(0x130)]*_0x2799a0*0x64)/0x64,_0x2fe0a8=_0x3a2b11+(_0x2799a0===0x0?'':'\x20'+_0x3b5a22),_0xab35f2=_0x2799a0===0x0?-0x3:_0x326a3f/this[_0x65fd55(0x130)]*-0x1,_0x1ec5b7=_0x2799a0===0x0?0x0:_0x326a3f/this['scaleBarSteps_']*0x2;return _0x65fd55(0xfa)+_0x65fd55(0xeb)+_0x65fd55(0xe7)+(_0x65fd55(0x131)+_0xab35f2+_0x65fd55(0x128))+(_0x65fd55(0xfe)+(_0x2799a0===0x0?_0x65fd55(0x109):_0x65fd55(0x12b))+';')+(_0x65fd55(0x126)+_0x1ec5b7+'px;')+(_0x65fd55(0xf3)+(_0x1d8e51?_0x326a3f+'px':'unset')+';')+'\x22>'+_0x2fe0a8+_0x65fd55(0xed);}[_0x42b168(0x10c)](){const _0x2d5f77=_0x42b168,_0x176833=getPointResolution(this[_0x2d5f77(0x110)][_0x2d5f77(0xf2)],this[_0x2d5f77(0x110)]['resolution'],this[_0x2d5f77(0x110)]['center'],'m'),_0x257ff9=this['dpi_']||DEFAULT_DPI,_0x11f04e=0x3e8/25.4;return _0x176833*_0x11f04e*_0x257ff9;}['render'](_0x1ee861){const _0x5219e0=_0x42b168,_0x40b0b4=_0x1ee861[_0x5219e0(0x10e)];!_0x40b0b4?this['viewState_']=null:this[_0x5219e0(0x110)]=_0x40b0b4[_0x5219e0(0x103)],this[_0x5219e0(0x119)]();}}export default ScaleLine;