const _0x4bf4f7=_0x5777;(function(_0x41bde4,_0x2c703a){const _0x2e6ac5=_0x5777,_0xe70cfd=_0x41bde4();while(!![]){try{const _0x158a67=parseInt(_0x2e6ac5(0x9f))/0x1+parseInt(_0x2e6ac5(0xdb))/0x2*(parseInt(_0x2e6ac5(0xe3))/0x3)+-parseInt(_0x2e6ac5(0xc6))/0x4*(parseInt(_0x2e6ac5(0xdf))/0x5)+-parseInt(_0x2e6ac5(0x7f))/0x6*(-parseInt(_0x2e6ac5(0xaf))/0x7)+-parseInt(_0x2e6ac5(0xca))/0x8+parseInt(_0x2e6ac5(0xc7))/0x9+-parseInt(_0x2e6ac5(0x98))/0xa;if(_0x158a67===_0x2c703a)break;else _0xe70cfd['push'](_0xe70cfd['shift']());}catch(_0x3d2433){_0xe70cfd['push'](_0xe70cfd['shift']());}}}(_0x2010,0x68ad8));function _0x2010(){const _0xa42e77=['preventDefault','boxOverlay_','abs','rad)','pointerdown','setRotation','title','collapsible_','toggle','pointermove','getCollapsible','138UomOoS','getSize','boundHandleRotationChanged_','fitInternal','5mZYHEg','PROPERTYCHANGE','label_','border-box','29427urERLh','clientX','handleClick_','setCenterInternal','getRotateWithView','string','getCenter','setAttribute','classList','button','rotateWithView_','getElement','bind','calculateExtentInternal','log','ovmapDiv_','style','12fndOzL','layers','getPixelFromCoordinateInternal','handleToggle_','getCenterInternal','rotateWithView','getMap','view_','CLICK','collapsible','ol-uncollapsible','getOverviewMap','boxSizing','getRotation','collapseLabel','ovmapPostrenderKey_','setMap','view','getEventCoordinateInternal','span','viewExtent_','addOverlay','element','pointerup','ovmap_','40190cRFzBC','div','bindView_','VIEW','appendChild','render','setCollapsible','144873OiTIby','height','removeEventListener','clientY','updateBox_','label','setCollapsed','ol-overviewmap-map','SIZE','createElement','handleMapPropertyChange_','validateExtent_','getEventCoordinate','\x20ol-uncollapsible','setTarget','getResolution','1133804ULuKcL','collapsed','collapseLabel_','POSTRENDER','recenter_','getCollapsed','setPosition','isRendered','textContent','push','collapsed_','setRotateWithView','className','transform','key','getView','center-center','addEventListener','addChangeListener','resetExtent_','updateSize','unbindView_','handleRotationChanged_','2488276XspVpt','5667075DxVeaq','listenerKeys','updateBoxAfterOvmapIsRendered_','5763720MNMLyW','setView','removeChangeListener','target','isDef','type'];_0x2010=function(){return _0xa42e77;};return _0x2010();}import _0x51c19e from'../Collection.js';import _0x300248 from'./Control.js';function _0x5777(_0x2a7e82,_0x453acd){const _0x201012=_0x2010();return _0x5777=function(_0x577701,_0x52e51b){_0x577701=_0x577701-0x75;let _0x9eace4=_0x201012[_0x577701];return _0x9eace4;},_0x5777(_0x2a7e82,_0x453acd);}import _0x811f6d from'../events/EventType.js';import _0x58e09c from'../Map.js';import _0x1efb27 from'../MapEventType.js';import _0x1e0dc9 from'../MapProperty.js';import _0x205f54 from'../ObjectEventType.js';import _0x3b4c8c from'../Overlay.js';import _0x51272d from'../View.js';import _0x3f1ecc from'../ViewProperty.js';import{CLASS_COLLAPSED,CLASS_CONTROL,CLASS_UNSELECTABLE}from'../css.js';import{containsExtent,equals as _0x1952fd,getBottomRight,getTopLeft,scaleFromCenter}from'../extent.js';import{listen,listenOnce}from'../events.js';import{fromExtent as _0x1f0c7e}from'../geom/Polygon.js';import{replaceNode}from'../dom.js';const MAX_RATIO=0.75,MIN_RATIO=0.1;class OverviewMap extends _0x300248{constructor(_0x511ce0){const _0x1e960b=_0x5777;_0x511ce0=_0x511ce0?_0x511ce0:{},super({'element':document['createElement'](_0x1e960b(0x99)),'render':_0x511ce0[_0x1e960b(0x9d)],'target':_0x511ce0[_0x1e960b(0xcd)]}),this['boundHandleRotationChanged_']=this['handleRotationChanged_'][_0x1e960b(0x7a)](this),this[_0x1e960b(0xb9)]=_0x511ce0[_0x1e960b(0xb0)]!==undefined?_0x511ce0[_0x1e960b(0xb0)]:!![],this[_0x1e960b(0xd7)]=_0x511ce0[_0x1e960b(0x88)]!==undefined?_0x511ce0[_0x1e960b(0x88)]:!![];!this[_0x1e960b(0xd7)]&&(this[_0x1e960b(0xb9)]=![]);this[_0x1e960b(0x78)]=_0x511ce0[_0x1e960b(0x84)]!==undefined?_0x511ce0[_0x1e960b(0x84)]:![],this['viewExtent_']=undefined;const _0x32c99f=_0x511ce0[_0x1e960b(0xbb)]!==undefined?_0x511ce0[_0x1e960b(0xbb)]:'ol-overviewmap',_0x535832=_0x511ce0['tipLabel']!==undefined?_0x511ce0['tipLabel']:'Overview\x20map',_0x4778e1=_0x511ce0['collapseLabel']!==undefined?_0x511ce0[_0x1e960b(0x8d)]:'‹';typeof _0x4778e1===_0x1e960b(0xe8)?(this[_0x1e960b(0xb1)]=document[_0x1e960b(0xa8)](_0x1e960b(0x92)),this[_0x1e960b(0xb1)][_0x1e960b(0xb7)]=_0x4778e1):this[_0x1e960b(0xb1)]=_0x4778e1;const _0xde9141=_0x511ce0[_0x1e960b(0xa4)]!==undefined?_0x511ce0[_0x1e960b(0xa4)]:'›';typeof _0xde9141===_0x1e960b(0xe8)?(this[_0x1e960b(0xe1)]=document[_0x1e960b(0xa8)](_0x1e960b(0x92)),this[_0x1e960b(0xe1)]['textContent']=_0xde9141):this['label_']=_0xde9141;const _0x3765d2=this[_0x1e960b(0xd7)]&&!this[_0x1e960b(0xb9)]?this[_0x1e960b(0xb1)]:this[_0x1e960b(0xe1)],_0x22dbb2=document[_0x1e960b(0xa8)](_0x1e960b(0x77));_0x22dbb2[_0x1e960b(0x75)](_0x1e960b(0xcf),_0x1e960b(0x77)),_0x22dbb2[_0x1e960b(0xd6)]=_0x535832,_0x22dbb2[_0x1e960b(0x9c)](_0x3765d2),_0x22dbb2[_0x1e960b(0xc0)](_0x811f6d[_0x1e960b(0x87)],this[_0x1e960b(0xe5)]['bind'](this),![]),this['ovmapDiv_']=document[_0x1e960b(0xa8)](_0x1e960b(0x99)),this[_0x1e960b(0x7d)][_0x1e960b(0xbb)]=_0x1e960b(0xa6),this[_0x1e960b(0x86)]=_0x511ce0[_0x1e960b(0x90)];const _0x107cb6=new _0x58e09c({'view':_0x511ce0[_0x1e960b(0x90)],'controls':new _0x51c19e(),'interactions':new _0x51c19e()});this['ovmap_']=_0x107cb6;_0x511ce0[_0x1e960b(0x80)]&&_0x511ce0[_0x1e960b(0x80)]['forEach'](function(_0x10da55){_0x107cb6['addLayer'](_0x10da55);});const _0x252da5=document[_0x1e960b(0xa8)](_0x1e960b(0x99));_0x252da5['className']='ol-overviewmap-box',_0x252da5[_0x1e960b(0x7e)][_0x1e960b(0x8b)]=_0x1e960b(0xe2),this['boxOverlay_']=new _0x3b4c8c({'position':[0x0,0x0],'positioning':_0x1e960b(0xbf),'element':_0x252da5}),this['ovmap_'][_0x1e960b(0x94)](this[_0x1e960b(0xd1)]);const _0x51a2e3=_0x32c99f+'\x20'+CLASS_UNSELECTABLE+'\x20'+CLASS_CONTROL+(this[_0x1e960b(0xb9)]&&this[_0x1e960b(0xd7)]?'\x20'+CLASS_COLLAPSED:'')+(this[_0x1e960b(0xd7)]?'':_0x1e960b(0xac)),_0x51da00=this['element'];_0x51da00[_0x1e960b(0xbb)]=_0x51a2e3,_0x51da00['appendChild'](this[_0x1e960b(0x7d)]),_0x51da00['appendChild'](_0x22dbb2);const _0x294642=this,_0x3354f3=this[_0x1e960b(0xd1)],_0x32556e=this[_0x1e960b(0xd1)][_0x1e960b(0x79)](),_0x5f1924=function(_0x765bba){const _0x3c6b4d=_0x1e960b;return{'clientX':_0x765bba[_0x3c6b4d(0xe4)],'clientY':_0x765bba[_0x3c6b4d(0xa2)]};},_0x2d6978=function(_0x30d00f){const _0x293565=_0x1e960b,_0x204050=_0x5f1924(_0x30d00f),_0x1b5e7e=_0x107cb6[_0x293565(0xab)](_0x204050);_0x3354f3[_0x293565(0xb5)](_0x1b5e7e);},_0x12f06e=function(_0x1de736){const _0x179240=_0x1e960b,_0x5ced83=_0x107cb6[_0x179240(0x91)](_0x1de736);_0x294642['getMap']()[_0x179240(0xbe)]()['setCenterInternal'](_0x5ced83),window['removeEventListener'](_0x179240(0xd9),_0x2d6978),window[_0x179240(0xa1)](_0x179240(0x96),_0x12f06e);};this[_0x1e960b(0x7d)][_0x1e960b(0xc0)](_0x1e960b(0xd4),function(){const _0xff6f0c=_0x1e960b;event[_0xff6f0c(0xcd)]===_0x32556e&&window[_0xff6f0c(0xc0)](_0xff6f0c(0xd9),_0x2d6978),window[_0xff6f0c(0xc0)](_0xff6f0c(0x96),_0x12f06e);});}[_0x4bf4f7(0x8f)](_0x364952){const _0x48ff16=_0x4bf4f7,_0x288705=this[_0x48ff16(0x85)]();if(_0x364952===_0x288705)return;if(_0x288705){const _0x260adb=_0x288705[_0x48ff16(0xbe)]();_0x260adb&&this[_0x48ff16(0xc4)](_0x260adb),this[_0x48ff16(0x97)][_0x48ff16(0xad)](null);}super[_0x48ff16(0x8f)](_0x364952);if(_0x364952){this[_0x48ff16(0x97)][_0x48ff16(0xad)](this[_0x48ff16(0x7d)]),this[_0x48ff16(0xc8)][_0x48ff16(0xb8)](listen(_0x364952,_0x205f54[_0x48ff16(0xe0)],this['handleMapPropertyChange_'],this));const _0x37ae2c=_0x364952[_0x48ff16(0xbe)]();_0x37ae2c&&this[_0x48ff16(0x9a)](_0x37ae2c),!this[_0x48ff16(0x97)][_0x48ff16(0xb6)]()&&this[_0x48ff16(0xc9)]();}}[_0x4bf4f7(0xa9)](_0x5a6eda){const _0x55fade=_0x4bf4f7;if(_0x5a6eda[_0x55fade(0xbd)]===_0x1e0dc9[_0x55fade(0x9b)]){const _0x359c4c=_0x5a6eda['oldValue'];_0x359c4c&&this[_0x55fade(0xc4)](_0x359c4c);const _0x367771=this[_0x55fade(0x85)]()[_0x55fade(0xbe)]();this['bindView_'](_0x367771);}else!this[_0x55fade(0x97)][_0x55fade(0xb6)]()&&(_0x5a6eda[_0x55fade(0xbd)]===_0x1e0dc9['TARGET']||_0x5a6eda['key']===_0x1e0dc9[_0x55fade(0xa7)])&&this[_0x55fade(0x97)]['updateSize']();}[_0x4bf4f7(0x9a)](_0x5b7341){const _0x5a0e1c=_0x4bf4f7;if(!this[_0x5a0e1c(0x86)]){const _0x1eb9c3=new _0x51272d({'projection':_0x5b7341['getProjection']()});this[_0x5a0e1c(0x97)][_0x5a0e1c(0xcb)](_0x1eb9c3);}_0x5b7341[_0x5a0e1c(0xc1)](_0x3f1ecc['ROTATION'],this[_0x5a0e1c(0xdd)]),this[_0x5a0e1c(0xc5)](),_0x5b7341[_0x5a0e1c(0xce)]()&&(this[_0x5a0e1c(0x97)][_0x5a0e1c(0xc3)](),this['resetExtent_']());}['unbindView_'](_0x8a3bd4){const _0x5f35fe=_0x4bf4f7;_0x8a3bd4[_0x5f35fe(0xcc)](_0x3f1ecc['ROTATION'],this[_0x5f35fe(0xdd)]);}[_0x4bf4f7(0xc5)](){const _0x4d60d5=_0x4bf4f7;this[_0x4d60d5(0x78)]&&this[_0x4d60d5(0x97)]['getView']()[_0x4d60d5(0xd5)](this[_0x4d60d5(0x85)]()[_0x4d60d5(0xbe)]()[_0x4d60d5(0x8c)]());}[_0x4bf4f7(0xaa)](){const _0x188409=_0x4bf4f7,_0x3d62cf=this[_0x188409(0x85)](),_0x5cda05=this[_0x188409(0x97)];if(!_0x3d62cf[_0x188409(0xb6)]()||!_0x5cda05[_0x188409(0xb6)]())return;const _0x4b74c1=_0x3d62cf[_0x188409(0xdc)](),_0x22ff46=_0x3d62cf[_0x188409(0xbe)](),_0x2ece1f=_0x22ff46[_0x188409(0x7b)](_0x4b74c1);if(this[_0x188409(0x93)]&&_0x1952fd(_0x2ece1f,this[_0x188409(0x93)]))return;this[_0x188409(0x93)]=_0x2ece1f;const _0x306692=_0x5cda05[_0x188409(0xdc)](),_0x5ea34f=_0x5cda05[_0x188409(0xbe)](),_0x5ccbde=_0x5ea34f['calculateExtentInternal'](_0x306692),_0x54aa7a=_0x5cda05['getPixelFromCoordinateInternal'](getTopLeft(_0x2ece1f)),_0x33226e=_0x5cda05[_0x188409(0x81)](getBottomRight(_0x2ece1f)),_0x295300=Math[_0x188409(0xd2)](_0x54aa7a[0x0]-_0x33226e[0x0]),_0x1881e3=Math[_0x188409(0xd2)](_0x54aa7a[0x1]-_0x33226e[0x1]),_0x465164=_0x306692[0x0],_0x145d9e=_0x306692[0x1];if(_0x295300<_0x465164*MIN_RATIO||_0x1881e3<_0x145d9e*MIN_RATIO||_0x295300>_0x465164*MAX_RATIO||_0x1881e3>_0x145d9e*MAX_RATIO)this[_0x188409(0xc2)]();else!containsExtent(_0x5ccbde,_0x2ece1f)&&this[_0x188409(0xb3)]();}[_0x4bf4f7(0xc2)](){const _0x25e232=_0x4bf4f7;if(MAX_RATIO===0x0||MIN_RATIO===0x0)return;const _0x3f9252=this[_0x25e232(0x85)](),_0x2362fb=this[_0x25e232(0x97)],_0x11cf04=_0x3f9252[_0x25e232(0xdc)](),_0x501d18=_0x3f9252[_0x25e232(0xbe)](),_0x3a37e4=_0x501d18[_0x25e232(0x7b)](_0x11cf04),_0x21b0fb=_0x2362fb[_0x25e232(0xbe)](),_0x4c37ca=Math[_0x25e232(0x7c)](MAX_RATIO/MIN_RATIO)/Math['LN2'],_0x44e55e=0x1/(Math['pow'](0x2,_0x4c37ca/0x2)*MIN_RATIO);scaleFromCenter(_0x3a37e4,_0x44e55e),_0x21b0fb[_0x25e232(0xde)](_0x1f0c7e(_0x3a37e4));}[_0x4bf4f7(0xb3)](){const _0x580e57=_0x4bf4f7,_0x4faff7=this[_0x580e57(0x85)](),_0x211c95=this[_0x580e57(0x97)],_0x3bd9bf=_0x4faff7[_0x580e57(0xbe)](),_0x3b8705=_0x211c95['getView']();_0x3b8705[_0x580e57(0xe6)](_0x3bd9bf[_0x580e57(0x83)]());}[_0x4bf4f7(0xa3)](){const _0x547580=_0x4bf4f7,_0x293bb0=this[_0x547580(0x85)](),_0x43e77c=this['ovmap_'];if(!_0x293bb0[_0x547580(0xb6)]()||!_0x43e77c[_0x547580(0xb6)]())return;const _0x962fc2=_0x293bb0['getSize'](),_0x3d6437=_0x293bb0[_0x547580(0xbe)](),_0x40bea0=_0x43e77c[_0x547580(0xbe)](),_0x4fe54f=this['rotateWithView_']?0x0:-_0x3d6437['getRotation'](),_0x9c29d1=this['boxOverlay_'],_0x135961=this[_0x547580(0xd1)][_0x547580(0x79)](),_0x65481a=_0x3d6437[_0x547580(0xe9)](),_0x4c7f5e=_0x3d6437[_0x547580(0xae)](),_0x5649fb=_0x40bea0[_0x547580(0xae)](),_0x1f2419=_0x962fc2[0x0]*_0x4c7f5e/_0x5649fb,_0x5480e9=_0x962fc2[0x1]*_0x4c7f5e/_0x5649fb;_0x9c29d1[_0x547580(0xb5)](_0x65481a);if(_0x135961){_0x135961[_0x547580(0x7e)]['width']=_0x1f2419+'px',_0x135961[_0x547580(0x7e)][_0x547580(0xa0)]=_0x5480e9+'px';const _0x53a413='rotate('+_0x4fe54f+_0x547580(0xd3);_0x135961['style'][_0x547580(0xbc)]=_0x53a413;}}[_0x4bf4f7(0xc9)](){const _0x2f82fc=_0x4bf4f7;if(this[_0x2f82fc(0x8e)])return;this['ovmapPostrenderKey_']=listenOnce(this['ovmap_'],_0x1efb27[_0x2f82fc(0xb2)],_0x665252=>{delete this['ovmapPostrenderKey_'],this['updateBox_']();});}['handleClick_'](_0x36bcf7){const _0x1494a4=_0x4bf4f7;_0x36bcf7[_0x1494a4(0xd0)](),this[_0x1494a4(0x82)]();}['handleToggle_'](){const _0x445ac3=_0x4bf4f7;this[_0x445ac3(0x95)][_0x445ac3(0x76)][_0x445ac3(0xd8)](CLASS_COLLAPSED);this['collapsed_']?replaceNode(this[_0x445ac3(0xb1)],this[_0x445ac3(0xe1)]):replaceNode(this[_0x445ac3(0xe1)],this[_0x445ac3(0xb1)]);this[_0x445ac3(0xb9)]=!this[_0x445ac3(0xb9)];const _0x2882eb=this[_0x445ac3(0x97)];if(!this[_0x445ac3(0xb9)]){if(_0x2882eb[_0x445ac3(0xb6)]()){this[_0x445ac3(0x93)]=undefined,_0x2882eb['render']();return;}_0x2882eb[_0x445ac3(0xc3)](),this[_0x445ac3(0xc2)](),this['updateBoxAfterOvmapIsRendered_']();}}[_0x4bf4f7(0xda)](){const _0x10a34c=_0x4bf4f7;return this[_0x10a34c(0xd7)];}[_0x4bf4f7(0x9e)](_0x1fb119){const _0x1c19dc=_0x4bf4f7;if(this[_0x1c19dc(0xd7)]===_0x1fb119)return;this[_0x1c19dc(0xd7)]=_0x1fb119,this[_0x1c19dc(0x95)]['classList'][_0x1c19dc(0xd8)](_0x1c19dc(0x89)),!_0x1fb119&&this[_0x1c19dc(0xb9)]&&this[_0x1c19dc(0x82)]();}[_0x4bf4f7(0xa5)](_0x4330fd){const _0x4cd72a=_0x4bf4f7;if(!this[_0x4cd72a(0xd7)]||this[_0x4cd72a(0xb9)]===_0x4330fd)return;this['handleToggle_']();}[_0x4bf4f7(0xb4)](){const _0x20de3e=_0x4bf4f7;return this[_0x20de3e(0xb9)];}[_0x4bf4f7(0xe7)](){return this['rotateWithView_'];}[_0x4bf4f7(0xba)](_0x12b845){const _0x257481=_0x4bf4f7;if(this['rotateWithView_']===_0x12b845)return;this['rotateWithView_']=_0x12b845,this[_0x257481(0x85)]()[_0x257481(0xbe)]()[_0x257481(0x8c)]()!==0x0&&(this[_0x257481(0x78)]?this[_0x257481(0xc5)]():this['ovmap_']['getView']()[_0x257481(0xd5)](0x0),this[_0x257481(0x93)]=undefined,this['validateExtent_'](),this[_0x257481(0xa3)]());}[_0x4bf4f7(0x8a)](){const _0x2f8d5e=_0x4bf4f7;return this[_0x2f8d5e(0x97)];}[_0x4bf4f7(0x9d)](_0x4f259d){const _0x343cab=_0x4bf4f7;this[_0x343cab(0xaa)](),this['updateBox_']();}}export default OverviewMap;