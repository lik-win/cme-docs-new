const _0x8a952e=_0x3169;(function(_0x4b2f3a,_0x1e8d46){const _0x32215b=_0x3169,_0x226b5e=_0x4b2f3a();while(!![]){try{const _0x49c107=parseInt(_0x32215b(0xf3))/0x1*(-parseInt(_0x32215b(0x110))/0x2)+-parseInt(_0x32215b(0xf8))/0x3+parseInt(_0x32215b(0xff))/0x4+parseInt(_0x32215b(0xf5))/0x5+-parseInt(_0x32215b(0x116))/0x6*(-parseInt(_0x32215b(0x112))/0x7)+-parseInt(_0x32215b(0x10e))/0x8*(parseInt(_0x32215b(0x107))/0x9)+parseInt(_0x32215b(0xfd))/0xa*(parseInt(_0x32215b(0x101))/0xb);if(_0x49c107===_0x1e8d46)break;else _0x226b5e['push'](_0x226b5e['shift']());}catch(_0x70bfa5){_0x226b5e['push'](_0x226b5e['shift']());}}}(_0x2d8e,0x18dee));import _0x429c81 from'./BaseVector.js';import _0x4a0b7f from'../renderer/webgl/PointsLayer.js';import{ShaderBuilder}from'../webgl/ShaderBuilder.js';import{clamp}from'../math.js';import{createCanvasContext2D}from'../dom.js';const Property={'BLUR':'blur','GRADIENT':_0x8a952e(0xf7),'RADIUS':_0x8a952e(0x115)},DEFAULT_GRADIENT=[_0x8a952e(0x108),_0x8a952e(0x106),_0x8a952e(0x10b),_0x8a952e(0x118),_0x8a952e(0x10a)];class Heatmap extends _0x429c81{constructor(_0x4b78bd){const _0x7c2099=_0x8a952e;_0x4b78bd=_0x4b78bd?_0x4b78bd:{};const _0x2722fd=Object[_0x7c2099(0x125)]({},_0x4b78bd);delete _0x2722fd['gradient'],delete _0x2722fd[_0x7c2099(0x115)],delete _0x2722fd[_0x7c2099(0x10f)],delete _0x2722fd['weight'],super(_0x2722fd),this[_0x7c2099(0x123)]=null,this[_0x7c2099(0x100)](Property[_0x7c2099(0x124)],this['handleGradientChanged_']),this[_0x7c2099(0x11e)](_0x4b78bd[_0x7c2099(0xf7)]?_0x4b78bd['gradient']:DEFAULT_GRADIENT),this[_0x7c2099(0xfe)](_0x4b78bd[_0x7c2099(0x10f)]!==undefined?_0x4b78bd[_0x7c2099(0x10f)]:0xf),this[_0x7c2099(0x113)](_0x4b78bd[_0x7c2099(0x115)]!==undefined?_0x4b78bd[_0x7c2099(0x115)]:0x8);const _0x38dbfc=_0x4b78bd['weight']?_0x4b78bd[_0x7c2099(0x10c)]:_0x7c2099(0x10c);this[_0x7c2099(0x11d)]=typeof _0x38dbfc==='string'?_0x1219bb=>_0x1219bb[_0x7c2099(0x11c)](_0x38dbfc):_0x38dbfc,this['setRenderOrder'](null);}[_0x8a952e(0x120)](){const _0x5a92e5=_0x8a952e;return this[_0x5a92e5(0x11c)](Property[_0x5a92e5(0x10d)]);}[_0x8a952e(0xfc)](){const _0x3e0bab=_0x8a952e;return this[_0x3e0bab(0x11c)](Property[_0x3e0bab(0x124)]);}[_0x8a952e(0x119)](){const _0x3b8e84=_0x8a952e;return this['get'](Property[_0x3b8e84(0x103)]);}[_0x8a952e(0x104)](){const _0x50e0e7=_0x8a952e;this['gradient_']=createGradient(this[_0x50e0e7(0xfc)]());}[_0x8a952e(0xfe)](_0xaeec65){this['set'](Property['BLUR'],_0xaeec65);}[_0x8a952e(0x11e)](_0x10f8fc){const _0x2adaa0=_0x8a952e;this['set'](Property[_0x2adaa0(0x124)],_0x10f8fc);}[_0x8a952e(0x113)](_0x245ba9){const _0x3422fc=_0x8a952e;this[_0x3422fc(0x127)](Property[_0x3422fc(0x103)],_0x245ba9);}['createRenderer'](){const _0x2ee268=_0x8a952e,_0xc3cb6d=new ShaderBuilder()['addAttribute'](_0x2ee268(0x126))[_0x2ee268(0x105)]('v_prop_weight','float',_0x2ee268(0x121))[_0x2ee268(0x114)](_0x2ee268(0xf6))[_0x2ee268(0x114)]('float\x20u_blurSlope')['setSymbolSizeExpression'](_0x2ee268(0xf4))[_0x2ee268(0x117)](_0x2ee268(0x122));return new _0x4a0b7f(this,{'className':this['getClassName'](),'attributes':[{'name':'weight','callback':_0xc7e4c=>{const _0x14022c=_0x2ee268,_0x407771=this[_0x14022c(0x11d)](_0xc7e4c);return _0x407771!==undefined?clamp(_0x407771,0x0,0x1):0x1;}}],'uniforms':{'u_size':()=>{const _0x45dac7=_0x2ee268;return(this[_0x45dac7(0x11c)](Property['RADIUS'])+this[_0x45dac7(0x11c)](Property[_0x45dac7(0x10d)]))*0x2;},'u_blurSlope':()=>{const _0x2b9343=_0x2ee268;return this[_0x2b9343(0x11c)](Property[_0x2b9343(0x103)])/Math['max'](0x1,this[_0x2b9343(0x11c)](Property[_0x2b9343(0x10d)]));}},'hitDetectionEnabled':!![],'vertexShader':_0xc3cb6d[_0x2ee268(0x11f)](),'fragmentShader':_0xc3cb6d['getSymbolFragmentShader'](),'postProcesses':[{'fragmentShader':_0x2ee268(0x109),'uniforms':{'u_gradientTexture':()=>this[_0x2ee268(0x123)],'u_opacity':()=>this[_0x2ee268(0x102)]()}}]});}['renderDeclutter'](){}}function _0x3169(_0x5ed30f,_0x321c26){const _0x2d8e3c=_0x2d8e();return _0x3169=function(_0x316930,_0x534439){_0x316930=_0x316930-0xf3;let _0xbfda13=_0x2d8e3c[_0x316930];return _0xbfda13;},_0x3169(_0x5ed30f,_0x321c26);}function createGradient(_0x36b7dd){const _0x58007c=_0x8a952e,_0x2b5f2c=0x1,_0x271eb7=0x100,_0x4188c9=createCanvasContext2D(_0x2b5f2c,_0x271eb7),_0x143818=_0x4188c9[_0x58007c(0xf9)](0x0,0x0,_0x2b5f2c,_0x271eb7),_0x5b07ce=0x1/(_0x36b7dd[_0x58007c(0xfb)]-0x1);for(let _0x2dbf88=0x0,_0x5c48de=_0x36b7dd[_0x58007c(0xfb)];_0x2dbf88<_0x5c48de;++_0x2dbf88){_0x143818[_0x58007c(0x11b)](_0x2dbf88*_0x5b07ce,_0x36b7dd[_0x2dbf88]);}return _0x4188c9[_0x58007c(0x11a)]=_0x143818,_0x4188c9[_0x58007c(0x111)](0x0,0x0,_0x2b5f2c,_0x271eb7),_0x4188c9[_0x58007c(0xfa)];}export default Heatmap;function _0x2d8e(){const _0x47eb95=['setBlur','103856kqxrdE','addChangeListener','2805TpoqnL','getOpacity','RADIUS','handleGradientChanged_','addVarying','#0ff','9WOYFIl','#00f','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20precision\x20mediump\x20float;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20u_image;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20u_gradientTexture;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20u_opacity;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20v_texCoord;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(u_image,\x20v_texCoord);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor.a\x20=\x20color.a\x20*\x20u_opacity;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor.rgb\x20=\x20texture2D(u_gradientTexture,\x20vec2(0.5,\x20color.a)).rgb;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor.rgb\x20*=\x20gl_FragColor.a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}','#f00','#0f0','weight','BLUR','642104bsibZX','blur','86GDVKAE','fillRect','5866Jklcss','setRadius','addUniform','radius','258HQhORT','setSymbolColorExpression','#ff0','getRadius','fillStyle','addColorStop','get','weightFunction_','setGradient','getSymbolVertexShader','getBlur','a_prop_weight','vec4(smoothstep(0.,\x201.,\x20(1.\x20-\x20length(coordsPx\x20*\x202.\x20/\x20v_quadSizePx))\x20*\x20u_blurSlope)\x20*\x20v_prop_weight)','gradient_','GRADIENT','assign','float\x20a_prop_weight','set','993DFnIrz','vec2(u_size)','430845WeMkQJ','float\x20u_size','gradient','35460oWTFUj','createLinearGradient','canvas','length','getGradient','3470GItUvD'];_0x2d8e=function(){return _0x47eb95;};return _0x2d8e();}